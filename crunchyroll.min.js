!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dashjs=t():e.dashjs=t()}(self,function(){return n={4593:function(e,t){var n={},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i))}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")):1==e.length-t&&(i=e[t]<<16,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")),n.join("")},l=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},i={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};n.decodeArray=function(e){e=u(e);return new Uint8Array(e)},n.encodeASCII=function(e){e=i.encode(e);return r(e)},n.decodeASCII=function(e){e=u(e);return i.decode(e)},n.encode=function(e){e=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t}(e);return r(e)},n.decode=function(e){for(var t=u(e),n=[],r=0;r<t.length;){var i=t[r++];i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&t[r++])<<12),i|=(63&t[r++])<<6),i|=63&t[r++]),n.push(String.fromCharCode(i))}return n.join("")},t.decode=n.decode,t.decodeArray=n.decodeArray,t.encode=n.encode,t.encodeASCII=n.encodeASCII},452:function(e,t){!function(e){"use strict";function o(e){var t=e;return u.hasOwnProperty(e)&&(t=u[e]),String.fromCharCode(t)}function s(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function a(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}function t(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new a(t,n,r,i,o)}function n(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new a}function r(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new n);this.currRow=14,this.nrRollUpRows=null,this.reset()}function i(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new r,this.nonDisplayedMemory=new r,this.lastOutputScreen=new r,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function l(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new i(1,t),new i(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var u={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},p={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}};a.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},n.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(g.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(g.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=o(e);32<=this.pos?g.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},r.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){g.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){g.log("INFO","pacData = "+JSON.stringify(e));var t,n=e.row-1,n=(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.currRow=n,this.rows[this.currRow]),n=(null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),n.setCursor(e.indent),e.color=n.chars[t].penState.foreground),{foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1});this.setPen(n)},setBkgData:function(e){g.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null!==this.nrRollUpRows?(g.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),g.log("INFO","Rolling up")):g.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=0;r<15;r++){var i=this.rows[r].getTextString();i&&t.push(e?"Row "+(r+1)+': "'+i+'"':i.trim())}return n=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},getTextAndFormat:function(){return this.rows}},i.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,g.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";g.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(g.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){g.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){g.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){g.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){g.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){g.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){g.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){g.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){g.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){g.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){g.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){g.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;g.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){g.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),g.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=g.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)}};l.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,o=!1;this.lastTime=e,g.setTime(e);for(var a=0;a<t.length;a+=2)r=127&t[a],i=127&t[a+1],16<=r&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,g.log("DEBUG","Repeated command ("+s([r,i])+") is dropped")):0!=r||0!=i?(g.log("DATA","["+s([t[a],t[a+1]])+"] -> ("+s([r,i])+")"),(n=(n=(n=(n=this.parseCmd(r,i))||this.parseMidrow(r,i))||this.parsePAC(r,i))||this.parseBackgroundAttributes(r,i))||(o=this.parseChars(r,i))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(o):g.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,g.log("WARNING","Couldn't parse cleaned data "+s([r,i])+" orig: "+s([t[a],t[a+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n,r;return((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(r=this.channels[(n=20===e||21===e||23===e?1:2)-1],20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},parseMidrow:function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(g.log("ERROR","Mismatch channel in midrow parsing"),!1):((n=this.channels[n-1]).insertChars([32]),n.cc_MIDROW(t),g.log("DEBUG","MIDROW ("+s([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0))},parsePAC:function(e,t){var n,r;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(n=e<=23?1:2,r=this.interpretPAC((64<=t&&t<=95?1==n?c:f:1==n?d:p)[e],t),this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},interpretPAC:function(e,t){e={color:null,italics:!1,indent:null,underline:!1,row:e},t=95<t?t-96:t-64;return e.underline=1==(1&t),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},parseChars:function(e,t){var n=null,r=null,i=null;return 17<=(i=25<=e?(n=2,e-8):(n=1,e))&&i<=19?(g.log("INFO","Special char '"+o(i=17===i?t+80:18===i?t+112:t+144)+"' in channel "+n),r=[i],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(r=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),r&&(n=s(r),g.log("DEBUG","Char codes =  "+n.join(","))),r},parseBackgroundAttributes:function(e,t){var n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=h[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=g,e.PenState=a,e.CaptionScreen=r,e.Cea608Parser=l,e.findCea608Nalus=function(e,t,n){for(var r,i,o,a,s,l,u=t,c=[];u<t+n;){if(r=e.getUint32(u),6==(31&e.getUint8(u+4)))for(var d=u+5,f=-1;d<u+4+r-1;){for(var f=0,p=255;255===p;)f+=p=e.getUint8(d),d++;for(var h=0,p=255;255===p;)h+=p=e.getUint8(d),d++;o=h,a=e,s=d,l=void 0,(4!==(i=f)||o<8?null:(i=a.getUint8(s),o=a.getUint16(s+1),l=a.getUint32(s+3),a=a.getUint8(s+7),181==i&&49==o&&1195456820==l&&3==a))&&c.push([d,h]),d+=h}u+=r+4}return c},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]],i=31&e.getUint8(n+=8);n+=2;for(var o=0;o<i;o++){var a=e.getUint8(n),s=4&a,a=3&a,l=(n++,e.getUint8(n)),u=(n++,e.getUint8(n));n++,s&&(127&l)+(127&u)!=0&&(0==a?(r[0].push(l),r[0].push(u)):1==a&&(r[1].push(l),r[1].push(u)))}return r}}(t)},8416:function(e,t,n){"use strict";var r=n(1139),i=n(5448),o=n(6398),a=n(2032),n=(n(5530),"undefined"!=typeof window&&window||n.g),s=n.dashjs;(s=s||(n.dashjs={})).MediaPlayer=r.Z,s.FactoryMaker=i.Z,s.Debug=o.Z,s.Version=(0,a.e)()},6398:function(e,t,n){"use strict";var i=n(5595),p=n(8512),n=n(5448);function r(e){e=e||{};var s,l,u,t=this.context,c=(0,i.Z)(t).getInstance(),d=e.settings,f=[];function n(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function r(e,t){var n,r="";s&&(n=(new Date).getTime(),r+="["+(n-u)+"]"),l&&t&&t.getClassName&&(r+="["+t.getClassName()+"]",t.getType)&&(r+="["+t.getType()+"]"),0<r.length&&(r+=" ");for(var i=arguments.length,o=new Array(2<i?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];Array.apply(null,o).forEach(function(e){r+=e+" "}),f[e]&&d&&d.get().debug.logLevel>=e&&f[e](r),d&&d.get().debug.dispatchEvent&&c.trigger(p.Z.LOG,{message:r,level:e})}return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[1,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[2,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[3,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[4,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[5,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){s=e},setCalleeNameVisible:function(e){l=e}},l=s=!0,u=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(f[1]=n(window.console.error),f[2]=n(window.console.error),f[3]=n(window.console.warn),f[4]=n(window.console.info),f[5]=n(window.console.debug)),t}r.__dashjs_factory_name="Debug";var o=n.Z.getSingletonFactory(r);o.LOG_LEVEL_NONE=0,o.LOG_LEVEL_FATAL=1,o.LOG_LEVEL_ERROR=2,o.LOG_LEVEL_WARNING=3,o.LOG_LEVEL_INFO=4,o.LOG_LEVEL_DEBUG=5,n.Z.updateSingletonFactory(r.__dashjs_factory_name,o),t.Z=o},5595:function(e,t,n){"use strict";var r=n(5448),i=n(8825);function o(){var a={};function s(e,n,r){var i=-1;return a[e]&&a[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}return{on:function(n,e,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);var i,o=r.priority||0;0<=s(n,e,t)||(a[n]=a[n]||[],i={callback:e,scope:t,priority:o},t&&t.getStreamId&&(i.streamId=t.getStreamId()),t&&t.getType&&(i.mediaType=t.getType()),r&&r.mode&&(i.mode=r.mode),a[n].some(function(e,t){if(e&&o>e.priority)return a[n].splice(t,0,i),!0}))||a[n].push(i)},off:function(e,t,n){e&&t&&a[e]&&((t=s(e,t,n))<0||(a[e][t]=null))},trigger:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e&&a[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,n.streamId&&(t.streamId=n.streamId),n.mediaType&&(t.mediaType=n.mediaType),a[e].filter(function(e){return!(!e||n.streamId&&e.streamId&&e.streamId!==n.streamId||n.mediaType&&e.mediaType&&e.mediaType!==n.mediaType||n.mode&&e.mode&&e.mode!==n.mode||!e.mode&&n.mode&&n.mode===i.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){a={}}}}o.__dashjs_factory_name="EventBus";n=r.Z.getSingletonFactory(o);n.EVENT_PRIORITY_LOW=0,n.EVENT_PRIORITY_HIGH=5e3,r.Z.updateSingletonFactory(o.__dashjs_factory_name,n),t.Z=n},5448:function(e,t){"use strict";o=[],r={},n={};var l,o,r,n,i=l={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:a,setSingletonInstance:function(e,t,n){for(var r in o){var i=o[r];if(i.context===e&&i.name===t)return void(o[r].instance=n)}o.push({name:t,context:e,instance:n})},deleteSingletonInstances:function(t){o=o.filter(function(e){return e.context!==t})},getSingletonFactory:function(n){var e=s(n.__dashjs_factory_name,r);return e||(r[n.__dashjs_factory_name]=e=function(e){var t;return void 0===e&&(e={}),{getInstance:function(){return(t=t||a(e,n.__dashjs_factory_name))||(t=c(n,e,arguments),o.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}}),e},getSingletonFactoryByName:function(e){return r[e]},updateSingletonFactory:function(e,t){u(e,t,r)},getClassFactory:function(t){var e=s(t.__dashjs_factory_name,n);return e||(n[t.__dashjs_factory_name]=e=function(e){return void 0===e&&(e={}),{create:function(){return c(t,e,arguments)}}}),e},getClassFactoryByName:function(e){return n[e]},updateClassFactory:function(e,t){u(e,t,n)}};function a(e,t){for(var n in o){n=o[n];if(n.context===e&&n.name===t)return n.instance}return null}function s(e,t){return t[e]}function u(e,t,n){e in n&&(n[e]=t)}function c(e,t,n){var r,i=e.__dashjs_factory_name,o=t[i];if(o){var a,s=o.instance;if(!o.override)return s.apply({context:t,factory:l},n);for(a in r=e.apply({context:t},n),s=s.apply({context:t,factory:l,parent:r},n))r.hasOwnProperty(a)&&(r[a]=s[a])}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}t.Z=i},1264:function(e,t,n){"use strict";var r=n(5448),s=n(703),i=n(6398),l=n(3393),u=n(7855),c=n(5595),d=n(8512);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function o(){var e=this.context,o=(0,c.Z)(e).getInstance(),a={"streaming.delay.liveDelay":d.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":d.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":d.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":d.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":d.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},t={debug:{logLevel:i.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:l.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:l.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(p(e={},u.w.MPD_TYPE,500),p(e,u.w.XLINK_EXPANSION_TYPE,500),p(e,u.w.MEDIA_SEGMENT_TYPE,1e3),p(e,u.w.INIT_SEGMENT_TYPE,1e3),p(e,u.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),p(e,u.w.INDEX_SEGMENT_TYPE,1e3),p(e,u.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),p(e,u.w.LICENSE,1e3),p(e,u.w.OTHER_TYPE,1e3),p(e,"lowLatencyReductionFactor",10),e),retryAttempts:(p(e={},u.w.MPD_TYPE,3),p(e,u.w.XLINK_EXPANSION_TYPE,1),p(e,u.w.MEDIA_SEGMENT_TYPE,3),p(e,u.w.INIT_SEGMENT_TYPE,3),p(e,u.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),p(e,u.w.INDEX_SEGMENT_TYPE,3),p(e,u.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),p(e,u.w.LICENSE,3),p(e,u.w.OTHER_TYPE,3),p(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:l.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:l.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:l.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},n=s.Z.clone(t);return{get:function(){return n},update:function(e){"object"===f(e)&&function e(t,n,r){for(var i in t)t.hasOwnProperty(i)&&(n.hasOwnProperty(i)?"object"!==f(t[i])||t[i]instanceof Array||null===t[i]?(n[i]=s.Z.clone(t[i]),a[r+i]&&o.trigger(a[r+i])):e(t[i],n[i],r.slice()+i+"."):console.error("Settings parameter "+r+i+" is not supported"))}(e,n,"")},reset:function(){n=s.Z.clone(t)}}}o.__dashjs_factory_name="Settings";n=r.Z.getSingletonFactory(o);t.Z=n},703:function(e,t,n){"use strict";var r=n(3875),a=n.n(r),i=n(1067);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}o(l,[{key:"mixin",value:function(e,t,n){var r,i={};if(e)for(var o in t)t.hasOwnProperty(o)&&(r=t[o],o in e&&(e[o]===r||o in i&&i[o]===r)||("object"===s(e[o])&&null!==e[o]?e[o]=l.mixin(e[o],r,n):e[o]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!==s(e))return e;if(e instanceof Array)for(var t=[],n=0,r=e.length;n<r;++n)n in e&&t.push(l.clone(e[n]));else t={};return l.mixin(t,e,l.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{var n;return t&&0!==t.length?(n=new URL(e),t.forEach(function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)}),n.href):e}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(e)for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var o=n[r],a=o.indexOf(": ");0<a&&(t[o.substring(0,a)]=o.substring(a+2))}return t}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0!==e.length)for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var n,r,i=new URL(e),o=new URL(t);return(i.protocol=o.protocol,i.origin!==o.origin)?t:(r=0===(n=a().relative(i.pathname.substr(0,i.pathname.lastIndexOf("/")),o.pathname.substr(0,o.pathname.lastIndexOf("/")))).length?1:0,n+=o.pathname.substr(o.pathname.lastIndexOf("/")+r,o.pathname.length-1),o.pathname.length<n.length?o.pathname:n)}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(t)}catch(e){return{}}}},{key:"stringHasProtocol",value:function(e){return/(http(s?)):\/\//i.test(e)}}]);r=l;function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function")}t.Z=r},2032:function(e,t,n){"use strict";function r(){return"4.7.4"}n.d(t,{e:function(){return r}})},2230:function(e,t){"use strict";var n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}for(var t=e.prototype,n=[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}();t.Z=n},4351:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=l(n),t=(e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CMSD_STATIC_HEADER="cmsdStaticHeader",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",e.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e;throw new TypeError("Cannot call a class as a function")}return o}(n(8342).Z);t.Z=n},8512:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=l(n),t=(e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e=this,t=o;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return o}(n(4351).Z));t.Z=n},8342:function(e,t){"use strict";var n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}for(var t=e.prototype,n=[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}();t.Z=n},9326:function(e,t,n){"use strict";var T=n(3186),b=n(7855),r=n(5448),S=n(8825),A=n(7387),w=n(1553);function i(e){var t,i,o,a,s,n=(e=e||{}).eventBus,r=e.debug,l=e.urlUtils,u=e.type,c=e.streamInfo,d=e.segmentsController,f=e.timelineConverter,p=e.baseURLController;function h(){return u}function g(){o=null}function m(e,t,n){var r,i,n=p.resolve(n.path),o={};return n&&t!==n.url&&l.isRelative(t)?(r=n.url,i=n.serviceLocation,o=n.queryParams,t&&(r=l.resolve(t,r))):r=t,!l.isRelative(r)&&(e.url=r,e.serviceLocation=i,e.queryParams=o,1)}function y(e,t){var n,r,i,o;return null==t?null:(n=new T.Z,i=(r=t.representation).adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,o=t.media,o=(0,A.vi)(o,"Number",t.replacementNumber),o=(0,A.vi)(o,"Time",t.replacementTime),o=(0,A.vi)(o,"Bandwidth",i),o=(0,A.Aj)(o,r.id),o=(0,A.eR)(o),n.mediaType=u,n.type=b.w.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.availabilityTimeComplete=r.availabilityTimeComplete,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.index,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,m(n,o,r)?n:void 0)}function v(e,t,n){var r=null;return t&&t.segmentInfoType&&(t=d.getSegmentByTime(t,n))&&(o=t,i.debug("Index for time "+n+" is "+t.index),r=y(e,t)),r}function E(e,t,n){var r=null,t=d.getSegmentByIndex(t,n,o?o.mediaStartTime:-1);if(t)r=y(e,t),o=t;else{if(a&&!s)return i.debug(u+" No segment found at index: "+n+". Wait for next loop"),null;s=!0}return r}function _(){i.debug("Dynamic stream complete"),s=!0}return t={getCurrentIndex:function(){return o?o.index:-1},getInitRequest:function(e,t){{var n,r,i,o;if(t)return n=u,r=new T.Z,i=t.adaptation.period,o=i.start,r.mediaType=n,r.type=b.w.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=f.calcAvailabilityStartTimeFromPresentationTime(o,t,a),r.availabilityEndTime=f.calcAvailabilityEndTimeFromPresentationTime(o+i.duration,t,a),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,m(r,t.initialization,t)?(r.url=(0,A.vi)(r.url,"Bandwidth",t.bandwidth),r):void 0}return null},getNextSegmentRequest:function(e,t){return t&&t.segmentInfoType?E(e,t,o?o.index+1:0):null},getNextSegmentRequestIdempotent:function(e,t){var n=o?o.index+1:0,t=d.getSegmentByIndex(t,n,o?o.mediaStartTime:-1);return t?y(e,t):null},getSegmentRequestForTime:v,getStreamId:function(){return c.id},getStreamInfo:function(){return c},getType:h,getValidTimeAheadOfTargetTime:function(e,t,n,r){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(r)&&(r=.5),v(t,n,e))return e;if(n.adaptation.period.start+n.adaptation.period.duration<e)return NaN;for(var i,o=isFinite(n.adaptation.period.duration)?n.adaptation.period.start+n.adaptation.period.duration:e+30,a=Math.min(e+r,o),s=NaN,l=null;a<=o;){var u=null;if(u=a<=o?v(t,n,a):u){s=a,l=u;break}a+=r}return l?(i=l.startTime+l.duration,e>l.startTime&&r<i-e?e:!isNaN(l.startTime)&&e<l.startTime&&s>l.startTime?l.startTime+.001:Math.min(i-r,s)):s}catch(e){return NaN}},initialize:function(e){a=e,s=!1,d.initialize(e)},isLastSegmentRequested:function(e,t){if(!e||!o)return!1;if(s)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(o.presentationStartTime+o.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(o.index)&&o.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!a||e.segmentInfoType===w.Z.SEGMENT_TEMPLATE)return!0;if(a&&e.segmentInfoType===w.Z.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(a&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===w.Z.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&o&&!isNaN(o.mediaStartTime)&&!isNaN(o.duration)&&o.mediaStartTime+o.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(e,t){return t&&t.segmentInfoType?E(e,t,o?o.index:0):null},reset:function(){g(),n.off(S.Z.DYNAMIC_TO_STATIC,_,t)}},i=r.getLogger(t),g(),n.on(S.Z.DYNAMIC_TO_STATIC,_,t),t}i.__dashjs_factory_name="DashHandler",t.Z=r.Z.getClassFactory(i)},1553:function(e,t){"use strict";var n=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}for(var t=e.prototype,n=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}());t.Z=n},7802:function(e,t,n){"use strict";var r=n(5448),l=n(1724),u=n(3636),c=n(1736),d=n(5246);function i(t){t=t||{};var n,r=this.context,i=t.dashConstants,o=t.type,a=t.segmentBaseController;function s(e){return e?e.segments?n[i.SEGMENT_BASE]:n[e.segmentInfoType]:null}return n={},{initialize:function(e){n[i.SEGMENT_TIMELINE]=(0,l.Z)(r).create(t,e),n[i.SEGMENT_TEMPLATE]=(0,u.Z)(r).create(t,e),n[i.SEGMENT_LIST]=(0,c.Z)(r).create(t,e),n[i.SEGMENT_BASE]=(0,d.Z)(r).create(t,e)},updateInitData:function(e,t){return t?Promise.resolve():a.getSegmentBaseInitSegment({representation:e,mediaType:o})},updateSegmentData:function(e,t){return t?Promise.resolve():a.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:o})},getSegmentByIndex:function(e,t,n){var r=s(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=s(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=s(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}}}i.__dashjs_factory_name="SegmentsController";n=r.Z.getClassFactory(i);t.Z=n},1736:function(e,t,n){"use strict";var r=n(5448),i=n(3393),c=n(7387);function o(e,s){var l=(e=e||{}).timelineConverter;function u(){if(!l||!l.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.Z.MISSING_CONFIG_ERROR)}function r(e,t){var n,r,i,o,a;return u(),e?(a=(n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentURL_asArray.length,r=e&&!isNaN(e.startNumber)?e.startNumber:1,i=Math.max(r-1,0),o=null,(i=Math.max(t-i,0))<a&&(a=n.SegmentURL_asArray[i],o=(0,c.NF)(l,s,e,t))&&(o.replacementTime=(r+t-1)*e.segmentDuration,o.media=a.media||"",o.mediaRange=a.mediaRange,o.indexRange=a.indexRange),o):null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){var n;return u(),!e||(n=e.segmentDuration,isNaN(n))?null:(t=l.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),r(e,Math.floor(t/n)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,e=e&&!isNaN(e.startNumber)?e.startNumber:1,e=Math.max(e-1,0),n.numberOfSegments=e+t.SegmentURL_asArray.length),n}}}o.__dashjs_factory_name="ListSegmentsGetter";n=r.Z.getClassFactory(o);t.Z=n},5246:function(e,t,n){"use strict";var r=n(5448),i=n(3393);function o(e){var t=(e=e||{}).timelineConverter;function o(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.Z.MISSING_CONFIG_ERROR)}function n(e,t){if(o(),e){var n,r=e.segments?e.segments.length:-1;if(t<r&&(n=e.segments[t])&&n.index===t)return n;for(var i=0;i<r;i++)if((n=e.segments[i])&&n.index===t)return n}return null}return{getSegmentByIndex:n,getSegmentByTime:function(u,e){o();e=function(e){if(!u)return-1;var t,n,r,i,o,a=u.segments,s=a?a.length:null,l=-1;if(a&&0<s)for(o=0;o<s;o++)if(r=(n=a[o]).presentationStartTime,e+(t=(i=n.duration)/2)>=r&&e-t<r+i){l=n.index;break}return l}(e);return n(u,e)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments&&(t.numberOfSegments=e.segments.length),t}}}o.__dashjs_factory_name="SegmentBaseGetter";n=r.Z.getClassFactory(o);t.Z=n},7387:function(e,t,n){"use strict";n.d(t,{Aj:function(){return i},NF:function(){return o},TJ:function(){return a},eR:function(){return r},vi:function(){return f}});var u=n(2011);function d(e,t){for(;e.length<t;)e="0"+e;return e}function r(e){return e&&e.split("$$").join("$")}function i(e,t){return t&&e&&-1!==e.indexOf("$RepresentationID$")?(t=t.toString(),e.split("$RepresentationID$").join(t)):e}function f(e,t,n){var r,i,o,a,s,l,u=t.length,c="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+u))<0)return e;if((o=e.indexOf("%0",r+u))>r&&o<i)switch(a=e.charAt(i-1),s=parseInt(e.substring(o+c,i-1),10),a){case"d":case"i":case"u":l=d(n.toString(),s);break;case"x":l=d(n.toString(16),s);break;case"X":l=d(n.toString(16),s).toUpperCase();break;case"o":l=d(n.toString(8),s);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(i+1)}}function p(e,t,n,r,i,o,a,s){var l=new u.Z;return l.representation=e,l.duration=t,l.presentationStartTime=n,l.mediaStartTime=r,l.availabilityStartTime=i.calcAvailabilityStartTimeFromPresentationTime(o,e,a),l.availabilityEndTime=i.calcAvailabilityEndTimeFromPresentationTime(o+t,e,a),l.wallStartTime=i.calcWallTimeForSegment(l,a),l.replacementNumber=l.representation.startNumber+s,l.index=s,l}function h(e,t,n,r){var i=t.adaptation.period;return!(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)&&(!r||"INF"===t.availabilityTimeOffset||(i=e.getClientReferenceTime(),n.availabilityStartTime.getTime()<=i&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=i)))}function o(e,t,n,r){var i=n.segmentDuration,o=(isNaN(i)&&(i=n.adaptation.period.duration),parseFloat((n.adaptation.period.start+r*i).toFixed(5))),a=parseFloat((o+i).toFixed(5)),i=p(n,i,o,e.calcMediaTimeFromPresentationTime(o,n),e,a,t,r);return h(e,n,i,t)?i:null}function a(e,t,n,r,i,o,a,s,l,u){var c=r/o,i=i/o,o=e.calcPresentationTimeFromMediaTime(c,n);return h(e,n,n=p(n,i,o,c,e,o+i,t,l),t)?(n.replacementTime=u||r,a=f(a,"Number",n.replacementNumber),a=f(a,"Time",n.replacementTime),n.media=a,n.mediaRange=s,n):null}},3636:function(e,t,n){"use strict";var r=n(5448),s=n(3393),l=n(7387);function i(e,i){var o=(e=e||{}).timelineConverter;function a(){if(!o||!o.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(s.Z.MISSING_CONFIG_ERROR)}function r(e,t){var n,r;return a(),e?(n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,t=Math.max(t,0),(r=(0,l.NF)(o,i,e,t))&&(r.replacementTime=Math.round((t-1)*e.segmentDuration*e.timescale,10),t=n.media,t=(0,l.vi)(t,"Number",r.replacementNumber),t=(0,l.vi)(t,"Time",r.replacementTime),r.media=t),r):null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){var n;return a(),!e||(n=e.segmentDuration,isNaN(n))?null:(t=o.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),r(e,Math.floor(t/n)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.segmentDuration,isNaN(t)?n.numberOfSegments=1:n.numberOfSegments=Math.ceil(e.adaptation.period.duration/t)),n}}}i.__dashjs_factory_name="TemplateSegmentsGetter";n=r.Z.getClassFactory(i);t.Z=n},1724:function(e,t,n){"use strict";var r=n(5448),i=n(3393),h=n(7387);function o(e,f){var p=(e=e||{}).timelineConverter,l=e.dashMetrics;function t(){if(!p)throw new Error(i.Z.MISSING_CONFIG_ERROR)}function n(e,t){for(var n,r,i,o,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=a.SegmentTimeline,l=a.SegmentURL_asArray,u=0,c=-1,d=e.timescale,f=!1,p=0,h=(n=s.S_asArray).length;p<h&&!f;p++)for(o=0,(r=n[p]).hasOwnProperty("r")&&(o=r.r),r.hasOwnProperty("t")&&(u=r.t),o<0&&(o=g(e,n[p+1],r,d,u/d)),i=0;i<=o&&!f;i++)(f=t(u,a,l,r,d,++c,p))&&(e.segmentDuration=r.d/d),u+=r.d}function g(e,t,n,r,i){var o;if(t&&t.hasOwnProperty("t"))o=t.t/r;else try{var a,s=0;s=isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)?(a=l.getCurrentDVRInfo(),isNaN(a.end)?0:a.end):e.adaptation.period.start+e.adaptation.period.duration,o=p.calcMediaTimeFromPresentationTime(s,e),e.segmentDuration=n.d/r}catch(e){o=0}return Math.max(Math.ceil((o-i)/(n.d/r))-1,0)}return{getSegmentByIndex:function(l,e,u){var c,d;return t(),l?(c=null,d=!1,n(l,function(e,t,n,r,i,o,a){var s;return d||u<0?(t=t.media,s=r.mediaRange,n&&(t=n[a].media||"",s=n[a].mediaRange),c=(0,h.TJ)(p,f,l,e,r.d,i,t,s,o,r.tManifest),!0):(e>=u*i-.5*r.d&&(d=!0),!1)}),c):null},getSegmentByTime:function(l,e){var u,c;return t(),l?(u=null,c=p.calcMediaTimeFromPresentationTime(e=void 0===e?null:e,l),n(l,function(e,t,n,r,i,o,a){var s=parseFloat((c*i).toPrecision(15));return s<e+r.d&&e<=s&&(s=t.media,t=r.mediaRange,n&&(s=n[a].media||"",t=n[a].mediaRange),u=(0,h.TJ)(p,f,l,e,r.d,i,s,t,o,r.tManifest),!0)}),u):null},getMediaFinishedInformation:function(e){if(!e)return 0;for(var t,n,r,i,o=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,a=0,s=0,l=0,u=e.timescale,c=(t=o.S_asArray).length,d=0;d<c;d++)for(i=0,(n=t[d]).hasOwnProperty("r")&&(i=n.r),n.hasOwnProperty("t")&&(s=(a=n.t)/u),i<0&&(i=g(e,t[d+1],n,u,s)),r=0;r<=i;r++)l++,s=(a+=n.d)/u;return{numberOfSegments:l,mediaTimeOfLastSignaledSegment:s}}}}o.__dashjs_factory_name="TimelineSegmentsGetter";n=r.Z.getClassFactory(o);t.Z=n},2011:function(e,t){"use strict";t.Z=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(e,t){"use strict";t.Z=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value=""}},1139:function(n,e,t){"use strict";t.d(e,{Z:function(){return mo}});var e=t(452),me=t.n(e),Be=t(3393),ye=t(1553),Ze=t(3860),qe=t(5595),Ge=t(8512),ve=t(5448),je=t(6398),He=t(8825);function d(){var n,i,r,o,a,s,l,u,t,c,d,f,p,h,g,m,y,v,E,_,T,b,S,A,w,e=this.context,I=(0,qe.Z)(e).getInstance();function F(){C(),y=d=c=0,A=E=!(v=!(S=h=!1)),m=_=NaN,l&&(I.off(Ge.Z.DATA_UPDATE_COMPLETED,K,n),I.off(Ge.Z.LOADING_PROGRESS,de,n),I.off(Ge.Z.MANIFEST_UPDATED,ge,n),I.off(Ge.Z.STREAMS_COMPOSED,me,n),I.off(He.Z.PLAYBACK_ENDED,le,n),I.off(He.Z.STREAM_INITIALIZING,pe,n),I.off(He.Z.REPRESENTATION_SWITCH,he,n),I.off(He.Z.BUFFER_LEVEL_STATE_CHANGED,V,n),x(),l.removeEventListener("canplay",$),l.removeEventListener("canplaythrough",z),l.removeEventListener("play",W),l.removeEventListener("waiting",X),l.removeEventListener("playing",Q),l.removeEventListener("pause",J),l.removeEventListener("error",ue),l.removeEventListener("seeking",ee),l.removeEventListener("seeked",te),l.removeEventListener("timeupdate",k),l.removeEventListener("progress",ne),l.removeEventListener("ratechange",re),l.removeEventListener("loadedmetadata",ie),l.removeEventListener("loadeddata",oe),l.removeEventListener("stalled",fe),l.removeEventListener("ended",ae),l.removeEventListener("volumechange",se)),p=f=l=t=null}function U(){return parseFloat((R(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)-D()).toFixed(5))}function R(e){e=e||f;return e.start+e.duration}function B(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];f&&l&&l.getElement()?(e&&p&&q(D()),l.play()):h=!0}function C(){f&&l&&l.pause()}function N(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];f&&l&&l.getElement()&&e!==(isNaN(_)?l.getTime():_)&&((T=!0===n)||(_=e),i.info("Requesting seek to time: "+e+(T?" (internal)":"")),p&&r&&q(e),l.setCurrentTime(e,t))}function Z(){var e;if(f&&l&&p)return e=r&&r.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,(e=a.getCurrentDVRInfo(e))&&e.range?e.range.end:0}function q(e){var t=new Date(u.getClientReferenceTime()),n=s.getRegularPeriods()[0],t=u.calcPresentationTimeFromWallTime(t,n);c=t-e}function D(){return f&&l?l.getTime():null}function O(){return f&&l?l.isPaused():null}function M(){return f&&l?l.isSeeking():null}function G(){return f&&l?l.isStalled():null}function j(){return f&&l?l.getPlaybackRate():null}function H(){return f&&l?l.getEnded():null}function Y(){return p}function P(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;O()||!p||0===l.getReadyState()||M()||S||(t=t||(r.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO),t=function(e,t){t=a.getCurrentDVRInfo(t),t=t?t.range:null;return t?e>t.end?Math.max(t.end-c,t.start):0<e&&e+.25<t.start&&Math.abs(e-t.start)<31536e4?E?Math.max(t.end-c,t.start):t.start:e:NaN}(e=D(),t),isNaN(t))||t===e||M()||!G()&&!b&&1!==l.getReadyState()||(i.debug("UpdateCurrentTime: Seek to actual time: ".concat(t," from currentTime: ").concat(e)),N(t,!1,!1))}function L(){null===t&&(t=setInterval(function(){var e,t;I.trigger(Ge.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:p,time:new Date}),p&&(e=Date.now(),isNaN(m)||e>m+w.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(r.addDVRMetric(),O()?(t=Date.now(),(!g||g+500<t)&&(g=t,k())):P(),m=e)},w.get().streaming.wallclockTimeUpdateInterval))}function x(){clearInterval(t),t=null}function K(e){e=s.convertRepresentationToRepresentationInfo(e.currentRepresentation),e=e?e.mediaInfo.streamInfo:null;null!==e&&f.id===e.id&&(f=e)}function $(){I.trigger(Ge.Z.CAN_PLAY)}function z(){I.trigger(Ge.Z.CAN_PLAY_THROUGH)}function V(e){e.streamId===r.getActiveStreamInfo().id&&(b=e.state===Ze.Z.BUFFER_EMPTY,w.get().streaming.buffer.setStallState)&&l.setStallState(e.mediaType,e.state===Ze.Z.BUFFER_EMPTY)}function W(){i.info("Native video element event: play"),P(),L(),I.trigger(Ge.Z.PLAYBACK_STARTED,{startTime:D()})}function X(){i.info("Native video element event: waiting"),I.trigger(Ge.Z.PLAYBACK_WAITING,{playingTime:D()})}function Q(){i.info("Native video element event: playing"),T=!1,I.trigger(Ge.Z.PLAYBACK_PLAYING,{playingTime:D()})}function J(){i.info("Native video element event: pause"),I.trigger(Ge.Z.PLAYBACK_PAUSED,{ended:H()})}function ee(){var e;T||(e=D(),isNaN(_)||_===e||(e=_),_=NaN,i.info("Seeking to: "+e),L(),I.trigger(Ge.Z.PLAYBACK_SEEKING,{seekTime:e,streamId:f.id}))}function te(){i.info("Native video element event: seeked"),T=!1,I.trigger(Ge.Z.PLAYBACK_SEEKED)}function k(){f&&I.trigger(Ge.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:U(),time:D(),streamId:f.id})}function ne(){I.trigger(Ge.Z.PLAYBACK_PROGRESS,{streamId:f.id})}function re(){var e=j();i.info("Native video element event: ratechange: ",e),I.trigger(Ge.Z.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ie(){i.info("Native video element event: loadedmetadata"),I.trigger(Ge.Z.PLAYBACK_METADATA_LOADED),L()}function oe(){i.info("Native video element event: loadeddata"),I.trigger(Ge.Z.PLAYBACK_LOADED_DATA)}function ae(){i.info("Native video element event: ended"),C(),x();var e=r?r.getActiveStreamInfo():null;e&&I.trigger(Ge.Z.PLAYBACK_ENDED,{isLast:e.isLast})}function se(){I.trigger(Ge.Z.PLAYBACK_VOLUME_CHANGED)}function le(e){t&&e.isLast&&(i.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime||R(),l.setCurrentTime(e),C(),x())}function ue(e){e=e.target||e.srcElement;I.trigger(Ge.Z.PLAYBACK_ERROR,{error:e.error})}function ce(){p=!1}function de(e){!1===e.stream&&E&&!isNaN(e.request.duration)&&(e=1.2*e.request.duration,c<e)&&(i.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),d=c=e)}function fe(e){I.trigger(Ge.Z.PLAYBACK_STALLED,{e:e})}function pe(e){(e=e.mediaInfo)&&e.supplementalProperties&&e.supplementalProperties[Be.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&"true"===e.supplementalProperties[Be.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value&&(i.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),E=!0)}function he(e){var t=r.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===Be.Z.VIDEO||e.mediaType===Be.Z.AUDIO)&&(v=e.currentRepresentation.availabilityTimeComplete,E=!v)&&!A&&(A=!0)}function ge(){S=!0}function me(){S=!1}return n={initialize:function(e,t){f=e,!0!==t&&(l.addEventListener("canplay",$),l.addEventListener("canplaythrough",z),l.addEventListener("play",W),l.addEventListener("waiting",X),l.addEventListener("playing",Q),l.addEventListener("pause",J),l.addEventListener("error",ue),l.addEventListener("seeking",ee),l.addEventListener("seeked",te),l.addEventListener("timeupdate",k),l.addEventListener("progress",ne),l.addEventListener("ratechange",re),l.addEventListener("loadedmetadata",ie),l.addEventListener("loadeddata",oe),l.addEventListener("stalled",fe),l.addEventListener("ended",ae),l.addEventListener("volumechange",se),p=f.manifestInfo.isDynamic,T=b=!1,I.on(Ge.Z.DATA_UPDATE_COMPLETED,K,n),I.on(Ge.Z.LOADING_PROGRESS,de,n),I.on(Ge.Z.MANIFEST_UPDATED,ge,n),I.on(Ge.Z.STREAMS_COMPOSED,me,n),I.on(He.Z.PLAYBACK_ENDED,le,n,{priority:qe.Z.EVENT_PRIORITY_HIGH}),I.on(He.Z.STREAM_INITIALIZING,pe,n),I.on(He.Z.REPRESENTATION_SWITCH,he,n),I.on(He.Z.BUFFER_LEVEL_STATE_CHANGED,V,n),I.on(He.Z.DYNAMIC_TO_STATIC,ce,n),h)&&(h=!1,B())},setConfig:function(e){e&&(e.streamController&&(r=e.streamController),e.serviceDescriptionController&&(o=e.serviceDescriptionController),e.dashMetrics&&(a=e.dashMetrics),e.adapter&&(s=e.adapter),e.videoModel&&(l=e.videoModel),e.timelineConverter&&(u=e.timelineConverter),e.settings)&&(w=e.settings)},getTimeToStreamEnd:U,getBufferLevel:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=null;return r.getActiveStreamProcessors().forEach(function(e){t&&0!==t.length&&-1!==t.indexOf(e.getType())||(e=e.getBufferLevel(),n=null===n?e:Math.min(n,e))}),n},getPlaybackStalled:function(){return b},getTime:D,getLowLatencyModeEnabled:function(){return E},getInitialCatchupModeActivated:function(){return A},getIsManifestUpdateInProgress:function(){return S},getPlaybackRate:j,getPlayedRanges:function(){return f&&l?l.getPlayedRanges():null},getEnded:H,getIsDynamic:Y,getStreamController:function(){return r},computeAndSetLiveDelay:function(e,t){var e=!isNaN(e)&&isFinite(e)?e:NaN,n=s.getSuggestedPresentationDelay(),r=o.getServiceDescriptionSettings(),r=isNaN(w.get().streaming.delay.liveDelay)?null===w.get().streaming.delay.liveDelayFragmentCount||isNaN(w.get().streaming.delay.liveDelayFragmentCount)||isNaN(e)?r&&!isNaN(r.liveDelay)&&0<r.liveDelay?r.liveDelay:!0===w.get().streaming.delay.useSuggestedPresentationDelay&&null!==n&&!isNaN(n)&&0<n?n:isNaN(e)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*f.manifestInfo.minBufferTime:4*e:e*w.get().streaming.delay.liveDelayFragmentCount:w.get().streaming.delay.liveDelay;return null!==(n=s.getAvailabilityStartTime())&&(y=n),e=t&&0<t.dvrWindowSize?Math.min(r,t.dvrWindowSize):r,d=c=e},getLiveDelay:function(){return c},getOriginalLiveDelay:function(){return d},getCurrentLiveLatency:function(){var e,t;return!p||isNaN(y)?NaN:(e=D(),isNaN(e)||0===e?0:(t=(new Date).getTime()+1e3*u.getClientTimeOffset(),Math.max(((t-y-1e3*e)/1e3).toFixed(3),0)))},play:B,isPaused:O,isStalled:G,pause:C,isSeeking:M,getStreamEndTime:R,seek:N,seekToOriginalLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Z();0!==r&&N(r-(c=d),e,t,n)},seekToCurrentLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Z();0!==r&&N(r-c,e,t,n)},reset:F,updateCurrentTime:P,getAvailabilityStartTime:function(){return y}},i=(0,je.Z)(e).getInstance().getLogger(n),F(),n}d.__dashjs_factory_name="PlaybackController";var Ae=ve.Z.getSingletonFactory(d),A=t(3186),T="loading",b="executed";function f(e){var t,o,a,n=(e=e||{}).eventBus,r=e.events,i=e.dashMetrics,s=e.fragmentLoader,l=e.debug,u=e.streamInfo,c=e.type;function d(r){var i;return!!r&&(i=!1,o.some(function(e){if(t=r,n=e,!isNaN(t.index)&&t.startTime===n.startTime&&t.adaptationIndex===n.adaptationIndex&&t.type===n.type||(t=r,n=e,isNaN(t.index)&&isNaN(n.index)&&t.quality===n.quality)||r.action===A.Z.ACTION_COMPLETE&&r.action===e.action)return i=!0;var t,n}),i)}function f(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function p(n){o=o.filter(function(e){var t=f(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t})}function h(n,r){r<=n+.5||(o=o.filter(function(e){var t=f(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function g(e,t){i.addSchedulingInfo(e,t),i.addRequestsQueue(e.mediaType,a,o)}function m(e){e.sender===s&&(a.splice(a.indexOf(e.request),1),e.response&&!e.error&&o.push(e.request),g(e.request,e.error?"failed":b),n.trigger(r.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c}))}function y(e){e.sender===s&&n.trigger(r.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c})}function v(e){e.sender===s&&n.trigger(r.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:u.id,mediaType:c})}function E(){o=[],a=[]}return t=l.getLogger(e={getStreamId:function(){return u.id},getType:function(){return c},getRequests:function(r){var e=r?r.state instanceof Array?r.state:[r.state]:[],i=[];return e.forEach(function(t){var n,e=function(){var e;switch(t){case T:e=a;break;case b:e=o;break;default:e=[]}return e}();i=i.concat((e=e,(n=r).hasOwnProperty("time")?[function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],o=i.startTime,a=o+i.duration;if(n=isNaN(n)?f(i):n,!isNaN(o)&&!isNaN(a)&&o<=t+n&&t-n<a||isNaN(o)&&isNaN(t))return i}return null}(e,n.time,n.threshold)]:e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})))}),i},isFragmentLoaded:d,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=d(e)))for(r=0;r<a.length;r++)t=a[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:p,removeExecutedRequestsAfterTime:function(t){o=o.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)h(n,e.start(r)),n=e.end(r);0<t&&h(n,t)}else p()},abortRequests:function(){t.debug("abort requests"),s.abort(),a=[]},executeRequest:function(e){e.action===A.Z.ACTION_DOWNLOAD?(g(e,T),a.push(e),e=e,n.trigger(r.FRAGMENT_LOADING_STARTED,{request:e},{streamId:u.id,mediaType:c}),s.load(e)):t.warn("Unknown request action.")},reset:function(){n.off(r.LOADING_COMPLETED,m,this),n.off(r.LOADING_DATA_PROGRESS,y,this),n.off(r.LOADING_ABANDONED,v,this),s&&s.reset(),E()},resetInitialSettings:E,addExecutedRequest:function(e){o.push(e)}}),E(),n.on(r.LOADING_COMPLETED,m,e),n.on(r.LOADING_DATA_PROGRESS,y,e),n.on(r.LOADING_ABANDONED,v,e),e}f.__dashjs_factory_name="FragmentModel";var e=ve.Z.getClassFactory(f),pe=(e.FRAGMENT_MODEL_LOADING=T,e.FRAGMENT_MODEL_EXECUTED=b,e.FRAGMENT_MODEL_CANCELED="canceled",e.FRAGMENT_MODEL_FAILED="failed",ve.Z.updateClassFactory(f.__dashjs_factory_name,e),e),Ye=t(5459);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=g(n),t=(e=r?(e=g(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==p(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e;throw new TypeError("Cannot call a class as a function")}return o}(t(2230).Z)),Ee=t(1264),_e=t(7855);function m(e){var o,i,a,s,t,n=this.context,l=(0,Ee.Z)(n).getInstance(),r=e.textController,u=e.eventBus,c=[],d=[],f=!1,p=e.mediaSource,h=null;function g(t){return new Promise(function(e){A(function(){a.changeType&&a.changeType(t),e()})})}function m(e){return a=r.getTextSourceBuffer(e),Promise.resolve()}function y(){if("function"==typeof a.addEventListener)try{a.addEventListener("updateend",b,!1),a.addEventListener("error",S,!1),a.addEventListener("abort",S,!1)}catch(e){t=setInterval(b,50)}else t=setInterval(b,50)}function v(r){return new Promise(function(n){a&&l.get().streaming.buffer.useAppendWindow?A(function(){try{var e,t;a?(e=p.duration,t=0,r&&!isNaN(r.start)&&!isNaN(r.duration)&&isFinite(r.duration)&&(e=r.start+r.duration),r&&!isNaN(r.start)&&(t=r.start),a.appendWindowEnd===e&&a.appendWindowStart===t||(a.appendWindowStart=0,a.appendWindowEnd=e+.01,a.appendWindowStart=Math.max(t-.1,0),i.debug("Updated append window for ".concat(s.type,". Set start to ").concat(a.appendWindowStart," and end to ").concat(a.appendWindowEnd))),n()):n()}catch(e){i.warn("Failed to set append window"),n()}}):n()})}function E(e){return new Promise(function(t){a?A(function(){try{a.timestampOffset===e||isNaN(e)||(a.timestampOffset=e,i.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}}):t()})}function _(){if(!f&&0<d.length){f=!0;var e=d[0],t=(d.splice(0,1),function(){f=!1,0<d.length&&_.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==_e.w.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})});try{h=e.request,0===e.data.bytes.byteLength?t.call(this):(a.appendBuffer?a.appendBuffer(e.data.bytes):a.append(e.data.bytes,e.data),A(t.bind(this)))}catch(t){i.fatal('SourceBuffer append failed "'+t+'"'),0<d.length?_():f=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new Ye.Z(t.code,t.message)})}}}function T(){0<c.length&&(a.updating||(c.shift()(),T()))}function b(){a.updating||T()}function S(e){var e=e.target||{},t=Ge.Z.SOURCE_BUFFER_ERROR,e={error:e,lastRequestAppended:h};u.trigger(t,e,{streamId:s.streamInfo.id,mediaType:o})}function A(e){c.push(e),a.updating||T()}return e={getType:function(){return o},getAllBufferRanges:function(){try{return a.buffered}catch(e){return i.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return a},append:function(n){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){n?(d.push({data:n,promise:{resolve:e,reject:t},request:i}),A(_.bind(r))):t({chunk:n,error:new Ye.Z(Ke.APPEND_ERROR_CODE,Ke.APPEND_ERROR_MESSAGE)})})},remove:function(i){return new Promise(function(e,t){var n=i.start,r=i.end;0<=n&&n<r?A(function(){try{a.remove(n,r),A(function(){e({from:n,to:r,unintended:!1}),i.resolve&&i.resolve()})}catch(e){t({from:n,to:r,unintended:!1,error:new Ye.Z(Ke.REMOVE_ERROR_CODE,Ke.REMOVE_ERROR_MESSAGE)}),i.reject&&i.reject(e)}}):e()})},abort:function(){return new Promise(function(t){try{d=[],"open"===p.readyState?A(function(){try{a&&a.abort(),t()}catch(e){t()}}):(a&&a.setTextTrack&&"ended"===p.readyState&&a.abort(),t())}catch(e){t()}})},reset:function(){if(a){try{c=[];try{"function"==typeof a.removeEventListener&&(a.removeEventListener("updateend",b,!1),a.removeEventListener("error",S,!1),a.removeEventListener("abort",S,!1)),clearInterval(t)}catch(e){i.error(e)}f=!1,d=[],a.getClassName&&"TextSourceBuffer"===a.getClassName()||(i.debug("Removing sourcebuffer from media source"),p.removeSourceBuffer(a))}catch(e){}a=null}h=null},updateTimestampOffset:E,initializeForStreamSwitch:function(e,t,n){o=(s=e).type;e=s.codec,a=n.getBuffer(),y(),n=[];return n.push(new Promise(function(n){A(function(){var e=a.appendWindowStart,t=a.appendWindowEnd;a&&(a.abort(),a.appendWindowStart=e,a.appendWindowEnd=t),n()})})),n.push(v(s.streamInfo)),l.get().streaming.buffer.useChangeTypeForTrackSwitch&&n.push(g(e)),t&&void 0!==t.MSETimeOffset&&n.push(E(t.MSETimeOffset)),Promise.all(n)},initializeForFirstUse:function(e,t,n){o=(s=t).type;var r=s.codec;try{if(r.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return m(e);a=p.addSourceBuffer(r),y();var i=[];return i.push(v(s.streamInfo)),n&&void 0!==n.MSETimeOffset&&i.push(E(n.MSETimeOffset)),Promise.all(i)}catch(t){return s.type==Be.Z.TEXT&&!s.isFragmented||-1!==r.indexOf('codecs="stpp')||-1!==r.indexOf('codecs="vtt')||-1!==r.indexOf("text/vtt")?m(e):Promise.reject(t)}},updateAppendWindow:v,changeType:g},i=(0,je.Z)(n).getInstance().getLogger(e),e}m.__dashjs_factory_name="SourceBufferSink";var he=ve.Z.getClassFactory(m);function v(e){var t,o,n=this.context,a=[],r=e;function s(t,n){return a=a.filter(function(e){return!((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))}),Promise.resolve()}return e={getAllBufferRanges:function(){for(var t=[],e=0;e<a.length;e++){var n=a[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){return o="InitializationSegment"!==e.segmentType?(a.push(e),a.sort(function(e,t){return e.start-t.start}),null):e,t.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),r&&r({chunk:e}),Promise.resolve()},remove:s,abort:function(){return Promise.resolve()},discharge:function(e,t){n=e,r=t;var n,r,i=a.filter(function(e){return(isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)});return o&&(i.push(o),o=null),s(e,t),i},reset:function(){a=[],r=o=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},t=(0,je.Z)(n).getInstance().getLogger(e),e}v.__dashjs_factory_name="PreBufferSink";var ge=ve.Z.getClassFactory(v);function E(){var r={};return{save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={}}}}E.__dashjs_factory_name="InitCache";var We=ve.Z.getSingletonFactory(E),we="BufferController";function S(e){e=e||{};var t,l,r,i,o,u,a,s,d,c,f,p,h,g,k,m,y,v,E,_,T,b=this.context,S=(0,qe.Z)(b).getInstance(),F=e.errHandler,U=e.fragmentModel,B=e.representationController,Z=e.adapter,q=e.textController,G=e.abrController,A=e.playbackController,w=e.streamInfo,I=e.type,R=e.settings;function j(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){u=n,d&&r&&"function"==typeof d.discharge?(c=d,Y(r).then(function(){e()}).catch(function(e){t(e)})):e()})}function H(e){return Z.convertRepresentationToRepresentationInfo(B.getRepresentationForQuality(e))}function Y(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(t,n){var a,s;v&&e?u?(f=!1,a=e,s=r,new Promise(function(e,t){var n,r,i,o=G.getQualityFor(I,w.id);d=he(b).create({mediaSource:u,textController:q,eventBus:S}),n=a,r=s,i=H(o),(r&&r[I]&&(I===Be.Z.VIDEO||I===Be.Z.AUDIO)?d.initializeForStreamSwitch(n,i,r[I]):d.initializeForFirstUse(w,n,i)).then(function(){return M(H(o))}).then(function(){e(d)}).catch(function(e){l.fatal("Caught error on create SourceBuffer: "+e),F.error(new Ye.Z(Ke.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ke.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+I)),t(e)})}).then(function(e){t(e)}).catch(function(e){n(e)})):(f=!0,function(){var r=this;return new Promise(function(e,t){var n=G.getQualityFor(I,w.id);d=ge(b).create(W.bind(r)),M(H(n)).then(function(){e(d)}).catch(function(){t()})})}().then(function(e){t(e)}).catch(function(e){n(e)})):t(null)})}function K(e){R.get().streaming.cacheInitSegments&&(l.info("Init fragment finished loading saving to",I+"'s init cache"),v.save(e.chunk)),l.debug("Append Init fragment",I," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),z(e.chunk)}function $(e){z(e.chunk,e.request)}function z(e,t){d&&(d.append(e,1<arguments.length&&void 0!==t?t:null).then(function(e){W(e)}).catch(function(e){W(e)}),e.mediaInfo.type===Be.Z.VIDEO)&&x(Ge.Z.VIDEO_CHUNK_RECEIVED,{chunk:e})}function V(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)l.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",A.getTime())}function W(e){var t,n,r;e.error?(22===e.error.code&&(y=!0,o=.8*ue(),l.warn("Quota exceeded, Critical Buffer: "+o),0<o)&&(r=Math.max(.2*o,1),n=o-r,t=Math.min(R.get().streaming.buffer.bufferTimeAtTopQuality,.9*n),n=Math.min(R.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*n),r={streaming:{buffer:{bufferToKeep:parseFloat(r.toFixed(5)),bufferTimeAtTopQuality:parseFloat(t.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(n.toFixed(5))}}},R.update(r)),22!==e.error.code&&de()||(l.warn("Clearing playback buffer to overcome quota exceed situation"),x(Ge.Z.QUOTA_EXCEEDED,{criticalBufferLevel:o,quotaExceededTime:e.chunk.start}),O(ie()))):d&&(D(),y=!1,g=e.chunk)&&g.endFragment&&(g&&!isNaN(g.index)&&(a=Math.max(g.index,a),te()),t=d.getAllBufferRanges(),g.segmentType===_e.w.MEDIA_SEGMENT_TYPE&&(V(t),C(),isNaN(T)||f||(I!==Be.Z.AUDIO&&I!==Be.Z.VIDEO||(r=N(n=A.getTime(),0),e=N(T,0),r&&e&&r.start===e.start)?T=NaN:(r=B.getCurrentRepresentation().segmentDuration,(e=N(T,r))&&(R.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(n-T)>r?T<=e.end&&A.seek(Math.max(T,e.start),!1,!0):n<e.start&&A.seek(e.start,!1,!0))))),e=!1,p&&(0<p.indexOf(g)&&(e=!0),p=null),g)&&!e&&x(Ge.Z.BYTES_APPENDED_END_FRAGMENT,{quality:g.quality,startTime:g.start,index:g.index,bufferedRanges:t,segmentType:g.segmentType,mediaType:I})}function X(){return new Promise(function(e,t){var n=Q();n&&0!==n.length?O(n).then(function(){e()}).catch(function(e){t(e)}):(C(),e())})}function Q(e){var t,n=[],r=d.getAllBufferRanges();return r&&0!==r.length&&(!e&&0!==e||isNaN(e)?n.push({start:r.start(0),end:r.end(r.length-1)+.5}):(t=function(e,t){var n=R.get().streaming.buffer.bufferToKeep,t=t.start(0);if(n<e-t){n=Math.max(0,e-n),e=U.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(0<(n=e?Math.min(e.startTime,n):n))return{start:t,end:n}}return null}(e,r),e=function(e,t){var n=t.end(t.length-1)+.5,r=ce(e),i=w.manifestInfo.duration>=R.get().streaming.buffer.longFormContentDurationThreshold?R.get().streaming.buffer.bufferTimeAtTopQualityLongForm:R.get().streaming.buffer.bufferTimeAtTopQuality;if((s=isNaN(r)?e:Math.min(r,e+i))>=t.end(t.length-1))return null;r=U.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(r&&(s=Math.max(r.startTime+r.duration,s)),R.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var o=0;o<t.length;o++)if(t.start(o)<=e&&e<=t.end(o)&&t.start(o)<=s&&s<=t.end(o)){var a=s,s=o+1<t.length?t.start(o+1):t.end(o)+1;l.debug("Buffered range ["+t.start(o)+", "+t.end(o)+"] overlaps with targetTime "+e+" and range to be pruned ["+a+", "+n+"], using ["+s+", "+n+"] instead"+(s<n?"":" (no actual pruning)"));break}return s<t.end(t.length-1)?{start:s,end:n}:null}(e,r),t&&n.push(t),e&&n.push(e))),n}function C(){(!_||I===Be.Z.TEXT&&q.isTextEnabled())&&D()}function J(){n()}function ee(){n(),T=NaN}function N(e,t){if(d){var n,r,i,o,a=d.getAllBufferRanges(),s=null,l=null,u=0,c=isNaN(t)?.15:t;if(null!=a){for(r=0,n=a.length;r<n;r++)if(i=a.start(r),o=a.end(r),null===s)u=Math.abs(i-e),(i<=e&&e<o||u<=c)&&(s=i,l=o);else{if(!((u=i-l)<=c))break;l=o}if(null!==s)return{start:s,end:l}}}return null}function D(){var e,t;A&&(e=A.getTime()||0,f&&(e=isNaN(T)?0:T),t=R.get().streaming.gaps.jumpGaps&&!isNaN(R.get().streaming.gaps.smallGapLimit)?R.get().streaming.gaps.smallGapLimit:NaN,i=Math.max((t=t,null===(t=N(e=e,t=R.get().streaming.gaps.jumpGaps?R.get().streaming.gaps.smallGapLimit:t))?0:t.end-e),0),x(Ge.Z.BUFFER_LEVEL_UPDATED,{mediaType:I,bufferLevel:i}),n())}function te(){var e=s-1<=a,t=A.getTimeToStreamEnd(w)-i<1e-5;!e&&!t||r||(L(!0),l.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(w.id," and type ").concat(I)))}function n(){I!==Be.Z.AUDIO&&I!==Be.Z.VIDEO||((!A.getLowLatencyModeEnabled()&&i<R.get().streaming.buffer.stallThreshold||0===i)&&!r?ne(Ze.Z.BUFFER_EMPTY):(r||i>=R.get().streaming.buffer.stallThreshold||A.getLowLatencyModeEnabled()&&0<i)&&ne(Ze.Z.BUFFER_LOADED))}function ne(e){h===e||e===Ze.Z.BUFFER_EMPTY&&0===A.getTime()||I===Be.Z.TEXT&&!q.isTextEnabled()||(h=e,x(Ge.Z.BUFFER_LEVEL_STATE_CHANGED,{state:e}),x(e===Ze.Z.BUFFER_LOADED?Ge.Z.BUFFER_LOADED:Ge.Z.BUFFER_EMPTY),l.debug(e===Ze.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function re(){!d||I===Be.Z.TEXT||r||O(ie())}function ie(){var e=[],t=d.getAllBufferRanges();if(t&&0!==t.length){var n=A.getTime(),r=Math.max(0,n-R.get().streaming.buffer.bufferToKeep),i=U.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&A.getIsDynamic())return[];if(t.start(0)<=r){for(var o={start:0,end:r},a=0;a<t.length&&t.end(a)<=r;a++)o.end=t.end(a);o.start<o.end&&e.push(o)}}return e}function O(n){return new Promise(function(e,t){var r;n&&d&&0!==n.length?(r=[],n.forEach(function(e){var n;r.push((n=e,new Promise(function(e,t){n.resolve=e,n.reject=t,E.push(n)})))}),m||oe(),Promise.all(r).then(function(){e()}).catch(function(e){t(e)})):e()})}function oe(){try{var e,t;return 0!==E.length&&d?(e=d.getBuffer())&&e.buffered&&0!==e.buffered.length?(t=E.shift(),l.debug("".concat(I,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),m=!0,A.getTime()<t.end&&L(!1),void d.remove(t).then(function(e){ae(e)}).catch(function(e){ae(e)})):(l.debug("SourceBuffer is empty (or does not exist), halt pruning"),m=!(E=[])):(l.debug("Nothing to prune, halt pruning"),m=!(E=[]))}catch(e){m=!1}}function ae(e){l.debug("onRemoved buffer from:",e.from,"to",e.to),d&&(V(d.getAllBufferRanges()),0===E.length&&(m=!1,D()),e.unintended&&(l.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),x(Ge.Z.SEEK_TARGET,{time:e.from})),m?oe():(_?_=!1:D(),x(Ge.Z.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:de(),quotaExceeded:y})))}function M(t){return new Promise(function(e){t&&void 0!==t.MSETimeOffset&&d&&d.updateTimestampOffset?d.updateTimestampOffset(t.MSETimeOffset).then(function(){e()}).catch(function(){e()}):e()})}function P(){return d&&!r?d.updateAppendWindow(w):Promise.resolve()}function se(){++k*(R.get().streaming.wallclockTimeUpdateInterval/1e3)>=R.get().streaming.buffer.bufferPruningInterval&&(k=0,re())}function le(){n()}function L(e){(r=e)?x(Ge.Z.BUFFERING_COMPLETED):s=Number.POSITIVE_INFINITY}function ue(){try{var e,t,n=d.getAllBufferRanges(),r=0;if(n)for(t=0,e=n.length;t<e;t++)r+=n.end(t)-n.start(t);return r}catch(e){return 0}}function ce(e){try{var t=e,n=d.getAllBufferRanges();if(!n||0===n.length)return NaN;for(var r=0;t===e&&r<n.length;){var i=n.start(r),o=n.end(r);i<=t&&t<=o&&(t=o),r+=1}return t===e?NaN:t}catch(e){}}function de(){var e=ue();return isNaN(e)||e<o}function x(e,t){S.trigger(e,t||{},{streamId:w.id,mediaType:I})}function fe(e,t){var n;o=Number.POSITIVE_INFINITY,h=void 0,s=Number.POSITIVE_INFINITY,g=null,y=m=r=!1,k=i=a=0,T=NaN,f=!(E=[]),d&&(n=d,d=null,e||t||n.abort().then(function(){n.reset(t),n=null})),_=!1}return t={initialize:function(e){j(e),S.on(Ge.Z.INIT_FRAGMENT_LOADED,K,t),S.on(Ge.Z.MEDIA_FRAGMENT_LOADED,$,t),S.on(Ge.Z.WALLCLOCK_TIME_UPDATED,se,t),S.on(He.Z.PLAYBACK_PLAYING,ee,t),S.on(He.Z.PLAYBACK_PROGRESS,C,t),S.on(He.Z.PLAYBACK_TIME_UPDATED,C,t),S.on(He.Z.PLAYBACK_RATE_CHANGED,le,t),S.on(He.Z.PLAYBACK_STALLED,J,t)},getStreamId:function(){return w.id},getType:function(){return I},getBufferControllerType:function(){return we},createBufferSink:Y,dischargePreBuffer:function(){if(d&&c&&"function"==typeof c.discharge){var e=c.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+I+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";l.debug(t)}else l.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");p=[];for(var r=c.discharge(),i=null,o=0;o<r.length;o++){var a,s=r[o];s.segmentType!==_e.w.INIT_SEGMENT_TYPE&&(a=v.extract(s.streamId,s.representationId))&&i!==a&&(p.push(a),d.append(a),i=a),p.push(s),d.append(s)}c.reset(),c=null}},getBuffer:function(){return d},getBufferLevel:function(){return i},getRangeAt:N,hasBufferAtTime:function(e){try{var t=d.getAllBufferRanges();if(t&&0!==t.length)for(var n=0;n<t.length;){var r=t.start(n),i=t.end(n);if(r<=e&&e<=i)return!0;n+=1}return!1}catch(e){return l.error(e),!1}},pruneBuffer:re,setMediaSource:j,getMediaSource:function(){return u},appendInitSegmentFromCache:function(e){e=v.extract(w.id,e);return!!e&&(l.info("Append Init fragment",I," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),z(e),!0)},getIsBufferingCompleted:function(){return r},setIsBufferingCompleted:L,getIsPruningInProgress:function(){return m},reset:function(e,t){S.off(Ge.Z.INIT_FRAGMENT_LOADED,K,this),S.off(Ge.Z.MEDIA_FRAGMENT_LOADED,$,this),S.off(Ge.Z.WALLCLOCK_TIME_UPDATED,se,this),S.off(He.Z.PLAYBACK_PLAYING,ee,this),S.off(He.Z.PLAYBACK_PROGRESS,C,this),S.off(He.Z.PLAYBACK_TIME_UPDATED,C,this),S.off(He.Z.PLAYBACK_RATE_CHANGED,le,this),S.off(He.Z.PLAYBACK_STALLED,J,this),fe(e,t)},prepareForPlaybackSeek:function(){return r&&L(!1),d.abort()},prepareForReplacementTrackSwitch:function(n){return new Promise(function(e,t){d.abort().then(P).then(function(){return R.get().streaming.buffer.useChangeTypeForTrackSwitch?d.changeType(n):Promise.resolve()}).then(X).then(function(){L(!1),e()}).catch(function(e){t(e)})})},prepareForNonReplacementTrackSwitch:function(n){return new Promise(function(e,t){P().then(function(){return R.get().streaming.buffer.useChangeTypeForTrackSwitch?d.changeType(n):Promise.resolve()}).then(function(){e()}).catch(function(e){t(e)})})},prepareForForceReplacementQualitySwitch:function(n){return new Promise(function(e,t){d.abort().then(P).then(X).then(function(){return M(n)}).then(function(){L(!1),e()}).catch(function(e){t(e)})})},updateAppendWindow:P,getAllRangesWithSafetyFactor:Q,getContinuousBufferTimeForTargetTime:ce,clearBuffers:O,pruneAllSafely:X,updateBufferTimestampOffset:M,setSeekTarget:function(e){T=e},segmentRequestingCompleted:function(e){isNaN(e)||(s=e,te())}},l=(0,je.Z)(b).getInstance().getLogger(t),v=We(b).getInstance(),fe(),t}S.__dashjs_factory_name=we;var de=ve.Z.getClassFactory(S),w="NotFragmentedTextBufferController";function I(e){e=e||{};var t,n,r,i,o,a,s=this.context,l=(0,qe.Z)(s).getInstance(),u=e.textController,c=e.errHandler,d=e.streamInfo,f=e.type;function p(e){i=e}function h(e){n!==e&&(n=e)&&(e=Ge.Z.BUFFERING_COMPLETED,l.trigger(e,{},{streamId:d.id,mediaType:f}))}function g(e){e.chunk.bytes&&!n&&(a.save(e.chunk),o.append(e.chunk),h(!0))}return i=null,n=r=!(t={initialize:function(e){p(e)},getStreamId:function(){return d.id},getType:function(){return f},getBufferControllerType:function(){return w},createBufferSink:function(n){return new Promise(function(e,t){try{(o=he(s).create({mediaSource:i,textController:u,eventBus:l})).initializeForFirstUse(d,n),r||(o.getBuffer()&&"function"==typeof o.getBuffer().initialize&&o.getBuffer().initialize(),r=!0),e(o)}catch(e){c.error(new Ye.Z(Ke.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ke.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+f)),t(e)}})},dischargePreBuffer:function(){},getBuffer:function(){return o},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:p,getMediaSource:function(){return i},appendInitSegmentFromCache:function(e){return null!==a.extract(d.id,e)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:h,getIsPruningInProgress:function(){return!1},reset:function(e){l.off(Ge.Z.INIT_FRAGMENT_LOADED,g,t),!e&&o&&(o.abort(),o.reset(),o=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}}),a=We(s).getInstance(),l.on(Ge.Z.INIT_FRAGMENT_LOADED,g,t),t}I.__dashjs_factory_name=w;var fe=ve.Z.getClassFactory(I);function R(e){e=e||{};var n,r,i,t,o,a,s,l,u,c,d,f,p,h=this.context,g=(0,qe.Z)(h).getInstance(),m=e.dashMetrics,y=e.mediaPlayerModel,v=e.fragmentModel,E=e.abrController,_=e.playbackController,T=e.textController,b=e.type,k=e.bufferController,S=e.representationController,A=e.settings;function w(){f=!0}function I(){f=!1}function R(e){k.getIsBufferingCompleted()||(C(),e=isNaN(e)?0:e,o=setTimeout(F,e))}function C(){o&&(clearTimeout(o),o=null)}function F(){try{var e;(function(){try{return b===Be.Z.TEXT&&!T.isTextEnabled()||_.isPaused()&&(!_.getStreamController().getInitialPlayback()||!_.getStreamController().getAutoPlay())&&!A.get().streaming.scheduling.scheduleWhilePaused}catch(e){}})()?C():!function(){try{return f&&S.getCurrentRepresentationInfo()&&(isNaN(u)||c||(t=r.id,n=E.getMaxAllowedIndexFor(b,t),(isNaN(l)||l!=n)&&(i.info("Top quality "+b+" index has changed from "+l+" to "+n),l=n,1))||(e=S.getCurrentRepresentationInfo(),!b||!e||m.getCurrentBufferLevel(b)<N()))}catch(t){}var e,t,n}()?R(_.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout):(e=!1,(e=p?E.checkPlaybackQuality(b,r.id):e)||(t=S.getCurrentRepresentationInfo(),d||t.quality!==u||c?(c?(i.debug("Switch track for "+b+", representation id = "+t.id),c=!1):i.debug("Quality has changed, get init request for representationid = "+t.id),g.trigger(Ge.Z.INIT_FRAGMENT_NEEDED,{representationId:t.id,sender:n},{streamId:r.id,mediaType:b}),d=p=!1):(i.debug("Media segment needed for ".concat(b," and stream id ").concat(r.id)),g.trigger(Ge.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:r.id,mediaType:b}),p=!0)))}catch(e){R(_.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}var t}function N(){var e=NaN,t=S.getCurrentRepresentationInfo();return e=b&&t?(b===Be.Z.TEXT?function(){try{var e,t;return T.isTextEnabled()?(e=S.getCurrentRepresentationInfo(),isNaN(e.fragmentDuration)?(t=m.getCurrentSchedulingInfo(Ze.Z.SCHEDULING_INFO))?t.duration:0:e.fragmentDuration):0}catch(e){return 0}}:b===Be.Z.AUDIO&&a?function(){try{var e=m.getCurrentBufferLevel(Be.Z.VIDEO),t=S.getCurrentRepresentationInfo();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}:function(){try{var e=S.getCurrentRepresentationInfo().mediaInfo.streamInfo;return E.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=A.get().streaming.buffer.longFormContentDurationThreshold?A.get().streaming.buffer.bufferTimeAtTopQualityLongForm:A.get().streaming.buffer.bufferTimeAtTopQuality:y.getStableBufferTime()}catch(e){return y.getStableBufferTime()}})():e}function D(){O(!0)}function O(e){var t;_&&v&&(t=v.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,time:_.getTime(),threshold:0})[0])&&_.getTime()>=t.startTime&&((!s.mediaInfo||t.mediaInfo.type===s.mediaInfo.type&&t.mediaInfo.index!==s.mediaInfo.index)&&e&&g.trigger(Ge.Z.TRACK_CHANGE_RENDERED,{mediaType:b,oldMediaInfo:s.mediaInfo,newMediaInfo:t.mediaInfo,streamId:r.id}),t.quality===s.quality&&t.adaptationIndex===s.adaptationIndex||!e||(i.debug("Quality change rendered for streamId ".concat(r.id," and type ").concat(b)),g.trigger(Ge.Z.QUALITY_CHANGE_RENDERED,{mediaType:b,oldQuality:s.quality,newQuality:t.quality,streamId:r.id})),s={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}function M(){v.abortRequests(),C()}function P(){A.get().streaming.scheduling.scheduleWhilePaused||R()}function L(e){m.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function x(){p=!0,l=u=NaN,f=!(d=c=!(s={mediaInfo:void(t=0),quality:NaN,adaptationIndex:NaN}))}return n={initialize:function(e){a=e,g.on(Ge.Z.URL_RESOLUTION_FAILED,M,n),g.on(He.Z.PLAYBACK_STARTED,P,n),g.on(He.Z.PLAYBACK_RATE_CHANGED,L,n),g.on(He.Z.PLAYBACK_TIME_UPDATED,D,n),g.on(He.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,w,n),g.on(He.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,I,n)},getType:function(){return b},getStreamId:function(){return r.id},setTimeToLoadDelay:function(e){t=e},getTimeToLoadDelay:function(){return t},setSwitchTrack:function(e){c=e},getSwitchTrack:function(){return c},startScheduleTimer:R,clearScheduleTimer:C,reset:function(){g.off(Ge.Z.URL_RESOLUTION_FAILED,M,n),g.off(He.Z.PLAYBACK_STARTED,P,n),g.off(He.Z.PLAYBACK_RATE_CHANGED,L,n),g.off(He.Z.PLAYBACK_TIME_UPDATED,D,n),g.off(He.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,w,n),g.off(He.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,I,n),C(),O(!1),x(),r=null},getBufferTarget:N,getPlaybackController:function(){return _},setCheckPlaybackQuality:function(e){p=e},setInitSegmentRequired:function(e){d=e},setLastInitializedQuality:function(e){u=e}},i=(0,je.Z)(h).getInstance().getLogger(n),x(),r=e.streamInfo,n}R.__dashjs_factory_name="ScheduleController";var Ie=ve.Z.getClassFactory(R),N=t(7387);function C(e){var t,d,f,p,n,c,r=(e=e||{}).eventBus,i=e.events,h=e.abrController,g=e.dashMetrics,m=e.playbackController,y=e.timelineConverter,v=e.type,E=e.streamInfo,_=e.dashConstants,T=e.segmentsController,b=e.isDynamic,o=e.adapter;function a(){return v}function s(){return f}function l(){return c}function u(){f=!(d=null),p=[],n=null}function S(u){return new Promise(function(l,t){var e=u.hasInitialization(),n=u.hasSegments(),r=[];r.push(T.updateInitData(u,e)),r.push(T.updateSegmentData(u,n)),Promise.all(r).then(function(e){e[0]&&!e[0].error&&(i=u,t=e[0],u=t&&!t.error&&t.representation?t.representation:i),(t=u=e[1]&&!e[1].error?function(e,t){if(t&&!t.error){for(var n,r=t.segments,i=[],o=0,a=0,s=r?r.length:0;a<s;a++)n=r[a],(n=(0,N.TJ)(y,b,e,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,o))&&(i.push(n),o++);return 0<i.length&&(e.segments=i),e}}(u,e[1]):u).mediaFinishedInformation=T.getMediaFinishedInformation(t);var t,n=u;if(f){var r,i,o=g.getCurrentManifestUpdate(),a=!1;if(o){for(var s=0;s<o.representationInfo.length;s++)if((r=o.representationInfo[s]).index===n.index&&r.mediaType===v){a=!0;break}a||g.addManifestUpdateRepresentationInfo(n,v)}!function(){for(var e=0,t=p.length;e<t;e++){var n=p[e].segmentInfoType;if(!p[e].hasInitialization()||(n===_.SEGMENT_BASE||n===_.BASE_URL)&&!p[e].segments)return}return 1}()||(h.setPlaybackQuality(v,E,(i=c,p.indexOf(i))),(i=g.getCurrentDVRInfo(v))&&g.updateManifestUpdateInfo({latency:i.range.end-m.getTime()}),g.getCurrentRepresentationSwitch(c.adaptation.type)||A(),I())}l()}).catch(function(e){t(e)})})}function A(){if(!(h&&g&&m&&y))throw new Error(Be.Z.MISSING_CONFIG_ERROR);var e=new Date,t=c,n=1e3*m.getTime();t&&g.addRepresentationSwitch(t.adaptation.type,e,n,t.id),r.trigger(He.Z.REPRESENTATION_SWITCH,{mediaType:v,streamId:E.id,currentRepresentation:t,numberOfRepresentations:p.length},{streamId:E.id,mediaType:v})}function w(e){return null==e||e>=p.length?null:p[e]}function I(e){f=!1,r.trigger(i.DATA_UPDATE_COMPLETED,{data:d,currentRepresentation:c,error:e},{streamId:E.id,mediaType:v})}function R(e){c=e,n=o.convertRepresentationToRepresentationInfo(c)}function C(e){var t;e.newDuration&&(t=c)&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}return t={getStreamId:function(){return E.id},getType:a,getData:function(){return d},isUpdating:s,updateData:function(a,s,l,u,c){return new Promise(function(e,t){if(f=!0,p=s,d=a,R(w(c)),l===Be.Z.VIDEO||l===Be.Z.AUDIO||l===Be.Z.TEXT&&u){for(var n=[],r=0,i=p.length;r<i;r++){var o=p[r];n.push(S(o))}Promise.all(n).then(function(){R(w(c)),e()}).catch(function(e){t(e)})}else I(),e()})},getCurrentRepresentation:l,getCurrentRepresentationInfo:function(){return n},getRepresentationForQuality:w,prepareQualityChange:function(e){R(w(e)),A()},reset:function(){r.off(He.Z.MANIFEST_VALIDITY_CHANGED,C,t),u()}},u(),r.on(He.Z.MANIFEST_VALIDITY_CHANGED,C,t),t}C.__dashjs_factory_name="RepresentationController";var Re=ve.Z.getClassFactory(C),Te=t(3106),Ce=t(9326),be=t(7473),Se=t(2594);function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(){O(this,$e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}function ze(){O(this,ze),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}$e.INITIAL_PLAYOUT_START_REASON="initial_playout",$e.SEEK_START_REASON="seek",$e.RESUME_FROM_PAUSE_START_REASON="resume",$e.METRICS_COLLECTION_START_REASON="metrics_collection_start";ze.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",ze.REBUFFERING_REASON="rebuffering",ze.USER_REQUEST_STOP_REASON="user_request",ze.END_OF_PERIOD_STOP_REASON="end_of_period",ze.END_OF_CONTENT_STOP_REASON="end_of_content",ze.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",ze.FAILURE_STOP_REASON="failure";var Ne=t(7802);function M(){return{ntpToUTC:function(e){var t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}}}M.__dashjs_factory_name="TimeUtils";var De=ve.Z.getSingletonFactory(M);function P(i){i=i||{};var o,s,a,l,n,u,c,y,d,f,p,h,g,m,v,E=this.context,_=(0,qe.Z)(E).getInstance(),T=i.streamInfo,b=i.type,S=i.errHandler,U=i.mimeType,A=i.timelineConverter,w=i.adapter,B=i.manifestModel,I=i.mediaPlayerModel,R=i.fragmentModel,C=i.abrController,N=i.playbackController,Z=i.mediaController,D=i.textController,O=i.dashMetrics,M=i.settings,P=i.boxParser,q=i.segmentBlacklistController;function G(){return T.id}function e(){return b}function j(){return w.getIsTextTrack(y.getData())}function H(){m=0,p=f=d=!(n=[]),v=l=null}function Y(e){return!isNaN(e)&&!isNaN(T.duration)&&isFinite(T.duration)&&e>=T.start+T.duration}function K(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.sender&&(N.getIsManifestUpdateInProgress()?L():j()&&!D.isTextEnabled()||!u||!e.representationId||u.appendInitSegmentFromCache(e.representationId)||(0===(e=y.getCurrentRepresentation()).range?r():(e=h?h.getInitRequest(l,e):null)?R.executeRequest(e):t&&(c.setInitSegmentRequired(!0),L())))}function r(e){var t,n,r,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];N.getIsManifestUpdateInProgress()||u.getIsPruningInProgress()?L():(t=function(){var e,t=x();if(isNaN(m)||b===Be.Z.TEXT&&!D.isTextEnabled())return null;h&&(t=y&&t?y.getRepresentationForQuality(t.quality):null,e=d?h.getSegmentRequestForTime(l,t,m):f?h.repeatSegmentRequest(l,t):h.getNextSegmentRequest(l,t));return e}())?(f=d=!1,r=t,isNaN(r.startTime+r.duration)||(m=r.startTime+r.duration),r.delayLoadingTime=(new Date).getTime()+c.getTimeToLoadDelay(),c.setTimeToLoadDelay(0),function(){var e=r.url;return r.range&&(e=e.concat("_",r.range)),q.contains(e)}()?(s.warn("Fragment request url ".concat(r.url," for stream id ").concat(T.id," and media type ").concat(b," is on the ignore list and will be skipped")),L()):(s.debug("Next fragment request url for stream id ".concat(T.id," and media type ").concat(b," is ").concat(r.url)),R.executeRequest(r))):(t=i,i=y.getCurrentRepresentation(),!M.get().streaming.gaps.enableSeekFix||!d&&0!==N.getTime()||(a&&i.segmentInfoType!==ye.Z.SEGMENT_TIMELINE||(n=h.getValidTimeAheadOfTargetTime(m,l,i,M.get().streaming.gaps.threshold)),isNaN(n))||n===m?h.isLastSegmentRequested(i,m)?(i=h.getCurrentIndex(),s.debug("Segment requesting for stream ".concat(T.id," has finished")),_.trigger(Ge.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:i},{streamId:T.id,mediaType:b}),u.segmentRequestingCompleted(i),c.clearScheduleTimer()):t&&L():N.isSeeking()||0===N.getTime()?(s.warn("Adjusting playback time ".concat(n," because of gap in the manifest. Seeking by ").concat(n-m)),N.seek(n,!1,!1)):(s.warn("Adjusting buffering time ".concat(n," because of gap in the manifest. Adjusting time by ").concat(n-m)),F(n),t&&L()))}function L(){c.startScheduleTimer(N.getLowLatencyModeEnabled()?M.get().streaming.scheduling.lowLatencyTimeout:M.get().streaming.scheduling.defaultTimeout)}function $(e){e.error||u.getIsBufferingCompleted()||u.updateBufferTimestampOffset(e.currentRepresentation)}function z(e){O.addBufferState(b,e.state,c.getBufferTarget()),e.state!==Ze.Z.BUFFER_EMPTY||N.isSeeking()||(s.info("Buffer is empty! Stalling!"),O.pushPlayListTraceMetrics(new Date,ze.REBUFFERING_REASON))}function V(e){R.syncExecutedRequestsWithBufferedRange(u.getBuffer().getAllBufferRanges(),T.duration),e.quotaExceeded&&e.from>N.getTime()&&F(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&c.startScheduleTimer()}function W(e){var t;e&&e.lastRequestAppended&&e.lastRequestAppended.url&&(t=e.lastRequestAppended.url,e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),s.warn("Blacklisting segment with url ".concat(t)),q.add(t))}function X(e){var t;s.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(e.streamId)),e.segmentType===_e.w.INIT_SEGMENT_TYPE&&(t=e.quality,c.setLastInitializedQuality(t),s.info("["+b+"] lastInitializedRepresentationInfo changed to "+e.quality)),v?Q(v):c.startScheduleTimer(0)}function Q(e){var t=R.getRequests({state:pe.FRAGMENT_MODEL_LOADING});if(t&&0<t.length)return s.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),v=e;u.updateBufferTimestampOffset(e).then(function(){c.setCheckPlaybackQuality(!1),l.segmentAlignment||l.subSegmentAlignment?c.startScheduleTimer():ue(),v=null,p=!1}).catch(function(){v=null,p=!1})}function J(e){s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),N.isSeeking()||c.getSwitchTrack()||p||(s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?c.setInitSegmentRequired(!0):F(e.request.startTime+e.request.duration/2),c.startScheduleTimer(0))}function ee(e){s.info("OnFragmentLoadingCompleted for stream id "+T.id+" and media type "+b+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),j()&&c.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(e=e,s.info("Fragment loading completed with an error"),e)&&e.request&&e.request.type&&(e.request.type===_e.w.INIT_SEGMENT_TYPE?K({representationId:e.request.representationId,sender:{}},!1):e.request.type===_e.w.MEDIA_SEGMENT_TYPE&&(F(e.request.startTime+e.request.duration/2),r({},!1)))}function te(){F(N.getTime()),c.startScheduleTimer()}function ne(e){var t=e.currentTrackInfo;t&&(e=n.find(function(e){return e.index===t.index&&e.lang===t.lang}))&&oe(e).then(function(){u.setIsBufferingCompleted(!1),F(N.getTime()),c.setInitSegmentRequired(!0),c.startScheduleTimer()})}function re(e){F(e.quotaExceededTime),c.clearScheduleTimer()}function ie(){return u?u.getBuffer():null}function oe(e){e===l||e&&l&&e.type!==l.type||(l=e);var t,n,r,i,e=w.getRealAdaptation(T,l),o=w.getVoRepresentations(l);return y?(i=y.getData(),t=C.getMaxAllowedIndexFor(b,T.id),n=C.getMinAllowedIndexFor(b,T.id),i=(r=null)!==i&&i.id===e.id||b===Be.Z.TEXT?C.getQualityFor(b,T.id):(r=C.getThroughputHistory().getAverageThroughput(b,a)||C.getInitialBitrateFor(b,T.id),C.getQualityForBitrate(l,r,T.id)),y.updateData(e,o,b,l.isFragmented,i=t<(i=void 0!==n&&i<n?n:i)?t:i)):Promise.resolve()}function t(){return c}function x(e){e=void 0!==e?((0,Te.SE)(e),y?y.getRepresentationForQuality(e):null):y?y.getCurrentRepresentation():null;return w.convertRepresentationToRepresentationInfo(e)}function ae(){return!!u&&u.getIsBufferingCompleted()}function se(e){var t,n;M.get().streaming.enableManifestTimescaleMismatchFix&&(t=(e=e.chunk).bytes,e=x(e.quality),n=y&&e?y.getRepresentationForQuality(e.quality):null,e)&&n&&(n.timescale=P.getMediaTimescaleFromMoov(t))}function le(e){var t,n,r,i=e.chunk,o=i.bytes,a=i.quality,s=x(a),l=y&&s?y.getRepresentationForQuality(s.quality):null;s&&l&&(M.get().streaming.parseInbandPrft&&e.request.type===_e.w.MEDIA_SEGMENT_TYPE&&(e=t=t||P.parse(o),n=l.timescale,e=e.getBoxes("prft"),r=[],e.forEach(function(e){r.push(function(e,t){var n="unknown";switch(e.flags){case 0:n=ye.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:n=ye.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:n=ye.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var r=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:n,ntpTimestamp:De(E).getInstance().ntpToUTC(r),mediaTime:e.media_time/t}}(e,n))}),e=r)&&e.length&&_.trigger(He.Z.INBAND_PRFT,{data:e},{streamId:T.id,mediaType:b}),e=w.getEventsFor(s.mediaInfo,null,T),s=w.getEventsFor(s,l,T),e&&0<e.length||s&&0<s.length)&&(l=R.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,quality:a,index:i.index})[0],a=function(e,t,n,r){try{for(var i={},o=[],a=n.concat(r),s=0,l=a.length;s<l;s++)i[a[s].schemeIdUri+"/"+a[s].value]=a[s];var u=e.getBoxes("emsg");if(u&&0!==u.length)for(var c=e.getBox("sidx"),d=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,f=Math.max(d,0),p=y.getCurrentRepresentation(),h=0,g=u.length;h<g;h++){var m=w.getEvent(u[h],i,f,p);m&&o.push(m)}return o}catch(e){return[]}}(t=t||P.parse(o),l,e,s),_.trigger(Ge.Z.INBAND_EVENTS,{events:a},{streamId:T.id}))}function k(){var e=N.getTime();M.get().streaming.buffer.flushBufferAtTrackSwitch&&N.seek(e+.001,!1,!0),F(e),u.setSeekTarget(e),c.startScheduleTimer()}function ue(){var e=N.getTime(),t=u.getContinuousBufferTimeForTargetTime(e);F(isNaN(t)?e:t),c.startScheduleTimer()}function ce(e){e&&!isNaN(e.time)&&(F(e.time),u.setSeekTarget(e.time))}function F(e){m=e,d=!0}return o={initialize:function(e,t,n){var r;g=(0,Ne.Z)(E).create({events:Ge.Z,eventBus:_,streamInfo:T,timelineConverter:A,dashConstants:ye.Z,segmentBaseController:i.segmentBaseController,type:b}),h=(0,Ce.Z)(E).create({streamInfo:T,type:b,timelineConverter:A,dashMetrics:O,mediaPlayerModel:I,baseURLController:i.baseURLController,errHandler:S,segmentsController:g,settings:M,boxParser:P,events:Ge.Z,eventBus:_,errors:Ke,debug:(0,je.Z)(E).getInstance(),requestModifier:(0,be.Z)(E).getInstance(),dashConstants:ye.Z,constants:Be.Z,urlUtils:(0,Se.Z)(E).getInstance()}),a=T.manifestInfo.isDynamic,h.initialize(a),C.registerStreamType(b,o),y=Re(E).create({streamInfo:T,type:b,abrController:C,dashMetrics:O,playbackController:N,timelineConverter:A,dashConstants:ye.Z,events:Ge.Z,eventBus:_,errors:Ke,isDynamic:a,adapter:w,segmentsController:g}),(u=(r=b)?r!==Be.Z.TEXT||n?de(E).create({streamInfo:T,type:r,mediaPlayerModel:I,manifestModel:B,fragmentModel:R,errHandler:S,mediaController:Z,representationController:y,adapter:w,textController:D,abrController:C,playbackController:N,settings:M}):fe(E).create({streamInfo:T,type:r,mimeType:U,fragmentModel:R,textController:D,errHandler:S,settings:M}):(S.error(new Ye.Z(Ke.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ke.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&u.initialize(e),(c=Ie(E).create({streamInfo:T,type:b,mimeType:U,adapter:w,dashMetrics:O,mediaPlayerModel:I,fragmentModel:R,abrController:C,playbackController:N,textController:D,mediaController:Z,bufferController:u,representationController:y,settings:M})).initialize(t),m=0,f=d=!1},getStreamId:G,getType:e,isUpdating:function(){return!!y&&y.isUpdating()},getBufferController:function(){return u},dischargePreBuffer:function(){u.dischargePreBuffer()},getFragmentModel:function(){return R},getScheduleController:t,getRepresentationController:function(){return y},getRepresentationInfo:x,getBufferLevel:function(){return u?u.getBufferLevel():0},isBufferingCompleted:ae,createBufferSinks:function(e){var t=ie();return t?Promise.resolve(t):u?u.createBufferSink(l,e):Promise.resolve(null)},updateStreamInfo:function(e){return T=e,ae()?Promise.resolve():u.updateAppendWindow()},getStreamInfo:function(){return T},selectMediaInfo:oe,clearMediaInfoArray:function(){n=[]},addMediaInfo:function(e){-1===n.indexOf(e)&&n.push(e)},prepareTrackSwitch:function(){return new Promise(function(e){s.debug("Preparing track switch for type ".concat(b));var t=b===Be.Z.TEXT||M.get().streaming.trackSwitchMode[b]===Be.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&N.getTimeToStreamEnd(T)>M.get().streaming.buffer.stallThreshold;u.getIsBufferingCompleted()&&!t?(u.prepareForNonReplacementTrackSwitch(l.codec).then(function(){_.trigger(Ge.Z.BUFFERING_COMPLETED,{},{streamId:T.id,mediaType:b})}).catch(function(){_.trigger(Ge.Z.BUFFERING_COMPLETED,{},{streamId:T.id,mediaType:b})}),e()):(c.clearScheduleTimer(),c.setSwitchTrack(!0),t?(_.trigger(Ge.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:b,streamId:T.id},{mediaType:b,streamId:T.id}),R.abortRequests(),u.prepareForReplacementTrackSwitch(l.codec).then(function(){var e=x();return u.updateBufferTimestampOffset(e)}).then(function(){k(),e()}).catch(function(){k(),e()})):u.prepareForNonReplacementTrackSwitch(l.codec).then(function(){ue(),e()}).catch(function(){ue(),e()}))})},prepareQualityChange:function(e){v&&s.warn("Canceling queued representation switch to ".concat(v.quality," for ").concat(b)),s.debug("Preparing quality switch for type ".concat(b));var t,n,r,i,o,a=e.newQuality,a=(p=!0,c.clearScheduleTimer(),y.prepareQualityChange(a),x(a));e.reason&&e.reason.forceReplace?(o=a,R.abortRequests(),_.trigger(Ge.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:b,streamId:T.id},{mediaType:b,streamId:T.id}),c.setCheckPlaybackQuality(!1),u.prepareForForceReplacementQualitySwitch(o).then(function(){k(),v=null,p=!1}).catch(function(){k(),v=null,p=!1})):e&&e.reason&&e.reason.forceAbandon?u.updateBufferTimestampOffset(a).then(function(){R.abortRequests(),f=!0,c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),p=!1,v=null}).catch(function(){v=null,p=!1}):M.get().streaming.buffer.fastSwitchEnabled?(o=a,r=N.getTime(),i=1.5*(isNaN(o.fragmentDuration)?1:o.fragmentDuration),(e=R.getRequests({state:pe.FRAGMENT_MODEL_EXECUTED,time:r+i,threshold:0})[0])&&!j()&&(t=u.getBufferLevel(),n=C.getAbandonmentStateFor(T.id,b),e.quality<o.quality)&&i<=t&&n!==Ze.Z.ABANDON_LOAD?u.updateBufferTimestampOffset(o).then(function(){R.abortRequests(),F(r+i),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),p=!1}).catch(function(){p=!1}):Q(o)):Q(a),O.pushPlayListTraceMetrics(new Date,ze.REPRESENTATION_SWITCH_STOP_REASON),O.createPlaylistTraceMetrics(a.id,1e3*N.getTime(),N.getPlaybackRate())},getMediaInfo:function(){return l},getMediaSource:function(){return u.getMediaSource()},setMediaSource:function(e){return u.setMediaSource(e,l)},getBuffer:ie,setExplicitBufferingTime:F,finalisePlayList:function(e,t){O.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=x(),e=y&&e?y.getRepresentationForQuality(e.quality):null;return h.getNextSegmentRequestIdempotent(l,e)},prepareInnerPeriodPlaybackSeeking:function(r){return new Promise(function(n){u.hasBufferAtTime(r.seekTime)?(u.pruneBuffer(),Y(u.getContinuousBufferTimeForTargetTime(r.seekTime))&&u.setIsBufferingCompleted(!0),n()):(c.clearScheduleTimer(),R.abortRequests(),u.prepareForPlaybackSeek().then(function(){var e=u.getAllRangesWithSafetyFactor(r.seekTime);return u.clearBuffers(e)}).then(function(){var e,t=u.getContinuousBufferTimeForTargetTime(r.seekTime);Y(t)?(u.setIsBufferingCompleted(!0),n()):(F(t=isNaN(t)?r.seekTime:t),u.setSeekTarget(t),(t=[]).push(u.updateAppendWindow()),e=x(),t.push(u.updateBufferTimestampOffset(e)),Promise.all(t).then(function(){c.setInitSegmentRequired(!0),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),n()}))}).catch(function(e){s.error(e)}))})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(e,t){try{c.clearScheduleTimer(),R.abortRequests(),u.prepareForPlaybackSeek().then(function(){return u.pruneAllSafely()}).then(function(){e()})}catch(e){t(e)}})},reset:function(e,t){h&&h.reset(),u&&(u.reset(e,t),u=null),c&&(c.reset(),c=null),y&&(y.reset(),y=null),g=g&&null,C&&C.unRegisterStreamType(G(),b),_.off(Ge.Z.DATA_UPDATE_COMPLETED,$,o),_.off(Ge.Z.INIT_FRAGMENT_NEEDED,K,o),_.off(Ge.Z.MEDIA_FRAGMENT_NEEDED,r,o),_.off(Ge.Z.INIT_FRAGMENT_LOADED,se,o),_.off(Ge.Z.MEDIA_FRAGMENT_LOADED,le,o),_.off(Ge.Z.BUFFER_LEVEL_STATE_CHANGED,z,o),_.off(Ge.Z.BUFFER_CLEARED,V,o),_.off(Ge.Z.SEEK_TARGET,ce,o),_.off(Ge.Z.FRAGMENT_LOADING_ABANDONED,J,o),_.off(Ge.Z.FRAGMENT_LOADING_COMPLETED,ee,o),_.off(Ge.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,te,o),_.off(Ge.Z.SET_NON_FRAGMENTED_TEXT,ne,o),_.off(Ge.Z.QUOTA_EXCEEDED,re,o),_.off(Ge.Z.SOURCE_BUFFER_ERROR,W,o),_.off(Ge.Z.BYTES_APPENDED_END_FRAGMENT,X,o),H(),T=b=null}},s=(0,je.Z)(E).getInstance().getLogger(o),H(),_.on(Ge.Z.DATA_UPDATE_COMPLETED,$,o,{priority:qe.Z.EVENT_PRIORITY_HIGH}),_.on(Ge.Z.INIT_FRAGMENT_NEEDED,K,o),_.on(Ge.Z.MEDIA_FRAGMENT_NEEDED,r,o),_.on(Ge.Z.INIT_FRAGMENT_LOADED,se,o),_.on(Ge.Z.MEDIA_FRAGMENT_LOADED,le,o),_.on(Ge.Z.BUFFER_LEVEL_STATE_CHANGED,z,o),_.on(Ge.Z.BUFFER_CLEARED,V,o),_.on(Ge.Z.SEEK_TARGET,ce,o),_.on(Ge.Z.FRAGMENT_LOADING_ABANDONED,J,o),_.on(Ge.Z.FRAGMENT_LOADING_COMPLETED,ee,o),_.on(Ge.Z.QUOTA_EXCEEDED,re,o),_.on(Ge.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,te,o),_.on(Ge.Z.SET_NON_FRAGMENTED_TEXT,ne,o),_.on(Ge.Z.SOURCE_BUFFER_ERROR,W,o),_.on(Ge.Z.BYTES_APPENDED_END_FRAGMENT,X,o),o}P.__dashjs_factory_name="StreamProcessor";function L(){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}var ue=ve.Z.getClassFactory(P),q=t(9032);function x(e,t){var n;if(e)return"string"==typeof e?k(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){var I,t=this.context,a=(e=e||{}).requestModifier,R=e.lowLatencyThroughputModel,C=e.boxParser,s=(0,Ee.Z)(t).getInstance();function n(T){var e,t=new Date,b=T.request,n=new Headers;if(b.range&&n.append("Range","bytes="+b.range),T.headers)for(var r in T.headers){var i=T.headers[r];i&&n.append(r,i)}b.requestStartDate||(b.requestStartDate=t),a&&a.modifyRequestHeader&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}},{url:T.url}),"function"==typeof window.AbortController&&(e=new AbortController,(T.abortController=e).signal.onabort=T.onabort);var o={method:T.method,headers:n,credentials:T.withCredentials?"include":void 0,signal:e?e.signal:void 0},S=s.get().streaming.abr.fetchThroughputCalculationMode,A=Date.now(),w=0;new Promise(function(e){if(S===Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&R&&(w=R.getThroughputCapacityDelayMS(b,1e3*I.getCurrentBufferLevel(b.mediaType))))return setTimeout(e,w);e()}).then(function(){var _=Date.now();fetch(T.url,o).then(function(e){T.response||(T.response={}),T.response.status=e.status,T.response.statusText=e.statusText,T.response.responseURL=e.url,e.ok||T.onerror();var t,i="",n=function(e){var t,n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=x(e)))return t&&(e=t),n=0,{s:r=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(e.headers.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;i+=r+": "+e.headers.get(r)+"\r\n"}}catch(e){n.e(e)}finally{n.f()}if(T.response.responseHeaders=i,!e.body)return e.arrayBuffer().then(function(e){e={loaded:(T.response.response=e).byteLength,total:e.byteLength,stream:!1};T.progress(e),T.onload(),T.onend()});var o,a,s,l,u,c,d=parseInt(e.headers.get("Content-Length"),10),f=0,p=!1,h=new Uint8Array,g=0,m=(S===Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&R?(o=_,a=0,s=(l=function(e){if(Array.isArray(e))return e}(l=e.body.tee())||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(t.push(o.value),2!==t.length);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}}(l)||x(l,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],l=l[1],u=s.getReader(),c=[],u.read().then(function e(t){var n,r=t.value,t=t.done;if(a=Date.now(),r&&r.length&&(n=a-o,r=r.length,c.push({chunkDownloadTimeRelativeMS:a-_,chunkDownloadDurationMS:n,chunkBytes:r,kbps:Math.round(8*r/(n/1e3)),bufferLevel:I.getCurrentBufferLevel(b.mediaType)})),!t)return o=Date.now(),u.read().then(e);r=a-_,n=c.reduce(function(e,t){return e+t.chunkBytes},0),R.addMeasurement(b,r,c,A,w,i),T.progress({loaded:n,total:n,lengthComputable:!0,time:R.getEstimatedDownloadDurationMS(b),stream:!0})}),T.reader=l.getReader()):T.reader=e.body.getReader(),[]),y=[],v=[],E=!0;N(T,function e(t){var n,r,i,o=t.value;t.done?(h&&(S!==Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&(r=t=null,S===Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(t=function(n,r){try{var e=n.filter(function(e,t){return t<n.length-1}),t=r.filter(function(e,t){return t<r.length-1}),i=[];if(1<e.length){for(var o,a,s=0,l=0,u=0;u<e.length;u++)e[u]&&t[u]&&(1<(o=t[u].ts-e[u].ts)?(i.push(8*t[u].bytes/o),l=0):(0===l&&(l=e[u].ts,s=0),1<(a=t[u].ts-l)?(s+=t[u].bytes,i.push(8*s/a),l=0):s+=t[u].bytes));if(0<i.length)return i.reduce(function(e,t){return e+t},0)/i.length}return null}catch(n){return null}}(y,v))&&(r=8*f/t):S===Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(r=D(m,f)),T.progress({loaded:f,total:isNaN(d)?f:d,lengthComputable:!0,time:r,stream:!0})),T.response.response=h.buffer),T.onload(),T.onend()):(o&&0<o.length&&(t=o,h=0===(r=h).length?t:((i=new Uint8Array(r.length+t.length)).set(r),i.set(t,r.length),i),f+=o.length,m.push({ts:Date.now(),bytes:o.length}),S===Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&E&&C.findLastTopIsoBoxCompleted(["moof"],h,g).found&&(E=!1,y.push({ts:performance.now(),bytes:o.length})),(t=C.findLastTopIsoBoxCompleted(["moov","mdat"],h,g)).found?(i=t.lastCompletedOffset+t.size,S!==Be.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||E||(E=!0,v.push({ts:performance.now(),bytes:h.length})),h=i===h.length?(n=h,new Uint8Array):(n=new Uint8Array(h.subarray(0,i)),h.subarray(i)),T.progress({data:n.buffer,lengthComputable:!1,noTrace:!0}),g=0):(g=t.lastCompletedOffset,p||(T.progress({lengthComputable:!1,noTrace:!0}),p=!0))),N(T,e))})}).catch(function(e){T.onerror&&T.onerror(e)})})}function N(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function D(n,t){try{var r,i;return 1<(n=n.filter(function(e){return e.bytes>t/4/n.length})).length?(r=0,i=(n[n.length-1].ts-n[0].ts)/n.length,n.forEach(function(e,t){var t=n[t+1];t&&(t=t.ts-e.ts,r+=t<i?t:0)}),r):null}catch(n){return null}}return{load:function(e){a&&a.modifyRequest?(0,be.k)(e,a).then(function(){return n(e)}):n(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:D,setup:function(e){I=e.dashMetrics}}}F.__dashjs_factory_name="FetchLoader";var G=ve.Z.getClassFactory(F),U=t(1180);function B(){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");this.period=null,this.index=-1,this.type=null}function j(){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null}function H(){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}function Y(){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function");this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}function i(e,t,n,r){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.url=e||"",this.serviceLocation=t||e||"",this.dvbPriority=n||1,this.dvbWeight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}function K(){if(!(this instanceof K))throw new TypeError("Cannot call a class as a function");this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}function $(){if(!(this instanceof $))throw new TypeError("Cannot call a class as a function");this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}function z(){if(!(this instanceof z))throw new TypeError("Cannot call a class as a function");this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}var V=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}for(var t=e.prototype,n=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==ye.Z.BASE_URL&&this.segmentInfoType!==ye.Z.SEGMENT_BASE&&!this.indexRange}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}(),_=(j.DEFAULT_ID="defaultId",j),W=t(2610),X=(i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,i);var r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri=null,this.value=null,this.id=null}for(var t=e.prototype,n=[{key:"init",value:function(e){return e&&(this.schemeIdUri=e.schemeIdUri||null,this.value=e.value||null,this.id=e.id||null,e[ye.Z.DVB_URL]&&(this.dvbUrl=e[ye.Z.DVB_URL]),e[ye.Z.DVB_MIMETYPE]&&(this.dvbMimeType=e[ye.Z.DVB_MIMETYPE]),e[ye.Z.DVB_FONTFAMILY])&&(this.dvbFontFamily=e[ye.Z.DVB_FONTFAMILY]),this}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}(),e=t(3101),Q=t.n(e);function J(){return{areEqual:function(e,t){return Q()(e,t)}}}J.__dashjs_factory_name="ObjectUtils";function ee(e,t){if(!(this instanceof ee))throw new TypeError("Cannot call a class as a function");this.url=e||"",this.serviceLocation=t||null,this.queryParams={}}function te(e,t,n){if(!(this instanceof te))throw new TypeError("Cannot call a class as a function");this.url=e||"",this.serviceLocation=t||null,this.ttl=n||NaN,this.queryParams={}}var ne=ve.Z.getSingletonFactory(J),re=t(7803);function ie(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function oe(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):ie(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function ae(e,t){var n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=se(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function se(e,t){var n;if(e)return"string"==typeof e?le(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(){var e,u,c,d,o=this.context,a=(0,Se.Z)(o).getInstance(),f=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var n=y(e.Representation_asArray[0]);if(n&&0<n.length&&0<=re.Y.indexOf(n[0].schemeIdUri))return t===Be.Z.IMAGE}if(e.ContentComponent_asArray&&0<e.ContentComponent_asArray.length){if(1<e.ContentComponent_asArray.length)return t===Be.Z.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var r=t===Be.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){n=e.Representation_asArray[0].codecs;if(r.test(n))return!0}if(e.hasOwnProperty(ye.Z.MIME_TYPE))return r.test(e.mimeType);if(e.Representation_asArray)for(var i,o=0;o<e.Representation_asArray.length;o++)if((i=e.Representation_asArray[o]).hasOwnProperty(ye.Z.MIME_TYPE))return r.test(i.mimeType);return!1}function p(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(ye.Z.SEGMENT_TEMPLATE)||e.hasOwnProperty(ye.Z.SEGMENT_TIMELINE)||e.hasOwnProperty(ye.Z.SEGMENT_LIST)||e.hasOwnProperty(ye.Z.SEGMENT_BASE))return!0;if(e.Representation_asArray&&0<e.Representation_asArray.length){e=e.Representation_asArray[0];if(e.hasOwnProperty(ye.Z.SEGMENT_TEMPLATE)||e.hasOwnProperty(ye.Z.SEGMENT_TIMELINE)||e.hasOwnProperty(ye.Z.SEGMENT_LIST)||e.hasOwnProperty(ye.Z.SEGMENT_BASE))return!0}return!1}function h(e){return s(e,Be.Z.TEXT)}function g(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function l(e,t){return e&&e.Period_asArray&&f(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function n(e){return e&&e.Period_asArray?e.Period_asArray:[]}function m(e){var t=!1;return t=e&&e.hasOwnProperty("type")?e.type===ye.Z.DYNAMIC:t}function y(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function i(e,t,n){var r,i=[];if(e)for(r=0;r<e.length;r++){var o=new K;if(o.timescale=1,o.representation=t,!e[r].hasOwnProperty(Be.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(ye.Z.TIMESCALE)&&(o.timescale=e[r].timescale),e[r].hasOwnProperty(ye.Z.VALUE)&&(o.value=e[r].value),i.push(o),o.period=n}return i}function v(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],o=!1;return e.some(function(e){var t,n;if(e)return t=new X,n=e.__text||e,a.isRelative(n)&&(o=!0,r.baseUri)&&(n=a.resolve(n,r.baseUri)),t.url=n,e.hasOwnProperty(ye.Z.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(ye.Z.DVB_PRIORITY)&&(t.dvbPriority=e[ye.Z.DVB_PRIORITY]),e.hasOwnProperty(ye.Z.DVB_WEIGHT)&&(t.dvbWeight=e[ye.Z.DVB_WEIGHT]),e.hasOwnProperty(ye.Z.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[ye.Z.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(ye.Z.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[ye.Z.AVAILABILITY_TIME_COMPLETE]),i.push(t),o}),i}function E(e){var t=new z;return t.serverUrl=e.__text,e.hasOwnProperty(ye.Z.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[ye.Z.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(ye.Z.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[ye.Z.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(ye.Z.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[ye.Z.CLIENT_REQUIREMENT].toLowerCase()),t}return e={getIsTypeOf:s,getIsText:h,getIsFragmented:p,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(ye.Z.PRODUCERREFERENCETIME_ASARRAY)?e[ye.Z.PRODUCERREFERENCETIME_ASARRAY]:[],n=((e&&e.hasOwnProperty(ye.Z.REPRESENTATION_ASARRAY)?e[ye.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(e){e.hasOwnProperty(ye.Z.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,function(e){if(Array.isArray(e))return le(e)}(e=e[ye.Z.PRODUCERREFERENCETIME_ASARRAY])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),[]);return t.forEach(function(e){var t=new $;e.hasOwnProperty(ye.Z.ID)&&(t[ye.Z.ID]=e[ye.Z.ID],e.hasOwnProperty(ye.Z.WALL_CLOCK_TIME))&&(t[ye.Z.WALL_CLOCK_TIME]=e[ye.Z.WALL_CLOCK_TIME],e.hasOwnProperty(ye.Z.PRESENTATION_TIME))&&(t[ye.Z.PRESENTATION_TIME]=e[ye.Z.PRESENTATION_TIME],e.hasOwnProperty(ye.Z.INBAND)&&(t[ye.Z.INBAND]="false"!==e[ye.Z.INBAND]),e.hasOwnProperty(ye.Z.TYPE)&&(t[ye.Z.TYPE]=e[ye.Z.TYPE]),n.push(t))}),n},getLanguageForAdaptation:function(e){var t="";return t=e&&e.hasOwnProperty(ye.Z.LANG)?e.lang:t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.VIEWPOINT_ASARRAY)&&e[ye.Z.VIEWPOINT_ASARRAY].length?e[ye.Z.VIEWPOINT_ASARRAY].map(function(e){return(new r).init(e)}):[]},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.ROLE_ASARRAY)&&e[ye.Z.ROLE_ASARRAY].length?e[ye.Z.ROLE_ASARRAY].map(function(e){return(new r).init(e)}):[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.ACCESSIBILITY_ASARRAY)&&e[ye.Z.ACCESSIBILITY_ASARRAY].length?e[ye.Z.ACCESSIBILITY_ASARRAY].map(function(e){return(new r).init(e)}):[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new r).init(e)}):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[ye.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new r).init(e)}):[]},getAdaptationForIndex:function(e,t,n){t=l(t,n);return 0<t.length&&f(e)?t[e]:null},getIndexForAdaptation:function(e,t,n){if(e)for(var r=l(t,n),i=0;i<r.length;i++)if(ne(o).getInstance().areEqual(r[i],e))return i;return-1},getAdaptationForId:function(e,t,n){for(var r=l(t,n),i=0,o=r.length;i<o;i++)if(r[i].hasOwnProperty(ye.Z.ID)&&r[i].id===e)return r[i];return null},getAdaptationsForType:function(e,t,n){for(var r=l(e,t),i=[],o=0,a=r.length;o<a;o++)s(r[o],n)&&i.push(g(r[o]));return i},getRealPeriods:n,getRealPeriodForIndex:function(e,t){t=n(t);return 0<t.length&&f(e)?t[e]:null},getCodec:function(e,t,n){var r=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&(t=f(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(r=t.mimeType+';codecs="'+t.codecs+'"',n)&&void 0!==t.width&&(r+=';width="'+t.width+'";height="'+t.height+'"'),r=r&&r.replace(/\sprofiles=[^;]*/g,"")},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(ye.Z.CENC_DEFAULT_KID)?e[ye.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(ye.Z.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:m,getId:function(e){return e&&e[ye.Z.ID]||null},hasProfile:function(e,t){var n=!1;return n=e&&e.profiles&&0<e.profiles.length?-1!==e.profiles.indexOf(t):n},getDuration:function(e){return e&&e.hasOwnProperty(ye.Z.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(ye.Z.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(ye.Z.PUBLISH_TIME)?new Date(e[ye.Z.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){e=g(e);return(e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&f(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,i=[],o=function(e){if(e&&e.period&&f(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&f(e.index))return g(t.AdaptationSet_asArray[e.index])}}(e);if(o&&o.Representation_asArray){e&&e.period&&f(e.period.index)&&(r=v(e.period.mpd.manifest))&&(n=r[0]);for(var a=0,s=o.Representation_asArray.length;a<s;++a){var l,u=o.Representation_asArray[a],c=new V;c.index=a,c.adaptation=e,u.hasOwnProperty(ye.Z.ID)&&(c.id=u.id),u.hasOwnProperty(ye.Z.CODECS)&&(c.codecs=u.codecs),u.hasOwnProperty(ye.Z.MIME_TYPE)&&(c.mimeType=u[ye.Z.MIME_TYPE]),u.hasOwnProperty(ye.Z.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=u.codecPrivateData),u.hasOwnProperty(ye.Z.BANDWITH)&&(c.bandwidth=u.bandwidth),u.hasOwnProperty(ye.Z.WIDTH)&&(c.width=u.width),u.hasOwnProperty(ye.Z.HEIGHT)&&(c.height=u.height),u.hasOwnProperty(ye.Z.SCAN_TYPE)&&(c.scanType=u.scanType),u.hasOwnProperty(ye.Z.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=u.maxPlayoutRate),u.hasOwnProperty(ye.Z.SEGMENT_BASE)?(t=u.SegmentBase,c.segmentInfoType=ye.Z.SEGMENT_BASE):u.hasOwnProperty(ye.Z.SEGMENT_LIST)?(t=u.SegmentList).hasOwnProperty(ye.Z.SEGMENT_TIMELINE)?c.segmentInfoType=ye.Z.SEGMENT_TIMELINE:c.segmentInfoType=ye.Z.SEGMENT_LIST:u.hasOwnProperty(ye.Z.SEGMENT_TEMPLATE)?((t=u.SegmentTemplate).hasOwnProperty(ye.Z.SEGMENT_TIMELINE)?c.segmentInfoType=ye.Z.SEGMENT_TIMELINE:c.segmentInfoType=ye.Z.SEGMENT_TEMPLATE,t.hasOwnProperty(ye.Z.INITIALIZATION_MINUS)&&(c.initialization=t.initialization.split("$Bandwidth$").join(u.bandwidth).split("$RepresentationID$").join(u.id))):c.segmentInfoType=ye.Z.BASE_URL,c.essentialProperties=y(u),t&&(t.hasOwnProperty(ye.Z.INITIALIZATION)?((l=t.Initialization).hasOwnProperty(ye.Z.SOURCE_URL)&&(c.initialization=l.sourceURL),l.hasOwnProperty(ye.Z.RANGE)&&(c.range=l.range)):h(o)&&p(o)&&o.mimeType&&-1===o.mimeType.indexOf("application/mp4")&&(c.range=0),t.hasOwnProperty(ye.Z.TIMESCALE)&&(c.timescale=t.timescale),t.hasOwnProperty(ye.Z.DURATION)?c.segmentDuration=t.duration/c.timescale:u.hasOwnProperty(ye.Z.SEGMENT_TEMPLATE)&&(t=u.SegmentTemplate).hasOwnProperty(ye.Z.SEGMENT_TIMELINE)&&(c.segmentDuration=(l=t.SegmentTimeline,u=void 0,(l&&l.S_asArray?(u=l.S_asArray[0],l=l.S_asArray[1],u.hasOwnProperty("d")?u.d:l.t-u.t):NaN)/c.timescale)),t.hasOwnProperty(ye.Z.MEDIA)&&(c.media=t.media),t.hasOwnProperty(ye.Z.START_NUMBER)&&(c.startNumber=t.startNumber),t.hasOwnProperty(ye.Z.INDEX_RANGE)&&(c.indexRange=t.indexRange),t.hasOwnProperty(ye.Z.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=t.presentationTimeOffset/c.timescale),t.hasOwnProperty(ye.Z.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=t.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(c.availabilityTimeOffset=n.availabilityTimeOffset),t.hasOwnProperty(ye.Z.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete="false"!==t.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(c.availabilityTimeComplete=n.availabilityTimeComplete)),c.MSETimeOffset=(u=c.presentationTimeOffset,c.adaptation.period.start-u),c.path=[e.period.index,e.index,a],i.push(c)}}return i},getAdaptationsForPeriod:function(e){var t,n,r,i=e&&f(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,o=[];if(i&&i.AdaptationSet_asArray)for(r=0;r<i.AdaptationSet_asArray.length;r++)n=i.AdaptationSet_asArray[r],t=new B,n.hasOwnProperty(ye.Z.ID)&&(t.id=n.id),t.index=r,t.period=e,s(n,Be.Z.MUXED)?t.type=Be.Z.MUXED:s(n,Be.Z.AUDIO)?t.type=Be.Z.AUDIO:s(n,Be.Z.VIDEO)?t.type=Be.Z.VIDEO:h(n)?t.type=Be.Z.TEXT:s(n,Be.Z.IMAGE)?t.type=Be.Z.IMAGE:u.warn("Unknown Adaptation stream type"),o.push(t);return o},getRegularPeriods:function(e){for(var t=!!e&&m(e.manifest),n=[],r=null,i=null,o=null,a=null,s=0,l=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<l;s++)(i=e.manifest.Period_asArray[s]).hasOwnProperty(ye.Z.START)?(a=new _).start=i.start:null!==r&&r.hasOwnProperty(ye.Z.DURATION)&&null!==o?(a=new _).start=parseFloat((o.start+o.duration).toFixed(5)):0!==s||t||((a=new _).start=0),null!==o&&isNaN(o.duration)&&(null!==a?o.duration=parseFloat((a.start-o.start).toFixed(5)):u.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==a&&(a.id=function(e,t){if(e)return t=_.DEFAULT_ID+"_"+t,e.hasOwnProperty(ye.Z.ID)&&0<e.id.length&&"__proto__"!==e.id?e.id:t;throw new Error("Period cannot be null or undefined")}(i,s),a.index=s,a.mpd=e,i.hasOwnProperty(ye.Z.DURATION)&&(a.duration=i.duration),o&&(o.nextPeriodId=a.id),n.push(a),r=i,o=a),a=i=null;return 0!==n.length&&null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((function(e){var t,n;if(c&&c.hasOwnProperty("error"))return n=m(e.mpd.manifest),e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:n?t=Number.POSITIVE_INFINITY:c.error(new Ye.Z(Ke.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t;throw new Error(Be.Z.MISSING_CONFIG_ERROR)}(o)-o.start).toFixed(5))),n},getMpd:function(e){var t=new H;return e&&((t.manifest=e).hasOwnProperty(ye.Z.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(ye.Z.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(ye.Z.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(ye.Z.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(ye.Z.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(ye.Z.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(ye.Z.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(ye.Z.PUBLISH_TIME))&&(t.publishTime=new Date(e.publishTime)),t},getEventsForPeriod:function(e){var t,n,r=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,r=r?r.Period_asArray:null,i=r&&e&&f(e.index)?r[e.index].EventStream_asArray:null,o=[];if(i)for(t=0;t<i.length;t++){var a=new K;if(a.period=e,a.timescale=1,!i[t].hasOwnProperty(Be.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(a.schemeIdUri=i[t][Be.Z.SCHEME_ID_URI],i[t].hasOwnProperty(ye.Z.TIMESCALE)&&(a.timescale=i[t][ye.Z.TIMESCALE]),i[t].hasOwnProperty(ye.Z.VALUE)&&(a.value=i[t][ye.Z.VALUE]),i[t].hasOwnProperty(ye.Z.PRESENTATION_TIME_OFFSET)&&(a.presentationTimeOffset=i[t][ye.Z.PRESENTATION_TIME_OFFSET]),n=0;i[t].Event_asArray&&n<i[t].Event_asArray.length;n++){var s=i[t].Event_asArray[n],l=new Y,u=(l.presentationTime=0,l.eventStream=a,s.hasOwnProperty(ye.Z.PRESENTATION_TIME)&&(l.presentationTime=s.presentationTime),a.presentationTimeOffset?a.presentationTimeOffset/a.timescale:0);l.calculatedPresentationTime=l.presentationTime/a.timescale+e.start-u,s.hasOwnProperty(ye.Z.DURATION)&&(l.duration=s.duration/a.timescale),s.hasOwnProperty(ye.Z.ID)?l.id=s.id:l.id=null,s.Signal&&s.Signal.Binary?l.messageData=d.decodeArray(s.Signal.Binary.toString()):l.messageData=s.messageData||s.__cdata||s.__text,o.push(l)}}return o},getEssentialPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(ye.Z.ESSENTIAL_PROPERTY_ASARRAY)){var n,r=ae(e.EssentialProperty_asArray);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty(Be.Z.SCHEME_ID_URI)&&(t[i[Be.Z.SCHEME_ID_URI]]=oe({},i))}}catch(e){r.e(e)}finally{r.f()}}return t},getEssentialPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.ESSENTIAL_PROPERTY_ASARRAY)&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return(new r).init(e)}):[]},getEssentialPropertiesForRepresentation:y,getEventStreamForAdaptationSet:function(e,t,n){var r;return i(r=e&&e.Period_asArray&&t&&t.period&&f(t.period.index)&&(e=e.Period_asArray[t.period.index])&&e.AdaptationSet_asArray&&f(t.index)&&(e=e.AdaptationSet_asArray[t.index])?e.InbandEventStream_asArray:r,null,n)},getEventStreamForRepresentation:function(e,t,n){var r;return i(r=e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&f(t.adaptation.period.index)&&(e=e.Period_asArray[t.adaptation.period.index])&&e.AdaptationSet_asArray&&f(t.adaptation.index)&&(e=e.AdaptationSet_asArray[t.adaptation.index])&&e.Representation_asArray&&f(t.index)&&(e=e.Representation_asArray[t.index])?e.InbandEventStream_asArray:r,t,n)},getUTCTimingSources:function(e){var t=m(e),n=!!e&&e.hasOwnProperty(ye.Z.AVAILABILITY_START_TIME),e=e?e.UTCTiming_asArray:null,r=[];return(t||n)&&e&&e.forEach(function(e){var t=new W.Z;e.hasOwnProperty(Be.Z.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(ye.Z.VALUE))&&(t.value=e.value.toString(),r.push(t))}),r},getBaseURLsFromElement:v,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getContentSteering:function(e){if(e&&e.hasOwnProperty(ye.Z.CONTENT_STEERING_AS_ARRAY))return E(e[ye.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(e){return e&&e.hasOwnProperty(ye.Z.LOCATION_AS_ARRAY)?e[ye.Z.LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,e=e.hasOwnProperty(ye.Z.SERVICE_LOCATION)?e[ye.Z.SERVICE_LOCATION]:null;return new ee(t,e)}):[]},getPatchLocation:function(e){return e&&e.hasOwnProperty(ye.Z.PATCH_LOCATION_AS_ARRAY)?e[ye.Z.PATCH_LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,n=e.hasOwnProperty(ye.Z.SERVICE_LOCATION)?e[ye.Z.SERVICE_LOCATION]:null,e=e.hasOwnProperty(ye.Z.TTL)?1e3*parseFloat(e[ye.Z.TTL]):NaN;return new te(t,n,e)}):[]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(ye.Z.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(ye.Z.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(ye.Z.SERVICE_DESCRIPTION)){var n,r=ae(e.ServiceDescription_asArray);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=null,s=null,l=null,u=null,c=null,d=null,f=null;for(i in o)o.hasOwnProperty(i)&&(i===ye.Z.ID?a=o[i]:i===ye.Z.SERVICE_DESCRIPTION_SCOPE?s=o[i].schemeIdUri:i===ye.Z.SERVICE_DESCRIPTION_LATENCY?l={target:parseInt(o[i].target),max:parseInt(o[i].max),min:parseInt(o[i].min),referenceId:parseInt(o[i].referenceId)}:i===ye.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?u={max:parseFloat(o[i].max),min:parseFloat(o[i].min)}:i===ye.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?c={mediaType:o[i].mediaType,max:parseInt(o[i].max),min:parseInt(o[i].min),target:parseInt(o[i].target),type:o[i].type,maxQualityDifference:parseInt(o[i].maxQualityDifference)}:i===ye.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?d={mediaType:o[i].mediaType,max:parseInt(o[i].max),min:parseInt(o[i].min),target:parseInt(o[i].target)}:i===ye.Z.CONTENT_STEERING&&(f=E(o[i])));t.push({id:a,schemeIdUri:s,latency:l,playbackRate:u,operatingQuality:c,operatingBandwidth:d,contentSteering:f})}}catch(e){r.e(e)}finally{r.f()}}return t},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(ye.Z.SEGMENT_ALIGNMENT))&&"true"===e[ye.Z.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(ye.Z.SUB_SEGMENT_ALIGNMENT))&&"true"===e[ye.Z.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(ye.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,r=ae(e.SupplementalProperty_asArray);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty(Be.Z.SCHEME_ID_URI)&&(t[i[Be.Z.SCHEME_ID_URI]]=oe({},i))}}catch(e){r.e(e)}finally{r.f()}}return t},getSupplementalPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(ye.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new r).init(e)}):[]},getSupplementalPropertiesForRepresentation:function(e){var t={};if(e&&e.hasOwnProperty(ye.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,r=ae(e.SupplementalProperty_asArray);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty(Be.Z.SCHEME_ID_URI)&&(t[i[Be.Z.SCHEME_ID_URI]]=oe({},i))}}catch(e){r.e(e)}finally{r.f()}}return t},getSupplementalPropertiesAsArrayForRepresentation:function(e){return e&&e.hasOwnProperty(ye.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new r).init(e)}):[]},setConfig:function(e){e&&(e.errHandler&&(c=e.errHandler),e.BASE64)&&(d=e.BASE64)}},u=(0,je.Z)(o).getInstance().getLogger(e),e}ce.__dashjs_factory_name="DashManifestModel";var Oe=ve.Z.getSingletonFactory(ce),Z=t(703);function Me(e,t){var n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e){var t;if(e)return"string"==typeof e?Pe(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pe(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(){var r,e,v,E,_,T,b,S,A,w,t=this.context,s=(0,qe.Z)(t).getInstance(),I=(0,Ee.Z)(t).getInstance();function n(){v={pr:1,nor:null,st:null,sf:null,sid:"".concat(Z.Z.generateUuid()),cid:null},A={},S={},w={},o()}function i(){o()}function o(){var e;T&&(e=T.getStreamController())&&"function"==typeof e.getActiveStream&&(e=e.getActiveStream())&&(b=e.getProcessors())}function l(e,t){var n,r={},i=Me(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e[o]&&(r[o]=e[o])}}catch(e){i.e(e)}finally{i.f()}return r}function u(e){var t=I.get().streaming.cmcd.enabledKeys;return e.filter(function(e){return t.includes(e)})}function c(e){try{return e.type===_e.w.MPD_TYPE?((y=R()).ot="m",y):e.type===_e.w.MEDIA_SEGMENT_TYPE?(m=e.mediaType,w.hasOwnProperty(m)||(w[m]=!1),S.hasOwnProperty(m)||(S[m]=!1),A.hasOwnProperty(m)||(A[m]=!1),i=e,a=R(),s=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(i),l=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(e){return null}}(i),u=function(e){try{return 100*parseInt(E.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(i.mediaType),c=function(e){try{var t=v.pr,n=_.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(e){return null}}(i.mediaType),d=C(i.mediaType),f=function(e){try{var t=E.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(i.mediaType),p=v.pr,h=function(e){if(b&&0!==b.length){var t,n=Me(b);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.getType()===e)return r.probeNextRequest()}}catch(e){n.e(e)}finally{n.f()}}}(i.mediaType),i.mediaType===Be.Z.VIDEO&&(o="v"),i.mediaType===Be.Z.AUDIO&&(o="a"),i.mediaType===Be.Z.TEXT&&(o="application/mp4"===i.mediaInfo.mimeType?"tt":"c"),g=(g=I.get().streaming.cmcd.rtp)||function(e){try{var t,n,r,i=(i=T.getPlaybackRate())||1,o=e.quality,a=e.mediaType,s=e.mediaInfo,l=e.duration;return s?(0===(t=C(a))&&(t=500),n=s.bitrateList[o].bandwidth*l/1e3/(t/i/1e3),r=I.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(I.get().streaming.cmcd.rtpSafetyFactor)?I.get().streaming.cmcd.rtpSafetyFactor:5,100*(parseInt(n*r/100)+1)):NaN}catch(e){return NaN}}(i),isNaN(g)||(a.rtp=g),h&&(i.url!==h.url?a.nor=encodeURIComponent(Z.Z.getRelativeUrl(i.url,h.url)):h.range&&(a.nrr=h.range)),s&&(a.br=s),o&&(a.ot=o),isNaN(l)||(a.d=l),isNaN(u)||(a.mtp=u),isNaN(c)||(a.dl=c),isNaN(d)||(a.bl=d),isNaN(f)||(a.tb=f),isNaN(p)||1===p||(a.pr=p),A[i.mediaType]&&(a.bs=!0,A[i.mediaType]=!1),!S[i.mediaType]&&w[i.mediaType]||(a.su=!0,S[i.mediaType]=!1,w[i.mediaType]=!0),a):e.type===_e.w.INIT_SEGMENT_TYPE?((r=R()).ot="i",r.su=!0,r):e.type===_e.w.OTHER_TYPE||e.type===_e.w.XLINK_EXPANSION_TYPE?((n=R()).ot="o",n):e.type===_e.w.LICENSE?((t=R()).ot="k",t):null}catch(e){return null}var t,n,r,i,o,a,s,l,u,c,d,f,p,h,g,m,y}function R(){var e={},t=(I.get().streaming.cmcd.cid?I.get().streaming.cmcd:v).cid;return e.v=1,e.sid=(I.get().streaming.cmcd.sid?I.get().streaming.cmcd:v).sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(v.pr)||1===v.pr||null===v.pr||(e.pr=v.pr),v.st&&(e.st=v.st),v.sf&&(e.sf=v.sf),e}function C(e){try{var t=_.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function a(e){try{v.pr=e.playbackRate}catch(e){}}function d(e){try{var t=r.getIsDynamic(e.data)?"l":"v",n=e.protocol&&"MSS"===e.protocol?"s":"d";v.st="".concat(t),v.sf="".concat(n)}catch(e){}}function f(e){try{e.state&&e.mediaType&&e.state===He.Z.BUFFER_EMPTY&&(A[e.mediaType]||(A[e.mediaType]=!0),S[e.mediaType]||(S[e.mediaType]=!0))}catch(e){}}function p(){for(var e in A)A.hasOwnProperty(e)&&(A[e]=!0);for(var t in S)S.hasOwnProperty(t)&&(S[t]=!0)}function h(r){try{var e,i;return r?(e=Object.keys(r).sort(function(e,t){return e.localeCompare(t)}),i=e.length,e.reduce(function(e,t,n){return"v"===t&&1===r[t]||("string"==typeof r[t]&&"ot"!==t&&"sf"!==t&&"st"!==t?e+="".concat(t,"=").concat(JSON.stringify(r[t])):e+="".concat(t,"=").concat(r[t]),n<i-1&&(e+=",")),e},"").replace(/=true/g,"").replace(/,\s*$/,"")):null}catch(r){return null}}return e={getQueryParameter:function(e){try{var t,n;return I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled?(n=h(function(n){try{var t=I.get().streaming.cmcd.enabledKeys;return Object.keys(n).filter(function(e){return t.includes(e)}).reduce(function(e,t){return e[t]=n[t],e},{})}catch(t){return n}}(t=c(e))),s.trigger(U.Z.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}):null}catch(e){return null}},getHeaderParameters:function(e){try{var t,n,r,i,o,a;return I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled?(n=l(t=c(e),u(["br","d","ot","tb"])),r=l(t,u(["bl","dl","mtp","nor","nrr","su"])),i=l(t,u(["bs","rtp"])),o=l(t,u(["cid","pr","sf","sid","st","v"])),a={"CMCD-Object":h(n),"CMCD-Request":h(r),"CMCD-Status":h(i),"CMCD-Session":h(o)},s.trigger(U.Z.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:a}),a):null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(E=e.abrController),e.dashMetrics&&(_=e.dashMetrics),e.playbackController)&&(T=e.playbackController)},reset:function(){s.off(He.Z.PLAYBACK_RATE_CHANGED,a,this),s.off(He.Z.MANIFEST_LOADED,d,this),s.off(He.Z.BUFFER_LEVEL_STATE_CHANGED,f,e),s.off(He.Z.PLAYBACK_SEEKED,p,e),n()},initialize:function(){s.on(He.Z.PLAYBACK_RATE_CHANGED,a,e),s.on(He.Z.MANIFEST_LOADED,d,e),s.on(He.Z.BUFFER_LEVEL_STATE_CHANGED,f,e),s.on(He.Z.PLAYBACK_SEEKED,p,e),s.on(He.Z.PERIOD_SWITCH_COMPLETED,i,e)}},r=Oe(t).getInstance(),n(),e}Le.__dashjs_factory_name="CmcdModel";var xe=ve.Z.getSingletonFactory(Le);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){Fe=function(e,t){return new n(e,void 0,t)};var r=Ue(RegExp),i=RegExp.prototype,o=new WeakMap;function n(e,t,n){t=r.call(this,e,t);return o.set(t,n||o.get(e)),t}function a(n,e){var r=o.get(e);return Object.keys(r).reduce(function(e,t){return e[t]=n[r[t]],e},Object.create(null))}var s=n,l=r;if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");return s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Qe(s,l),n.prototype.exec=function(e){e=i.exec.call(this,e);return e&&(e.groups=a(e,this)),e},n.prototype[Symbol.replace]=function(e,t){var n,r;return"string"==typeof t?(n=o.get(this),i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))):"function"==typeof t?(r=this,i[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==ke(e[e.length-1])&&e.push(a(e,r)),t.apply(this,e)})):i[Symbol.replace].call(this,e,t)},Fe.apply(this,arguments)}function Ue(e){var n="function"==typeof Map?new Map:void 0;return(Ue=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Xe(e,arguments,Je(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Qe(t,e)})(e)}function Xe(e,t,n){return(Xe=function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}()?Reflect.construct:function(e,t,n){var r=[null],t=(r.push.apply(r,t),new(Function.bind.apply(e,r)));return n&&Qe(t,n.prototype),t}).apply(null,arguments)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et="dynamic",tt="stream",nt=["mb","st","sf","v"],rt={video:"v",audio:"a",text:"tt",stream:tt},it=/^[-0-9]/;function ot(){var e,u,c,d,t=this.context,f=(0,qe.Z)(t).getInstance();function n(){c={},d={}}function p(t){t&&Object.keys(t).forEach(function(e){nt.includes(e)||delete t[e]})}function h(e){return!e||"false"!==e.toLowerCase()&&(it.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function g(e){return rt[e]||"o"}function r(e,t,n){e="static"===e?c:d,t=e[t]||{},e=e[tt]||{};return t[n]||e[n]}return e={setConfig:function(){},initialize:function(){},reset:function(){n()},parseResponseHeaders:function(e,t){for(var n=null,r=null,i=e.split("\r\n"),o=i.length-1;0<=o;o--){var a=i[o].match(Fe(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(a&&a.groups){var s=a.groups.key.toLowerCase(),l=a.groups.value;switch(s){case"cmsd-static":n=function(e){try{for(var t={},n=e.split(","),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],a=h(i[1]);t[o]=a}return t}catch(e){u.error("Failed to parse CMSD-Static response header value:",e)}}(l),f.trigger(Ge.Z.CMSD_STATIC_HEADER,n);break;case"cmsd-dynamic":r=r||function(e){try{for(var t={},n=e.split(","),r=n[n.length-1].split(";"),i=1;i<r.length;i++){var o=r[i].split("="),a=o[0],s=h(o[1]);t[a]=s}return t}catch(e){return u.error("Failed to parse CMSD-Dynamic response header value:",e),[]}}(l)}}}e=tt;return n&&n.ot?e=n.ot:t&&(e=g(t)),p(c[e]),p(d[e]),n&&(c[e]=Object.assign(c[e]||{},n)),r&&(d[e]=Object.assign(d[e]||{},r)),{static:n,dynamic:r}},getMaxBitrate:function(e){e=g(e);return r(et,e,"mb")||-1},getEstimatedThroughput:function(e){e=g(e);return r(et,e,"etp")||null},getResponseDelay:function(e){e=g(e);return r(et,e,"rd")||null},getRoundTripTime:function(e){e=g(e);return r(et,e,"rtt")||null}},u=(0,je.Z)(t).getInstance().getLogger(e),n(),e}ot.__dashjs_factory_name="CmsdModel";var at=ve.Z.getSingletonFactory(ot);function st(){var e,c,t=this.context,d={};function n(){c=(0,je.Z)(t).getInstance().getLogger(e)}function f(e){var t,n=!0,r=e.reduce(function(e,t){return e+t.bufferLevelAtSegmentEnd},0)/e.length;return e.forEach(function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(n=!1),e.bufferLevelAtSegmentEnd/r<.8&&(n=!1),t?t>e.bitrate&&(n=!1):t=e.bitrate}),n}return e={setup:n,addMeasurement:function(t,e,n,r,i){t&&t.mediaType&&!d[t.mediaType]&&(d[t.mediaType]=[]);var o=t.mediaInfo.bitrateList.find(function(e){return e.id===t.representationId});d[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:r,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:n.reduce(function(e,t){return e+t.chunkDownloadDurationMS},0),segmentBytes:n.reduce(function(e,t){return e+t.chunkBytes},0),bitrate:o&&o.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:e,throughputCapacityDelayMS:i,getEstimatedBufferLevel:function(e){for(var t={},n=0,r=0,i=0,o=0,a=e.length,s=0;s<a;++s)n+=e[s].chunkDownloadTimeRelativeMS,r+=e[s].bufferLevel,i+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,o+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(i-n*r/a)/(o-n*n/a),t.b=r/a-t.m*n/a,function(e){return t.m*e+t.b}}(n.slice(1))}),10<d[t.mediaType].length&&d[t.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){e=d[e.mediaType]&&d[e.mediaType].slice(-3);return e&&!(e.length<3)&&f(e)?250<t/4?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var t=d[e.mediaType].slice(-1).pop(),e=d[e.mediaType].slice(-3),n=t.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS,n=(t.bufferLevelAtSegmentStart=t.getEstimatedBufferLevel(n/2),t.bufferLevelAtSegmentEnd=t.getEstimatedBufferLevel(n),f(e)),e=n?.6:.8;if(t.isBufferStable&&1.05*t.segDurationMS<t.fetchDownloadDurationMS)return t.fetchDownloadDurationMS;if(!n||t.segDurationMS<t.fetchDownloadDurationMS)return.8*t.fetchDownloadDurationMS;if(t.adjustedAvailabilityStartTimeMS<=t.requestTimeMS+t.throughputCapacityDelayMS-t.segDurationMS)return.8*t.fetchDownloadDurationMS;for(var r,i=t.requestTimeMS+t.throughputCapacityDelayMS-t.adjustedAvailabilityStartTimeMS,o=0,a=0,s=0,l=0;l<t.chunkMeasurements.length;l++){var u=t.chunkMeasurements[l];if(i<a+u.chunkDownloadDurationMS)break;a+=u.chunkDownloadDurationMS,o+=u.chunkBytes,s++}return i<0&&c.warn("request time was before adjusted availibitly start time"),o&&a&&s>.2*t.chunkMeasurements.length?(n=t.segmentBytes/(o/a),t.fetchDownloadDurationMS<n?t.fetchDownloadDurationMS*e:n*e):(r=t.bitrate,t.bitrateList.some(function(e){if(e.bandwidth>t.bitrate)return r=e.bandwidth,!0}),r===t.bitrate?t.fetchDownloadDurationMS*e:e*t.segmentBytes*8*1e3/r)}},n(),e}st.__dashjs_factory_name="LowLatencyThroughputModel";var lt=ve.Z.getSingletonFactory(st),ut=t(5717);function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function ct(e){var T,b,S,A,w,I,R,C,N,t,D=this.context,O=(e=e||{}).errHandler,M=e.dashMetrics,P=e.mediaPlayerModel,L=e.requestModifier,x=e.boxParser,n=e.errors,k=e.requestTimeout||0,F=(0,qe.Z)(D).getInstance(),U=(0,Ee.Z)(D).getInstance();function B(n,t){var o,a=n.request,s=[],r=!0,i=!0,l=new Date,u=l,c=0,d=null,f=null;if(!L||!M||!O)throw new Error("config object is not correct or missing");function p(e){a.requestStartDate=l,a.requestEndDate=new Date,a.firstByteDate=a.firstByteDate||l,a.fileLoaderType=f;var t=o.response?o.response.responseURL:null,n=o.response?o.response.status:null,r=o.response&&o.response.getAllResponseHeaders?o.response.getAllResponseHeaders():o.response?o.response.responseHeaders:null,i=r&&U.get().streaming.cmsd&&U.get().streaming.cmsd.enabled?I.parseResponseHeaders(r,a.mediaType):null;M.addHttpRequest(a,t,n,r,e?s:null,i)}function h(e){i=!1,p(e),a.type===_e.w.MPD_TYPE&&(M.addManifestUpdate(a),F.trigger(Ge.Z.MANIFEST_LOADING_FINISHED,{request:a}))}function g(){if(d&&(clearTimeout(d),d=null),-1!==T.indexOf(o)&&(T.splice(T.indexOf(o),1),i))if(h(!1),0<t){try{U.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&a.type===_e.w.MEDIA_SEGMENT_TYPE&&P.getRetryAttemptsForType(_e.w.MEDIA_SEGMENT_TYPE)===t&&F.trigger(Ge.Z.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var e={config:n};S.push(e),e.timeout=setTimeout(function(){-1!==S.indexOf(e)&&(S.splice(S.indexOf(e),1),B(n,t))},P.getRetryIntervalsForType(a.type))}else a.type!==_e.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(O.error(new Ye.Z(A[a.type],a.url+" is not available",{request:a,response:o.response})),n.error&&n.error(a,"error",o.response.statusText,o.response),n.complete)&&n.complete(a,o.response.statusText)}var e,m,f=a.hasOwnProperty("availabilityTimeComplete")&&!1===a.availabilityTimeComplete&&window.fetch&&"arraybuffer"===a.responseType&&a.type===_e.w.MEDIA_SEGMENT_TYPE?((e=G(D).create({requestModifier:L,lowLatencyThroughputModel:C,boxParser:x})).setup({dashMetrics:M}),Be.Z.FILE_LOADER_TYPES.FETCH):(e=(0,q.Z)(D).create({requestModifier:L}),Be.Z.FILE_LOADER_TYPES.XHR),y=null,v=L.modifyRequestURL?L.modifyRequestURL(a.url):a.url,E=(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled&&((_=U.get().streaming.cmcd.mode)===Be.Z.CMCD_MODE_QUERY?(E=function(e){try{var t=[],n=w.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(a),v=Z.Z.addAditionalQueryParameterToUrl(v,E)):_===Be.Z.CMCD_MODE_HEADER&&(y=w.getHeaderParameters(a))),R.getXHRWithCredentialsForType(a.type)),_=(a.queryParams&&(_=Object.keys(a.queryParams).map(function(e){return{key:e,value:a.queryParams[e]}}),v=Z.Z.addAditionalQueryParameterToUrl(v,_)),a.url=v,o={url:v,method:_e.w.GET,withCredentials:E,request:a,onload:function(){200<=o.response.status&&o.response.status<=299&&(h(!0),n.success&&n.success(o.response.response,o.response.statusText,o.response.responseURL),n.complete)&&n.complete(a,o.response.statusText)},onend:g,onerror:g,progress:function(e){var t=new Date;r&&(r=!1,!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(a.firstByteDate=t),e.lengthComputable&&(a.bytesLoaded=e.loaded,a.bytesTotal=e.total),e.noTrace||(s.push({s:u,d:e.time||t.getTime()-u.getTime(),b:[e.loaded?e.loaded-c:0]}),u=t,c=e.loaded),d&&(clearTimeout(d),d=null),0<U.get().streaming.fragmentRequestProgressTimeout&&(d=setTimeout(function(){N.warn("Abort request "+o.url+" due to progress timeout"),o.response.onabort=null,o.loader.abort(o),g()},U.get().streaming.fragmentRequestProgressTimeout)),n.progress&&e&&n.progress(e)},onabort:function(){p(!0),d&&(clearTimeout(d),d=null),n.abort&&n.abort(a)},ontimeout:function(e){var t;e=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",N.warn(e)},loader:e,timeout:k,headers:y},(new Date).getTime());isNaN(a.delayLoadingTime)||_>=a.delayLoadingTime?(T.push(o),e.load(o)):(m={httpRequest:o},b.push(m),m.delayTimeout=setTimeout(function(){if(-1!==b.indexOf(m)){b.splice(b.indexOf(m),1);try{l=new Date,u=l,T.push(m.httpRequest),e.load(m.httpRequest)}catch(e){m.httpRequest.onerror()}}},a.delayLoadingTime-_))}return e={load:function(e){e.request?B(e,P.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){S.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),S=[],b.forEach(function(e){return clearTimeout(e.delayTimeout)}),b=[],T.forEach(function(e){e.request.type!==_e.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),T=[]}},N=(0,je.Z)(D).getInstance().getLogger(e),T=[],b=[],S=[],w=xe(D).getInstance(),I=at(D).getInstance(),C=lt(D).getInstance(),R=(0,ut.Z)(D).getInstance(),o(t={},_e.w.MPD_TYPE,n.DOWNLOAD_ERROR_ID_MANIFEST_CODE),o(t,_e.w.XLINK_EXPANSION_TYPE,n.DOWNLOAD_ERROR_ID_XLINK_CODE),o(t,_e.w.INIT_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),o(t,_e.w.MEDIA_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(t,_e.w.INDEX_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(t,_e.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),o(t,_e.w.OTHER_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),A=t,e}ct.__dashjs_factory_name="HTTPLoader";var dt=ve.Z.getClassFactory(ct);function ft(){var n;function e(){n={}}function t(){e()}return t(),{getLoader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&e.startsWith(t))return n[t];return dt},registerLoader:function(e,t){n[e]=t},unregisterLoader:function(e){n[e]&&delete n[e]},unregisterAllLoader:e,reset:t}}ft.__dashjs_factory_name="SchemeLoaderFactory";var pt=ve.Z.getSingletonFactory(ft);function ht(n){n=n||{};var r,i=this.context,o=pt(i).getInstance();return{load:function(e){var t;r||(t=o.getLoader(e&&e.request?e.request.url:null),r=t(i).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,dashMetrics:n.dashMetrics,boxParser:n.boxParser||null,constants:n.constants||null,dashConstants:n.dashConstants||null,urlUtils:n.urlUtils||null,requestTimeout:isNaN(n.requestTimeout)?0:n.requestTimeout,errors:n.errors})),r.load(e)},abort:function(){r&&r.abort()}}}ht.__dashjs_factory_name="URLLoader";var D=ve.Z.getClassFactory(ht);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vt=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=yt(n),t=(e=r?(e=yt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==gt(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(e){if(this instanceof o)return(e=i.call(this,e)).checkForExistenceOnly=!0,e;throw new TypeError("Cannot call a class as a function")}return o}(A.Z);function Et(e){var t=this.context,i=(e=e||{}).eventBus,o=e.events,n=e.urlUtils,a=e.errors,s=e.streamId,l={checkForExistence:function(t){function e(e){i.trigger(o.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})}var n;t?(n=new vt(t.url),u.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})):e(!1)},load:function(n){function r(e,t){i.trigger(o.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:l})}n?u.load({request:n,progress:function(e){i.trigger(o.LOADING_PROGRESS,{request:n,stream:e.stream,streamId:s}),e.data&&i.trigger(o.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:l})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new Ye.Z(a.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&i.trigger(o.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:l})}}):r(void 0,new Ye.Z(a.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,a.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){u&&u.abort()},reset:function(){u&&(u.abort(),u=null)}},u=D(t).create({errHandler:e.errHandler,errors:a,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:n,constants:Be.Z,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout});return l}Et.__dashjs_factory_name="FragmentLoader";var _t=ve.Z.getClassFactory(Et);function Tt(){return{modifyResponseAsync:function(e){return Promise.resolve(e)}}}Tt.__dashjs_factory_name="SegmentResponseModifier";var bt=ve.Z.getSingletonFactory(Tt);function St(n){n=n||{};var e,u,r,i=this.context,c=(0,qe.Z)(i).getInstance(),o=n.errHandler,a=n.mediaPlayerModel,s=n.dashMetrics,l=(0,je.Z)(i).getInstance(),d=bt(i).getInstance(),f=n.streamInfo;function p(){return f.id}function t(){for(var e in r)r[e].reset();r={}}function h(e){var t,n,r,i,o,a,s,l;e.sender&&(t=e.request,o=e.response,n=t.isInitializationRequest(),r=t.mediaInfo.streamInfo,e.error&&(t.mediaType===Be.Z.AUDIO||t.mediaType===Be.Z.VIDEO||t.mediaType===Be.Z.TEXT&&t.mediaInfo.isFragmented)&&c.trigger(Ge.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),o&&r?(o=o,a=t,s=f.id,e=e.type!==Ge.Z.FRAGMENT_LOADING_PROGRESS,(l=new L).streamId=s,l.mediaInfo=a.mediaInfo,l.segmentType=a.type,l.start=a.startTime,l.duration=a.duration,l.end=l.start+l.duration,l.bytes=o,l.index=a.index,l.quality=a.quality,l.representationId=a.representationId,l.endFragment=e,i=l,d.modifyResponseAsync(i).then(function(e){c.trigger(n?Ge.Z.INIT_FRAGMENT_LOADED:Ge.Z.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:r.id,mediaType:t.mediaType})}).catch(function(e){u.error(e),c.trigger(n?Ge.Z.INIT_FRAGMENT_LOADED:Ge.Z.MEDIA_FRAGMENT_LOADED,{chunk:i,request:t},{streamId:r.id,mediaType:t.mediaType})})):u.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return u=l.getLogger(e={getStreamId:p,getModel:function(e){var t=r[e];return t||(t=pe(i).create({streamInfo:f,type:e,dashMetrics:s,fragmentLoader:_t(i).create({dashMetrics:s,mediaPlayerModel:a,errHandler:o,requestModifier:(0,be.Z)(i).getInstance(),settings:n.settings,boxParser:n.boxParser,eventBus:c,events:Ge.Z,errors:Ke,dashConstants:n.dashConstants,urlUtils:n.urlUtils,streamId:p()}),debug:l,eventBus:c,events:Ge.Z}),r[e]=t),t},reset:function(){c.off(He.Z.FRAGMENT_LOADING_COMPLETED,h,this),c.off(He.Z.FRAGMENT_LOADING_PROGRESS,h,this),t()}}),t(),c.on(He.Z.FRAGMENT_LOADING_COMPLETED,h,e),c.on(He.Z.FRAGMENT_LOADING_PROGRESS,h,e),e}St.__dashjs_factory_name="FragmentController";function At(){if(!(this instanceof At))throw new TypeError("Cannot call a class as a function");this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}function wt(){if(!(this instanceof wt))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}var It=ve.Z.getClassFactory(St);function Rt(e){var t,a,n=this.context,r=e.streamInfo;function i(e){a.setTrackByIndex(e)}function o(){a&&a.reset()}return t={getStreamId:function(){return r.id},initialize:function(){a.addTracks();var e=a.getTracks();e&&0<e.length&&i(0)},provide:function(e,t){if("function"==typeof t){var n=a.getCurrentTrack();if(!n||n.segmentDuration<=0||null==e)t(null);else{(o=a.getThumbnailRequestForTime(e))&&(n.segmentDuration=o.duration);var r=e%n.segmentDuration,r=Math.floor(r*n.tilesHor*n.tilesVert/n.segmentDuration),i=new At;if(i.width=Math.floor(n.widthPerTile),i.height=Math.floor(n.heightPerTile),i.x=Math.floor(r%n.tilesHor)*n.widthPerTile,i.y=Math.floor(r/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(e,function(e){i.url=e,t(i)});o?(i.url=o.url,n.segmentDuration=NaN):(r=Math.floor(e/n.segmentDuration),i.url=(e=r+(o=n).startNumber,r=(0,N.vi)(o.templateUrl,"Number",e),r=(0,N.vi)(r,"Time",(e-1)*o.segmentDuration*o.timescale),r=(0,N.vi)(r,"Bandwidth",o.bandwidth),(0,N.eR)(r))),t(i)}}var o},setTrackByIndex:i,getCurrentTrackIndex:function(){return a.getCurrentTrackIndex()},getBitrateList:function(){var e=a.getTracks(),n=0;return e.map(function(e){var t=new wt;return t.mediaType=Be.Z.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:o},o(),a=(0,re.Z)(n).create({streamInfo:r,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}Rt.__dashjs_factory_name="ThumbnailController";var Ct=ve.Z.getClassFactory(Rt),Nt=t(7417);function Dt(e){e=e||{};var t,n=[],r=(0,qe.Z)(this.context).getInstance(),i=e.updateEventName,e=e.addBlacklistEventName;function o(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(i,{entry:e}))}return t={add:o,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},e&&r.on(e,function(e){o(e.entry)},t),t}Dt.__dashjs_factory_name="BlackListController";var Ot=ve.Z.getClassFactory(Dt),Mt=[Be.Z.VIDEO,Be.Z.AUDIO,Be.Z.TEXT,Be.Z.MUXED,Be.Z.IMAGE];function Pt(l){l=l||{};var t,u,c,a,o,s,d,f,p,h,g,m,y,i,v,E,n,_,T=this.context,b=(0,qe.Z)(T).getInstance(),e=(0,Se.Z)(T).getInstance(),S=l.manifestModel,F=l.mediaPlayerModel,U=l.dashMetrics,B=l.manifestUpdater,A=l.adapter,Z=l.timelineConverter,q=l.capabilities,w=l.errHandler,I=l.abrController,G=l.playbackController,R=l.eventController,C=l.mediaController,N=l.protectionController,D=l.textController,O=l.videoModel,M=l.streamInfo,j=l.settings;function H(o,e){return new Promise(function(n,t){J(),h=!0,ee();var r=O.getElement(),i=[];Mt.forEach(function(e){(e!==Be.Z.TEXT||o)&&(e!==Be.Z.VIDEO||!r||r&&/^VIDEO$/i.test(r.nodeName))&&i.push(Y(e,o))}),Promise.all(i).then(function(){return r=e,new Promise(function(t){var n={},e=c.map(function(e){return e.createBufferSinks(r)});Promise.all(e).then(function(e){e.forEach(function(e){e&&(n[e.getType()]=e)}),t(n)}).catch(function(){t(n)})});var r}).then(function(e){var t;h=!1,0===c.length?(w.error(new Ye.Z(Ke.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t="No streams to play.",S.getValue())),u.fatal(t)):P(),o&&D.createTracks(M),n(e)}).catch(function(e){t(e)})})}function Y(e,t){var n,r=A.getAllMediaInfoForType(M,e),i=[],o=null;if(!r||0===r.length)return u.info("No "+e+" data."),Promise.resolve();e===Be.Z.VIDEO&&(d=!0),e===Be.Z.AUDIO&&(f=!0);for(var a=0,s=r.length;a<s;a++)o=r[a],e===Be.Z.TEXT&&o.isEmbedded&&(D.addEmbeddedTrack(M,o),i.push(o)),K(o)&&C.addTrack(o);if(0<i.length&&(C.setInitialMediaSettingsForType(e,M),D.addMediaInfosToBuffer(M,e,i)),0===(r=r.filter(function(e){return!e.isEmbedded})).length)return Promise.resolve();if(e===Be.Z.IMAGE)return(m=Ct(T).create({streamInfo:M,adapter:A,baseURLController:l.baseURLController,timelineConverter:l.timelineConverter,debug:E,eventBus:b,events:Ge.Z,dashConstants:ye.Z,dashMetrics:l.dashMetrics,segmentBaseController:l.segmentBaseController})).initialize(),Promise.resolve();b.trigger(Ge.Z.STREAM_INITIALIZING,{streamInfo:M,mediaInfo:o}),C.setInitialMediaSettingsForType(e,M);t=function(e,t){var n=e&&0<e.length?e[0]:null,r=g.getModel(n?n.type:null),i=n?n.type:null,o=n?n.mimeType:null,n=n?n.isFragmented:null,a=ue(T).create({streamInfo:M,type:i,mimeType:o,timelineConverter:Z,adapter:A,manifestModel:S,mediaPlayerModel:F,fragmentModel:r,dashMetrics:l.dashMetrics,baseURLController:l.baseURLController,segmentBaseController:l.segmentBaseController,abrController:I,playbackController:G,mediaController:C,textController:D,errHandler:w,settings:j,boxParser:v,segmentBlacklistController:y});a.initialize(t,d,n),c.push(a);for(var s=0;s<e.length;s++)a.addMediaInfo(e[s]);return i===Be.Z.TEXT&&D.addMediaInfosToBuffer(M,i,e,r),a}(r,t);return(n=C.getCurrentTrackFor(e,M.id))?(I.updateTopQualityIndex(n),t.selectMediaInfo(e===Be.Z.TEXT&&n.isEmbedded?r[0]:n)):Promise.resolve()}function K(e){var t,n=e?e.type:null;return n===Be.Z.MUXED?(u.fatal(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),w.error(new Ye.Z(Ke.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,S.getValue())),0):n===Be.Z.TEXT||n===Be.Z.IMAGE||!e.contentProtection||q.supportsEncryptedMedia()||(w.error(new Ye.Z(Ke.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ke.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),0)}function $(e){for(var t=c?c.length:0,n=0;n<t;n++){var r=c[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),c[n].reset(!1,e)}D&&D.deactivateStream(M),k(s=o=!(c=[])),V(!1),b.trigger(Ge.Z.STREAM_DEACTIVATED,{streamInfo:M})}function z(e){$(e),f=d=a=!1,n=h=!(p={}),_=[]}function V(e){n=e}function W(){return M?M.start:NaN}function X(){return M?M.id:null}function Q(){return M}function J(){if(!O||!I)throw new Error(Be.Z.MISSING_CONFIG_ERROR)}function r(e){e.error&&(w.error(e.error),u.fatal(e.error.message))}function ee(){var e;R&&(e=A.getEventsFor(M))&&0<e.length&&R.addInlineEvents(e,M.id)}function P(){for(var e=c.length,t=p.audio||p.video?new Ye.Z(Ke.DATA_UPDATE_FAILED_ERROR_CODE,Ke.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(c[n].isUpdating()||h)return;if(N){N.clearMediaInfoArray();for(var r=0;r<e&&c[r];r++){var i=c[r].getType(),o=c[r].getMediaInfo();(i===Be.Z.AUDIO||i===Be.Z.VIDEO||i===Be.Z.TEXT&&o.isFragmented)&&(i=c[r].getMediaInfo())&&N.initializeForMedia(i)}N.handleKeySystemFromManifest()}t?w.error(t):a||(a=!0,O.waitForReadyState(Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){b.trigger(Ge.Z.STREAM_INITIALIZED,{streamInfo:M})}))}function te(){var e=x(),t=e.length;if(0!==t){for(var n=0;n<t;n++)if(!e[n].isBufferingCompleted()&&(e[n].getType()===Be.Z.AUDIO||e[n].getType()===Be.Z.VIDEO))return void u.debug("onBufferingCompleted - One streamProcessor has finished but",e[n].getType(),"one is not buffering completed");u.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s=!0,b.trigger(Ge.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:M},{streamInfo:M})}else u.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ne(e){p[e.mediaType]=e.error,P()}function re(e){R&&R.addInbandEvents(e.events,M.id)}function ie(e){return e&&e.type?L(e.type):null}function L(t){return t?x().filter(function(e){return e.getType()===t})[0]:null}function x(){for(var e,t,n=[],r=0;r<c.length;r++)(e=(t=c[r]).getType())!==Be.Z.AUDIO&&e!==Be.Z.VIDEO&&e!==Be.Z.TEXT||n.push(t);return n}function oe(e,t){var n=M,t=t.getStreamInfo();return!(t&&n&&(t=A.getAdaptationForType(t.index,e,t),e=A.getAdaptationForType(n.index,e,n),t&&e?!ae(e)&&ae(t):t||e))}function ae(e){return e&&(e.ContentProtection||e.Representation_asArray&&0<e.Representation_asArray.length&&e.Representation_asArray[0].ContentProtection)}function se(e,t,n){var r,i,o,n=2<arguments.length&&void 0!==n?n:null;return!!(e&&e.hasOwnProperty("getStreamInfo")&&(e=e.getStreamInfo(),n=n?n.getStreamInfo():M,e)&&n)&&(e=A.getAdaptationForType(e.index,t,e),t=A.getAdaptationForType(n.index,t,n),e&&t?(n=e&&t&&e.mimeType===t.mimeType,r=t.Representation_asArray.map(function(e){return e.codecs}),i=(o=e.Representation_asArray.map(function(e){return e.codecs})).some(function(e){return-1<r.indexOf(e)}),o=o.some(function(t){return r.some(function(e){return q.codecRootCompatibleWithCodec(e,t)})}),i||o&&n):!e&&!t)}function k(e){i=e}function le(){return i}t={initialize:function(){b.on(Ge.Z.BUFFERING_COMPLETED,te,t),b.on(Ge.Z.DATA_UPDATE_COMPLETED,ne,t),b.on(Ge.Z.INBAND_EVENTS,re,t),N&&(b.on(Ge.Z.KEY_ERROR,r,t),b.on(Ge.Z.SERVER_CERTIFICATE_UPDATED,r,t),b.on(Ge.Z.LICENSE_REQUEST_COMPLETE,r,t),b.on(Ge.Z.KEY_SYSTEM_SELECTED,r,t),b.on(Ge.Z.KEY_SESSION_CREATED,r,t),b.on(Ge.Z.KEY_STATUSES_CHANGED,r,t)),D.initializeForStream(M),b.trigger(Ge.Z.STREAM_UPDATED,{streamInfo:M})},getStreamId:function(){return M?M.id:null},activate:function(e,r){return new Promise(function(t,n){if(!o)return i?(o=!0,b.trigger(Ge.Z.STREAM_ACTIVATED,{streamInfo:M}),void t(r)):void H(e,r).then(function(e){o=!0,b.trigger(Ge.Z.STREAM_ACTIVATED,{streamInfo:M}),t(e)}).catch(function(e){n(e)});t(r)})},deactivate:$,getIsActive:function(){return o},getDuration:function(){return M?M.duration:NaN},getStartTime:W,getId:X,getStreamInfo:Q,getHasAudioTrack:function(){return f},getHasVideoTrack:function(){return d},startPreloading:function(n,r){return new Promise(function(t,e){i?e():(u.info("[startPreloading] Preloading next stream with id ".concat(X())),k(!0),H(n,r).then(function(){for(var e=0;e<c.length&&c[e];e++)c[e].setExplicitBufferingTime(W()),c[e].getScheduleController().startScheduleTimer();t()}).catch(function(){k(!1),e()}))})},initializeForTextWithMediaSource:function(n){return new Promise(function(e,t){Y(Be.Z.TEXT,n).then(function(){return(e=L(Be.Z.TEXT))?e.createBufferSinks():Promise.resolve();var e}).then(function(){D.createTracks(M),e()}).catch(function(e){t(e)})})},getThumbnailController:function(){return m},getBitrateListFor:function(e){return J(),e===Be.Z.IMAGE?m?m.getBitrateList():[]:(e=function(e){for(var t=null,n=0;n<c.length;n++)if((t=c[n]).getType()===e)return t.getMediaInfo();return null}(e),I.getBitrateList(e))},updateData:function(u){return new Promise(function(e){h=!0,M=u,R&&ee();for(var n=[],t=0,r=c.length;t<r;t++){var i=c[t],o=i.getMediaInfo(),a=(n.push(i.updateStreamInfo(M)),A.getAllMediaInfoForType(M,i.getType()));if(a=a.filter(function(e){return!e.isEmbedded})){i.clearMediaInfoArray();for(var s=0;s<a.length;s++){var l=a[s];i.addMediaInfo(a[s]),A.areMediaInfosEqual(o,l)&&(I.updateTopQualityIndex(l),n.push(i.selectMediaInfo(l)))}}}Promise.all(n).then(function(){for(n=[];0<_.length;){var e=_.pop(),t=e.newMediaInfo,e=ie(e.oldMediaInfo);if(!e)return;n.push(e.prepareTrackSwitch()),n.push(e.selectMediaInfo(t))}return Promise.all(n)}).then(function(){h=!1,P(),b.trigger(Ge.Z.STREAM_UPDATED,{streamInfo:M}),e()})})},reset:function(e){g&&(g.reset(),g=null),I&&M&&I.clearDataForStream(M.id),y&&(y.reset(),y=null),z(e),M=null,b.off(Ge.Z.DATA_UPDATE_COMPLETED,ne,t),b.off(Ge.Z.BUFFERING_COMPLETED,te,t),b.off(Ge.Z.INBAND_EVENTS,re,t),N&&(b.off(Ge.Z.KEY_ERROR,r,t),b.off(Ge.Z.SERVER_CERTIFICATE_UPDATED,r,t),b.off(Ge.Z.LICENSE_REQUEST_COMPLETE,r,t),b.off(Ge.Z.KEY_SYSTEM_SELECTED,r,t),b.off(Ge.Z.KEY_SESSION_CREATED,r,t),b.off(Ge.Z.KEY_STATUSES_CHANGED,r,t))},getProcessors:x,setMediaSource:function(i){return new Promise(function(n,t){for(var e=[],r=0;r<c.length;)K(c[r].getMediaInfo())?(e.push(c[r].setMediaSource(i)),r++):(c[r].reset(),c.splice(r,1));Promise.all(e).then(function(){for(var e,t=0;t<c.length;t++)c[t].dischargePreBuffer();0===c.length&&(w.error(new Ye.Z(Ke.MANIFEST_ERROR_ID_NOSTREAMS_CODE,(e="No streams to play.")+"nostreams",S.getValue())),u.fatal(e)),n()}).catch(function(e){u.error(e),t(e)})})},isMediaCodecCompatible:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return se(e,Be.Z.VIDEO,t)&&se(e,Be.Z.AUDIO,t)},isProtectionCompatible:function(e){return!e||oe(Be.Z.VIDEO,e)&&oe(Be.Z.AUDIO,e)},getPreloaded:le,getIsEndedEventSignaled:function(){return n},setIsEndedEventSignaled:V,getAdapter:function(){return A},getHasFinishedBuffering:function(){return s},setPreloaded:k,startScheduleControllers:function(){for(var e=c.length,t=0;t<e&&c[t];t++)c[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){var t,n,r,i;o&&M&&(s=!1,t=e.newMediaInfo,n=S.getValue(),A.setCurrentMediaInfo(M.id,t.type,t),r=ie(t))&&(i=G.getTime(),u.info("Stream -  Process track changed at current time "+i),n.refreshManifestOnSwitchTrack?(_.push(e),B.getIsUpdating()||(u.debug("Stream -  Refreshing manifest for switch track"),B.refreshManifest())):r.selectMediaInfo(t).then(function(){t.type!==Be.Z.VIDEO&&t.type!==Be.Z.AUDIO||I.updateTopQualityIndex(t),r.prepareTrackSwitch()}))},prepareQualityChange:function(e){var t=L(e.mediaType);t&&t.prepareQualityChange(e)}};try{E=(0,je.Z)(T).getInstance(),u=E.getLogger(t),z(),v=(0,Nt.Z)(T).getInstance(),y=Ot(T).create({updateEventName:Ge.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:Ge.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),g=It(T).create({streamInfo:M,mediaPlayerModel:F,dashMetrics:U,errHandler:w,settings:j,boxParser:v,dashConstants:ye.Z,urlUtils:e})}catch(e){throw e}return t}Pt.__dashjs_factory_name="Stream";function Lt(e){if(!(this instanceof Lt))throw new TypeError("Cannot call a class as a function");this.url=e||null,this.type=_e.w.CONTENT_STEERING_TYPE,this.responseType="json"}function xt(){if(!(this instanceof xt))throw new TypeError("Cannot call a class as a function");this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}var kt=ve.Z.getClassFactory(Pt);function Ft(){var e,u,c,d,f,t,p,n,r,i,o,a,s,h,l,g=this.context,m=(0,Se.Z)(g).getInstance();function y(e){b(e,"baseUrl")}function v(e){b(e,"location")}function E(e){var t,n;e&&e.request&&e.request.serviceLocation&&e.request.requestStartDate&&e.request.requestEndDate&&!isNaN(e.request.bytesTotal)&&(t=e.request.serviceLocation,n=e.request.requestEndDate.getTime()-e.request.requestStartDate.getTime(),T(t,parseInt(8*e.request.bytesTotal/n*1e3)))}function _(e){e&&e.httpRequest&&e.httpRequest._serviceLocation&&!isNaN(e.throughput)&&T(e.httpRequest._serviceLocation,1e3*e.throughput)}function T(e,t){f[e]||(f[e]=[]),f[e].push(t),4<f[e].length&&f[e].shift()}function b(e,t){e&&e.request&&e.request.serviceLocation&&(e=e.request.serviceLocation,-1===d[t].all.indexOf(e)&&d[t].all.push(e),d[t].current=e)}function S(){var e=o.getValue();return l.getContentSteering(e)||s.getServiceDescriptionSettings().contentSteering}function A(){return new Promise(function(s){try{var t,e,n=S();n&&n.serverUrl?(t=(a=(r=n).serverUrl,c&&c.reloadUri&&(a=m.isRelative(c.reloadUri)?m.resolve(c.reloadUri,r.serverUrl):c.reloadUri),r=[],0<(l=d.baseUrl.all.concat(d.location.all)).length&&((l=l.map(function(e){var t=(t=e)&&f[t]&&0!==f[t].length?(t=f[t].reduce(function(e,t){return e+t})/f[t].length,parseInt(t)):-1;return{serviceLocation:e,throughput:t}})).sort(function(e,t){return t.throughput-e.throughput}),o=i="",l.forEach(function(e,t){0!==t&&(i="".concat(i,","),-1<e.throughput)&&(o="".concat(o,",")),i="".concat(i).concat(e.serviceLocation),-1<e.throughput&&(o="".concat(o).concat(e.throughput))}),r.push({key:"_DASH_pathway",value:'"'.concat(i,'"')}),r.push({key:"_DASH_throughput",value:o})),Z.Z.addAditionalQueryParameterToUrl(a,r)),e=new Lt(t),p.load({request:e,success:function(e){(e=e)&&e[ye.Z.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(e[ye.Z.CONTENT_STEERING_RESPONSE.VERSION])&&((c=new xt).version=e[ye.Z.CONTENT_STEERING_RESPONSE.VERSION],e[ye.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(e[ye.Z.CONTENT_STEERING_RESPONSE.TTL])&&(c.ttl=e[ye.Z.CONTENT_STEERING_RESPONSE.TTL]),e[ye.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(c.reloadUri=e[ye.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),e[ye.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(c.pathwayPriority=e[ye.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),e[ye.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(c.pathwayClones=e[ye.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],c.pathwayClones=c.pathwayClones.filter(function(e){return e[ye.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&e[ye.Z.CONTENT_STEERING_RESPONSE.ID]&&e[ye.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&e[ye.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ye.Z.CONTENT_STEERING_RESPONSE.HOST]})),R()),h.trigger(He.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:c,url:t}),s()},error:function(e,t,n,r){var i=e,o=r;try{switch(u.warn("Error fetching data from content steering server",i),o.status){case 410:break;case 429:var a=o&&o.getResponseHeader?o.getResponseHeader("retry-after"):null;null!==a&&((c=c||{}).ttl=parseInt(a)),R();break;default:R()}}catch(i){u.error(i)}s(e)},complete:function(){d.baseUrl.all=w(d.baseUrl),d.location.all=w(d.location)}})):s()}catch(e){s(e)}var r,i,o,a,l})}function w(t){return t.all&&0!==t.all.length&&t.current?t.all.filter(function(e){return e===t.current}):[]}function I(i){try{var o=[];return i&&0!==i.length&&c&&c.pathwayClones&&0!==c.pathwayClones.length&&c.pathwayClones.forEach(function(t){var e,n=i.filter(function(e){return t[ye.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation}),r=null;(r=n&&0<n.length?n[0]:r)&&(n=new URL(r.url),e=t[ye.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ye.Z.CONTENT_STEERING_RESPONSE.HOST],e=Z.Z.stringHasProtocol(e)?e:"".concat(n.protocol,"//").concat(e),e={synthesizedUrl:"".concat(e).concat(n.pathname),serviceLocation:t[ye.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:t[ye.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ye.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:r},o.push(e))}),o}catch(i){return u.error(i),[]}}function R(){c&&c.ttl&&!isNaN(c.ttl)&&(t&&clearTimeout(t),t=setTimeout(function(){A()},1e3*c.ttl))}function C(){t&&clearTimeout(t),t=null}function N(){f={},d={baseUrl:{current:c=null,all:[]},location:{current:null,all:[]}},C()}return e={reset:function(){N(),h.off(He.Z.FRAGMENT_LOADING_STARTED,y,e),h.off(He.Z.MANIFEST_LOADING_STARTED,v,e),h.off(He.Z.MANIFEST_LOADING_FINISHED,E,e),h.off(He.Z.THROUGHPUT_MEASUREMENT_STORED,_,e)},setConfig:function(e){e&&(e.adapter&&(l=e.adapter),e.errHandler&&(n=e.errHandler),e.dashMetrics&&(r=e.dashMetrics),e.mediaPlayerModel&&(i=e.mediaPlayerModel),e.requestModifier&&(a=e.requestModifier),e.manifestModel&&(o=e.manifestModel),e.serviceDescriptionController&&(s=e.serviceDescriptionController),e.eventBus)&&(h=e.eventBus)},loadSteeringData:A,getCurrentSteeringResponseData:function(){return c},shouldQueryBeforeStart:function(){var e=S();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:S,stopSteeringRequestTimer:C,getSynthesizedBaseUrlElements:function(e){try{return I(e).map(function(e){var t=new X(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvbPriority=e.reference.dvbPriority,t.dvbWeight=e.reference.dvbWeight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t})}catch(e){return u.error(e),[]}},getSynthesizedLocationElements:function(e){try{return I(e).map(function(e){var t=new ee(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t})}catch(e){return u.error(e),[]}},initialize:function(){p=D(g).create({errHandler:n,dashMetrics:r,mediaPlayerModel:i,requestModifier:a,errors:Ke}),h.on(He.Z.FRAGMENT_LOADING_STARTED,y,e),h.on(He.Z.MANIFEST_LOADING_STARTED,v,e),h.on(He.Z.MANIFEST_LOADING_FINISHED,E,e),h.on(He.Z.THROUGHPUT_MEASUREMENT_STORED,_,e)}},u=(0,je.Z)(g).getInstance().getLogger(e),N(),e}Ft.__dashjs_factory_name="ContentSteeringController";var Ut=ve.Z.getSingletonFactory(Ft);function Bt(){var e=this.context,i=(0,Ee.Z)(e).getInstance(),t={select:function(e){var t,n,r;return e&&0!==e.length?(t=null,i.get().streaming.applyContentSteering&&(n=e,t=(r=o.getCurrentSteeringResponseData())&&r.pathwayPriority&&0<r.pathwayPriority.length?function(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:[],i=0,o=null;i<n.length&&"break"!==function(){var t=n[i],e=r.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!a.contains(r[e].serviceLocation))return o=r[e],"break";i+=1}(););return o}(r.pathwayPriority,n):null),t||e[0]):null},setConfig:function(e){e.blacklistController&&(a=e.blacklistController),e.contentSteeringController&&(o=e.contentSteeringController)},reset:function(){a.reset()}},a=Ot(e).create({updateEventName:Ge.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:Ge.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),o=Ut(e).getInstance();return t}Bt.__dashjs_factory_name="LocationSelector";var Zt=ve.Z.getClassFactory(Bt);function qt(){var e,i,o,t,a,s,l,u,c,d,f,n,p,r,h=this.context,g=(0,qe.Z)(h).getInstance(),m=(0,Se.Z)(h).getInstance();function y(){o=NaN,s=!(a=!(l=!1)),v()}function v(){null!==t&&(clearTimeout(t),t=null)}function E(e){v(),s||(isNaN(e)&&!isNaN(o)&&(e=1e3*o),isNaN(e))||(i.debug("Refresh manifest in "+e+" milliseconds."),t=setTimeout(b,e))}function _(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(l=!0,c.getValue()),n=t.url,r=null,i=f.getPatchLocation(t),i=d.select(i),o=null;i&&!e?(n=i.url,r=i.serviceLocation,o=i.queryParams):(e=t,e=f.getLocation(e),i=p.getSynthesizedLocationElements(e),e=e.concat(i),(i=d.select(e))&&(n=i.url,r=i.serviceLocation,o=i.queryParams)),m.isRelative(n)&&(n=m.resolve(n,t.url)),u.load(n,r,o)}function T(e){if(e){if(f.getIsPatch(e)){var t=e,n=(e=c.getValue(),f.isPatchValid(e,t)),r=n;if(n&&(n=f.getPublishTime(e),r=f.applyPatchToManifest(e,t),t=f.getPublishTime(e),r=n.getTime()!=t.getTime()),!r)return i.debug("Patch provided is invalid, performing full manifest refresh"),_(!0);e.loadedTime=new Date}}else(e=c.getValue()).loadedTime=new Date;if(c.getValue()&&c.getValue().type===ye.Z.DYNAMIC&&e.type===ye.Z.STATIC)return g.trigger(Ge.Z.DYNAMIC_TO_STATIC),s=!(l=!1);c.setValue(e);n=new Date,t=(n.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(o=f.getManifestUpdatePeriod(e,t))&&(o=2147483.647),g.trigger(Ge.Z.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),a||E()}function b(){a||(l?E(r.get().streaming.manifestUpdateRetryInterval):_())}function S(e){e.error?e.error.code===Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&n.error(e.error):T(e.manifest)}function A(){a=!1,E()}function w(){(a=!r.get().streaming.scheduling.scheduleWhilePaused)&&v()}function I(){l=!1}return e={initialize:function(){y(),g.on(Ge.Z.STREAMS_COMPOSED,I,this),g.on(He.Z.PLAYBACK_STARTED,A,this),g.on(He.Z.PLAYBACK_PAUSED,w,this),g.on(Ge.Z.INTERNAL_MANIFEST_LOADED,S,this)},setManifest:function(e){T(e)},refreshManifest:_,getIsUpdating:function(){return l},setConfig:function(e){e&&(e.manifestModel&&(c=e.manifestModel),e.adapter&&(f=e.adapter),e.manifestLoader&&(u=e.manifestLoader),e.errHandler&&(n=e.errHandler),e.locationSelector&&(d=e.locationSelector),e.settings&&(r=e.settings),e.contentSteeringController)&&(p=e.contentSteeringController)},reset:function(){g.off(He.Z.PLAYBACK_STARTED,A,this),g.off(He.Z.PLAYBACK_PAUSED,w,this),g.off(Ge.Z.STREAMS_COMPOSED,I,this),g.off(Ge.Z.INTERNAL_MANIFEST_LOADED,S,this),y()}},i=(0,je.Z)(h).getInstance().getLogger(e),d=Zt(h).create(),e}qt.__dashjs_factory_name="ManifestUpdater";var Gt=ve.Z.getClassFactory(qt);function jt(){var e,u,c,t,d,o,r,a,s,f,n,p,h,g,m,y,i=this.context,v=(0,qe.Z)(i).getInstance(),E=(0,Se.Z)(i).getInstance();function l(){a=[],h=n=f=null,p=NaN,t=c=!(s=[]),g=d.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function _(){!d.get().streaming.utcSynchronization.enabled||c||t||!h||!h.value||!h.schemeIdUri||isNaN(p)||isNaN(d.get().streaming.utcSynchronization.backgroundAttempts)||n&&(Date.now()-n)/1e3<30||(a=[],t=!0,function n(r){try{var i;r<=0?O():(i=Date.now(),o[h.schemeIdUri](h.value,function(e){var t=Date.now(),t=T(i,t,e);a.push(t),n(r-1)},function(){O()}))}catch(r){O()}}(isNaN(d.get().streaming.utcSynchronization.backgroundAttempts)?2:d.get().streaming.utcSynchronization.backgroundAttempts))}function T(e,t,n){return n-(t-(t-e)/2)}function b(e){var t,e=0<arguments.length&&void 0!==e?e:NaN,n=isNaN(e);n&&d.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(t=null!==(t=r.getLatestMPDRequestHeaderValueByID("Date"))?new Date(t).getTime():Number.NaN,isNaN(t)?D(!0):D(!1,t-Date.now())):D(n,e)}function S(e){var t,n,r=Date.parse(e);return isNaN(r)&&(e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&(parseInt(e[6],10)||0),e[7]&&1e3*parseFloat(e[7])||0),e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),r=new Date(n).getTime()),r}function A(e){return Date.parse(e)}function w(e){return Date.parse(e)}function I(e,t,n){n()}function R(e,t,n){e=S(e);isNaN(e)?n():t(e)}function C(t,e,n,r,i){var o,a,s,l=!1,u=new XMLHttpRequest,c=i?_e.w.HEAD:_e.w.GET,d=e.match(/\S+/g);e=d.shift(),o=function(){l||(l=!0,d.length?C(t,d.join(" "),n,r,i):r())},a=function(){var e;200===u.status&&(e=i?u.getResponseHeader("Date"):u.response,e=t(e),isNaN(e)||(n(e),l=!0))},E.isRelative(e)&&(s=y.resolve())&&(e=E.resolve(e,s.url)),u.open(c,e),u.timeout=5e3,u.onload=a,u.onloadend=o,u.send()}function N(e,t,n){C(w,e,t,n,!0)}function D(e,t){if(!(isNaN(p)||isNaN(t)||e)){var n=t;try{var r,i=M(n),o=isNaN(g)?30:g,a=isNaN(d.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:d.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(d.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:d.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,l=isNaN(d.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:d.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;i?(r=Math.min(o*a,s),u.debug("Increasing timeBetweenSyncAttempts to ".concat(r))):(r=Math.max(o/a,l),u.debug("Decreasing timeBetweenSyncAttempts to ".concat(r))),g=r}catch(n){}}e||isNaN(t)||(f=Date.now(),c=!1,i=isNaN(p),p=t,i&&_(),u.debug("Completed UTC sync. Setting client - server offset to ".concat(t))),e&&(h=null,c=!1,m.error(new Ye.Z(Ke.TIME_SYNC_FAILED_ERROR_CODE,Ke.TIME_SYNC_FAILED_ERROR_MESSAGE))),v.trigger(Ge.Z.UPDATE_TIME_SYNC_OFFSET,{offset:t}),v.trigger(Ge.Z.TIME_SYNCHRONIZATION_COMPLETED)}function O(){var e;a&&0!==a.length&&(M(e=a.reduce(function(e,t){return e+t},0)/a.length)?u.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(u.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),p=e,v.trigger(Ge.Z.UPDATE_TIME_SYNC_OFFSET,{offset:p})),t=!1,n=Date.now())}function M(e){try{var t;return isNaN(p)?!0:(t=d.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(d.get().streaming.utcSynchronization.maximumAllowedDrift)?d.get().streaming.utcSynchronization.maximumAllowedDrift:100,p-t<=e&&e<=p+t)}catch(e){return!0}}return e={initialize:function(){l(),o={"urn:mpeg:dash:utc:http-head:2014":N,"urn:mpeg:dash:utc:http-xsdate:2014":C.bind(null,S),"urn:mpeg:dash:utc:http-iso:2014":C.bind(null,A),"urn:mpeg:dash:utc:direct:2014":R,"urn:mpeg:dash:utc:http-head:2012":N,"urn:mpeg:dash:utc:http-xsdate:2012":C.bind(null,S),"urn:mpeg:dash:utc:http-iso:2012":C.bind(null,A),"urn:mpeg:dash:utc:direct:2012":R,"urn:mpeg:dash:utc:http-ntp:2014":I,"urn:mpeg:dash:utc:ntp:2014":I,"urn:mpeg:dash:utc:sntp:2014":I}},attemptSync:function(e,t){s=e,c||(function(e){try{var t;if(e&&d.get().streaming.utcSynchronization.enabled)return t=isNaN(g)?30:g,!f||!t||isNaN(t)||(Date.now()-f)/1e3>=t}catch(e){return 1}}(t)?(c=!0,function e(t){var n,r,i=(0<arguments.length&&void 0!==t?t:null)||0;!s||0===s.length||i>=s.length||!(n=s[i])?b():o.hasOwnProperty(n.schemeIdUri)?(r=(new Date).getTime(),o[n.schemeIdUri](n.value,function(e){var t=(new Date).getTime(),t=T(r,t,e);h=n,b(t)},function(){e(i+1)})):e(i+1)}()):v.trigger(Ge.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(r=e.dashMetrics),e.baseURLController&&(y=e.baseURLController),e.errHandler&&(m=e.errHandler),e.settings)&&(d=e.settings)},reset:function(){l(),v.off(Ge.Z.ATTEMPT_BACKGROUND_SYNC,_,e)}},u=(0,je.Z)(i).getInstance().getLogger(e),v.on(Ge.Z.ATTEMPT_BACKGROUND_SYNC,_,e),e}jt.__dashjs_factory_name="TimeSyncController";var e=ve.Z.getSingletonFactory(jt),Ht=(e.HTTP_TIMEOUT_MS=5e3,ve.Z.updateSingletonFactory(jt.__dashjs_factory_name,e),e);function Yt(){var n,r,i,e=this.context,o=(0,qe.Z)(e).getInstance(),t={attachMediaSource:function(e){var t=window.URL.createObjectURL(n);return e.setSource(t),"managedMediaSource"===i&&(e.setDisableRemotePlayback(!0),n.addEventListener("startstreaming",function(){o.trigger(He.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),n.addEventListener("endstreaming",function(){o.trigger(He.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),t},createMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return"ManagedMediaSource"in window?(n=new ManagedMediaSource,i="managedMediaSource",a.info("Created ManagedMediaSource")):t?(n=new MediaSource,i="mediaSource",a.info("Created MediaSource")):e&&(n=new WebKitMediaSource,a.info("Created WebkitMediaSource")),n},detachMediaSource:function(e){e.setSource(null)},setConfig:function(e){e&&e.settings&&(r=e.settings)},setDuration:function e(t){!n||"open"!==n.readyState||null===t&&isNaN(t)||n.duration!==t&&(t!==1/0||r.get().streaming.buffer.mediaSourceDurationInfinity||(t=Math.pow(2,32)),function(){for(var e=n.sourceBuffers,t=0;t<e.length;t++)if(e[t].updating)return 1}()?setTimeout(e.bind(null,t),50):(a.info("Set MediaSource duration:"+t),n.duration=t))},setSeekable:function(e,t){n&&"function"==typeof n.setLiveSeekableRange&&"function"==typeof n.clearLiveSeekableRange&&"open"===n.readyState&&0<=e&&e<t&&(n.clearLiveSeekableRange(),n.setLiveSeekableRange(e,t))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}a.info("call to mediaSource endOfStream"),e.endOfStream()}}},a=(0,je.Z)(e).getInstance().getLogger(t);return t}Yt.__dashjs_factory_name="MediaSourceController";var Kt=ve.Z.getSingletonFactory(Yt);function $t(){var e,c,o,s,t,n,a,l,r,i,u,d="urn:mpeg:dash:event:2012",f="discarded",p="updated",h="added",g=this.context,m=(0,qe.Z)(g).getInstance();function y(){if(!a||!l)throw new Error("setConfig function has to be called previously")}function v(){u=!1,o={},t=null,i=!(s={}),n=Date.now()/1e3}function E(){try{var e,t;i||(i=!0,t=(e=l.getTime())-n,t=0<n?Math.max(0,t):0,_(s,t,e),_(o,t,e),T(s),T(o),n=e,i=!1)}catch(e){i=!1,c.error(e)}}function _(s,l,u){try{A(s,function(e){if(void 0!==e){var t=isNaN(e.duration)?0:e.duration;if(e.calculatedPresentationTime<=u&&e.calculatedPresentationTime+l+t>=u)I(e,He.Z.EVENT_MODE_ON_START);else if(w(u,t+l,e.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return c.error(e),0}}(e)){c.debug("Removing event ".concat(e.id," from period ").concat(e.eventStream.period.id," as it is expired or invalid"));var n=s,t=e;try{var r=t.eventStream.schemeIdUri,i=t.eventStream.period.id,o=t.eventStream.value,a=t.id;n[i][r]=n[i][r].filter(function(e){return o&&e.eventStream.value&&e.eventStream.value!==o||e.id!==a}),0===n[i][r].length&&delete n[i][r]}catch(n){c.error(n)}}}})}catch(s){c.error(s)}}function T(e){try{for(var t in e)e.hasOwnProperty(t)&&0===Object.keys(e[t]).length&&delete e[t]}catch(e){c.error(e)}}function b(e,t,n){var n=2<arguments.length&&void 0!==n&&n,r=e.eventStream.schemeIdUri,i=e.eventStream.value,o=e.id,a=f,s=(t[r]||(t[r]=[]),t[r].findIndex(function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===o}));return-1===s?(t[r].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,a=h):n&&(n=t[r][s],e.triggeredReceivedEvent=n.triggeredReceivedEvent,e.triggeredStartEvent=n.triggeredStartEvent,t[r][s]=e,a=p),a}function S(e){try{var r=l.getTime();A(e,function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,n=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;isNaN(t)||isNaN(n)||(t=e.calculatedPresentationTime,Math.abs(t-r)<300&&I(e,He.Z.EVENT_MODE_ON_START))})}catch(e){c.error(e)}}function A(e,t){try{if(e)for(var n=Object.keys(e),r=0;r<n.length;r++)for(var i=e[n[r]],o=Object.keys(i),a=0;a<o.length;a++)i[o[a]].forEach(function(e){void 0!==e&&t(e)})}catch(e){c.error(e)}}function w(e,t,n){try{return n<e-t}catch(e){return c.error(e),0}}function I(e,t){try{var n=l.getTime(),r=e.id;if(t===He.Z.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return c.debug("Received event ".concat(r)),e.triggeredReceivedEvent=!0,m.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});if(!e.triggeredStartEvent){if(e.eventStream.schemeIdUri===d&&1==e.eventStream.value){if(0!==e.duration||0!==e.presentationTimeDelta){c.debug("Starting manifest refresh event ".concat(r," at ").concat(n));try{y(),a.refreshManifest()}catch(e){c.error(e)}}}else if("urn:mpeg:dash:event:callback:2015"===e.eventStream.schemeIdUri&&1==e.eventStream.value){c.debug("Starting callback event ".concat(r," at ").concat(n));var i=e.messageData;try{(0,q.Z)(g).create({}).load({method:"get",url:i,request:{responseType:"arraybuffer"}})}catch(i){c.error(i)}}else c.debug("Starting event ".concat(r," from period ").concat(e.eventStream.period.id," at ").concat(n)),m.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});e.triggeredStartEvent=!0}}catch(e){c.error(e)}}return e={addInlineEvents:function(e,t){try{if(y(),o[t]||(o[t]={}),e)for(var n=0;n<e.length;n++){var r,i=e[n];w(l.getTime(),isNaN(i.duration)?0:i.duration,i.calculatedPresentationTime)||((r=b(i,o[t],!0))===h?(c.debug("Added inline event with id ".concat(i.id," from period ").concat(t)),I(i,He.Z.EVENT_MODE_ON_RECEIVE)):r===p&&c.debug("Updated inline event with id ".concat(i.id," from period ").concat(t)))}}catch(e){throw e}},addInbandEvents:function(e,t){try{y(),s[t]||(s[t]={});for(var n=0;n<e.length;n++){var r,i,o=e[n];if(!w(l.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime))if(b(o,s[t],!1)===h){if(o.eventStream.schemeIdUri===d){a=void 0;i=void 0;r=void 0;var a=o;try{1==a.eventStream.value&&(r=a.calculatedPresentationTime,i=4294967295==a.calculatedPresentationTime?NaN:a.calculatedPresentationTime+a.duration,m.trigger(He.Z.MANIFEST_VALIDITY_CHANGED,{id:a.id,validUntil:r,newDuration:i,newManifestValidAfter:NaN},{mode:He.Z.EVENT_MODE_ON_START}))}catch(a){c.error(a)}}c.debug("Added inband event with id ".concat(o.id," from period ").concat(t)),I(o,He.Z.EVENT_MODE_ON_RECEIVE)}else c.debug("Inband event with scheme_id_uri ".concat(o.eventStream.schemeIdUri,", value ").concat(o.eventStream.value,", period id ").concat(t," and event id ").concat(o.id," was ignored because it has been added before."))}E()}catch(e){throw e}},getInbandEvents:function(){return s},getInlineEvents:function(){return o},start:function(){try{y(),c.debug("Start Event Controller");var e=r.get().streaming.eventControllerRefreshDelay;u||isNaN(e)||(u=!0,t=setInterval(E,e))}catch(e){throw e}},setConfig:function(e){try{e&&(e.manifestUpdater&&(a=e.manifestUpdater),e.playbackController&&(l=e.playbackController),e.settings)&&(r=e.settings)}catch(e){throw e}},reset:function(){try{if(null!==t&&u){clearInterval(t),t=null,u=!1;try{S(s),S(o)}catch(e){c.error(e)}}}catch(e){throw e}v()}},c=(0,je.Z)(g).getInstance().getLogger(e),v(),e}$t.__dashjs_factory_name="EventController";var zt=ve.Z.getSingletonFactory($t),Ve={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wt(){var n,l,F,U,u,r,c,d,f,s,i,p,h,B,Z,q,G,g,j,m,y,v,E,_,H,o,a,T,b,S,A,w,I,Y,K,$,t,R,e,C,z,N,V,D,W,O,M,X,P=this.context,L=(0,qe.Z)(P).getInstance();function Q(){if(!(r&&r.hasOwnProperty("load")&&y&&y.hasOwnProperty("initialize")&&y.hasOwnProperty("reset")&&y.hasOwnProperty("getClientTimeOffset")&&c&&m&&f&&I))throw new Error(Be.Z.MISSING_CONFIG_ERROR)}function J(){try{var n=d.getStreamsInfo();if(!E&&0===n.length)throw new Error("There are no periods in the MPD");E&&0<n.length&&f.updateManifestUpdateInfo({currentTime:I.getTime(),buffered:w.getBufferRange(),presentationStartTime:n[0].start,clientTimeOffset:y.getClientTimeOffset()}),0<v.length&&(0!==(s=n).length?v=v.filter(function(t){var e=0<s.filter(function(e){return e.id===t.getId()}).length||t.getId()===E.getId();return e||(l.debug("Removing stream ".concat(t.getId())),t.reset(!0)),e}):l.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var e=[],t=0,r=n.length;t<r;t++){var i=n[t];e.push((a=void 0,(a=Pe((o=i).id))?a.updateData(o):(a=kt(P).create({manifestModel:c,mediaPlayerModel:K,dashMetrics:f,manifestUpdater:u,adapter:d,timelineConverter:y,capabilities:F,capabilitiesFilter:U,errHandler:m,baseURLController:h,segmentBaseController:B,textController:H,abrController:q,playbackController:I,eventController:g,mediaController:G,protectionController:_,videoModel:w,streamInfo:o,settings:D}),v.push(a),a.initialize(),Promise.resolve()))),f.addManifestUpdateStreamInfo(i)}Promise.all(e).then(function(){return new Promise(function(e,t){E?e():function e(t,n,r){try{ce();var i,o,a,s=f.getCurrentDVRInfo().range;s.end<s.start?(O&&clearTimeout(O),i=Math.min(1e3*(-1*(s.end-s.start)+2),2147483647),l.debug("Waiting for ".concat(i," ms before playback can start")),L.trigger(Ge.Z.AST_IN_FUTURE,{delay:i}),O=setTimeout(function(){e(t,n,r)},i)):(D.get().streaming.applyProducerReferenceTime&&Y.calculateProducerReferenceTimeOffsets(t),o=t[0].manifestInfo,D.get().streaming.applyServiceDescription&&Y.applyServiceDescription(o),d.getIsDynamic()&&(a=Ie(t,o),I.computeAndSetLiveDelay(a,o)),(D.get().streaming.applyContentSteering&&p.shouldQueryBeforeStart()?p.loadSteeringData():Promise.resolve()).then(function(){var e=c.getValue();e&&h.update(e),te(),n()}).catch(function(e){l.error(e),te(),n()}))}catch(t){r(t)}}(n,e,t)})}).then(function(){L.trigger(Ge.Z.STREAMS_COMPOSED),ve()}).catch(function(e){throw e})}catch(n){m.error(new Ye.Z(Ke.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n.message+" nostreamscomposed",c.getValue())),S=!0,ke()}var o,a,s}function ee(){W=!0}function te(){d.getIsDynamic()?(n=((e=f.getCurrentDVRInfo())&&e.range?e.range.end:0)-I.getOriginalLiveDelay(),(e=e?e.range:null)&&(isNaN(M)&&-1===M.toString().indexOf("posix:")?(t=Se(!0),isNaN(t)||(l.info("Start time from URI parameters: ".concat(t)),n=Math.min(n,t))):(l.info("Start time provided by the app: ".concat(M)),t=Ae(!0,M),isNaN(t)||(n=Math.min(n,t))),t=D.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0,n=Math.max(n,e.start+t))):(n=v[0].getStreamInfo().start,isNaN(M)?(e=Se(!1),isNaN(e)||(l.info("Start time from URI parameters: ".concat(e)),n=Math.max(n,e))):(l.info("Start time provided by the app: ".concat(M)),t=Ae(!1,M),isNaN(t)||(n=Math.max(n,t))));var e=n,t=ue(e),n=null!==t?t:v[0];L.trigger(Ge.Z.INITIAL_STREAM_SWITCH,{startTime:e}),ne(n,null,e),C=C||setInterval(function(){!T&&I.getTimeToStreamEnd()<=0&&!I.isSeeking()&&L.trigger(Ge.Z.PLAYBACK_ENDED,{isLast:k().isLast})},200)}function ne(e,t,n){try{var r;T||!e||t===e&&e.getIsActive()||(T=!0,L.trigger(Ge.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),r=!1,E=e,t&&(r=le(e,t),t.deactivate(r)),n=isNaN(n)?!r&&t?e.getStreamInfo().start:NaN:n,l.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(n,", current playback time is ").concat(I.getTime(),". Seamless period switch is set to ").concat(r)),N=N.filter(function(e){return e.getId()!==E.getId()}),I.initialize(k(),!!t),w.getElement()?x(n,r,!1):re(n,r))}catch(e){T=!1}}function x(t,n,e){var r,i=2<arguments.length&&void 0!==e&&e;function o(){var e;A&&"open"===A.readyState&&(l.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),A.removeEventListener("sourceopen",o),A.removeEventListener("webkitsourceopen",o),be(),e=f.getCurrentDVRInfo(),s.setSeekable(e.range.start,e.range.end),i?(isNaN(t)||I.seek(t,!0,!0),E.setMediaSource(A).then(function(){E.initializeForTextWithMediaSource(A)})):re(t,n))}function a(){A.addEventListener("sourceopen",o,!1),A.addEventListener("webkitsourceopen",o,!1),r=s.attachMediaSource(w),l.debug("MediaSource attached to element.  Waiting on open...")}A?n?re(t,n):(s.detachMediaSource(w),a()):(A=s.createMediaSource(),a())}function re(n,e){E.activate(A,e?z:void 0,n).then(function(e){var t;e&&(0<(t=Object.keys(e)).length&&e[t[0]].getBuffer().changeType&&(V=!0),z=e),isNaN(n)||(L.trigger(Ge.Z.SEEK_TARGET,{time:n},{streamId:E.getId()}),I.seek(n,!1,!0),E.startScheduleControllers()),T=!1,L.trigger(Ge.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:k()})})}function ie(e){var t,n,r,i,o=ue(e.seekTime);o&&o!==E?(oe(),r=o,i=(n=e)&&!isNaN(n.seekTime)?n.seekTime:NaN,o=E.getProcessors().map(function(e){return e.prepareOuterPeriodPlaybackSeeking(n)}),Promise.all(o).then(function(){ne(r,E,i)}).catch(function(e){m.error(e)})):(oe(),t=e,E.getProcessors().forEach(function(e){return e.prepareInnerPeriodPlaybackSeeking(t)}),De(ze.USER_REQUEST_STOP_REASON)),Oe($e.SEEK_START_REASON)}function oe(){ae()}function ae(){N&&0<N.length&&(N.forEach(function(e){e.deactivate(!0)}),N=[])}function se(e){var t;e.newMediaInfo.streamInfo.id===E.getId()&&(ae(),D.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec?(t=I.getTime(),E.deactivate(!1),x(t,!1,!1)):E.prepareTrackChange(e))}function le(e,t){try{return D.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||W)&&(V&&D.get().streaming.buffer.useChangeTypeForTrackSwitch||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function ue(e){if(!isNaN(e))for(var t=v.length,n=0;n<t;n++){var r=v[n];if(e<parseFloat((r.getStartTime()+r.getDuration()).toFixed(5)))return r}return null}function ce(){try{var e=d.getIsDynamic(),t=d.getStreamsInfo()[0].manifestInfo,n=I.getTime(),r=y.calcTimeShiftBufferWindow(v,e),i=_e();void 0!==r.start&&void 0!==r.end&&(i&&0!==i.length?i.forEach(function(e){f.addDVRInfo(e.getType(),n,t,r)}):f.addDVRInfo(Be.Z.VIDEO,n,t,r))}catch(e){}}function de(e){var t,n;R&&a&&(t=K.getInitialBufferLevel(),n=[Be.Z.TEXT],isNaN(t)||t<=I.getBufferLevel(n)||d.getIsDynamic()&&t>I.getLiveDelay())&&(R=!1,Oe($e.INITIAL_PLAYOUT_START_REASON),I.play()),e&&e.mediaType&&f.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function fe(e){e.streamInfo.id===E.getId()&&e.reason&&e.reason.forceReplace&&ae(),Pe(e.streamInfo.id).prepareQualityChange(e)}function pe(){var e,t;d.getIsDynamic()&&0!==I.getOriginalLiveDelay()&&E&&0<(e=d.getStreamsInfo()).length&&(t=Ie(e,e=e[0].manifestInfo),I.computeAndSetLiveDelay(t,e))}function he(){var e;Ce()&&(e=w.getPlaybackQuality())&&f.addDroppedFrames(e)}function ge(){l.debug("[onPlaybackStarted]"),!R&&t&&Oe($e.RESUME_FROM_PAUSE_START_REASON),R=R&&!1,e&&(e=!1,D.get().streaming.applyContentSteering)&&!p.shouldQueryBeforeStart()&&p.loadSteeringData(),t=!1}function me(e){l.debug("[onPlaybackPaused]"),e.ended||(t=!0,De(ze.USER_REQUEST_STOP_REASON))}function ye(e){l.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));e=e.streamInfo.isLast;A&&e?(l.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),s.signalEndOfStream(A)):ve()}function ve(){if(E&&E.getHasFinishedBuffering())for(var e=function(e){var t=0<arguments.length&&void 0!==e?e:null;try{var n,r=t||E||null;if(r)return n=r.getStreamInfo(),v.filter(function(e){e=e.getStreamInfo();return e.start>n.start&&n.id!==e.id})}catch(t){return[]}}(E),t=0;t<e.length;){var n=e[t],r=0===t?E:e[t-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&A&&function(e,t){t=1<arguments.length&&void 0!==t?t:null,A&&!e.getPreloaded()&&le(e,t)&&e.startPreloading(A,z).then(function(){N.push(e)})}(n,r),t+=1}}function Ee(){C&&(clearInterval(C),C=null)}function _e(){return E?E.getProcessors():[]}function Te(e){var t;E&&!E.getIsEndedEventSignaled()&&(E.setIsEndedEventSignaled(!0),(t=function(e){e=(0<arguments.length&&void 0!==e?e:null)||E||null;if(!e)return null;for(var t=e.getStreamInfo(),n=t.start,r=0,i=-1,o=NaN;r<v.length;){var a=v[r].getStreamInfo(),s=a.start-n;0<s&&(isNaN(o)||s<o)&&t.id!==a.id&&(o=s,i=r),r+=1}return 0<=i?v[i]:null}())?(l.debug("StreamController onEnded, found next stream with id ".concat(t.getStreamInfo().id,". Switching from ").concat(E.getStreamInfo().id," to ").concat(t.getStreamInfo().id)),ne(t,E,NaN)):(l.debug("StreamController no next stream found"),E.setIsEndedEventSignaled(!1)),De(t?ze.END_OF_PERIOD_STOP_REASON:ze.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&(Ee(),p.stopSteeringRequestTimer())}function be(e){e=e||k().manifestInfo.duration;s.setDuration(e)}function Se(e){var t,n=Z.getURIFragmentData();return n&&n.t?(t=v[0].getStreamInfo().start,n.t=n.t.split(",")[0],we(e,n.t,t)):NaN}function Ae(e,t){var n=0;return we(e,t,n=e?n:v[0].getStreamInfo().start)}function we(e,t,n){var r=d.getRegularPeriods()[0],t=t.toString(),i=-1!==t.indexOf("posix:")?"now"===t.substring(6)?Date.now()/1e3:parseFloat(t.substring(6)):NaN;return e&&!isNaN(i)?y.calcPresentationTimeFromWallTime(new Date(1e3*i),r):parseFloat(t)+n}function Ie(e,t){try{var n,r,i=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&(n=e[0],r=[Be.Z.VIDEO,Be.Z.AUDIO,Be.Z.TEXT].reduce(function(e,t){t=d.getMediaInfoForType(n,t);return t&&!1!==t.isFragmented&&e.push(t),e},[]).reduce(function(t,e){e=d.getVoRepresentations(e);return e&&0<e.length&&e.forEach(function(e){e&&t.push(e)}),t},[]).reduce(function(e,t){t=d.convertRepresentationToRepresentationInfo(t);return t&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e},[]),i=Math.max.apply(Math,function(e){if(Array.isArray(e))return Vt(e)}(o=r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e){var t;if(e)return"string"==typeof e?Vt(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Vt(e,void 0):void 0}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isFinite(i)?i:NaN)}catch(e){return NaN}var o}function Re(e){var t,n;e.error?(S=!0,ke()):(l.info("Manifest updated... updating data system wide."),t=e.manifest,d.updatePeriods(t),e=d.getUTCTimingSources(),!d.getIsDynamic()||e&&0!==e.length||L.trigger(He.Z.CONFORMANCE_VIOLATION,{level:Ve.LEVELS.WARNING,event:Ve.EVENTS.NO_UTC_TIMING_ELEMENT}),n=d.getIsDynamic()?e.concat($.getUTCTimingSources()):e,U.filterUnsupportedFeatures(t).then(function(){h.initialize(t),i.attemptSync(n,d.getIsDynamic())}))}function Ce(){return!!E&&E.getHasVideoTrack()}function Ne(){return!!E&&E.getHasAudioTrack()}function De(t,n){n=n||new Date,_e().forEach(function(e){e.finalisePlayList(n,t)}),f.addPlayList()}function Oe(e){f.createPlaylistMetrics(1e3*I.getTime(),e)}function Me(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE",X.counts.mediaErrorDecode+=1;break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}"MEDIA_ERR_DECODE"===t&&D.get().errors.recoverAttempts.mediaErrorDecode>=X.counts.mediaErrorDecode?(l.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource"),n=I.getTime(),E.deactivate(!1),l.warn("MediaSource has been resetted. Resuming playback from time ".concat(n)),x(n,!1,!1)):(b=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),l.fatal("Video Element Error: "+t),e.error&&l.fatal(e.error),m.error(new Ye.Z(e.error.code,t)),ke())}var n}function k(){return E?E.getStreamInfo():null}function Pe(e){for(var t=0,n=v.length;t<n;t++)if(v[t].getId()===e)return v[t];return null}function Le(e){isNaN(e.newDuration)||be(e.newDuration)}function xe(){M=NaN,V=W=!(a=!(t=!(e=R=!(S=b=T=!(v=[]))))),N=[],O=C=E=_=null,X={counts:{mediaErrorDecode:0}}}function ke(){Q(),i.reset(),De(b||S?ze.FAILURE_STOP_REASON:ze.USER_REQUEST_STOP_REASON);for(var e=0,t=v?v.length:0;e<t;e++)v[e].reset(b);L.off(He.Z.PLAYBACK_TIME_UPDATED,he,n),L.off(He.Z.PLAYBACK_SEEKING,ie,n),L.off(He.Z.PLAYBACK_ERROR,Me,n),L.off(He.Z.PLAYBACK_STARTED,ge,n),L.off(He.Z.PLAYBACK_PAUSED,me,n),L.off(He.Z.PLAYBACK_ENDED,Te,n),L.off(He.Z.METRIC_ADDED,Fe,n),L.off(He.Z.MANIFEST_VALIDITY_CHANGED,Le,n),L.off(He.Z.BUFFER_LEVEL_UPDATED,de,n),L.off(He.Z.QUALITY_CHANGE_REQUESTED,fe,n),Ge.Z.KEY_SESSION_UPDATED&&L.off(Ge.Z.KEY_SESSION_UPDATED,ee,n),L.off(Ge.Z.MANIFEST_UPDATED,Re,n),L.off(Ge.Z.STREAM_BUFFERING_COMPLETED,ye,n),L.off(Ge.Z.TIME_SYNCHRONIZATION_COMPLETED,J,n),L.off(Ge.Z.CURRENT_TRACK_CHANGED,se,n),L.off(Ge.Z.SETTING_UPDATED_LIVE_DELAY,pe,n),L.off(Ge.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,pe,n),h.reset(),u.reset(),g.reset(),f.clearAllCurrentMetrics(),c.setValue(null),r.reset(),y.reset(),j.reset(),A&&(s.detachMediaSource(w),A=null),w=null,_&&(o=_=null,c.getValue())&&L.trigger(Ge.Z.PROTECTION_DESTROYED,{data:c.getValue().url}),Ee(),L.trigger(Ge.Z.STREAM_TEARDOWN_COMPLETE),xe()}function Fe(e){var t;e.metric===Ze.Z.DVR_INFO&&(t=Ne()?Be.Z.AUDIO:Be.Z.VIDEO,e.mediaType===t)&&s.setSeekable(e.value.range.start,e.value.range.end)}function Ue(){return v}return n={initialize:function(e,t){Q(),a=e,o=t,y.initialize(),(u=Gt(P).create()).setConfig({manifestModel:c,adapter:d,manifestLoader:r,errHandler:m,settings:D,contentSteeringController:p}),u.initialize(),(g=zt(P).getInstance()).setConfig({manifestUpdater:u,playbackController:I,settings:D}),g.start(),i.setConfig({dashMetrics:f,baseURLController:h,errHandler:m,settings:D}),i.initialize(),s.setConfig({settings:D}),_&&(L.trigger(Ge.Z.PROTECTION_CREATED,{controller:_}),_.setMediaElement(w.getElement()),o)&&_.setProtectionData(o),L.on(He.Z.PLAYBACK_TIME_UPDATED,he,n),L.on(He.Z.PLAYBACK_SEEKING,ie,n),L.on(He.Z.PLAYBACK_ERROR,Me,n),L.on(He.Z.PLAYBACK_STARTED,ge,n),L.on(He.Z.PLAYBACK_PAUSED,me,n),L.on(He.Z.PLAYBACK_ENDED,Te,n),L.on(He.Z.METRIC_ADDED,Fe,n),L.on(He.Z.MANIFEST_VALIDITY_CHANGED,Le,n),L.on(He.Z.BUFFER_LEVEL_UPDATED,de,n),L.on(He.Z.QUALITY_CHANGE_REQUESTED,fe,n),Ge.Z.KEY_SESSION_UPDATED&&L.on(Ge.Z.KEY_SESSION_UPDATED,ee,n),L.on(Ge.Z.MANIFEST_UPDATED,Re,n),L.on(Ge.Z.STREAM_BUFFERING_COMPLETED,ye,n),L.on(Ge.Z.TIME_SYNCHRONIZATION_COMPLETED,J,n),L.on(Ge.Z.CURRENT_TRACK_CHANGED,se,n),L.on(Ge.Z.SETTING_UPDATED_LIVE_DELAY,pe,n),L.on(Ge.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,pe,n)},getActiveStreamInfo:k,addDVRMetric:ce,hasVideoTrack:Ce,hasAudioTrack:Ne,getStreamById:Pe,getStreamForTime:ue,getTimeRelativeToStreamId:function(e,t){for(var n,r,i=null,o=0,a=0;a<v.length;a++){if(n=(i=v[a]).getStartTime(),r=i.getDuration(),Number.isFinite(n)&&(o=n),i.getId()===t)return e-o;Number.isFinite(r)&&(o+=r)}return null},load:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;Q(),M=t,r.load(e)},loadWithManifest:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!u||!u.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously");M=t,u.setManifest(e)},getActiveStreamProcessors:_e,setConfig:function(e){e&&(e.capabilities&&(F=e.capabilities),e.capabilitiesFilter&&(U=e.capabilitiesFilter),e.manifestLoader&&(r=e.manifestLoader),e.manifestModel&&(c=e.manifestModel),e.mediaPlayerModel&&(K=e.mediaPlayerModel),e.customParametersModel&&($=e.customParametersModel),e.protectionController&&(_=e.protectionController),e.adapter&&(d=e.adapter),e.dashMetrics&&(f=e.dashMetrics),e.errHandler&&(m=e.errHandler),e.timelineConverter&&(y=e.timelineConverter),e.videoModel&&(w=e.videoModel),e.playbackController&&(I=e.playbackController),e.serviceDescriptionController&&(Y=e.serviceDescriptionController),e.contentSteeringController&&(p=e.contentSteeringController),e.textController&&(H=e.textController),e.abrController&&(q=e.abrController),e.mediaController&&(G=e.mediaController),e.settings&&(D=e.settings),e.baseURLController&&(h=e.baseURLController),e.uriFragmentModel&&(Z=e.uriFragmentModel),e.segmentBaseController&&(B=e.segmentBaseController),e.manifestUpdater)&&(u=e.manifestUpdater)},setProtectionData:function(e){o=e,_&&_.setProtectionData(o)},getIsStreamSwitchInProgress:function(){return T},switchToVideoElement:function(e){E&&(I.initialize(k()),x(e,!1,!0))},getHasMediaOrInitialisationError:function(){return b||S},getStreams:Ue,getActiveStream:function(){return E},getInitialPlayback:function(){return R},getAutoPlay:function(){return a},refreshManifest:function(){u.getIsUpdating()||u.refreshManifest()},reset:ke},l=(0,je.Z)(P).getInstance().getLogger(n),i=Ht(P).getInstance(),s=Kt(P).getInstance(),j=We(P).getInstance(),xe(),n}Wt.__dashjs_factory_name="StreamController";var Xt=ve.Z.getSingletonFactory(Wt);function Qt(){var e,t,p,n,r,h,g,m,y,v,i,E,o=this.context,a=(0,qe.Z)(o).getInstance();function s(){E.debug("Stopping the gap controller"),r&&(clearInterval(r),r=null),function(){a.off(Ge.Z.WALLCLOCK_TIME_UPDATED,f,this),a.off(Ge.Z.INITIAL_STREAM_SWITCH,d,this),a.off(Ge.Z.PLAYBACK_SEEKING,l,this),a.off(Ge.Z.BUFFER_REPLACEMENT_STARTED,u,e),a.off(Ge.Z.TRACK_CHANGE_RENDERED,c,e)}(),h=NaN,n=0,v=r=null,i={}}function l(){v&&(clearTimeout(v),v=null)}function u(e){try{e.streamId!==m.getActiveStreamInfo().id||e.mediaType!==Be.Z.VIDEO&&e.mediaType!==Be.Z.AUDIO||e.streamId===m.getActiveStreamInfo().id&&(i[e.mediaType]=!0)}catch(e){E.error(e)}}function c(e){e&&e.mediaType&&(i[e.mediaType]=!1)}function d(){if(!r)try{r||(E.debug("Starting the gap controller"),r=setInterval(function(){_()&&T(g.getTime())},100))}catch(e){}}function f(){var e;_(p.get().streaming.gaps.enableSeekFix)&&10<=++n&&(e=g.getTime(),t===e?T(e,!0):(t=e,h=NaN),n=0)}function _(e){var t,e=0<arguments.length&&void 0!==e&&e;if(m.getActiveStream())return t=Object.keys(i).some(function(e){return i[e]}),e=!!e&&(e=m.getActiveStream(),e=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5)),g.getTime()+p.get().streaming.gaps.threshold>=e),!t&&p.get().streaming.gaps.jumpGaps&&0<m.getActiveStreamProcessors().length&&(!g.isSeeking()||e)&&!g.isPaused()&&!m.getIsStreamSwitchInProgress()&&!m.getHasMediaOrInitialisationError()}function T(e,t){var n,r,t=1<arguments.length&&void 0!==t&&t,i=p.get().streaming.gaps.enableStallFix,o=p.get().streaming.gaps.stallSeek,a=p.get().streaming.gaps.smallGapLimit,s=p.get().streaming.gaps.jumpLargeGaps,l=y.getBufferRange(),u=NaN,c=!1,d=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var n=NaN,r=0;isNaN(n)&&r<e.length;){var i=0<r?e.end(r-1):0;t<e.start(r)&&i-t<p.get().streaming.gaps.threshold&&(n=r),r+=1}return n}catch(e){return null}}(l,e),f=(isNaN(d)||0<(f=(n=l.start(d))-e)&&(f<=a||s)&&(u=n),g.getTimeToStreamEnd());isNaN(u)&&t&&isFinite(f)&&!isNaN(f)&&f<a&&(u=parseFloat(g.getStreamEndTime().toFixed(5)),c=!0),i&&isNaN(u)&&t&&isNaN(d)&&function(e,t){for(var n=0,r=e.length;n<r;n++)if(t>=e.start(n)&&t<=e.end(n))return 1}(l,e)&&(0===o?(E.warn("Toggle play pause to break stall"),y.pause(),y.play()):(E.warn("Jumping ".concat(o,"s to break stall")),u=e+o)),0<u&&h!==u&&e<u&&!v&&(s=u-e,c?(f=(n=m.getStreamForTime(u))&&!!n.getPreloaded(),E.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(u,". Gap duration: ").concat(s)),g.seek(u,!0,f)):(a=g.getIsDynamic(),r=0<d?l.end(d-1):e,i=a?1e3*Math.max(0,s-.1):0,v=window.setTimeout(function(){g.seek(u,!0,!0),E.warn("Jumping gap occuring in period ".concat(m.getActiveStream().getStreamId()," starting at ").concat(r," and ending at ").concat(u,". Jumping by: ").concat(u-r)),v=null},i)),h=u)}return e={reset:s,setConfig:function(e){e&&(e.settings&&(p=e.settings),e.playbackController&&(g=e.playbackController),e.streamController&&(m=e.streamController),e.videoModel)&&(y=e.videoModel)},initialize:function(){!function(){a.on(Ge.Z.WALLCLOCK_TIME_UPDATED,f,this),a.on(Ge.Z.INITIAL_STREAM_SWITCH,d,this),a.on(Ge.Z.PLAYBACK_SEEKING,l,this),a.on(Ge.Z.BUFFER_REPLACEMENT_STARTED,u,e),a.on(Ge.Z.TRACK_CHANGE_RENDERED,c,e)}()}},E=(0,je.Z)(o).getInstance().getLogger(e),s(),e}Qt.__dashjs_factory_name="GapController";var Jt=ve.Z.getSingletonFactory(Qt);function en(){var e,d,f,p,h,t,g,m,y,v,n=this.context,r=(0,qe.Z)(n).getInstance();function i(){d=!1;var e=Z.Z.parseUserAgent();f=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function o(){d=!1}function a(e){e.streamId===t.getActiveStreamInfo().id&&y&&(e=g.getLiveDelay(),g.getBufferLevel()>e/2)&&(y=!1)}function s(e){e.streamId===t.getActiveStreamInfo().id&&(y=e.state===Ze.Z.BUFFER_EMPTY)}function l(){m.getCatchupModeEnabled()||p.setPlaybackRate(1)}function u(){var e,t,n,r,i,o,a,s,l,u,c;g.getIsDynamic()&&m.getCatchupModeEnabled()&&(0<m.getCatchupPlaybackRates().max||m.getCatchupPlaybackRates().min<0)&&!g.isPaused()&&!g.isSeeking()&&function(){try{return!(0<!g.getTime()||d)&&(_()===Be.Z.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return 0<Math.abs(E())||e<t}catch(e){}}(g.getBufferLevel(),h.get().streaming.liveCatchup.playbackBufferMin):function(){try{return 0<Math.abs(E())}catch(e){}}())}catch(e){}}()&&!d&&p&&(e=p.getPlaybackRate(),t=m.getCatchupPlaybackRates(),n=g.getBufferLevel(),i=E(),r=m.getCatchupMaxDrift(),!isNaN(r)&&0<r&&r<i?(v.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),d=!0,g.seekToCurrentLive(!0,!1)):(r=g.getCurrentLiveLatency(),i=g.getLiveDelay(),a=_()===Be.Z.LIVE_CATCHUP_MODE_LOLP?(o=t,a=r,s=i,l=h.get().streaming.liveCatchup.playbackBufferMin,(u=n)<l?(c=1-(c=Math.abs(o.min))+2*c/(1+Math.pow(Math.E,-(5*(u-l)))),v.debug("[LoL+ playback control_buffer-based] bufferLevel: "+u+", newRate: "+c)):(c=Math.abs(a-s)<=.02*s?1:1-(u=(l=a-s)<0?Math.abs(o.min):o.max)+2*u/(1+Math.pow(Math.E,-(5*l))),v.debug("[LoL+ playback control_latency-based] latency: "+a+", newRate: "+c)),c):(s=t,o=i,u=n,y||(s=1-(s=(l=r-o)<0?Math.abs(s.min):s.max)+2*s/(1+Math.pow(Math.E,-(5*l))),g.getPlaybackStalled()&&u<=o/2&&0<l)?1:s),c=f?.25:.02/(.5/t.max),a&&Math.abs(e-a)>=c&&(v.debug("[CatchupController]: Setting playback rate to ".concat(a)),p.setPlaybackRate(a))))}function E(){return g.getCurrentLiveLatency()-g.getLiveDelay()}function _(){var e=h.get().streaming.liveCatchup.playbackBufferMin;return h.get().streaming.liveCatchup.mode!==Be.Z.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?Be.Z.LIVE_CATCHUP_MODE_DEFAULT:Be.Z.LIVE_CATCHUP_MODE_LOLP}function c(){m.getCatchupPlaybackRates(!0)}return e={reset:function(){r.off(He.Z.BUFFER_LEVEL_UPDATED,a,e),r.off(He.Z.BUFFER_LEVEL_STATE_CHANGED,s,e),r.off(He.Z.PLAYBACK_PROGRESS,u,e),r.off(He.Z.PLAYBACK_TIME_UPDATED,u,e),r.off(He.Z.PLAYBACK_SEEKED,o,e),r.off(Ge.Z.SETTING_UPDATED_CATCHUP_ENABLED,l,e),r.off(Ge.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,c,e),r.off(Ge.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,c,e),r.off(He.Z.STREAM_INITIALIZED,c,e),i(),p.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(h=e.settings),e.videoModel&&(p=e.videoModel),e.streamController&&(t=e.streamController),e.playbackController&&(g=e.playbackController),e.mediaPlayerModel)&&(m=e.mediaPlayerModel)},initialize:function(){r.on(He.Z.BUFFER_LEVEL_UPDATED,a,e),r.on(He.Z.BUFFER_LEVEL_STATE_CHANGED,s,e),r.on(He.Z.PLAYBACK_PROGRESS,u,e),r.on(He.Z.PLAYBACK_TIME_UPDATED,u,e),r.on(He.Z.PLAYBACK_SEEKED,o,e),r.on(Ge.Z.SETTING_UPDATED_CATCHUP_ENABLED,l,e),r.on(Ge.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,c,e),r.on(Ge.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,c,e),r.on(He.Z.STREAM_INITIALIZED,c,e),c()}},v=(0,je.Z)(n).getInstance().getLogger(e),i(),e}en.__dashjs_factory_name="CatchupController";var tn=ve.Z.getSingletonFactory(en),nn=[Be.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME];function rn(){var e,s,l,u,a,t=this.context;function n(){s={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},l=[]}function c(e,t,n){try{s[e][t]=n/1e3}catch(e){u.error(e)}}return e={getServiceDescriptionSettings:function(){return s},getProducerReferenceTimeOffsets:function(){return l},calculateProducerReferenceTimeOffsets:function(e){try{var t,o,n=[];e&&0<e.length&&(t=[Be.Z.VIDEO,Be.Z.AUDIO,Be.Z.TEXT],o=a.getAvailabilityStartTime()/1e3,e.forEach(function(i){var e=t.reduce(function(e,t){return e.concat(a.getAllMediaInfoForType(i,t))},[]).reduce(function(n,r){return a.getProducerReferenceTimes(i,r).forEach(function(e){var t=a.getVoRepresentations(r);t&&0<t.length&&t[0].adaptation&&t[0].segmentInfoType===ye.Z.SEGMENT_TEMPLATE&&(t=t[0],t=new Date(e[ye.Z.WALL_CLOCK_TIME]).getTime()/1e3-(e[ye.Z.PRESENTATION_TIME]/t[ye.Z.TIMESCALE]-t[ye.Z.PRESENTATION_TIME_OFFSET]+i.start),n.push({id:e[ye.Z.ID],to:o-t}))}),n},[]);n=n.concat(e)})),l=n}catch(e){u.error(e),l=[]}},applyServiceDescription:function(e){var t,n,r,i,o,a;e&&e.serviceDescriptions&&(t=e.serviceDescriptions.filter(function(e){return nn.includes(e.schemeIdUri)}),e=e.serviceDescriptions.filter(function(e){return null==e.schemeIdUri}),t=0<t.length?t[t.length-1]:e[e.length-1])&&(t.latency&&0<t.latency.target&&(t.schemeIdUri,Be.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,e={liveDelay:(e=t).latency.target/1e3,maxDrift:!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,referenceId:e.latency.referenceId||NaN},0<l.length?(i=e,a=(o=0)===(a=l.filter(function(e){return e.id===i.referenceId})).length?(o=0<l.length?l[0].to:0,l[0].id||NaN):(o=a[0].to||0,a[0].id||NaN),a=(o={to:o,id:a}).id,s.liveDelay=e.liveDelay-(o=o.to),s.liveCatchup.maxDrift=e.maxDrift,u.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(o," from ProducerReferenceTime element with id ").concat(a,".\n                Live Delay: ").concat(e.liveDelay-o,", Live catchup max drift: ").concat(e.maxDrift,"\n            "))):(s.liveDelay=e.liveDelay,s.liveCatchup.maxDrift=e.maxDrift,u.debug("Found latency properties coming from service description: Live Delay: ".concat(e.liveDelay,", Live catchup max drift: ").concat(e.maxDrift)))),t.playbackRate&&(o=(a=t).playbackRate.min?Math.round(1e3*(a.playbackRate.min-1))/1e3:NaN,a=a.playbackRate.max?Math.round(1e3*(a.playbackRate.max-1))/1e3:NaN,s.liveCatchup.playbackRate.min=o,s.liveCatchup.playbackRate.max=a,u.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(o)),u.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(a))),t.operatingQuality,t.operatingBandwidth&&(e=t)&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&"all"!==e.operatingBandwidth.mediaType&&((n={}).minBandwidth=e.operatingBandwidth.min,n.maxBandwidth=e.operatingBandwidth.max,n.targetBandwidth=e.operatingBandwidth.target,r=[],"video"===e.operatingBandwidth.mediaType||"audio"===e.operatingBandwidth.mediaType?r.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(r.push("audio"),r.push("video")),r.forEach(function(e){isNaN(n.minBandwidth)||c("minBitrate",e,n.minBandwidth),isNaN(n.maxBandwidth)||c("maxBitrate",e,n.maxBandwidth),isNaN(n.targetBandwidth)||c("initialBitrate",e,n.targetBandwidth)})),t.contentSteering)&&(s.contentSteering=t.contentSteering)},reset:function(){n()},setConfig:function(e){e&&e.adapter&&(a=e.adapter)}},u=(0,je.Z)(t).getInstance().getLogger(e),n(),e}rn.__dashjs_factory_name="ServiceDescriptionController";var on=ve.Z.getSingletonFactory(rn),e=t(3973),an=t.n(e),sn=t(3039);function ln(){var e,u,s,c,n,o,d,a,t=this.context,l=(0,qe.Z)(t).getInstance();function i(e,t){return e&&s[t]&&s[t][e]?s[t][e].list:[]}function f(e,t){return e&&s[t]&&s[t][e]?s[t][e].current:null}function p(e){var t,n,r,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&e.streamInfo&&(r=f(t=e.type,n=e.streamInfo.id),s[n])&&s[n][t]&&(s[n][t].current=e,s[n][t].current&&(t!==Be.Z.TEXT&&!m(e,r)||t===Be.Z.TEXT&&e.isFragmented)&&l.trigger(Ge.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:r,newMediaInfo:e,switchMode:c.get().streaming.trackSwitchMode[t]},{streamId:n}),!i)&&(r=function(e){e={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec};return e.lang||e.viewpoint||e.role&&0<e.role.length||e.accessibility&&0<e.accessibility.length||e.audioChannelConfiguration&&0<e.audioChannelConfiguration.length?e:null}(e))&&s[n][t].storeLastSettings&&(r.roles&&(r.role=r.roles[0],delete r.roles),r.accessibility&&(r.accessibility=r.accessibility[0]),r.audioChannelConfiguration&&(r.audioChannelConfiguration=r.audioChannelConfiguration[0]),o[t]=r,a.setSavedMediaSettings(t,r))}function h(e,t){e&&t&&(n[e]=t)}function g(e){return e?n[e]:null}function m(e,t){var n,r,i,o,a,s,l,u,c,d;return!e&&!t||!(!e||!t)&&(n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),o=e.lang===t.lang,a=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),d=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&a&&r&&i&&o&&s&&l&&u&&c&&d&&e}function r(){s={},o={},n={audio:null,video:null,text:null}}function y(e,t,n){var r=[];return e.forEach(function(e){t(n,e)&&r.push(e)}),0!==r.length?r:e}function v(e,t){try{return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&0<(0,sn.extendedFilter)(t.lang,an()(e.lang)).length}catch(e){return!1}}function E(e,t){return void 0===e.index||null===e.index||t.index===e.index}function _(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function T(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return!t.role||!!e.roles.filter(function(e){return e===t.role})[0]||e.type===Be.Z.AUDIO&&n}function b(t,e){return t.accessibility?!!e.accessibility.filter(function(e){return e===t.accessibility})[0]:!e.accessibility.length}function S(t,e){return!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0]}function A(e,t){return!e.codec||e.codec===t.codec}function w(e){var t,n=0,r=[];return e.forEach(function(e){(t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})))>n?(n=t,r=[e]):t===n&&r.push(e)}),r}function I(e){var n,r=1/0,i=[];return e.forEach(function(e){var t=e.bitrateList.reduce(function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n},0);(n=t/e.bitrateList.length)<r?(r=n,i=[e]):n===r&&i.push(e)}),i}function R(e){var t,n=0,r=[];return e.forEach(function(e){(t=e.representationCount)>n?(n=t,r=[e]):t===n&&r.push(e)}),r}function C(e,t){if(e===Be.Z.TEXT)return t[0];var n,r,i,o,a,s,l=c.get().streaming.selectionModeForInitialTrack,e=d.getCustomInitialTrackSelectionFunction();if(e&&"function"==typeof e)n=e(t);else switch(l){case Be.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:o=0,a=[],t.forEach(function(e){isNaN(e.selectionPriority)||(e.selectionPriority>o?(o=e.selectionPriority,a=[e]):e.selectionPriority===o&&a.push(e))}),n=s=1<(s=1<(s=a).length?w(s):s).length?R(s):s;break;case Be.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:n=s=1<(s=w(t)).length?R(s):s;break;case Be.Z.TRACK_SELECTION_MODE_FIRST_TRACK:n=t[0];break;case Be.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:n=i=1<(i=I(t)).length?w(i):i;break;case Be.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:n=r=1<(r=R(i=t)).length?w(i):r;break;default:u.warn("Track selection mode ".concat(l," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),n=t[0]}return(0<n.length?n:t)[0]}return e={setInitialMediaSettingsForType:function(e,t){var n=o[e]||g(e),t=i(e,t.id),r=[];n||((n=a.getSavedMediaSettings(e))&&delete n.codec,h(e,n)),t&&0!==t.length&&(n&&(r=y(r=Array.from(t),v,n),r=y(r,E,n),r=y(r,_,n),e===Be.Z.AUDIO&&o[e]||(r=y(r,T,n)),r=y(r,b,n),r=y(r,S,n),r=y(r,A,n)),0===r.length?p(C(e,t),!0):1<r.length?p(C(e,r)):p(r[0]))},addTrack:function(e){if(e){var t=e.type;if(t===Be.Z.AUDIO||t===Be.Z.VIDEO||t===Be.Z.TEXT||t===Be.Z.IMAGE){var n,r=e.streamInfo.id;s[r]||(s[r]={audio:{list:[],storeLastSettings:n=c.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:n,current:null},text:{list:[],storeLastSettings:n,current:null},image:{list:[],storeLastSettings:n,current:null}});for(var i=s[r][t].list,o=0,a=i.length;o<a;++o)if(m(i[o],e))return;i.push(e)}}},getTracksFor:i,getCurrentTrackFor:f,isCurrentTrack:function(e){var t,n;return!!e&&(t=e.type,n=e.streamInfo.id,s[n])&&s[n][t]&&m(s[n][t].current,e)},setTrack:p,selectInitialTrack:C,setInitialSettings:h,getInitialSettings:g,getTracksWithHighestBitrate:w,getTracksWithHighestEfficiency:I,getTracksWithWidestRange:R,isTracksEqual:m,matchSettings:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{var r,i=!1,o=(t.lang?t.lang instanceof RegExp?i=e.lang.match(t.lang):""!==e.lang&&(r=an()(t.lang))&&(i=0<(0,sn.extendedFilter)(e.lang,r).length):i=!0,void 0===t.index||null===t.index||e.index===t.index),a=!t.viewpoint||t.viewpoint===e.viewpoint,s=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],l=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],u=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return i&&o&&a&&(s||e.type===Be.Z.AUDIO&&n)&&l&&u}catch(t){return!1}},matchSettingsLang:v,matchSettingsIndex:E,matchSettingsViewPoint:_,matchSettingsRole:T,matchSettingsAccessibility:b,matchSettingsAudioChannelConfig:S,saveTextSettingsDisabled:function(){a.setSavedMediaSettings(Be.Z.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(a=e.domStorage),e.settings&&(c=e.settings),e.customParametersModel)&&(d=e.customParametersModel)},reset:r},u=(0,je.Z)(t).getInstance().getLogger(e),r(),e}ln.__dashjs_factory_name="MediaController";function un(e,t){if(!(this instanceof un))throw new TypeError("Cannot call a class as a function");this.data={baseUrls:e||null,selectedIdx:t||dn},this.children=[]}var e=ve.Z.getSingletonFactory(ln),cn=(ve.Z.updateSingletonFactory(ln.__dashjs_factory_name,e),e),dn=NaN;function fn(){var i,o,n,e=this.context,r=ne(e).getInstance();function a(e,t,n){n=s(n);e[t]?r.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=dn):e[t]=new un(n)}function s(e){var e=o.getBaseURLsFromElement(e),t=n.getSynthesizedBaseUrlElements(e);return e=t&&0<t.length?e.concat(t):e}function t(){i=new un}return e={reset:t,update:function(e){if(!o||!o.hasOwnProperty("getBaseURLsFromElement")||!o.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously");var t=s(e);r.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=dn),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){a(i.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){a(i.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(o.getRepresentationSortFunction()).forEach(function(e,t){a(i.children[r].children[n].children,t,e)})})})},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){e=e||i;n(e.data),e.children&&e.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=dn)})},setConfig:function(e){e.adapter&&(o=e.adapter),e.contentSteeringController&&(n=e.contentSteeringController)},getBaseUrls:s},t(),e}fn.__dashjs_factory_name="BaseURLTreeModel";var pn=ve.Z.getClassFactory(fn);function hn(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var n,t=0,r=[],i=0;if((e=e.sort(function(e,t){e=e.dvbPriority-t.dvbPriority;return isNaN(e)?0:e}).filter(function(e,t,n){return!t||n[0].dvbPriority&&e.dvbPriority&&n[0].dvbPriority===e.dvbPriority})).length)return 1<e.length&&(e.forEach(function(e){t+=e.dvbWeight,r.push(t)}),n=Math.floor(Math.random()*(t-1)),r.every(function(e,t){return i=t,!(n<e)})),e[i]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvbPriority&&t.push(e.dvbPriority),!1)}).filter(function(e){return!t.length||!e.dvbPriority||-1===t.indexOf(e.dvbPriority)})));var t}}}hn.__dashjs_factory_name="DVBSelector";var gn=ve.Z.getClassFactory(hn);function mn(e){var r=(e=e||{}).blacklistController;return{select:function(e){var t,n=0;return t=e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})?e[n]:t}}}mn.__dashjs_factory_name="BasicSelector";var yn=ve.Z.getClassFactory(mn);function vn(){var e,r,a,t=this.context;function i(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:[],i=0,o=NaN;i<n.length;)if("break"===function(){var t=n[i],e=r.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!a.contains(r[e].serviceLocation))return o=e,"break";i+=1}())break;return o}return e={selectBaseUrlIndex:function(e){var t=NaN,n=(isNaN(e.selectedIdx)&&(n=r.getSteeringDataFromManifest())&&0<n.defaultServiceLocationArray.length&&(t=i(n.defaultServiceLocationArray,e.baseUrls)),r.getCurrentSteeringResponseData());return t=e.baseUrls&&e.baseUrls.length&&n&&n.pathwayPriority&&n.pathwayPriority.length?i(n.pathwayPriority,e.baseUrls):t},setConfig:function(e){e.blacklistController&&(a=e.blacklistController),e.contentSteeringController&&(r=e.contentSteeringController)}},r=Ut(t).getInstance(),e}vn.__dashjs_factory_name="ContentSteeringSelector";var En=ve.Z.getClassFactory(vn);function _n(){var e,t,n,r,i,o,a=this.context,s=(0,qe.Z)(a).getInstance(),l=(0,Ee.Z)(a).getInstance();function u(){t.reset()}return e={chooseSelector:function(e){(0,Te.PS)(e,"boolean"),o=e?r:n},select:function(e){var t;if(e)return l.get().streaming.applyContentSteering&&(t=i.selectBaseUrlIndex(e),isNaN(t)||-1===t||(e.selectedIdx=t)),isNaN(e.selectedIdx)?(t=o.select(e.baseUrls))?(e.selectedIdx=e.baseUrls.indexOf(t),t):(s.trigger(Ge.Z.URL_RESOLUTION_FAILED,{error:new Ye.Z(Ke.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ke.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(o===n&&u())):e.baseUrls[e.selectedIdx]},reset:u,setConfig:function(e){e.selector&&(o=e.selector),e.contentSteeringSelector&&(i=e.contentSteeringSelector)}},t=Ot(a).create({updateEventName:Ge.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:Ge.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),n=yn(a).create({blacklistController:t}),r=gn(a).create({blacklistController:t}),(i=En(a).create()).setConfig({blacklistController:t}),o=n,e}_n.__dashjs_factory_name="BaseURLSelector";var Tn=ve.Z.getClassFactory(_n);function bn(){var e,t,n,r,i,o=this.context,a=(0,qe.Z)(o).getInstance(),s=(0,Se.Z)(o).getInstance();function l(e){n.update(e),r.chooseSelector(t.getIsDVB(e)),a.trigger(He.Z.BASE_URLS_UPDATED,{baseUrls:u(e)})}function u(e){return n.getBaseUrls(e)}return e={reset:function(){n.reset(),r.reset()},initialize:function(e){n.setConfig({adapter:t,contentSteeringController:i}),l(e)},resolve:function(e){e=n.getForPath(e).reduce(function(e,t){t=r.select(t);return t?(s.isRelative(t.url)?e.url=s.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e.queryParams=t.queryParams,e):new X},new X);if(!s.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(n=e.baseURLTreeModel),e.baseURLSelector&&(r=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(i=e.contentSteeringController)},getBaseUrls:u,update:l},n=pn(o).create(),r=Tn(o).create(),a.on(Ge.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(e){n.invalidateSelectedIndexes(e.entry)},e),e}bn.__dashjs_factory_name="BaseURLController";var Sn=ve.Z.getClassFactory(bn);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rn=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=In(n),t=(e=r?(e=In(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==An(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(e,t){var n;if(this instanceof o)return(n=i.call(this)).url=e||null,n.type=t||null,n.mediaType=Be.Z.STREAM,n.responseType="",n;throw new TypeError("Cannot call a class as a function")}return o}(A.Z);function Cn(e){e=e||{};var t=this.context,o=(0,qe.Z)(t).getInstance(),a=D(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:Ke});return{load:function(n,r,i){function t(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(Ge.Z.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new Ye.Z(Ke.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ke.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})}var e;"urn:mpeg:dash:resolve-to-zero:2013"===n?t(null,!0):(e=new Rn(n,_e.w.XLINK_EXPANSION_TYPE),a.load({request:e,success:function(e){t(e)},error:function(){t(null)}}))},reset:function(){a&&(a.abort(),a=null)}}}Cn.__dashjs_factory_name="XlinkLoader";function Nn(w){function I(e){var t=e.localName;return t=null!=(t=null==t?e.baseName:t)&&""!=t?t:e.nodeName}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function R(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(t,n,r))break}return i!=e.length}function C(e,t,n){"property"===w.arrayAccessForm&&(e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]),!(e[t]instanceof Array)&&0<w.arrayAccessFormPaths.length&&R(w.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function N(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");return n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]?(r=60*t[6]+Number(t[7]),r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))),n}function D(e,t){if(9==e.nodeType){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++)1==(a=r[i]).nodeType&&(w.ignoreRoot?n=D(a):(n={})[c=I(a)]=D(a));return n}if(1==e.nodeType){(n=new Object).__cnt=0;for(var o=[],r=e.childNodes,i=0;i<r.length;i++){var a,s,l,u,c=I(a=r[i]);8!=a.nodeType&&(T=n,b=a.nodeType,A=s=t+"."+(S=c),1==b&&0<w.xmlElementsFilter.length&&!R(w.xmlElementsFilter,T,S,A)||(n.__cnt++,null==n[c]?(l=D(a,s),"#text"==c&&!/[^\s]/.test(l)||((u={})[c]=l,o.push(u)),n[c]=l,C(n,c,s)):(null==n[c]||n[c]instanceof Array||(n[c]=[n[c]],C(n,c,s)),l=D(a,s),"#text"==c&&!/[^\s]/.test(l)||((u={})[c]=l,o.push(u)),n[c][n[c].length]=l)))}n.__children=o;for(var d=I(e),f=0;f<e.attributes.length;f++){var p=e.attributes[f];n.__cnt++;for(var h=p.value,g=0,m=w.matchers.length;g<m;g++){var y=w.matchers[g];y.test(p,d)&&(h=y.converter(p.value))}n[w.attributePrefix+p.name]=h}var v=e.prefix;return null!=v&&""!=v&&(n.__cnt++,n.__prefix=v),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),w.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==w.arrayAccessForm&&delete n["#text_asArray"],n.__text=(v=n.__text,_=t+"."+(E=c),0<w.datetimeAccessFormPaths.length&&(_=_.split(".#")[0],R(w.datetimeAccessFormPaths,v,E,_))?N(v):v)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==w.arrayAccessForm)&&delete n["#cdata-section_asArray"],0==n.__cnt&&"text"==w.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||w.keepCData?1<n.__cnt&&null!=n.__text&&w.skipEmptyTextNodesForObj&&(w.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!w.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}var E,_,T,b,S,A;if(3==e.nodeType||4==e.nodeType)return e.nodeValue}function s(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=e[a];w.escapeMode&&(s=l(s)),i+=" "+a.substr(w.attributePrefix.length)+"=",w.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+(r?"/>":">")}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return"property"==w.arrayAccessForm&&-1!==(n=t.toString()).indexOf("_asArray",n.length-"_asArray".length)||0==t.toString().indexOf(w.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n}function d(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(w.attributePrefix)&&t.push(n);return t}function p(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(w.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(w.escapeMode?r+=l(e):r+=e),r}function h(e,t){return""===e?t:e+"."+t}function g(e,t){var n,r,i,o="";if(0<d(e))for(var a in e)c(e,a)||""!=t&&(n=e,i=h(t,r=a),0!=w.jsonPropertiesFilter.length)&&""!=i&&!R(w.jsonPropertiesFilter,n,r,i)||(r=f(n=e[a]),null==n?o+=s(n,a,r,!0):n instanceof Object?n instanceof Array?o+=function(e,t,n,r){var i="";if(0==e.length)i+=s(e,t,n,!0);else for(var o=0;o<e.length;o++)i=(i=(i+=s(e[o],t,f(e[o]),!1))+g(e[o],h(r,t)))+u(e[o],t);return i}(n,a,r,t):n instanceof Date?o=(o=(o+=s(n,a,r,!1))+n.toISOString())+u(n,a):0<d(n)||null!=n.__text||null!=n.__cdata?o=(o=(o+=s(n,a,r,!1))+g(n,h(t,a)))+u(n,a):o+=s(n,a,r,!0):o=(o=(o+=s(n,a,r,!1))+p(n))+u(n,a));return o+p(e)}void 0===(w=w||{}).escapeMode&&(w.escapeMode=!0),void 0===w.attributePrefix&&(w.attributePrefix="_"),w.arrayAccessForm=w.arrayAccessForm||"none",w.emptyNodeForm=w.emptyNodeForm||"text",void 0===w.enableToStringFunc&&(w.enableToStringFunc=!0),w.arrayAccessFormPaths=w.arrayAccessFormPaths||[],void 0===w.skipEmptyTextNodesForObj&&(w.skipEmptyTextNodesForObj=!0),void 0===w.stripWhitespaces&&(w.stripWhitespaces=!0),w.datetimeAccessFormPaths=w.datetimeAccessFormPaths||[],void 0===w.useDoubleQuotes&&(w.useDoubleQuotes=!1),w.xmlElementsFilter=w.xmlElementsFilter||[],w.jsonPropertiesFilter=w.jsonPropertiesFilter||[],void 0===w.keepCData&&(w.keepCData=!1),void 0===w.ignoreRoot&&(w.ignoreRoot=!1),this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?N(e):e},this.xml2json=function(e){return D(e)},this.xml_str2json=function(e){e=this.parseXmlString(e);return null!=e?this.xml2json(e):null},this.json2xml_str=function(e){return g(e,"")},this.json2xml=function(e){e=this.json2xml_str(e);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}var Dn=ve.Z.getClassFactory(Cn),y="onLoad";function On(e){e=e||{};var t,n,f,p,r,s,i=this.context,h=(0,qe.Z)(i).getInstance(),l=(0,Se.Z)(i).getInstance();function g(e,t,n){var r,i,o={};o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&u(o);for(var a=0;a<o.elements.length;a++)r=o.elements[a],i=l.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,s.load(i,r,o)}function o(e){var t,n=e.element,e=e.resolveObject;n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),t=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=r.xml_str2json(t)),function(e){for(var t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return;return 1}(e)&&u(e)}function u(e){for(var t,n,r,i,o,a,s,l=[],u=e,c=[],d=u.elements.length-1;0<=d;d--){if(i=(r=u.elements[d]).type+"_asArray",r.resolvedContent){if(r.resolvedContent)for(a=0;a<r.resolvedContent[i].length;a++)o=r.resolvedContent[i][a],c.push(o)}else delete r.originalContent["xlink:actuate"],delete r.originalContent["xlink:href"],c.push(r.originalContent);for(r.parentElement[i].splice(r.index,1),s=0;s<c.length;s++)r.parentElement[i].splice(r.index+s,0,c[s]);c=[]}if(0<u.elements.length&&f.run(p),"onActuate"===e.resolveType&&h.trigger(Ge.Z.XLINK_READY,{manifest:p}),e.resolveType===y)switch(e.type){case ye.Z.PERIOD:for(t=0;t<p[ye.Z.PERIOD+"_asArray"].length;t++)(n=p[ye.Z.PERIOD+"_asArray"][t]).hasOwnProperty(ye.Z.ADAPTATION_SET+"_asArray")&&(l=l.concat(m(n[ye.Z.ADAPTATION_SET+"_asArray"],n,ye.Z.ADAPTATION_SET,y))),n.hasOwnProperty(ye.Z.EVENT_STREAM+"_asArray")&&(l=l.concat(m(n[ye.Z.EVENT_STREAM+"_asArray"],n,ye.Z.EVENT_STREAM,y)));g(l,ye.Z.ADAPTATION_SET,y);break;case ye.Z.ADAPTATION_SET:h.trigger(Ge.Z.XLINK_READY,{manifest:p})}}function m(e,t,n,r){for(var i,o,a=[],s=e.length-1;0<=s;s--)(i=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(i=e[s]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o={url:i["xlink:href"],parentElement:t,type:n,index:s,resolveType:r,originalContent:i,resolvedContent:null,resolved:!1},a.push(o));return a}return t={resolveManifestOnLoad:function(e){r=new Nn({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(p=e).Period_asArray?g(m(p.Period_asArray,p,ye.Z.PERIOD,y),ye.Z.PERIOD,y):h.trigger(Ge.Z.XLINK_READY,{manifest:p})},setMatchers:function(e){e&&(n=e)},setIron:function(e){e&&(f=e)},reset:function(){h.off(Ge.Z.XLINK_ELEMENT_LOADED,o,t),s&&(s.reset(),s=null)}},h.on(Ge.Z.XLINK_ELEMENT_LOADED,o,t),s=Dn(i).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}On.__dashjs_factory_name="XlinkController";var Mn=ve.Z.getClassFactory(On);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(c){function _(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],o=t[i.name+"_asArray"];if(o)for(var a=0,s=o.length;a<s;++a){for(var l=o[a],u=(E=v=y=m=g=h=p=f=d=c=u=void 0,e.properties),c=t,d=l,f=0,p=u.length;f<p;++f){var h=u[f];if(c[h.name])if(d[h.name]){if(h.merge){var g=c[h.name],m=d[h.name];if("object"===Pn(g)&&"object"===Pn(m)){y=void 0;v=void 0;E=void 0;var y=g;var v=m;for(var E in y)v.hasOwnProperty(E)||(v[E]=y[E])}else d[h.name]=g+m}}else d[h.name]=c[h.name]}_(i,l)}}}return{run:function(e){if(null!==e&&"object"===Pn(e)&&e.Period_asArray&&"period"in c)for(var t=c.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var o=n[r];if(_(t,o),"adaptationset"in c){var a=o.AdaptationSet_asArray;if(a)for(var s=c.adaptationset,l=0,u=a.length;l<u;++l)_(s,a[l])}}return e}}}Ln.__dashjs_factory_name="ObjectIron";var xn=ve.Z.getClassFactory(Ln);var a=function(){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._test=e,this._converter=t}for(var e=n.prototype,t=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}],r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return n}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bn=function(){var e=o,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=Un(n),t=(e=r?(e=Un(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==kn(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){if(this instanceof o)return i.call(this,function(e,t){s(n={},ye.Z.MPD,[ye.Z.ID,ye.Z.PROFILES]),s(n,ye.Z.PERIOD,[ye.Z.ID]),s(n,ye.Z.BASE_URL,[ye.Z.SERVICE_LOCATION,ye.Z.BYTE_RANGE]),s(n,ye.Z.SEGMENT_BASE,[ye.Z.INDEX_RANGE]),s(n,ye.Z.INITIALIZATION,[ye.Z.RANGE]),s(n,ye.Z.REPRESENTATION_INDEX,[ye.Z.RANGE]),s(n,ye.Z.SEGMENT_LIST,[ye.Z.INDEX_RANGE]),s(n,ye.Z.BITSTREAM_SWITCHING,[ye.Z.RANGE]),s(n,ye.Z.SEGMENT_URL,[ye.Z.MEDIA_RANGE,ye.Z.INDEX_RANGE]),s(n,ye.Z.SEGMENT_TEMPLATE,[ye.Z.INDEX_RANGE,ye.Z.MEDIA,ye.Z.INDEX,ye.Z.INITIALIZATION_MINUS,ye.Z.BITSTREAM_SWITCHING_MINUS]),s(n,ye.Z.ASSET_IDENTIFIER,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.EVENT_STREAM,[ye.Z.VALUE]),s(n,ye.Z.ADAPTATION_SET,[ye.Z.PROFILES,ye.Z.MIME_TYPE,ye.Z.SEGMENT_PROFILES,ye.Z.CODECS,ye.Z.CONTENT_TYPE]),s(n,ye.Z.FRAME_PACKING,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.AUDIO_CHANNEL_CONFIGURATION,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.CONTENT_PROTECTION,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.ESSENTIAL_PROPERTY,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.SUPPLEMENTAL_PROPERTY,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.INBAND_EVENT_STREAM,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.ACCESSIBILITY,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.ROLE,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.RATING,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.VIEWPOINT,[ye.Z.VALUE,ye.Z.ID]),s(n,ye.Z.CONTENT_COMPONENT,[ye.Z.CONTENT_TYPE]),s(n,ye.Z.REPRESENTATION,[ye.Z.ID,ye.Z.DEPENDENCY_ID,ye.Z.MEDIA_STREAM_STRUCTURE_ID]),s(n,ye.Z.SUBSET,[ye.Z.ID]),s(n,ye.Z.METRICS,[ye.Z.METRICS_MINUS]),s(n,ye.Z.REPORTING,[ye.Z.VALUE,ye.Z.ID]);var n;return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return String(e)});throw new TypeError("Cannot call a class as a function")}return o}();function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Hn=function(){var e=o,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=Gn(n),t=(e=r?(e=Gn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Zn(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){if(this instanceof o)return i.call(this,function(e){for(var t=[ye.Z.MIN_BUFFER_TIME,ye.Z.MEDIA_PRESENTATION_DURATION,ye.Z.MINIMUM_UPDATE_PERIOD,ye.Z.TIMESHIFT_BUFFER_DEPTH,ye.Z.MAX_SEGMENT_DURATION,ye.Z.MAX_SUBSEGMENT_DURATION,ye.Z.SUGGESTED_PRESENTATION_DELAY,ye.Z.START,Be.Z.START_TIME,ye.Z.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return jn.test(e.value);return!1},function(e){var e=jn.exec(e),t=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return t=void 0!==e[1]?-t:t});throw new TypeError("Cannot call a class as a function")}return o}();function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zn=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Vn=function(){var e=o,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=$n(n),t=(e=r?(e=$n(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Yn(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){if(this instanceof o)return i.call(this,function(e){return zn.test(e.value)},function(e){var t,e=zn.exec(e),n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&1e3*parseFloat(e[7])||0);return e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),new Date(n)});throw new TypeError("Cannot call a class as a function")}return o}();function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jn=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,er=function(){var e=o,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=Qn(n),t=(e=r?(e=Qn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Wn(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){if(this instanceof o)return i.call(this,function(e){return Jn.test(e.value)},function(e){return parseFloat(e)});throw new TypeError("Cannot call a class as a function")}return o}();function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ir=function(){var e=o,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=rr(n),t=(e=r?(e=rr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==tr(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){if(this instanceof o)return i.call(this,function(e,t){l(n={},ye.Z.ADAPTATION_SET,[ye.Z.LANG]),l(n,ye.Z.REPRESENTATION,[ye.Z.LANG]),l(n,ye.Z.CONTENT_COMPONENT,[ye.Z.LANG]),l(n,ye.Z.LABEL,[ye.Z.LANG]),l(n,ye.Z.GROUP_LABEL,[ye.Z.LANG]);var n;return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return an()(e)||String(e)});throw new TypeError("Cannot call a class as a function")}return o}();var or=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._name=e,this._merge=(e=e)&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}for(var e=t.prototype,n=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return t}();var u=function(){function i(e,t,n){var r=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new or(e))})}for(var e=i.prototype,t=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}],n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return i}();function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ur=function(){var e=o,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=lr(n),t=(e=r?(e=lr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ar(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return e=[ye.Z.PROFILES,ye.Z.WIDTH,ye.Z.HEIGHT,ye.Z.SAR,ye.Z.FRAMERATE,ye.Z.AUDIO_SAMPLING_RATE,ye.Z.MIME_TYPE,ye.Z.SEGMENT_PROFILES,ye.Z.CODECS,ye.Z.MAXIMUM_SAP_PERIOD,ye.Z.START_WITH_SAP,ye.Z.MAX_PLAYOUT_RATE,ye.Z.CODING_DEPENDENCY,ye.Z.SCAN_TYPE,ye.Z.FRAME_PACKING,ye.Z.AUDIO_CHANNEL_CONFIGURATION,ye.Z.CONTENT_PROTECTION,ye.Z.ESSENTIAL_PROPERTY,ye.Z.ESSENTIAL_PROPERTY+"_asArray",ye.Z.SUPPLEMENTAL_PROPERTY,ye.Z.INBAND_EVENT_STREAM],i.call(this,ye.Z.ADAPTATION_SET,e,[new u(ye.Z.REPRESENTATION,e,[new u(ye.Z.SUB_REPRESENTATION,e)])]);throw new TypeError("Cannot call a class as a function")}return o}();function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pr=function(){var e=o,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=fr(n),t=(e=r?(e=fr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==cr(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return e=[ye.Z.SEGMENT_BASE,ye.Z.SEGMENT_TEMPLATE,ye.Z.SEGMENT_LIST],i.call(this,ye.Z.PERIOD,e,[new u(ye.Z.ADAPTATION_SET,e,[new u(ye.Z.REPRESENTATION,e)])]);throw new TypeError("Cannot call a class as a function")}return o}();function hr(e){var t=this.context,n={parse:function(e){var t,n,r=window.performance.now();if(e=o.xml_str2json(e))return t=window.performance.now(),e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach(function(e){return a.run(e)}),e.replace_asArray&&e.replace_asArray.forEach(function(e){return a.run(e)})):(e=e.MPD,a.run(e)),n=window.performance.now(),i.info("Parsing complete: ( xml2json: "+(t-r).toPrecision(3)+"ms, objectiron: "+(n-t).toPrecision(3)+"ms, total: "+((n-r)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e;throw new Error("parsing the manifest failed")},getMatchers:function(){return r},getIron:function(){return a}},i=(e=e||{}).debug.getLogger(n),r=[new Hn,new Vn,new er,new ir,new Bn],o=new Nn({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),a=xn(t).create({adaptationset:new ur,period:new pr});return n}hr.__dashjs_factory_name="DashParser";var gr=ve.Z.getClassFactory(hr);function mr(e){var t,s,i,l,u,c=this.context,d=(e=e||{}).debug,f=e.settings,p=(0,qe.Z)(c).getInstance(),h=(0,Se.Z)(c).getInstance(),g=e.mssHandler,n=e.errHandler;function r(e){p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=new Date,r=new Rn(a,_e.w.MPD_TYPE);e&&(r.serviceLocation=e),t&&(r.queryParams=t),r.requestStartDate||(r.requestStartDate=n),p.trigger(Ge.Z.MANIFEST_LOADING_STARTED,{request:r}),i.load({request:r,success:function(e,t,n){var r,i,o;if(l)if(n&&n!==a?(i=h.parseBaseUrl(n),r=n):(h.isRelative(a)&&(a=h.resolve(a,window.location.href)),i=h.parseBaseUrl(a)),"No Content"!=t)if(null===u&&(n=null,u=-1<(t=e).indexOf("SmoothStreamingMedia")?(g&&(n=g.createMssParser(),g.createMssFragmentProcessor(),g.registerEvents()),n):-1<t.indexOf("MPD")||-1<t.indexOf("Patch")?gr(c).create({debug:d}):n),null!==u){l.setMatchers(u.getMatchers()),l.setIron(u.getIron());try{o=u.parse(e)}catch(e){return void p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ye.Z(Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(a))})}o?(o.url=r||a,o.originalUrl||(o.originalUrl=o.url),f&&f.get().streaming.enableManifestDurationMismatchFix&&o.mediaPresentationDuration&&1<o.Period_asArray.length&&(t=o.Period_asArray.reduce(function(e,t){return e+t.duration},0),!isNaN(t))&&o.mediaPresentationDuration>t&&(s.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),o.mediaPresentationDuration=t),o.baseUri=i,o.loadedTime=new Date,l.resolveManifestOnLoad(o),p.trigger(Ge.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ye.Z(Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(a))})}else p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ye.Z(Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ke.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(a))});else p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(e,t,n){p.trigger(Ge.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ye.Z(Ke.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ke.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(a,", ").concat(n))})}})},reset:function(){p.off(Ge.Z.XLINK_READY,r,t),g&&g.reset(),l&&(l.reset(),l=null),i&&(i.abort(),i=null)}},s=d.getLogger(t),p.on(Ge.Z.XLINK_READY,r,t),i=D(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:h,constants:Be.Z,dashConstants:ye.Z,errors:Ke,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),l=Mn(c).create({errHandler:n,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),u=null,t}mr.__dashjs_factory_name="ManifestLoader";var yr=ve.Z.getClassFactory(mr);function vr(){var e=this.context,t=(0,qe.Z)(e).getInstance();return{error:function(e){t.trigger(Ge.Z.ERROR,{error:e})}}}vr.__dashjs_factory_name="ErrorHandler";var Er=ve.Z.getSingletonFactory(vr),_r=t(1715);function Tr(){var e,a,s,i,o,l,t=this.context,u=(0,qe.Z)(t).getInstance();function n(t,e){var i;return e&&e.Period_asArray&&0!==e.Period_asArray.length?(i=[],e.Period_asArray.forEach(function(e){var n,r;i.push((n=e,r=t,new Promise(function(e){var t;n&&n.AdaptationSet_asArray&&0!==n.AdaptationSet_asArray.length?(t=[],n.AdaptationSet_asArray.forEach(function(e){var i,o;a.getIsTypeOf(e,r)&&t.push((i=e,o=r,new Promise(function(e){var n,r;i.Representation_asArray&&0!==i.Representation_asArray.length?(n=[],r=[],i.Representation_asArray.forEach(function(e,t){e=function(e,t){switch(o){case Be.Z.VIDEO:return{codec:t,width:e.width||null,height:e.height||null,framerate:e.frameRate||null,bitrate:e.bandwidth||null};case Be.Z.AUDIO:return n=e.audioSamplingRate||null,{codec:t,bitrate:e.bandwidth||null,samplerate:n};default:return null}var n}(e,a.getCodec(i,t,!1));r.push(e),n.push(s.supportsCodec(e,o))}),Promise.all(n).then(function(n){i.Representation_asArray=i.Representation_asArray.filter(function(e,t){return n[t]||l.debug("[Stream] Codec ".concat(r[t].codec," not supported ")),n[t]}),e()}).catch(function(){e()})):e()})))}),Promise.all(t).then(function(){n.AdaptationSet_asArray=n.AdaptationSet_asArray.filter(function(e){var t=e.Representation_asArray&&0<e.Representation_asArray.length;return t||(u.trigger(Ge.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),l.warn("AdaptationSet has been removed because of no supported Representation")),t}),e()}).catch(function(){e()})):e()})))}),Promise.all(i)):Promise.resolve()}return e={setConfig:function(e){e&&(e.adapter&&(a=e.adapter),e.capabilities&&(s=e.capabilities),e.settings&&(i=e.settings),e.customParametersModel)&&(o=e.customParametersModel)},filterUnsupportedFeatures:function(r){return new Promise(function(t){var e=[];e.push(n(Be.Z.VIDEO,r)),e.push(n(Be.Z.AUDIO,r)),Promise.all(e).then(function(){var n,e;i.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(e=r)&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var t=a.getEssentialPropertiesForRepresentation(e);if(t&&0<t.length)for(var n=0;n<t.length;){if(!s.supportsEssentialProperty(t[n]))return l.debug("[Stream] EssentialProperty not supported: "+t[n].schemeIdUri),!1;n+=1}return!0}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),e=r,(n=o.getCustomCapabilitiesFilters())&&0!==n.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(t){return!n.some(function(e){return!e(t)})}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),t()}).catch(function(){t()})})}},l=(0,je.Z)(t).getInstance().getLogger(e),e}Tr.__dashjs_factory_name="CapabilitiesFilter";function br(){if(!(this instanceof br))throw new TypeError("Cannot call a class as a function");this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}var Sr=ve.Z.getSingletonFactory(Tr);function Ar(){var l;return{initialize:function(e){if(l=new br,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var o,a=n[r],s=a.indexOf("=");-1!==s&&(o=a.substring(0,s),l.hasOwnProperty(o))&&(l[o]=a.substr(s+1))}},getURIFragmentData:function(){return l}}}Ar.__dashjs_factory_name="URIFragmentModel";var wr=ve.Z.getSingletonFactory(Ar);function Ir(){var t,e=this.context,n=(0,qe.Z)(e).getInstance();return{getValue:function(){return t},setValue:function(e){(t=e)&&n.trigger(Ge.Z.MANIFEST_LOADED,{data:e})}}}Ir.__dashjs_factory_name="ManifestModel";var Rr=ve.Z.getSingletonFactory(Ir);function Cr(){var e,n,r,i,t=this.context,o=(0,Ee.Z)(t).getInstance();function a(e,t){return isNaN(e)?0:0<e?(t&&n.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(t&&n.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):e}function s(e,t){return isNaN(e)?0:e<0?(t&&n.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):1<e?(t&&n.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function l(){var e=0<o.get().streaming.buffer.stableBufferTime?o.get().streaming.buffer.stableBufferTime:o.get().streaming.buffer.fastSwitchEnabled?20:12,t=r.getLiveDelay();return!isNaN(t)&&0<t?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){var e;return!isNaN(o.get().streaming.liveCatchup.maxDrift)&&0<o.get().streaming.liveCatchup.maxDrift?o.get().streaming.liveCatchup.maxDrift:(e=i.getServiceDescriptionSettings())&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&0<e.liveCatchup.maxDrift?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==o.get().streaming.liveCatchup.enabled?o.get().streaming.liveCatchup.enabled:r.getInitialCatchupModeActivated()},getStableBufferTime:l,getInitialBufferLevel:function(){var e=o.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(l(),e)},getRetryAttemptsForType:function(e){var t=isNaN(o.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:o.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return r.getLowLatencyModeEnabled()?o.get().streaming.retryAttempts[e]*t:o.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(o.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:o.get().streaming.retryIntervals.lowLatencyReductionFactor;return r.getLowLatencyModeEnabled()?o.get().streaming.retryIntervals[e]/t:o.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t,n=o.get().streaming.liveCatchup.playbackRate;return isNaN(n.min)&&isNaN(n.max)?!(t=i.getServiceDescriptionSettings())||!t.liveCatchup||isNaN(t.liveCatchup.playbackRate.min)&&isNaN(t.liveCatchup.playbackRate.max)?{min:-.5,max:.5}:{min:a((t=t.liveCatchup.playbackRate).min,e),max:s(t.max,e)}:{min:a(n.min,e),max:s(n.max,e)}},getAbrBitrateParameter:function(e,t){try{var n,r=o.get().streaming.abr[e][t];return isNaN(r)||-1===r?(n=i.getServiceDescriptionSettings())&&n[e]&&!isNaN(n[e][t])?n[e][t]:-1:r}catch(e){return-1}},setConfig:function(e){e.playbackController&&(r=e.playbackController),e.serviceDescriptionController&&(i=e.serviceDescriptionController)},reset:function(){}},n=(0,je.Z)(t).getInstance().getLogger(e),e}Cr.__dashjs_factory_name="MediaPlayerModel";var Nr=ve.Z.getSingletonFactory(Cr),Dr=t(1767);function Or(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,o=e.useBufferOccupancyABR,a=e.useL2AABR,s=e.useLoLPABR,l=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel||null;function d(){return u?u.mediaInfo:null}return{getMediaType:function(){var e=d();return e?e.type:null},getMediaInfo:d,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=d();return e?e.streamInfo:null},getScheduleController:function(){return l},getAbrController:function(){return t},getRepresentationInfo:function(){return u},useBufferOccupancyABR:function(){return o},useL2AABR:function(){return a},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}Or.__dashjs_factory_name="RulesContext";var Mr=ve.Z.getClassFactory(Or),Pr=t(2068);function Lr(){var i=[],o=[];return{push:function(e){e.newValue===Pr.Z.NO_CHANGE&&(e.newValue=e.oldValue),i[e.oldValue]||(i[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,t=n?-t:0,r=n?0:1;i[e.oldValue].drops+=n,i[e.oldValue].dropSize+=t,i[e.oldValue].noDrops+=r,o.push({idx:e.oldValue,noDrop:r,drop:n,dropSize:t}),8<o.length&&(e=o.shift(),i[e.idx].drops-=e.drop,i[e.idx].dropSize-=e.dropSize,i[e.idx].noDrops-=e.noDrop)},getSwitchRequests:function(){return i},reset:function(){i=[],o=[]}}}Lr.__dashjs_factory_name="SwitchRequestHistory";var xr=ve.Z.getClassFactory(Lr);function kr(){var o={},a={},s={};return{push:function(e,t,n){var r,i;t&&(o[e]||(o[e]=[],a[e]=0,s[e]=0),i=n&&n.droppedVideoFrames?n.droppedVideoFrames:0,n=n&&n.totalVideoFrames?n.totalVideoFrames:0,r=i-a[e],a[e]=i,i=n-s[e],s[e]=n,n=o[e],isNaN(t)||(n[t]?(n[t].droppedVideoFrames+=r,n[t].totalVideoFrames+=i):n[t]={droppedVideoFrames:r,totalVideoFrames:i}))},getFrameHistory:function(e){return o[e]},clearForStream:function(e){try{delete o[e],delete a[e],delete s[e]}catch(e){}},reset:function(){o={},a={},s={}}}}kr.__dashjs_factory_name="DroppedFramesHistory";var Fr=ve.Z.getClassFactory(kr);function Ur(e){var c,d,f,p,t=this.context,h=(e=e||{}).settings,s=(0,qe.Z)(t).getInstance();function l(e,t,n,r){var i=Math.pow(.5,n/r.fast),i=(e.fastEstimate=(1-i)*t+i*e.fastEstimate,Math.pow(.5,n/r.slow));e.slowEstimate=(1-i)*t+i*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return h.get().streaming.abr.movingAverageMethod!==Be.Z.MOVING_AVERAGE_SLIDING_WINDOW?(s=t,u=(r=e)?g.throughputHalfLife:g.latencyHalfLife,!(s=(r?f:p)[s])||s.totalWeight<=0?NaN:(l=s.fastEstimate/(1-Math.pow(.5,s.totalWeight/u.fast)),s=s.slowEstimate/(1-Math.pow(.5,s.totalWeight/u.slow)),r?Math.min(l,s):Math.max(l,s))):(i=e,o=t,a=n,u=function(){var e,t=i?(e=c[o],a?3:4):(e=d[o],4);if(e){if(t>=e.length)t=e.length;else if(i)for(var n=1;n<t;++n){var r=e[e.length-n]/e[e.length-n-1];if((1.3<=r||r<=1/1.3)&&(t+=1)===e.length)break}}else t=0;return t}(),r=(i?c:d)[o],0!==u&&r&&0!==r.length?(r=r.slice(-u)).reduce(function(e,t){return e+t})/r.length:NaN);var i,o,a,r,s,l,u}function r(e,t){return n(!0,e,t)}function u(e){c[e]=c[e]||[],d[e]=d[e]||[],f[e]=f[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},p[e]=p[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function i(){c={},d={},f={},p={}}var g={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}};return i(),{push:function(e,t,n){if(t.trace&&t.trace.length){var r=t.tresponse.getTime()-t.trequest.getTime()||1,i=t._tfinish.getTime()-t.tresponse.getTime()||1,o=t.trace.reduce(function(e,t){return e+t.b[0]},0),a=0;if(0!==(n=t._fileLoaderType&&t._fileLoaderType===Be.Z.FILE_LOADER_TYPES.FETCH?t.trace.reduce(function(e,t){return e+t.d},0):n?i:r+i)&&(a=Math.round(8*o/n)),t.cmsd&&(o=t.cmsd.dynamic&&t.cmsd.dynamic.etp?t.cmsd.dynamic.etp:null)&&0<(n=h.get().streaming.cmsd.abr.etpWeightRatio)&&n<=1&&(a=a*(1-n)+o*n),u(e),o=i,(n=e)===Be.Z.VIDEO?o<h.get().streaming.cacheLoadThresholds[Be.Z.VIDEO]:n===Be.Z.AUDIO&&o<h.get().streaming.cacheLoadThresholds[Be.Z.AUDIO]){if(0<c[e].length&&!c[e].hasCachedEntries)return;c[e].hasCachedEntries=!0}else c[e]&&c[e].hasCachedEntries&&(delete c[n=e],delete d[n],delete f[n],delete p[n],u(n));c[e].push(a),s.trigger(He.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:a,mediaType:e,httpRequest:t}),20<c[e].length&&c[e].shift(),d[e].push(r),20<d[e].length&&d[e].shift(),l(f[e],a,.001*i,g.throughputHalfLife),l(p[e],r,1,g.latencyHalfLife)}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){e=r(e,t);return isNaN(e)||(e*=h.get().streaming.abr.bandwidthSafetyFactor),e},getAverageLatency:function(e){return n(!1,e)},reset:i}}Ur.__dashjs_factory_name="ThroughputHistory";var Br=ve.Z.getClassFactory(Ur);function Zr(){var u,m,c,o,y,d,v,f,a,E,_,T,b,p,S,t,A,h,g,w,I,R,C,N,D,O,M,P=this.context,n=(0,je.Z)(P).getInstance(),L=(0,qe.Z)(P).getInstance();function e(){y={},d={},f={},v={},w={},C={},N={},D={},void 0===E&&(E=!1),I&&I.reset(),R=I=g=void 0,clearTimeout(a),a=null}function r(e){var t,n,r=e.request.mediaType,i=e.streamId;r&&i&&v[i]&&M.get().streaming.abr.autoSwitchBitrate[r]&&(t=v[i][r])&&(n=Mr(P).create({abrController:u,streamProcessor:t,currentRequest:e.request,useBufferOccupancyABR:C[r],useL2AABR:N[r],useLoLPABR:D[r],videoModel:p}),(n=c.shouldAbandonFragment(n,i)).quality>Pr.Z.NO_CHANGE)&&t.getFragmentModel().getRequests({state:pe.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(f[i][r].state=Ze.Z.ABANDON_LOAD,w[i][r].reset(),w[i][r].push({oldValue:F(r,i),newValue:n.quality,confidence:1,reason:n.reason}),Z(r,o.getActiveStreamInfo(),n.quality,n.reason),clearTimeout(a),a=setTimeout(function(){f[i][r].state=Ze.Z.ALLOW_LOAD,a=null},M.get().streaming.abandonLoadTimeout))}function i(e){e.mediaType===Be.Z.VIDEO&&(void 0!==g&&I.push(e.streamId,g,p.getPlaybackQuality()),g=e.newQuality)}function s(e){var t,n;if(e.metric!==Ze.Z.HTTP_REQUEST||!e.value||e.value.type!==_e.w.MEDIA_SEGMENT_TYPE||e.mediaType!==Be.Z.AUDIO&&e.mediaType!==Be.Z.VIDEO||R.push(e.mediaType,e.value,M.get().streaming.abr.useDeadTimeLatency),e.metric===Ze.Z.BUFFER_LEVEL&&(e.mediaType===Be.Z.AUDIO||e.mediaType===Be.Z.VIDEO)&&(t=e.mediaType,n=.001*e.value.level,M.get().streaming.abr.ABRStrategy===Be.Z.ABR_STRATEGY_DYNAMIC)){var r=t,e=n;try{var i=S.getStableBufferTime(),o=.5*i,a=C[r],s=(a?o:i)<e;(C[r]=s)!==a&&(s?m.info("["+r+"] switching from throughput to buffer occupancy ABR rule (buffer: "+e.toFixed(3)+")."):m.info("["+r+"] switching from buffer occupancy to throughput ABR rule (buffer: "+e.toFixed(3)+")."))}catch(r){m.error(r)}}}function x(e,t){try{var n;return y[t]=y[t]||{},y[t].hasOwnProperty(e)||(y[t][e]=0),d=e,h=y[f=t][d],g=h,n=g=v[f]&&v[f][d]&&(void 0!==(p=k(d,f))&&(g=Math.max(h,p)),void 0!==(h=function(e,t){try{var n=S.getAbrBitrateParameter("maxBitrate",e);return-1<n?U(v[t][e].getMediaInfo(),n,t):void 0}catch(e){}}(d,f)))?Math.min(g,h):g,l=n,u=e,c=y[t][u],u=M.get().streaming.abr.maxRepresentationRatio[u],n=function(e,t,n){if(t!==Be.Z.VIDEO||!M.get().streaming.abr.limitBitrateByPortal||!v[n]||!v[n][t])return e;E||B();var n=v[n][t].getStreamInfo(),r=b.getAdaptationForType(n.index,t,n).Representation_asArray,i=e;if(0<_&&0<T){for(;0<i&&r[i]&&_<r[i].width&&_-r[i-1].width<r[i].width-_;)--i;for(;i<r.length-1&&r[i].width===r[i+1].width;)i+=1}return i}(n=isNaN(u)||1<=u||u<0?l:Math.min(l,Math.round(c*u)),e,t),M.get().streaming.cmsd.enabled&&M.get().streaming.cmsd.abr.applyMb&&(r=n,o=t,n="video"!==(i=e)||(a=A.getMaxBitrate(i))<0?r:(a-=(s=G(o,"audio",F("audio",o)))?s.bitrate/1e3:0,s=U(v[o][i].getMediaInfo(),a,o),m.debug("Stream ID: "+o+" ["+i+"] Apply max bit rate from CMSD: "+a),Math.min(r,s))),n}catch(e){}var r,i,o,a,s,l,u,c,d,f,p,h,g}function k(e,t){try{var n=e,r=t;try{var i,o,a,s=S.getAbrBitrateParameter("minBitrate",n);if(-1<s)return(o=l(i=v[r][n].getMediaInfo()))[a=U(i,s,r)]&&a<o.length-1&&o[a].bitrate<1e3*s&&a++,a}catch(n){}}catch(e){}}function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{return t=t||o.getActiveStreamInfo().id,e&&v[t]&&v[t][e]&&t?(d[t]=d[t]||{},d[t].hasOwnProperty(e)||(d[t][e]=0),d[t][e]):0}catch(e){return 0}}function Z(e,t,n){var r,i,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;t&&t.id&&e&&(r=F(e,t=t.id),(0,Te.SE)(n),i=x(e,t),n!==r)&&0<=n&&n<=i&&q(e,r,n,i,o,t)}function q(e,t,n,r,i,o){var a,s,l;e&&v[o]&&v[o][e]&&(s=(a=v[o][e].getStreamInfo())&&a.manifestInfo&&a.manifestInfo.isDynamic,l=O.getCurrentBufferLevel(e),m.info("Stream ID: "+o+" ["+e+"] switch from "+t+" to "+n+"/"+r+" (buffer: "+l+") "+(i?JSON.stringify(i):".")),d[o]=d[o]||{},l=G(o,e,d[o][e]=n),L.trigger(Ge.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:t,newQuality:n,reason:i,streamInfo:a,bitrateInfo:l,maxIdx:r,mediaType:e},{streamId:a.id,mediaType:e}),o=R.getAverageThroughput(e,s),isNaN(o)||h.setSavedBitrateSettings(e,o))}function G(e,t,n){return t&&v&&v[e]&&v[e][t]&&l(v[e][t].getMediaInfo())[n]||null}function U(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n=e&&e.type?v[n][e.type].getRepresentationInfo():null;if(M.get().streaming.abr.useDeadTimeLatency&&r&&n&&n.fragmentDuration){n=n.fragmentDuration;if(n<(r/=1e3))return 0;t*=1-r/n}for(var i=l(e),o=i.length-1;0<=o;o--)if(1e3*t>=i[o].bitrate)return o;return 0}function l(e){var t=[];if(e&&e.bitrateList)for(var n,r=e.bitrateList,i=e.type,o=0,a=r.length;o<a;o++)(n=new wt).mediaType=i,n.qualityIndex=o,n.bitrate=r[o].bandwidth,n.width=r[o].width,n.height=r[o].height,n.scanType=r[o].scanType,t.push(n);return t}function B(){var e;p&&(e=M.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,_=p.getClientWidth()*e,T=p.getClientHeight()*e)}return u={initialize:function(){I=Fr(P).create(),R=Br(P).create({settings:M}),(c=(0,Dr.Z)(P).create({dashMetrics:O,customParametersModel:t,mediaPlayerModel:S,settings:M})).initialize(),L.on(He.Z.QUALITY_CHANGE_RENDERED,i,u),L.on(He.Z.METRIC_ADDED,s,u),L.on(Ge.Z.LOADING_PROGRESS,r,u)},isPlayingAtTopQuality:function(e){var e=e?e.id:null,t=F(Be.Z.AUDIO,e),n=F(Be.Z.VIDEO,e);return t===x(Be.Z.AUDIO,e)&&n===x(Be.Z.VIDEO,e)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,e=e.representationCount-1;return y[n]=y[n]||{},y[n][t]=e},clearDataForStream:function(e){I&&I.clearForStream(e),v[e]&&delete v[e],w[e]&&delete w[e],f[e]&&delete f[e]},getThroughputHistory:function(){return R},getBitrateList:l,getQualityForBitrate:U,getTopBitrateInfoFor:function(e){var t,n=(n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||o.getActiveStreamInfo().id;return e&&v&&v[n]&&v[n][e]&&(t=x(e,n),l(v[n][e].getMediaInfo())[t])||null},getMinAllowedIndexFor:k,getMaxAllowedIndexFor:x,getInitialBitrateFor:function(e,t){var n,r,i;if(h&&h.hasOwnProperty("getSavedBitrateSettings"))return e===Be.Z.TEXT?NaN:(n=h.getSavedBitrateSettings(e),i=S.getAbrBitrateParameter("initialBitrate",e),r=M.get().streaming.abr.initialRepresentationRatio[e],-1===i?-1<r?(t=v[t][e].getStreamInfo(),t=b.getAdaptationForType(t.index,e,t).Representation_asArray,Array.isArray(t)?t[Math.max(Math.round(t.length*r)-1,0)].bandwidth/1e3:0):isNaN(n)?e===Be.Z.VIDEO?1e3:100:n:i);throw new Error(Be.Z.MISSING_CONFIG_ERROR)},getQualityFor:F,getAbandonmentStateFor:function(e,t){return f[e]&&f[e][t]?f[e][t].state:null},setPlaybackQuality:Z,checkPlaybackQuality:function(e,t){try{var n,r,i,o,a,s,l;return e&&v&&v[t]&&v[t][e]?(I&&(n=p.getPlaybackQuality())&&I.push(t,g,n),!!M.get().streaming.abr.autoSwitchBitrate[e]&&(r=F(e,t),i=Mr(P).create({abrController:u,switchHistory:w[t][e],droppedFramesHistory:I,streamProcessor:v[t][e],currentValue:r,useBufferOccupancyABR:C[e],useL2AABR:N[e],useLoLPABR:D[e],videoModel:p}),o=k(e,t),a=x(e,t),l=(s=c.getMaxQuality(i)).quality,a<(l=void 0!==o&&(l>Pr.Z.NO_CHANGE?l:r)<o?o:l)&&(l=a),w[t][e].push({oldValue:r,newValue:l}),l>Pr.Z.NO_CHANGE)&&l!==r&&(f[t][e].state===Ze.Z.ALLOW_LOAD||l<r)&&(q(e,r,l,a,s.reason,t),!0)):!1}catch(e){return!1}},setElementSize:B,setWindowResizeEventCalled:function(e){E=e},registerStreamType:function(e,t){var n=t.getStreamInfo().id;v[n]||(v[n]={}),w[n]||(w[n]={}),f[n]||(f[n]={}),w[n][e]=xr(P).create(),v[n][e]=t,f[n][e]={},f[n][e].state=Ze.Z.ALLOW_LOAD,t=e,(n=M.get().streaming.abr.ABRStrategy)===Be.Z.ABR_STRATEGY_L2A?(C[t]=!1,D[t]=!1,N[t]=!0):n===Be.Z.ABR_STRATEGY_LoLP?(C[t]=!1,D[t]=!0,N[t]=!1):n===Be.Z.ABR_STRATEGY_BOLA?(C[t]=!0,D[t]=!1,N[t]=!1):n===Be.Z.ABR_STRATEGY_THROUGHPUT?(C[t]=!1,D[t]=!1,N[t]=!1):n===Be.Z.ABR_STRATEGY_DYNAMIC&&(C[t]=!(!C||!C[t])&&C[t],D[t]=!1,N[t]=!1),e===Be.Z.VIDEO&&B()},unRegisterStreamType:function(e,t){try{v[e]&&v[e][t]&&delete v[e][t],w[e]&&w[e][t]&&delete w[e][t],f[e]&&f[e][t]&&delete f[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(o=e.streamController),e.domStorage&&(h=e.domStorage),e.mediaPlayerModel&&(S=e.mediaPlayerModel),e.customParametersModel&&(t=e.customParametersModel),e.cmsdModel&&(A=e.cmsdModel),e.dashMetrics&&(O=e.dashMetrics),e.adapter&&(b=e.adapter),e.videoModel&&(p=e.videoModel),e.settings)&&(M=e.settings)},reset:function(){e(),L.off(Ge.Z.LOADING_PROGRESS,r,u),L.off(He.Z.QUALITY_CHANGE_RENDERED,i,u),L.off(He.Z.METRIC_ADDED,s,u),c&&c.reset()}},m=n.getLogger(u),e(),u}Zr.__dashjs_factory_name="AbrController";var e=ve.Z.getSingletonFactory(Zr),qr=(e.QUALITY_DEFAULT=0,ve.Z.updateSingletonFactory(Zr.__dashjs_factory_name,e),e),Gr=new Map([[Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function jr(){var e,t,a,n,r,i,o,s,l=this.context,u=(0,qe.Z)(l).getInstance(),c=[];function d(){a&&(a.playbackRate=1,a.removeEventListener("canplay",d))}function f(){return 0<c.length}function p(){var e;a&&f()&&0===a.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),a.dispatchEvent(e))}function h(e,t){a&&a.addEventListener(e,t)}function g(e,t){a&&a.removeEventListener(e,t)}function m(){return a?a.readyState:NaN}function y(){return a?a.buffered:null}function v(e,t,n,r,i){if(a)for(var o=0;o<a.textTracks.length;o++)if(a.textTracks[o].kind===e&&(!t||a.textTracks[o].label==t)&&a.textTracks[o].language===n&&a.textTracks[o].isTTML===r&&a.textTracks[o].isEmbedded===i)return a.textTracks[o];return null}function E(e,t){return e===Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||m()>=e?(t(),null):(r=Gr.get(e),i=t,h(r,n),{func:n,event:r});function n(){g(r,n),i(r)}var r,i}return e={addEventListener:h,addTextTrack:function(e,t,n,r,i){var o;return a?((o=v(e,t,n,r,i))||((o=a.addTextTrack(e,t,n)).isEmbedded=i,o.isTTML=r),o):null},appendChild:function(e){a&&(a.appendChild(e),void 0!==e.isTTML)&&(a.textTracks[a.textTracks.length-1].isTTML=e.isTTML,a.textTracks[a.textTracks.length-1].isEmbedded=e.isEmbedded)},getBufferRange:y,getClientHeight:function(){return a?a.clientHeight:NaN},getClientWidth:function(){return a?a.clientWidth:NaN},getElement:function(){return a},getEnded:function(){return a?a.ended:null},getPlaybackQuality:function(){var e,t;return a?(e="webkitDroppedFrameCount"in a&&"webkitDecodedFrameCount"in a,t=null,"getVideoPlaybackQuality"in a?t=a.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:a.webkitDroppedFrameCount,totalVideoFrames:a.webkitDroppedFrameCount+a.webkitDecodedFrameCount,creationTime:new Date}),t):null},getPlaybackRate:function(){return a?a.playbackRate:null},getPlayedRanges:function(){return a?a.played:null},getReadyState:m,getSource:function(){return a?a.src:null},getTTMLRenderingDiv:function(){return i},getTextTrack:v,getTextTracks:function(){return a?a.textTracks:[]},getTime:function(){return a?isNaN(n)?a.currentTime:n:null},getVideoHeight:function(){return a?a.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){var e;return a&&(e=a.parentNode.host||a.parentNode)?a.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},getVideoRelativeOffsetTop:function(){var e;return a&&(e=a.parentNode.host||a.parentNode)?a.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoWidth:function(){return a?a.videoWidth:NaN},getVttRenderingDiv:function(){return o},initialize:function(){u.on(Ge.Z.PLAYBACK_PLAYING,p,this)},isPaused:function(){return a?a.paused:null},isSeeking:function(){return a?a.seeking||!isNaN(n):null},isStalled:f,pause:function(){a&&(a.pause(),a.autoplay=!1)},play:function(){var e;a&&(a.autoplay=!0,e=a.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&u.trigger(Ge.Z.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))})},removeChild:function(e){a&&a.removeChild(e)},removeEventListener:g,reset:function(){clearTimeout(s),u.off(Ge.Z.PLAYBACK_PLAYING,p,this)},setCurrentTime:function(e,t){a&&(r&&r.func&&r.event&&g(r.event,r.func),n=e,r=E(Be.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(a)if(a.currentTime!==n)try{n=t?function(e){var t=y(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),a=t.end(i),s=Math.abs(o-e),l=Math.abs(a-e);if(o<=e&&e<=a)return e;s<r&&(r=s,n=o),l<r&&(r=l,n=a)}return n}(n):n,isNaN(n)||(a.currentTime=n),n=NaN}catch(e){0===a.readyState&&e.code===e.INVALID_STATE_ERR&&(s=setTimeout(function(){a.currentTime=n,n=NaN},400))}else n=NaN}))},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(a=e)&&(a.preload="auto")},setPlaybackRate:function(e){a&&(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&a.readyState<=2&&0<e?a.addEventListener("canplay",d):a.playbackRate=e)},setSource:function(e){a&&(e?a.src=e:(a.removeAttribute("src"),a.load()))},setStallState:function(e,t){var n;e=e,t?null!==(n=e)&&a&&!a.seeking&&-1===c.indexOf(n)&&c.push(n):(n=e,e=c.indexOf(n),null!==n&&-1!==e&&c.splice(e,1))},setTTMLRenderingDiv:function(e){(i=e).style.position="absolute",i.style.display="flex",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top=0,i.style.left=0},setVttRenderingDiv:function(e){o=e},waitForReadyState:E,setDisableRemotePlayback:function(e){a&&(a.disableRemotePlayback=e)}},t=(0,je.Z)(l).getInstance().getLogger(e),n=NaN,e}jr.__dashjs_factory_name="VideoModel";var Hr=ve.Z.getSingletonFactory(jr),Yr=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Kr="dashjs_?_bitrate",$r="dashjs_?_settings",c="localStorage",zr="lastBitrate",Vr="lastMediaSettings";function Wr(e){var a,n,t=this.context,s=(e=e||{}).settings;function r(e){if(void 0===n){var t;n=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return a.warn("DOMStorage access denied: "+e.message),n}if(t&&(e===c||"sessionStorage"===e))try{t.setItem("1","1"),t.removeItem("1"),n=!0}catch(e){a.warn("DOMStorage is supported, but cannot be used: "+e.message)}}return n}function i(){return 6e5*Math.round((new Date).getTime()/6e5)}function l(e,t){return r(e)&&s.get().streaming[t+"CachingInfo"].enabled}function u(){if(!s)throw new Error(Be.Z.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(e){if(u(),!s.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var t=NaN;if(l(c,zr)){var n=Kr.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=s.get().streaming.lastBitrateCachingInfo.ttl||!1,o=parseFloat(r.bitrate);isNaN(o)||i?i&&localStorage.removeItem(n):(t=o,a.debug("Last saved bitrate for "+e+" was "+o))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(l(c,zr)&&t){var n=Kr.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:i()}))}catch(e){a.error(e.message)}}},getSavedMediaSettings:function(e){if(u(),!s.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(l(c,Vr)){var n=$r.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=s.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=r.settings;i&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(l(c,Vr)){var n=$r.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:i()}))}catch(e){a.error(e.message)}}}},a=(0,je.Z)(t).getInstance().getLogger(e),r(c)&&Yr.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){a.error(e.message)}}}),e}Wr.__dashjs_factory_name="DOMStorage";var Xr=ve.Z.getSingletonFactory(Wr),Qr=t(2032),Jr=t(2011);function ei(){var t,T,n,b,r,i,o,l,a,s,u,c,d,e=this.context;function f(e,t,n){n({segments:e,representation:t,error:e?void 0:new Ye.Z(a.SEGMENT_BASE_LOADER_ERROR_CODE,a.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function S(e){var t;if(e.url)return(t=new A.Z).setInfo(e),t}return t={setConfig:function(e){e.baseURLController&&(d=e.baseURLController),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(o=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.boxParser&&(b=e.boxParser),e.debug&&(T=e.debug.getLogger(t)),e.requestModifier&&(r=e.requestModifier),e.errors&&(a=e.errors),e.urlUtils&&(c=e.urlUtils),e.constants&&(s=e.constants),e.dashConstants&&(u=e.dashConstants)},initialize:function(){l=D(e).create({errHandler:n,dashMetrics:i,mediaPlayerModel:o,requestModifier:r,boxParser:b,errors:a,urlUtils:c,constants:s,dashConstants:u})},loadInitialization:function(t,n){return new Promise(function(e){!function t(n,r,i,e){var o,a=n?d.resolve(n.path):null,s=e||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r},e=(T.debug("Start searching for initialization."),S(s));l.load({request:e,success:function(e){if(s.bytesLoaded=s.range.end,!(o=b.findInitRange(e)))return s.range.end=s.bytesLoaded+s.bytesToLoad,t(n,r,i,s);n.range=o,i(n)},error:function(){i(n)}}),T.debug("Perform init search: "+s.url)}(t,n,e)})},loadSegments:function(t,n,r){return new Promise(function(e){!function p(h,g,e,m,y,t){!e||void 0!==e.start&&void 0!==e.end||(e=(n=e?e.toString().split("-"):null)?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null),y=y||f;var v,E=null,n=!!e,r=h?d.resolve(h.path):null,_={init:!1,url:r?r.url:void 0,range:n?e:{start:0,end:1500},searching:!n,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:g},r=S(_);l.load({request:r,success:function(e){var t=_.bytesToLoad,n=e.byteLength;if(_.bytesLoaded=_.range.end-_.range.start,E=b.parse(e),(v=E.getBox("sidx"))&&v.isComplete){var r=v.references;if(f=null!=r&&0<r.length?1===r[0].reference_type:f){T.debug("Initiate multiple SIDX load."),_.range.end=_.range.start+v.size;for(var i,o,a=[],s=0,l=(v.offset||_.range.start)+v.size,u=function(e){e?(a=a.concat(e),++s>=d&&(a.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),y(a,h,m))):y(null,h,m)},c=0,d=r.length;c<d;c++)o=(i=l)+r[c].referenced_size-1,l+=r[c].referenced_size,p(h,g,{start:i,end:o},m,u,_)}else T.debug("Parsing segments from SIDX. representation "+g+" - id: "+h.id+" for range : "+_.range.start+" - "+_.range.end),e=function(){for(var e,t,n,r=v.references,i=r.length,o=v.timescale,a=v.earliest_presentation_time,s=_.range.start+v.offset+v.first_offset+v.size,l=[],u=0;u<i;u++)t=r[u].subsegment_duration,n=r[u].referenced_size,(e=new Jr.Z).duration=t,e.startTime=a,e.timescale=o,e.mediaRange=s+"-"+(s+n-1),l.push(e),a+=t,s+=n;return l}(),y(e,h,m)}else{if(v)_.range.start=v.offset||_.range.start,_.range.end=_.range.start+(v.size||t);else{if(n<_.bytesLoaded)return void y(null,h,m);var f=E.getLastBox();f&&f.size?(_.range.start=f.offset+f.size,_.range.end=_.range.start+t):_.range.end+=t}p(h,g,_.range,m,null,_)}},error:function(){y(null,h,m)}}),T.debug("Perform SIDX load for type ".concat(g," : ").concat(_.url," with range ").concat(_.range.start," - ").concat(_.range.end))}(t,n,r,e)})},reset:function(){l&&(l.abort(),l=null)}}}ei.__dashjs_factory_name="SegmentBaseLoader";var ti=ve.Z.getSingletonFactory(ei);function ni(e){e=e||{};var n,l=new DataView(e.data),u=0;function r(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(l.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*l.getUint16(u)+l.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(l.getUint16(u)!==e.tag&&(n=!1),2):(l.getUint8(u)!==e.tag&&(n=!1),1),n||!e.required||t)return n&&(u+=r),n;throw new Error("required tag not found")}function i(e){for(var t=1,n=128,r=-1,i=0,o=l.getUint8(u),a=0,a=0;a<8;a+=1){if((o&n)===n){i=void 0===e?o&~n:o,r=a;break}n>>=1}for(a=0;a<r;a+=1,t+=1)i=i<<8|255&l.getUint8(u+t);return u+=t,i}return n={getPos:function(){return u},setPos:function(e){u=e},consumeTag:r,consumeTagAndSize:function(e,t){e=r(e,t);return e&&i(),e},parseTag:function(e){var t;return r(e),t=i(),n[e.parse](t)},skipOverElement:function(e,t){e=r(e,t);return e&&(t=i(),u+=t),e},getMatroskaCodedNum:i,getMatroskaFloat:function(e){var t;switch(e){case 4:t=l.getFloat32(u),u+=4;break;case 8:t=l.getFloat64(u),u+=8}return t},getMatroskaUint:function(e){if(4<e){for(var t=e,n=Math.floor(Number.MAX_SAFE_INTEGER/256),r=0,i=0;i<t;i+=1){if(n<r)throw new Error("Value exceeds safe integer limit");r*=256;var o=l.getUint8(u+i);if(r>Number.MAX_SAFE_INTEGER-o)throw new Error("Value exceeds safe integer limit");r+=o}return u+=t,r}for(var a=0,s=0;s<e;s+=1)a=(a<<=8)|255&l.getUint8(u+s);return u+=e,a>>>0},moreData:function(){return u<l.byteLength}}}ni.__dashjs_factory_name="EBMLParser";var ri=ve.Z.getClassFactory(ni);function ii(){var t,m,y,n,r,i,o,v,E,a,_=this.context;function T(e){var t=new A.Z;return t.setInfo(e),t}return y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(Be.Z.MISSING_CONFIG_ERROR);a=e.baseURLController,i=e.dashMetrics,o=e.mediaPlayerModel,n=e.errHandler,E=e.errors,m=e.debug.getLogger(t),r=e.requestModifier},initialize:function(){v=D(_).create({errHandler:n,dashMetrics:i,mediaPlayerModel:o,requestModifier:r,errors:E})},loadInitialization:function(r,i){return new Promise(function(e){var t=r?a.resolve(r.path):null,n=r?r.range.split("-"):null,n={range:{start:n?parseFloat(n[0]):null,end:n?parseFloat(n[1]):null},request:null,url:t?t.url:void 0,init:!0,mediaType:i};m.info("Start loading initialization."),t=T(n),v.load({request:t,success:function(){e(r)},error:function(){e(r)}}),m.debug("Perform init load: "+n.url)})},loadSegments:function(h,t,g){return new Promise(function(f){var e=h?a.resolve(h.path):null,p=e?e.url:void 0,e=T({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:null,url:p,init:!1,mediaType:t});m.debug("Parsing ebml header"),v.load({request:e,success:function(e){function t(e){f({segments:e,representation:h,error:e?void 0:new Ye.Z(E.SEGMENT_BASE_LOADER_ERROR_CODE,E.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var n=p,r=g;if((e=e)&&0!==e.byteLength){var i,o,a,s,l=ri(_).create({data:e}),e=r?r.split("-"):null,u={url:n,range:{start:e?parseFloat(e[0]):null,end:e?parseFloat(e[1]):null},request:null};for(m.debug("Parse EBML header: "+u.url),l.skipOverElement(y.EBML),l.consumeTag(y.Segment),a=l.getMatroskaCodedNum(),a+=l.getPos(),s=l.getPos();l.moreData()&&!l.consumeTagAndSize(y.Segment.Info,!0);)if(!(l.skipOverElement(y.Segment.SeekHead,!0)||l.skipOverElement(y.Segment.Tracks,!0)||l.skipOverElement(y.Segment.Cues,!0)||l.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;void 0===i;){var c=l.getMatroskaCodedNum(!0),d=l.getMatroskaCodedNum();c===y.Segment.Info.Duration.tag?i=l[y.Segment.Info.Duration.parse](d):l.setPos(l.getPos()+d)}r=T(u),v.load({request:r,success:function(c){o=function(e,t,n){for(var r,i,o,a,s=[],l=0,u=(r=function(e){var t,n,r=[],i=ri(_).create({data:e});for(i.consumeTagAndSize(y.Segment.Cues);i.moreData()&&i.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=i.parseTag(y.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];i.moreData()&&i.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=i.getMatroskaCodedNum(),a=i.getPos();if((n={}).Track=i.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===n.Track)throw new Error("Cue track cannot be 0");n.ClusterPosition=i.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(n),i.setPos(a+o)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");r.push(t)}if(0===r.length)throw new Error("mandatory cuepoint not found");return r}(c)).length;l<u;l+=1)i=new Jr.Z,o=l<r.length-1?r[l+1].CueTime-r[l].CueTime:n-r[l].CueTime,i.duration=o,i.startTime=r[l].CueTime,i.timescale=1e3,o=r[l].CueTracks[0].ClusterPosition+e,a=l<r.length-1?r[l+1].CueTracks[0].ClusterPosition+e-1:t-1,i.mediaRange=o+"-"+a,s.push(i);return m.debug("Parsed cues: "+s.length+" cues."),s}(s,a,i),t(o)},error:function(){m.error("Download Error: Cues "+u.url),t(null)}}),m.debug("Perform cues load: "+u.url+" bytes="+u.range.start+"-"+u.range.end)}else t(null)},error:function(){f({representation:h,error:new Ye.Z(E.SEGMENT_BASE_LOADER_ERROR_CODE,E.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){v&&(v.abort(),v=null)}}}ii.__dashjs_factory_name="WebmSegmentBaseLoader";var oi=ve.Z.getSingletonFactory(ii);function ai(e){var t,n,r,i=this.context,o=(e=e||{}).eventBus,a=e.events,s=e.dashMetrics,l=e.mediaPlayerModel,u=e.errHandler,c=e.baseURLController,d=e.debug,f=e.boxParser,p=e.requestModifier,e=e.errors;function h(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){n.initialize(),r.initialize()},getSegmentBaseInitSegment:function(e){return(h(e.representation.mimeType)?r:n).loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return(h(e.mimeType)?r:n).loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){n.reset(),r.reset()}},n=ti(i).getInstance(),r=oi(i).getInstance(),n.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:o,events:a,errors:e,debug:d,boxParser:f,requestModifier:p}),r.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:o,events:a,errors:e,debug:d,requestModifier:p}),t}ai.__dashjs_factory_name="SegmentBaseController";function si(){if(!(this instanceof si))throw new TypeError("Cannot call a class as a function");this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}function li(){if(!(this instanceof li))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1}function ui(){if(!(this instanceof ui))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}function ci(){if(!(this instanceof ci))throw new TypeError("Cannot call a class as a function");this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}var di=ve.Z.getSingletonFactory(ai);var fi=function(){function t(e){var r=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.valid="/"==e[0],this.path=e.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},n=e.indexOf("[");return-1!=n&&(t.name=e.substring(0,n),n=e.substring(n+1,e.length-1),r.valid=r.valid&&-1==n.indexOf("["),-1!=(e=n.indexOf("="))?(t.attribute={name:n.substring(1,e),value:n.substring(e+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(n,10)-1),t})}for(var e=t.prototype,n=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(e,t){for(var n=null,r=e,i=1,o="MPD";i<this.path.length&&null!==r;){var a,n=r,s=this.path[i],o=s.name;i===this.path.length-1&&(o.startsWith("@")||"text()"===o)||(0===(a=n[o+"_asArray"]||[]).length&&n[o]&&a.push(n[o]),s.position?r=a[s.position]||null:s.attribute?function(){var t=s.attribute;r=a.filter(function(e){return e[t.name]==t.value})[0]||null}():r=a[0]||null),i++}return null===r?null:o.startsWith("@")?{name:o.substring(1),leaf:r,target:r}:"text()"===o?{name:"__text",leaf:r,target:r}:{name:o,leaf:r,target:t?n:r}}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return t}();var pi=function(){function r(e,t,n){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.action=e,this.xpath=t,this.value=n,this.position=null}for(var e=r.prototype,t=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}],n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return r}();function hi(){var e=this.context,t={getIsPatch:function(e){return e&&e.hasOwnProperty(ye.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(ye.Z.PUBLISH_TIME)?new Date(e[ye.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(ye.Z.ORIGINAL_PUBLISH_TIME)?new Date(e[ye.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[ye.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var t=Object.keys(e)[0];if("add"!==t&&"remove"!==t&&"replace"!==t)return o.warn("Ignoring node of invalid action: ".concat(t)),null;var e=e[t],n=e.sel;if("add"===t&&e.type){if(!e.type.startsWith("@"))return o.warn("Ignoring add action for prefixed namespace declaration: ".concat(e.type,"=").concat(e.__text)),null;n="".concat(n,"/").concat(e.type)}var r,i=new fi(n);return i.isValid()?(r=null,i.findsAttribute()||i.findsTextReplace()?r=e.__text||"":"remove"!==t&&(r=e.__children.reduce(function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e},{})),i=new pi(t,i,r),"add"===t&&(i.position=e.pos),i):(o.warn("Ignoring action with invalid selector: ".concat(t," - ").concat(n)),null)}).filter(function(e){return!!e}):[]}},o=(0,je.Z)(e).getInstance().getLogger(t);return t}hi.__dashjs_factory_name="PatchManifestModel";var gi=ve.Z.getSingletonFactory(hi);function mi(){var e,y,o,c,d,v,a,t=this.context;function r(e,t,n){var r,i=y.getAdaptationsForType(c[0].mpd.manifest,e,t);if(!i||0===i.length)return null;if(1<i.length&&n){var o=p(n,t);if(d[n.id]&&d[n.id][t])for(var a=0,s=i.length;a<s;a++)if(f(d[n.id][t],o[a]))return i[a];for(var l=0,u=i.length;l<u;l++)if(r=i[l],y.getRolesForAdaptation(r).filter(function(e){return e.value===ye.Z.MAIN})[0])return i[l]}return i[0]}function f(e,t){var n,r,i,o,a,s,l,u,c,d;return!(!e||!t)&&(n=e.id===t.id,r=e.codec===t.codec,i=e.viewpoint===t.viewpoint,o=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),a=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),d=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&r&&i&&o&&a&&s&&l&&u&&c&&d&&e}function s(e,t,n,r,i,o){var a,s,l,u=[];if(!r||0===r.length)return[];for(var c=y.getAdaptationsForPeriod(t),d=0,f=r.length;d<f;d++)if(a=r[d],s=E(c[l=y.getIndexForAdaptation(a,e,n.index)]),o){for(var p=s.accessibility.length,h=0;h<p;h++)if(s){var g=s.accessibility[h];if(0===g.indexOf("cea-608:")){var m=g.substring(8).split(";");if("CC"===m[0].substring(0,2))for(h=0;h<m.length;h++)_(s=s||E.call(this,c[l]),m[h].substring(0,3),m[h].substring(4)),u.push(s),s=null;else for(h=0;h<m.length;h++)_(s=s||E.call(this,c[l]),"CC"+(h+1),m[h]),u.push(s),s=null}else 0===g.indexOf("cea-608")&&(_(s,v.CC1,"eng"),u.push(s),s=null)}}else i===v.IMAGE?(s.type=v.IMAGE,u.push(s),s=null):s&&u.push(s);return u}function p(e,t,n){var r=c,i=[];if(n)T(),r=l(n);else{if(!(0<c.length))return i;n=c[0].mpd.manifest}var o,r=g(e,r),i=s(n,r,e,y.getAdaptationsForType(n,e?e.index:null,t),t);return t===v.TEXT&&(o=y.getAdaptationsForType(n,e?e.index:null,v.VIDEO),i=i.concat(s(n,r,e,o,t,!0))),i}function l(e){e=n(e);return y.getRegularPeriods(e)}function n(e){e=u(e);return y.getMpd(e)}function i(){c=[],d={}}function u(e){return e||(0<c.length?c[0].mpd.manifest:null)}function h(e){try{var t=g(e.streamInfo,c),n=y.getAdaptationsForPeriod(t);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&n?n[e.index]:null}catch(e){return null}}function g(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function E(e){var r,t,n,i,o;return e?(r=new li,t=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=m(e.period),r.representationCount=y.getRepresentationCount(t),r.labels=y.getLabelsForAdaptation(t),r.lang=y.getLanguageForAdaptation(t),r.segmentAlignment=y.getSegmentAlignment(t),r.subSegmentAlignment=y.getSubSegmentAlignment(t),e=y.getViewpointForAdaptation(t),r.viewpoint=e.length?e[0].value:void 0,r.viewpointsWithSchemeIdUri=e,e=y.getAccessibilityForAdaptation(t),r.accessibility=e.map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==a&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.accessibilitiesWithSchemeIdUri=e,e=y.getAudioChannelConfigurationForAdaptation(t),r.audioChannelConfiguration=e.map(function(e){return e.value}),r.audioChannelConfigurationsWithSchemeIdUri=e,0===r.audioChannelConfiguration.length&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(e=y.getAudioChannelConfigurationForRepresentation(t.Representation_asArray[0]),r.audioChannelConfiguration=e.map(function(e){return e.value}),r.audioChannelConfigurationsWithSchemeIdUri=e),e=y.getRolesForAdaptation(t),r.roles=e.map(function(e){return e.value}),r.rolesWithSchemeIdUri=e,r.codec=y.getCodec(t),r.mimeType=y.getMimeType(t),r.contentProtection=y.getContentProtectionData(t),r.bitrateList=y.getBitrateListForAdaptation(t),r.selectionPriority=y.getSelectionPriority(t),r.contentProtection&&(e=r.contentProtection.map(function(e){return y.getKID(e)}).filter(function(e){return null!==e})).length&&(n=e[0],r.contentProtection.forEach(function(e){e.keyId=n})),r.isText=y.getIsText(t),r.supplementalProperties=y.getSupplementalPropertiesForAdaptation(t),(!r.supplementalProperties||0===Object.keys(r.supplementalProperties).length)&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(i=t.Representation_asArray.map(function(e){return y.getSupplementalPropertiesForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(i[0])})&&(r.supplementalProperties=i[0]),r.supplementalPropertiesAsArray=y.getSupplementalPropertiesAsArrayForAdaptation(t),(!r.supplementalPropertiesAsArray||0===r.supplementalPropertiesAsArray.length)&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(o=t.Representation_asArray.map(function(e){return y.getSupplementalPropertiesAsArrayForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(o[0])})&&(r.supplementalPropertiesAsArray=o[0]),r.essentialProperties=y.getEssentialPropertiesForAdaptation(t),r.essentialPropertiesAsArray=y.getEssentialPropertiesAsArrayForAdaptation(t),r.isFragmented=y.getIsFragmented(t),r.isEmbedded=!1,r):null}function _(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=v.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1;t=an()(n);e.lang=t||n,e.roles=["caption"],e.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function m(e){var t,n,r=new ui;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(t=e.mpd,(n=new ci).dvrWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=y.getDuration(t.manifest),n.isDynamic=y.getIsDynamic(t.manifest),n.serviceDescriptions=y.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function T(){if(!v)throw new Error("setConfig function has to be called previously")}function b(e){return 0<c.length?c[0].mpd.manifest.Period_asArray[e]:null}function S(e,t,n){var r,i,o,a,s;if(e)for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)for(o=r[a].Representation_asArray,s=0;s<o.length;s+=1)if(t===(i=o[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){return(t=S(b(t),e))?t.bandwidth:null},getIndexForRepresentation:function(e,t){return null!==(t=S(b(t),e,!0))?t:-1},getMaxIndexForBufferType:function(e,t){var n,r,i,o,t=b(t),a=e;if(t&&a)for(r=t.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(i=(n=r[o]).Representation_asArray,y.getIsTypeOf(n,a))return i.length;return-1},convertRepresentationToRepresentationInfo:function(e){var t,n;return e?(t=new si,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=y.getRepresentationFor(e.index,n),t.id=e.id,t.quality=e.index,t.bandwidth=y.getBandwidth(n),t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.mediaInfo=E(e.adaptation),t):null},getStreamsInfo:function(e,t){var n=[],r=c;if(e&&(T(),r=l(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(m(r[i]))}return n},getMediaInfoForType:function(e,t){var n;return 0!==c.length&&e&&(n=g(e,c))&&(n=y.getAdaptationsForPeriod(n),t=r(e.index,t,e))?E(n[y.getIndexForAdaptation(t,c[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:p,getAdaptationForType:r,getRealAdaptation:function(e,t){var n,e=g(e,c),r=t?t.id:null;return n=0<c.length&&e?r?y.getAdaptationForId(r,c[0].mpd.manifest,e.index):y.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):n},getProducerReferenceTimes:function(e,t){var n,e=g(e,c),r=t?t.id:null;return(n=0<c.length&&e?r?y.getAdaptationForId(r,c[0].mpd.manifest,e.index):y.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):n)?y.getProducerReferenceTimesForAdaptation(n):[]},getRealPeriodByIndex:function(e){return y.getRealPeriodForIndex(e,c[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return y.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){e=h(e);return y.getRepresentationsForAdaptation(e)},getEventsFor:function(e,t,n){var r,i,o=[];return 0<c.length&&(r=c[0].mpd.manifest,e instanceof ui?(i=g(e,c),o=y.getEventsForPeriod(i)):e instanceof li?(i=g(n,c),o=y.getEventStreamForAdaptationSet(r,h(e),i)):e instanceof si&&(i=g(n,c),o=y.getEventStreamForRepresentation(r,t,i))),o},getEvent:function(e,t,n,r){try{var i,o,a,s,l,u,c,d,f,p,h,g;return e&&t&&!isNaN(n)&&r?t[(i=e.scheme_id_uri)+"/"+(o=e.value)]?(a=new Y,s=e.timescale||1,l=r.adaptation.period.start,u=t[i+"/"+o],c=isNaN(r.presentationTimeOffset)?isNaN(u.presentationTimeOffset)?0:u.presentationTimeOffset:r.presentationTimeOffset,d=e.presentation_time_delta/s,f=0===e.version?l+n-c+d:l-c+d,p=e.event_duration/s,h=e.id,g=e.message_data,a.eventStream=u,a.eventStream.value=o,a.eventStream.timescale=s,a.duration=p,a.id=h,a.calculatedPresentationTime=f,a.messageData=g,a.presentationTimeDelta=d,a):null:null}catch(e){return null}},getMpd:n,setConfig:function(e){e&&(e.constants&&(v=e.constants),e.cea608parser&&(a=e.cea608parser),e.errHandler&&y.setConfig({errHandler:e.errHandler}),e.BASE64)&&y.setConfig({BASE64:e.BASE64})},updatePeriods:function(e){if(!e)return null;T(),c=l(e)},getIsTextTrack:function(e){return y.getIsText(e)},getUTCTimingSources:function(){var e=u();return y.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<c.length?c[0].mpd:null;return y.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){e=n(e);return y.getAvailabilityStartTime(e)},getIsTypeOf:function(e,t){return y.getIsTypeOf(e,t)},getIsDynamic:function(e){e=u(e);return y.getIsDynamic(e)},getDuration:function(e){e=u(e);return y.getDuration(e)},getRegularPeriods:l,getContentSteering:function(e){return y.getContentSteering(e)},getLocation:function(e){return y.getLocation(e)},getPatchLocation:function(e){var t=y.getPatchLocation(e),n=y.getPublishTime(e);return t&&0!==t.length&&n?t.filter(function(e){return isNaN(e.ttl)||n.getTime()+e.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(e){return y.getManifestUpdatePeriod(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(e){return y.getPublishTime(e)},getIsDVB:function(e){return y.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return o.getIsPatch(e)},getBaseURLsFromElement:function(e){return y.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return y.getRepresentationSortFunction()},getCodec:function(e,t,n){return y.getCodec(e,t,n)},getPeriodById:function(t){var e;return t&&0!==c.length&&(e=c.filter(function(e){return e.id===t}))&&0<e.length?e[0]:null},setCurrentMediaInfo:function(e,t,n){d[e]=d[e]||{},d[e][t]=d[e][t]||{},d[e][t]=n},isPatchValid:function(e,t){var n=y.getId(e),r=o.getMpdId(t),e=y.getPublishTime(e),i=o.getPublishTime(t),t=o.getOriginalPublishTime(t);return!!(n&&r&&n==r&&e&&t&&e.getTime()==t.getTime()&&i&&e.getTime()<i.getTime())},applyPatchToManifest:function(t,e){o.getPatchOperations(e).forEach(function(i){var e=i.getMpdTarget(t);if(null!==e){var o=e.name,a=e.target,e=e.leaf;if(i.xpath.findsAttribute()||"__text"===o)switch(i.action){case"add":case"replace":a[o]=i.value;break;case"remove":delete a[o]}else{var s=(a[o+"_asArray"]||[]).indexOf(e),l="prepend"===i.position||"before"===i.position;"remove"!==i.action&&"replace"!==i.action||(delete a[o],-1==s)||((e=a[o+"_asArray"]).splice(s,1),1<e.length?a[o]=e:1==e.length?a[o]=e[0]:delete a[o+"_asArray"]),"add"!==i.action&&"replace"!==i.action||Object.keys(i.value).forEach(function(e){var t,n=i.value[e],r=a[e+"_asArray"]||[];0===r.length&&a[e]&&r.push(a[e]),0===r.length?r=n:(t=r.length,t=e==o&&-1!=s?s+(l?0:1)+("replace"==i.action?-1:0):l?0:r.length,r.splice.apply(r,[t,0].concat(n))),a[e+"_asArray"]=r,a[e]=1==r.length?r[0]:r})}}})},areMediaInfosEqual:f,reset:i},y=Oe(t).getInstance(),o=gi(t).getInstance(),i(),e}mi.__dashjs_factory_name="DashAdapter";var yi=ve.Z.getSingletonFactory(mi);function vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ei(){if(!(this instanceof Ei))throw new TypeError("Cannot call a class as a function");this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}function _i(){if(!(this instanceof _i))throw new TypeError("Cannot call a class as a function");this.t=null,this.mt=null,this.to=null,this.lto=null}function Ti(){if(!(this instanceof Ti))throw new TypeError("Cannot call a class as a function");this.t=null,this.level=null}function bi(){if(!(this instanceof bi))throw new TypeError("Cannot call a class as a function");this.target=null,this.state=Ze.Z.BUFFER_EMPTY}function Si(){if(!(this instanceof Si))throw new TypeError("Cannot call a class as a function");this.time=null,this.range=null,this.manifestInfo=null}function Ai(){if(!(this instanceof Ai))throw new TypeError("Cannot call a class as a function");this.time=null,this.droppedFrames=null}vi(Ii,[{key:"round10",value:function(e,t){return e=e,void 0===(t=t)||0==+t?Math.round(e):(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}}]);var wi=Ii;function Ii(){if(!(this instanceof Ii))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ci(){Ri(this,Ci),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}function Ni(){Ri(this,Ni),this.id=null,this.index=null,this.start=null,this.duration=null}function Di(){Ri(this,Di),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}function Oi(){if(!(this instanceof Oi))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}function Mi(){if(!(this instanceof Mi))throw new TypeError("Cannot call a class as a function");this.loadingRequests=[],this.executedRequests=[]}function Pi(e){var r,i=(e=e||{}).settings,e=this.context,o=(0,qe.Z)(e).getInstance();function t(){o.trigger(Ge.Z.METRICS_CHANGED)}function a(e){o.trigger(Ge.Z.METRIC_CHANGED,{mediaType:e}),t()}function u(e,t,n){o.trigger(Ge.Z.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),a(e)}function d(e,t,n){o.trigger(Ge.Z.METRIC_ADDED,{mediaType:e,metric:t,value:n}),a(e)}function s(e,t){var n=null;return e&&(r.hasOwnProperty(e)?n=r[e]:t||(n=new Ei,r[e]=n)),n}function f(e,t,n){e=s(e);null!==e&&(e[t].push(n),e[t].length>i.get().streaming.metrics.maxListDepth)&&e[t].shift()}function E(e,t,n){f(e,t,n),d(e,t,n)}return r={},{clearCurrentMetricsForType:function(e){delete r[e],a(e)},clearAllCurrentMetrics:function(){r={},t()},getMetricsFor:s,addHttpRequest:function e(t,n,r,i,o,a,s,l,u,c,d,f,p,h,g,m,y){var v=new _e.w;null!=a&&a!==i&&(e(t,null,r,i,o,null,null,l,u,null,null,null,p,null,null,m,y),v.actualurl=a),v.tcpid=n,v.type=r,v.url=i,v.range=l,v.trequest=u,v.tresponse=c,v.responsecode=f,v.cmsd=y,v._tfinish=d,v._stream=t,v._mediaduration=p,v._quality=o,v._responseHeaders=h,v._serviceLocation=s,v._fileLoaderType=m,g?g.forEach(function(e){var t,n,r,i;t=v,n=e.s,r=e.d,e=e.b,(i=new _e.O).s=n,i.d=r,i.b=e,t.trace.push(i),t.interval||(t.interval=0),t.interval+=r}):(delete v.interval,delete v.trace),E(t,Ze.Z.HTTP_REQUEST,v)},addRepresentationSwitch:function(e,t,n,r,i){var o=new _i;o.t=t,o.mt=n,o.to=r,i?o.lto=i:delete o.lto,E(e,Ze.Z.TRACK_SWITCH,o)},addBufferLevel:function(e,t,n){var r=new Ti;r.t=t,r.level=n,E(e,Ze.Z.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new bi;r.target=n,r.state=t,E(e,Ze.Z.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var i=new Si;i.time=t,i.range=r,i.manifestInfo=n,E(e,Ze.Z.DVR_INFO,i)},addDroppedFrames:function(e,t){var n=new Ai,r=s(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||E(e,Ze.Z.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,i,o,a,s,l){var u=new Oi;u.mediaType=e,u.t=t,u.type=n,u.startTime=r,u.availabilityStartTime=i,u.duration=o,u.quality=a,u.range=s,u.state=l,E(e,Ze.Z.SCHEDULING_INFO,u)},addRequestsQueue:function(e,t,n){var r=new Mi;r.loadingRequests=t,r.executedRequests=n,s(e).RequestsQueue=r,d(e,Ze.Z.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,r,i,o,a,s,l,u){var c=new Ci;c.mediaType=e,c.type=t,c.requestTime=n,c.fetchTime=r,c.availabilityStartTime=i,c.presentationStartTime=o,c.clientTimeOffset=a,c.currentTime=s,c.buffered=l,c.latency=u,f(Be.Z.STREAM,Ze.Z.MANIFEST_UPDATE,c),d(e,Ze.Z.MANIFEST_UPDATE,c)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];u(e.mediaType,Ze.Z.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){var o;e&&((o=new Ni).id=t,o.index=n,o.start=r,o.duration=i,e.streamInfo.push(o),u(e.mediaType,Ze.Z.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,o,a,s){var l;e&&e.representationInfo&&((l=new Di).id=t,l.index=n,l.streamIndex=r,l.mediaType=i,l.startNumber=a,l.fragmentInfoType=s,l.presentationTimeOffset=o,e.representationInfo.push(l),u(e.mediaType,Ze.Z.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,E(Be.Z.STREAM,Ze.Z.PLAY_LIST,e)},addDVBErrors:function(e){E(Be.Z.STREAM,Ze.Z.DVB_ERRORS,e)}}}Pi.__dashjs_factory_name="MetricsModel";var Li=ve.Z.getSingletonFactory(Pi);function xi(e){var t,r,i,o,n=this.context,a=(e=e||{}).metricsModel;function s(e){e=a.getMetricsFor(e,!0);if(!e)return null;var t,n=e.HttpList,r=null;if(!n||n.length<=0)return null;for(t=n.length-1;0<=t;){if(n[t].responsecode){r=n[t];break}t--}return r}function l(e){e=a.getMetricsFor(e,!0);return e&&e.HttpList?e.HttpList:[]}function u(e,t){return(e=e&&e[t])&&0!==e.length?e[e.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return u(a.getMetricsFor(e,!0),Ze.Z.TRACK_SWITCH)},getCurrentBufferState:function(e){return u(a.getMetricsFor(e,!0),Ze.Z.BUFFER_STATE)},getCurrentBufferLevel:function(e){e=u(a.getMetricsFor(e,!0),Ze.Z.BUFFER_LEVEL);return e?wi.round10(e.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:l,getCurrentDroppedFrames:function(){return u(a.getMetricsFor(Be.Z.VIDEO,!0),Ze.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return u(a.getMetricsFor(e,!0),Ze.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return u(e?a.getMetricsFor(e,!0):a.getMetricsFor(Be.Z.VIDEO,!0)||a.getMetricsFor(Be.Z.AUDIO,!0),Ze.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return u(a.getMetricsFor(Be.Z.STREAM),Ze.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n;return!t||(n={},void 0===(e=(n=(e=s(e))?Z.Z.parseHttpHeaders(e._responseHeaders):n)[t.toLowerCase()]))?null:e},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;for(var t,n,r={},i=(t=l(Be.Z.STREAM)).length-1;0<=i;i--)if((n=t[i]).type===_e.w.MPD_TYPE){r=Z.Z.parseHttpHeaders(n._responseHeaders);break}e=r[e.toLowerCase()];return void 0===e?null:e},addRepresentationSwitch:function(e,t,n,r,i){a.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){a.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();a.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),a.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),a.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){a.addManifestUpdate(Be.Z.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i,o){a.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i,e.fileLoaderType,o)},addSchedulingInfo:function(e,t){a.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){a.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){a.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){a.addBufferState(e,t,n)},addDroppedFrames:function(e){a.addDroppedFrames(Be.Z.VIDEO,e)},addPlayList:function(){o&&(a.addPlayList(o),o=null)},addDVBErrors:function(e){a.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(o=new $e).start=new Date,o.mstart=e,o.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===r&&(r=!1,(i=new ze).representationid=e,i.start=new Date,i.mstart=t,i.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(i)for(var t in i)i[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var n;!1===r&&o&&i&&i.start&&(n=i.start,e=e.getTime()-n.getTime(),i.duration=e,i.stopreason=t,o.trace.push(i),r=!0)},clearAllCurrentMetrics:function(){a.clearAllCurrentMetrics()}},a=a||Li(n).getInstance({settings:e.settings}),r=!0,o=i=null,t}xi.__dashjs_factory_name="DashMetrics";var ki=ve.Z.getSingletonFactory(xi);function Fi(){var e,d,n,r,t=this.context,s=(0,qe.Z)(t).getInstance(),l=(0,Ee.Z)(t).getInstance();function i(e){r=e}function o(e,t,n,r){var i=t.adaptation.period.mpd,o=i.availabilityStartTime;return r?n&&i.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(o.getTime()+1e3*(e+i.timeShiftBufferDepth)):i.availabilityEndTime:n?(r=t.availabilityTimeOffset,new Date(o.getTime()+1e3*(e-r))):o}function u(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function f(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function c(e){var t,n={start:NaN,end:NaN},r=e[0].getAdapter().getRegularPeriods()[0],i=u(new Date,r);return e&&0!==e.length&&(e.forEach(function(e){var t=e.getAdapter(),e=t.getMediaInfoForType(e.getStreamInfo(),Be.Z.VIDEO)||t.getMediaInfoForType(e.getStreamInfo(),Be.Z.AUDIO),t=t.getVoRepresentations(e)[0],e={start:NaN,end:NaN};t&&(t.segmentInfoType===ye.Z.SEGMENT_TIMELINE?e=function(e){var t,n,r,i,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],o=d.getRepresentationFor(e.index,o),o=o.SegmentTemplate||o.SegmentList,a=o.SegmentTimeline,o=o.timescale,s=a.S_asArray,a={start:0,end:0},l=s[0].t,u=!isNaN(l),l=u?l:0,c=0;for(u&&(a.start=f(l/o,e)),r=0,i=s.length;r<i;r++)n=0,(t=s[r]).hasOwnProperty("r")&&(n=t.r),c+=t.d*(1+n);return a.end=f((l+c)/o,e),a}(t):(t=t.adaptation.period,e.start=t.start,e.end=Math.max(i,t.start+t.duration))),!isNaN(e.start)&&(isNaN(n.start)||n.start>e.start)&&(n.start=e.start),!isNaN(e.end)&&(isNaN(n.end)||n.end<e.end)&&(n.end=e.end)}),n.end=Math.min(i,n.end),t=h(e,n.end,!0),n.end=isNaN(t)?n.end:t,n.start=r&&r.mpd&&r.mpd.timeShiftBufferDepth&&!isNaN(r.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-r.mpd.timeShiftBufferDepth,n.start):n.start,n.start=h(e,n.start)),{range:n,now:i}}function p(e,t){n=e-t.end}function h(e,t,n){var r=2<arguments.length&&void 0!==n&&n;try{for(var i=0,o=!1,a=NaN;!o&&i<e.length;){var s=e[i].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(a=t,o=!0):!r&&s.start>t&&(isNaN(a)||s.start<a)?a=s.start:r&&s.start+s.duration<t&&(isNaN(a)||s.start+s.duration>a)&&(a=s.start+s.duration),i+=1}return a}catch(e){return t}}function a(e){void 0===e.offset||isNaN(e.offset)||i(e.offset/1e3)}function g(){n=r=0}function m(){s.off(Ge.Z.UPDATE_TIME_SYNC_OFFSET,a,this),g()}return e={initialize:function(){g(),s.on(Ge.Z.UPDATE_TIME_SYNC_OFFSET,a,this)},getClientTimeOffset:function(){return r},setClientTimeOffset:i,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*r},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return o(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return o(e,t,n,!0)},calcPresentationTimeFromWallTime:u,calcPresentationTimeFromMediaTime:f,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var n;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,n=new Date(e.availabilityStartTime.getTime()+1e3*t)),n},calcTimeShiftBufferWindow:function(e,t){if(!t)return t={start:NaN,end:NaN},n=0,r=NaN,e.forEach(function(e){e=e.getStreamInfo();n+=e.duration,(isNaN(r)||e.start<r)&&(r=e.start)}),t.start=r,t.end=r+n,t;var n,r;if(l.get().streaming.timeShiftBuffer.calcFromSegmentTimeline)return p((t=c(e)).now,t.range),t.range;t=e,e={start:NaN,end:NaN};if(t&&0!==t.length){var i=t[0].getAdapter().getRegularPeriods()[0],o=u(new Date,i),i=i.mpd.timeShiftBufferDepth,a=isNaN(i)?0:o-i;if(e.start=h(t,a),e.end=!isNaN(e.start)&&o<e.start?o:h(t,o,!0),!isNaN(i)&&e.end<o-i&&(e.end=NaN),l.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){a=c(t);if(a.range.end<e.start)return s.trigger(He.Z.CONFORMANCE_VIOLATION,{level:Ve.LEVELS.WARNING,event:Ve.EVENTS.INVALID_DVR_WINDOW}),p(a.now,a.range),a.range}}return e},reset:m},d=Oe(t).getInstance(),m(),e}Fi.__dashjs_factory_name="TimelineConverter";var Ui=ve.Z.getSingletonFactory(Fi),Bi=t(4593),Zi=t(6934);function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hi=function(){var e=o,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Gi(e,t);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=ji(n),t=(e=r?(e=ji(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==qi(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e;throw new TypeError("Cannot call a class as a function")}return o}(),Yi=t(2295);function Ki(){var F=0;function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function U(e,t){e=e.videoHeight/15;return t?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,n,k){for(var r=null,i=!1,o=-1,a={start:t,end:n,spans:[]},s="style_cea608_white_black",l={},u={},c=[],d=0;d<15;++d){var f=k.rows[d],p="",h=null;if(!1===f.isEmpty()){var g=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}(f.chars);null===r&&(r={x:g,y1:d,y2:d+1,p:[]}),g!==o&&i&&(r.p.push(a),a={start:t,end:n,spans:[]},r.y2=d,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===l.hasOwnProperty(r.name)?(c.push(r),l[r.name]=r):l[r.name].p.contat(r.p),r={x:g,y1:d,y2:d+1,p:[]});for(var m=0;m<f.chars.length;++m){var y,v=f.chars[m],E=v.penState;null!==h&&E.equals(h)||(0<p.trim().length&&(a.spans.push({name:s,line:p,row:d}),p=""),y="style_cea608_"+E.foreground+"_"+E.background,E.underline&&(y+="_underline"),E.italics&&(y+="_italics"),u.hasOwnProperty(y)||(u[y]=JSON.parse(JSON.stringify(E))),h=E,s=y),p+=v.uchar}0<p.trim().length&&a.spans.push({name:s,line:p,row:d}),i=!0,o=g}else i=!1,o=-1,r&&(r.p.push(a),a={start:t,end:n,spans:[]},r.y2=d,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===l.hasOwnProperty(r.name)?(c.push(r),l[r.name]=r):l[r.name].p.contat(r.p),r=null)}r&&(r.p.push(a),r.y2=d+1,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===l.hasOwnProperty(r.name)?(c.push(r),l[r.name]=r):l[r.name].p.contat(r.p),r=null);var _=[];for(d=0;d<c.length;++d){var T=c[d],b="sub_cea608_"+F++,S=document.createElement("div"),A=(S.id=b,"left: "+3.125*T.x+"%; top: "+6.66*T.y1+"%; width: "+(100-3.125*T.x)+"%; height: "+6.66*Math.max(T.y2-1-T.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"),A=(S.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+A,document.createElement("div")),w=(A.className="paragraph bodyStyle",A.style.cssText=U(e),document.createElement("div"));w.className="cueUniWrapper",w.style.cssText="unicode-bidi: normal; direction: ltr;";for(var I=0;I<T.p.length;++I)for(var R=T.p[I],C=0,N=0;N<R.spans.length;++N){var D,O,M,P=R.spans[N];0<P.line.length&&(0!==N&&C!=P.row&&((D=document.createElement("br")).className="lineBreak",w.appendChild(D)),D=!1,C===P.row&&(D=!0),C=P.row,O=u[P.name],(M=document.createElement("span")).className="spanPadding "+P.name+" customSpanColor",M.style.cssText=U(e,O),0!==N&&D?N===R.spans.length-1?M.textContent=P.line.replace(/\s+$/g,""):M.textContent=P.line:1<R.spans.length&&N<R.spans.length-1&&P.row===R.spans[N+1].row?M.textContent=P.line.replace(/^\s+/g,""):M.textContent=P.line.trim(),w.appendChild(M))}A.appendChild(w),S.appendChild(A);var L,x={bodyStyle:["%",90]};for(L in u)u.hasOwnProperty(L)&&(x[L]=["%",90]);_.push({type:"html",start:t,end:n,cueHTMLElement:S,cueID:b,cellResolution:[32,15],isFromCEA608:!0,fontSize:x,lineHeight:{},linePadding:{}})}return _}}}Ki.__dashjs_factory_name="EmbeddedTextHtmlRender";var $i=ve.Z.getSingletonFactory(Ki);function zi(e){var y,v,E,_,d,T,b,S,f,A,w,I,R,C,N,D,O,M=e.errHandler,P=e.manifestModel,p=e.mediaController,L=e.videoModel,x=e.textTracks,k=e.vttParser,n=e.vttCustomRenderingParser,l=e.ttmlParser,h=e.streamInfo,u=e.settings,g=this.context,t=(0,qe.Z)(g).getInstance(),r=!1;function i(){S=NaN,b=!(f=[]),d=[],_=A=T=null}function o(e){e=e.chunk;e.mediaInfo.embeddedCaptions&&a(e.bytes,e)}function m(e){w=e}function a(e,t){var h,n,r=t.mediaInfo,i=r.type,o=r.mimeType,o=r.codec||o;if(o)if(-1!==r.codec.indexOf("application/mp4"))r=e,h=o,"InitializationSegment"===(a=t).segmentType?(b=!0,S=E.getMediaTimescaleFromMoov(r)):b&&(0<(s=E.getSamplesInfo(r).sampleList).length&&(A=s[0].cts-a.start*S),(0<=h.search(Be.Z.STPP)?function(e,t){var n;for(_=null!==_?_:U(h),n=0;n<t.length;n++){for(var r=t[n],i=r.cts,o=F(),a=o+i/S,s=a+r.duration/S,a=(y.buffered.add(a,s),new DataView(e,r.offset,r.subSizes[0])),s=Zi.Utils.dataViewToString(a,Be.Z.UTF8),l=[],u=r.offset+r.subSizes[0],c=1;c<r.subSizes.length;c++){var d=new Uint8Array(e,u,r.subSizes[c]),d=String.fromCharCode.apply(null,d);l.push(d),u+=r.subSizes[c]}try{var f=P.getValue().ttmlTimeIsRelative?i/S:0,p=_.parse(s,f,i/S,(i+r.duration)/S,l);x.addCaptions(w,o,p)}catch(e){T.removeExecutedRequestsBeforeTime(),this.remove(),v.error("TTML parser error: "+e.message)}}}:function(e,t){for(var n=[],r=0;r<t.length;r++)for(var i=t[r],o=(i.cts-=A,F()+i.cts/S),a=o+i.duration/S,o=(y.buffered.add(o,a),e.slice(i.offset,i.offset+i.size)),s=Zi.parseBuffer(o),l=0;l<s.boxes.length;l++){var u=s.boxes[l];if(v.debug("VTT box1: "+u.type),"vtte"!==u.type&&"vttc"===u.type){v.debug("VTT vttc boxes.length = "+u.boxes.length);for(var c={styles:{}},d=0;d<u.boxes.length;d++){var f=u.boxes[d];if(v.debug("VTT box2: "+f.type),"payl"===f.type)c.start=i.cts/S,c.end=(i.cts+i.duration)/S,c.data=f.cue_text;else if("sttg"===f.type&&f.settings&&""!==f.settings)try{var p=f.settings.split(" ");c.styles=k.getCaptionStyles(p)}catch(e){}}c&&c.data&&(n.push(c),v.debug("VTT  ".concat(c.start," - ").concat(c.end," :  ").concat(c.data)))}}0<n.length&&x.addCaptions(w,0,n)})(r,s));else if(i===Be.Z.VIDEO){var f=e,a;if((a=t).segmentType===_e.w.INIT_SEGMENT_TYPE)0===R&&(R=E.getMediaTimescaleFromMoov(f));else if(a.segmentType===_e.w.MEDIA_SEGMENT_TYPE){if(0===R)return void v.warn("CEA-608: No timescale for embeddedTextTrack yet");var s=(r=E.getSamplesInfo(f)).lastSequenceNumber,i=Math.trunc(a.start),a=Math.trunc(a.end);if(D[0]||D[1]||function(){for(var e=0;e<I.length;e++){if(-1===(t=x.getTrackIdxForId(I[e].id)))return v.warn("CEA-608: data before track is ready.");var t=function(r){return function(e,t,n){(e=L.getTTMLRenderingDiv()?O.createHTMLCaptionsFromScreen(L.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&x.addCaptions(r,0,e)}}(t);D[e]=new(me().Cea608Parser)(e+1,{newCue:t},null)}}(),R){if(p=C,m=r.numSequences,null!==p&&null!==s&&null!==N&&null!==i&&(s===p?N!==i:s!==p+m))for(n=0;n<D.length;n++)D[n]&&D[n].reset();for(var l=function(e){if(0===e.length)return null;for(var t,n={splits:[],fields:[[],[]]},r=new DataView(f),i=0;i<e.length;i++)for(var o=e[i],a=me().findCea608Nalus(r,o.offset,o.size),s=null,l=0,u=0;u<a.length;u++)for(var c=me().extractCea608DataFromRange(r,a[u]),d=0;d<2;d++)0<c[d].length&&(o.cts!==s?l=0:l+=1,t=F(),n.fields[d].push([o.cts+t*R,c[d],l]),s=o.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(r.sampleList),u=0;u<D.length;u++){var c=l.fields[u],d=D[u];if(d)for(n=0;n<c.length;n++)d.addData(c[n][0]/R,c[n][1])}C=s,N=a}}}else{i=t;var p=o,g,m=new DataView(e,0,e.byteLength),m=Zi.Utils.dataViewToString(m,Be.Z.UTF8);try{g=U(p).parse(m,0),x.addCaptions(x.getCurrentTrackIdx(),0,g),y.buffered&&y.buffered.add(i.start,i.end)}catch(e){M.error(new Ye.Z(Ke.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ke.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,m))}}else v.error("No text type defined")}function F(){return isNaN(y.timestampOffset)?0:y.timestampOffset}function U(e){var t;return 0<=e.search(Be.Z.VTT)?t=u.get().streaming.text.webvtt.customRenderingEnabled&&n?n:k:(0<=e.search(Be.Z.TTML)||0<=e.search(Be.Z.STPP))&&(t=l),t}function s(t){I.forEach(function(e){e=x.getTrackIdxForId(e.id);0<=e&&x.deleteCuesFromTrackIdx(e,t.from,t.to)})}return y={initialize:function(){r||(I=[],R=0,D=[],r=!(N=C=w=null),O=$i(g).getInstance(),t.on(Ge.Z.VIDEO_CHUNK_RECEIVED,o,y),t.on(Ge.Z.BUFFER_CLEARED,s,y))},addMediaInfos:function(e,t,n){if(d=d.concat(t),e===Be.Z.TEXT&&t[0].isFragmented&&!t[0].isEmbedded){T=n,y.buffered=(0,Yi.Z)(g).create(),f=p.getTracksFor(Be.Z.TEXT,h.id).filter(function(e){return e.isFragmented});for(var r=p.getCurrentTrackFor(Be.Z.TEXT,h.id),i=0;i<f.length;i++)if(f[i]===r){m(i);break}}for(var o=0;o<t.length;o++){a=void 0;c=void 0;s=void 0;l=void 0;u=void 0;var a=t[o];var s,l,u,c=new Hi;for(s in a)c[s]=a[s];c.labels=a.labels,c.defaultTrack=(l=a,u=!1,1<I.length&&l.isEmbedded?u=l.id&&l.id===Be.Z.CC1:1===I.length?l.id&&"string"==typeof l.id&&"CC"===l.id.substring(0,2)&&(u=!0):0===I.length&&(u=l.index===d[0].index),u),c.isFragmented=a.isFragmented,c.isEmbedded=!!a.isEmbedded,c.isTTML=(l=a).codec&&0<=l.codec.search(Be.Z.STPP)||l.mimeType&&0<=l.mimeType.search(Be.Z.TTML),c.kind=(u={subtitle:"subtitles",caption:"captions"},(l=a.roles&&0<a.roles.length?u[a.roles[0]]:u.caption)===u.caption||l===u.subtitle?l:u.caption),x.addTextTrack(c)}},resetMediaInfos:function(){d=[]},getStreamId:function(){return h.id},append:a,abort:function(){},addEmbeddedTrack:function(e){if(r&&e)if(e.id===Be.Z.CC1||e.id===Be.Z.CC3){for(var t=0;t<I.length;t++)if(I[t].id===e.id)return;I.push(e)}else v.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(Ge.Z.VIDEO_CHUNK_RECEIVED,o,y),t.off(Ge.Z.BUFFER_CLEARED,s,y),x&&x.deleteAllTextTracks(),r=!1,I=[],D=[null,null],N=C=null},getConfig:function(){return{fragmentModel:T,fragmentedTracks:f,videoModel:L}},setCurrentFragmentedTrackIdx:m,remove:function(e,t){void 0===e&&e===t&&(e=y.buffered.start(0),t=y.buffered.end(y.buffered.length-1)),y.buffered.remove(e,t),x.deleteCuesFromTrackIdx(w,e,t)},reset:function(){i(),d=[],E=null}},v=(0,je.Z)(g).getInstance().getLogger(y),E=(0,Nt.Z)(g).getInstance(),i(),y}zi.__dashjs_factory_name="TextSourceBuffer";var Vi=ve.Z.getClassFactory(zi),Wi=t(4403);function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qi=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Ji(e){var b,i,c,d,S,A,w,I,R,C,f,r,h,g,n,m,o,N,D,t=this.context,O=(0,qe.Z)(t).getInstance(),M=e.videoModel,p=e.streamInfo,P=e.settings;function y(e,t){var n=M.getClientWidth(),r=M.getClientHeight(),i=M.getVideoWidth(),o=M.getVideoHeight(),a=M.getVideoRelativeOffsetTop(),s=M.getVideoRelativeOffsetLeft();if(0!==i&&0!==o){var l=i/o,u=!1,n=(e.isFromCEA608&&(l=3.5/3,u=!0),function(e,t,n,r,i,o){var a=0,s=0;return n/r<e/t?a=(s=t)/r*n:s=(a=e)/n*r,r=n=0,i<a/s?n=(r=s)*i:r=(n=a)/i,s=(e-n)/2,a=(t-r)/2,o?{x:s+.1*n,y:a+.1*r,w:.8*n,h:.8*r}:{x:s,y:a,w:n,h:r}}.call(this,n,r,i,o,l,u)),r=n.w,i=n.h,o=n.x,l=n.y;if(r!=I||i!=R||o!=A||l!=w||t){A=o+s,w=l+a,I=r,R=i,C&&(u=C.style)&&(u.left=A+"px",u.top=w+"px",u.width=I+"px",u.height=R+"px",u.zIndex=h&&document[h]||g?m:null,O.trigger(He.Z.CAPTION_CONTAINER_RESIZE));var c=e.activeCues;if(c)for(var d=c.length,f=0;f<d;++f){var p=c[f];p.scaleCue(p)}}}}function L(e){var t,n,r,i=I,o=R;if(e.cellResolution){var a=[i/e.cellResolution[0],o/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t))for(var s=(e.linePadding[t]*a[0]).toString(),l=document.getElementsByClassName("spanPadding"),u=0;u<l.length;u++)l[u].style.cssText=l[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s),l[u].style.cssText=l[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s);if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),s=(n*a[1]).toString();for(var c="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph"),d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?r=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.lineHeight[t][1]),s=(r*a[1]).toString(),c=document.getElementsByClassName(t);for(var f=0;f<c.length;f++)c[f].style.cssText=c[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}}}e.isd&&((i=document.getElementById(e.cueID))&&C.removeChild(i),x(e))}function a(e,t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;return n.test(t)?(n=n.exec(t),n=parseInt(n[4],10)-1,"data:image/png;base64,"+btoa(e.images[n])):r.test(t)?(n=r.exec(t)[1],"data:image/png;base64,"+e.embeddedImages[n]):t}function x(t){var e;C&&(s.call(this),e=document.createElement("div"),C.appendChild(e),n=(0,Wi.renderHTML)(t.isd,e,function(e){return a(t,e)},C.clientHeight,C.clientWidth,P.get().streaming.text.imsc.displayForcedOnlyMode,function(e){b.info("renderCaption :",e)},n,P.get().streaming.text.imsc.enableRollUp),e.id=t.cueID,O.trigger(He.Z.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:S}))}function v(e,t,n){var r,i,o,a,s=Z(e),l=P.get().streaming.text.dispatchForManualRendering;if(s&&Array.isArray(n)&&0!==n.length)for(var u=0;u<n.length;u++){var c=null,d=n[u];s.cellResolution=d.cellResolution,s.isFromCEA608=d.isFromCEA608,isNaN(d.start)||isNaN(d.end)||(l?c=function(e,t){var n=U(e,t);return n.onenter=function(){F(e)&&D&&D.cueID!==n.cueID&&k(D),delete n.type,G(D=n)},n.onexit=function(){k(n),D=null},n}(d,t):F(d)&&C?c=function(e,t,n){var r=this,e=U(e,t);return C.style.left=A+"px",C.style.top=w+"px",C.style.width=I+"px",C.style.height=R+"px",e.onenter=function(){var e=this;n.mode===Be.Z.TEXT_SHOWING&&(this.isd?(N?requestAnimationFrame(function(){return x(e)}):x(this),b.debug("Cue enter id:"+this.cueID)):(C.appendChild(this.cueHTMLElement),L.call(r,this),O.trigger(He.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:S})))},e.onexit=function(){if(C)for(var e=C.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(b.debug("Cue exit id:"+e[t].id),C.removeChild(e[t]),--t)},e}(d,t,s):d.data&&(c=function(e,t,n){t=U(e,t);if(t.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in t&&(t.align=e.styles.align),void 0!==e.styles.line&&"line"in t&&(t.line=e.styles.line),void 0!==e.styles.snapToLines&&"snapToLines"in t&&(t.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in t&&(t.position=e.styles.position),void 0!==e.styles.size&&"size"in t&&(t.size=e.styles.size)}catch(e){b.error(e)}return t.onenter=function(){n.mode===Be.Z.TEXT_SHOWING&&O.trigger(He.Z.CAPTION_RENDERED,{currentTrackIdx:S})},t}(d,t,s)));try{if(c){!function(e,t){if(e.cues)for(var n=0;n<e.cues.length;n++)if(e.cues[n].startTime===t.startTime&&e.cues[n].endTime===t.endTime)return 1;return}(s,c)&&(P.get().streaming.text.webvtt.customRenderingEnabled?(s.manualCueList||(s.manualCueList=[]),s.manualCueList.push(c)):(f=void 0,s.cues&&0!==s.cues.length&&(f=s.cues[s.cues.length-1]),o=c,(a=f)&&a.endTime>=o.startTime?(r=c,i=f,P.get().streaming.text.extendSegmentedCues&&function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];if(JSON.stringify(e[i])!==JSON.stringify(t[i]))return}return 1}(i,r,Qi)?i.endTime=Math.max(i.endTime,r.endTime):(f.isd&&(f.onexit=function(){}),s.mode!==Be.Z.TEXT_DISABLED&&s.addCue(c))):s.mode!==Be.Z.TEXT_DISABLED&&s.addCue(c)));var f,p,h,g=P.get().streaming.buffer.bufferToKeep,m=(T=_=E=h=p=v=y=m=void 0,s),y=0,v=M.getTime()-g;if(!(v<y)&&m&&(m.cues||m.manualCueList)){var E=m.cues&&0<m.cues.length?"native":"custom",_="native"==E?m.cues:m.manualCueList;if(_&&0!==_.length)for(var T=_.length-1;0<=T;T--)!j(_[T],y,v,!0)||(p=_[T],h=M.getTime(),p.startTime>=h&&p.endTime<=h)||("native"==E?m.removeCue(_[T]):(B(_[T]),delete m.manualCueList[T]))}}else b.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(e){throw q(s),s.addCue(c),e}}}function G(e){O.trigger(He.Z.CUE_ENTER,e)}function k(e){O.trigger(He.Z.CUE_EXIT,{cueID:e.cueID})}function F(e){return"html"===e.type}function U(e,t){return F(e)?((r=new i((n=e).start+t,n.end+t,"")).cueHTMLElement=n.cueHTMLElement,r.isd=n.isd,r.images=n.images,r.embeddedImages=n.embeddedImages,r.cueID=n.cueID,r.scaleCue=L.bind(self),r.cellResolution=n.cellResolution,r.lineHeight=n.lineHeight,r.linePadding=n.linePadding,r.fontSize=n.fontSize,r.isd&&function t(n,e){e&&e.forEach(function(e){e.kind&&"image"===e.kind&&(e.src=a(n,e.src)),t(n,e.contents)})}(r,r.isd.contents),r):((n=new i(e.start-t,e.end-t,e.data)).cueID="".concat(n.startTime,"_").concat(n.endTime),n);var n,r}function B(e){if(f)for(var t=f.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(f.removeChild(t[n]),--n)}function l(){var e,t=[],n=function(e){var t,n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e){var t;if(e)return"string"==typeof e?Xi(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xi(e,void 0):void 0}(e)))return t&&(e=t),n=0,{s:r=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(M.getTextTracks());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.manualMode===Be.Z.TEXT_SHOWING&&t.push(r)}}catch(e){n.e(e)}finally{n.f()}return t}function Z(e){return 0<=e&&c[e]?M.getTextTrack(c[e].kind,c[e].id,c[e].lang,c[e].isTTML,c[e].isEmbedded):null}function E(e){var t,n=this;e!==S&&(t=Z(S=e),function(e){s.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=M.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){b.info(""+e.message)}}}:function(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}).call(this)}.call(this,t),r&&(clearInterval(r),r=null),t)&&"html"===t.renderingType&&(y.call(this,t,!0),window.ResizeObserver?(o=new window.ResizeObserver(function(){y.call(n,t,!0)})).observe(M.getElement()):r=setInterval(y.bind(this,t),500))}function j(e,t,n,r){r=!(3<arguments.length&&void 0!==r)||r;return e&&(isNaN(t)||(r?e.startTime:e.endTime)>=t)&&(isNaN(n)||(r?e.endTime:e.startTime)<=n)}function q(e,t,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){var i=e.cues&&0<e.cues.length?"native":"custom",o="native"==i?e.cues:e.manualCueList;if(o&&0!==o.length)for(var a=o.length-1;0<=a;a--)j(o[a],t,n,r)&&("native"==i?(o[a].onexit&&o[a].onexit(),e.removeCue(o[a])):(B(o[a]),delete e.manualCueList[a]))}}function s(){if(C)for(;C.firstChild;)C.removeChild(C.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(i=window.VTTCue||window.TextTrackCue,c=[],d=[],R=I=w=A=0,g=!(S=-1),m=2147483647,n=r=f=C=null,N="requestAnimationFrame"in window,void 0!==document.fullscreenElement?h="fullscreenElement":void 0!==document.webkitIsFullScreen?h="webkitIsFullScreen":document.msFullscreenElement?h="msFullscreenElement":document.mozFullScreen&&(h="mozFullScreen"))},getStreamId:function(){return p.id},addTextTrack:function(e){c.push(e)},addCaptions:v,createTracks:function(){var e=P.get().streaming.text.dispatchForManualRendering;c.sort(function(e,t){return e.index-t.index}),C=M.getTTMLRenderingDiv(),f=M.getVttRenderingDiv();for(var t,n,r,i=-1,o=0;o<c.length;o++){a=(r=c[o]).kind,s=void 0!==r.id?r.id:r.lang,t=r.lang,n=r.isTTML,r=r.isEmbedded;var a=M.addTextTrack(a,s,t,n,r),s=(d.push(a),c[o].defaultTrack&&(a.default=!0,i=o),Z(o));s&&(s.mode=Be.Z.TEXT_SHOWING,C&&(c[o].isTTML||c[o].isEmbedded)?s.renderingType="html":s.renderingType="default"),v(o,0,c[o].captionData),O.trigger(He.Z.TEXT_TRACK_ADDED)}if(E.call(this,i),0<=i){O.on(He.Z.PLAYBACK_METADATA_LOADED,function e(){var t=Z(i);t&&"html"===t.renderingType&&y.call(this,t,!0),O.off(He.Z.PLAYBACK_METADATA_LOADED,e,this)},this);for(var l=0;l<c.length;l++){var u=Z(l);u&&(u.mode=l!==i||e?Be.Z.TEXT_HIDDEN:Be.Z.TEXT_SHOWING,u.manualMode=l===i?Be.Z.TEXT_SHOWING:Be.Z.TEXT_HIDDEN)}}O.trigger(Ge.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:S,tracks:c,streamId:p.id})},getCurrentTrackIdx:function(){return S},setCurrentTrackIdx:E,getTrackIdxForId:function(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return c[S]},setModeForTrackIdx:function(e,t){e=Z(e);e&&e.mode!==t&&(e.mode=t),e&&e.manualMode!==t&&(e.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,n){e=Z(e);e&&q(e,t,n)},deleteAllTextTracks:function(){for(var e=d?d.length:0,t=0;t<e;t++){var n=Z(t);n&&q.call(this,n,p.start,p.start+p.duration,!1)}d=[],c=[],r&&(clearInterval(r),r=null),o&&M&&(o.unobserve(M.getElement()),o=null),S=-1,s.call(this)},manualCueProcessing:function(t){var e=l();e&&0<e.length&&(e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){e.startTime<=t&&e.endTime>=t&&!e.isActive?(e.isActive=!0,P.get().streaming.text.dispatchForManualRendering?G(e):WebVTT.processCues(window,[e],f,e.cueID)):e.isActive&&(e.startTime>t||e.endTime<t)&&(e.isActive=!1,(P.get().streaming.text.dispatchForManualRendering?k:B)(e))})},disableManualTracks:function(){var e=l();e&&0<e.length&&(e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){if(e.isActive)if(e.isActive=!1,P.get().streaming.text.dispatchForManualRendering)k(e);else if(f)for(var t=f.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(f.removeChild(t[n]),--n)})}},b=(0,je.Z)(t).getInstance().getLogger(e),e}Ji.__dashjs_factory_name="TextTracks";var eo=ve.Z.getClassFactory(Ji);function to(){var e,u,c,d,f,p,t=this.context;function h(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}function g(e){var r={};return e.forEach(function(e){var t,n;1<e.split(/:/).length&&(n=!1,(t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(n=!0,t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(r.align=t),(e.match(/line/)||e.match(/L/))&&(r.line="auto"===t?t:parseInt(t,10),n)&&(r.snapToLines=!1),(e.match(/position/)||e.match(/P/))&&(r.position=t),e.match(/size/)||e.match(/S/))&&(r.size=t)}),r}return e={parse:function(e){var t=[];if(e)for(var n=(e=e.split(c)).length,r=-1,i=0;i<n;i++){var o,a,s,l=e[i];0<l.length&&"WEBVTT"!==l&&l.match(d)&&(s=void 0,(s=(l=(l=l).split(d))[1].split(p)).shift(),l[1]=s[0],s.shift(),s=(l={cuePoints:l,styles:g(s)}).cuePoints,l=l.styles,o=function(e,t){for(var n,r=t,i="",o="";""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var a=0;a<n;a++){if((o=e[t+a]).match(d)){i="";break}i+=o,a!==n-1&&(i+="\n")}else(o=e[t]).match(d)||(i=o);return i}(e,i+1),a=h(s[0].replace(f,"")),s=h(s[1].replace(f,"")),!isNaN(a)&&!isNaN(s)&&r<=a&&a<s?""!==o?t.push({start:r=a,end:s,data:o,styles:l}):u.error("Skipping cue due to empty/malformed cue text"):u.error("Skipping cue due to incorrect cue timing"))}return t},getCaptionStyles:g},u=(0,je.Z)(t).getInstance().getLogger(e),c=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,p=/\s\b/g,e}to.__dashjs_factory_name="VTTParser";var no=ve.Z.getSingletonFactory(to);function ro(){var n,e={parse:function(e){var t=[];return n.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},t.push(e)},n.parse(e),t}};try{window&&window.WebVTT&&window.WebVTT.Parser&&(n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}return e}ro.__dashjs_factory_name="VttCustomRenderingParser";var io=ve.Z.getSingletonFactory(ro);function oo(){var e=this.context,v=(0,qe.Z)(e).getInstance(),E=0,t={parse:function(e,t,n,r,i){var o,a="",s=[],l={},u={},c="",d="",f={onOpenTag:function(e,t,n){n[" imagetype"]&&!n[" imageType"]&&(v.trigger(He.Z.CONFORMANCE_VIOLATION,{level:Ve.LEVELS.ERROR,event:Ve.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),n[" imageType"]=n[" imagetype"]),"image"!==t||"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"!==e&&"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"!==e||(n[" imageType"]&&"PNG"===n[" imageType"].value?c=n["http://www.w3.org/XML/1998/namespace id"].value:_.warn("smpte-tt imageType != PNG. Discarded"))},onCloseTag:function(){c&&(u[c]=d.trim()),c=d=""},onText:function(e){c&&(d+=e)}};if(!e)throw a="no ttml data to parse",new Error(a);l.data=e,v.trigger(Ge.Z.TTML_TO_PARSE,l);var p=(0,Wi.fromXML)(l.data,function(e){a=e},f);v.trigger(Ge.Z.TTML_PARSED,{ttmlString:l.data,ttmlDoc:p});for(var h,g=p.getMediaTimeEvents(),m=0;m<g.length;m++){var y=(0,Wi.generateISD)(p,g[m],function(e){a=e});y.contents.some(function(e){return e.contents.length})&&(h=g[m]+t)<(o=g[m+1]+t)&&s.push({start:h,end:o,type:"html",cueID:(h="cue_TTML_"+E,E++,h),isd:y,images:i,embeddedImages:u})}if(""!==a)throw _.error(a),new Error(a);return s}},_=(0,je.Z)(e).getInstance().getLogger(t);return t}oo.__dashjs_factory_name="TTMLParser";var ao=ve.Z.getSingletonFactory(oo);function so(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function lo(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?so(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):so(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function co(e){var i,s,t=this.context,r=(0,qe.Z)(t).getInstance(),l=(0,Se.Z)(t).getInstance(),u=e.adapter,c=e.baseURLController;function o(e,t){var n=s[e];s[e]=lo(lo({},n),{},{status:t})}function a(){s=[]}return e={addFontsFromTracks:function(e,t){if(e&&Array.isArray(e)&&t)for(var n=0;n<e.length;n++)!function(r,i){var o,a=!1,e=(c.resolve()&&(e=u.getVoRepresentations(r))&&0<e.length&&(o=c.resolve(e[0].path).url),r.essentialPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===Be.Z.FONT_DOWNLOAD_DVB_SCHEME})),t=r.supplementalPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===Be.Z.FONT_DOWNLOAD_DVB_SCHEME});(e=0<e.length?(a=!0,e):t).forEach(function(e){var t,n;e.value&&"1"===e.value&&e.dvbUrl&&0<e.dvbUrl.length&&e.dvbFontFamily&&0<e.dvbFontFamily.length&&e.dvbMimeType&&(e.dvbMimeType===Be.Z.OFF_MIMETYPE||e.dvbMimeType===Be.Z.WOFF_MIMETYPE)&&(t=e.dvbUrl,n=o,n=!l.isPathAbsolute(t)&&l.isRelative(t)?n?l.resolve(t,n):l.resolve(t):t,s.push({fontFamily:e.dvbFontFamily,url:n,mimeType:e.dvbMimeType,trackId:r.id,streamId:i,isEssential:a,status:"unloaded",fontFace:new FontFace(e.dvbFontFamily,"url(".concat(n,")"),{display:"swap"})}))})}(e[n],t)},downloadFonts:function(){for(var e=0;e<s.length;e++)!function(t){var n=s[t];document.fonts.add(n.fontFace),r.trigger(He.Z.DVB_FONT_DOWNLOAD_ADDED,n),n.fontFace.load().then(function(){o(t,"loaded"),r.trigger(He.Z.DVB_FONT_DOWNLOAD_COMPLETE,n)},function(e){o(t,"error"),i.debug("Font download error: ",e),r.trigger(He.Z.DVB_FONT_DOWNLOAD_FAILED,n)})}(e)},getFonts:function(){return s},getFontsForTrackId:function(t){return s.filter(function(e){return e.trackId&&e.trackId===t})},reset:function(){var e,t=function(e){var t,n,r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e){var t;if(e)return"string"==typeof e?uo(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?uo(e,void 0):void 0}(e)))return t&&(e=t),n=0,{s:r=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(s);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=document.fonts.delete(n.fontFace);i.debug("Removal of fontFamily: ".concat(n.fontFamily," was ").concat(r?"successful":"unsuccessful"))}}catch(e){t.e(e)}finally{t.f()}a()}},i=(0,je.Z)(t).getInstance().getLogger(e),a(),e}co.__dashjs_factory_name="DVBFonts";var fo=ve.Z.getClassFactory(co);function po(e){var t,o,f,p,r,i,a,h,g,n,s,l,u,c,d=this.context,m=e.adapter,y=e.errHandler,v=e.manifestModel,E=e.mediaController,_=e.baseURLController,T=e.videoModel,b=e.settings;function S(e){var t;c.error("Could not download ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&(t=p[e.streamId].getTrackIdxForId(e.trackId),p[e.streamId].setModeForTrackIdx(t,Be.Z.TEXT_DISABLED))}function A(e){var t;c.debug("Successfully downloaded ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&((t=p[e.streamId].getTrackIdxForId(e.trackId))===p[e.streamId].getCurrentTrackIdx()?p[e.streamId].setModeForTrackIdx(t,Be.Z.TEXT_SHOWING):p[e.streamId].setModeForTrackIdx(t,Be.Z.TEXT_HIDDEN))}function w(e){var n,t=e.tracks,r=e.index,i=e.streamId;!1===b.get().streaming.text.defaultEnabled&&!C()||l?N(i,-1):((e=E.getCurrentTrackFor(Be.Z.TEXT,i))&&(n={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]},t.some(function(e,t){if(E.matchSettings(n,e))return N(i,t),r=t,!0})),g=!1),o[i].lastEnabledIndex=r,h.trigger(He.Z.TEXT_TRACKS_ADDED,{enabled:C(),index:r,tracks:t,streamId:i}),s=!0,u.addFontsFromTracks(t,i),u.getFonts().forEach(function(e){var t;e.isEssential&&(t=p[e.streamId].getTrackIdxForId(e.trackId),p[e.streamId].setModeForTrackIdx(t,Be.Z.TEXT_DISABLED))}),u.downloadFonts()}function I(e){try{var t=e.streamId;p[t]&&!isNaN(e.time)&&p[t].manualCueProcessing(e.time)}catch(e){}}function R(e){try{var t=e.streamId;p[t]&&p[t].disableManualTracks()}catch(e){}}function C(){return g&&!n?!1:!0}function N(e,t){(g=-1===t)&&E&&E.saveTextSettingsDisabled();var n=D(e);if(n!==t&&p[e]){p[e].disableManualTracks();var r=p[e].getCurrentTrackInfo(),i=r?T.getTextTrack(r.kind,r.id,r.lang,r.isTTML,r.isEmbedded):null,i=(i&&i.mode!==Be.Z.TEXT_DISABLED&&p[e].setModeForTrackIdx(n,Be.Z.TEXT_HIDDEN),p[e].setCurrentTrackIdx(t),r=p[e].getCurrentTrackInfo(),b.get().streaming.text.dispatchForManualRendering);if(r&&!i&&r.mode!==Be.Z.TEXT_DISABLED&&p[e].setModeForTrackIdx(t,Be.Z.TEXT_SHOWING),r&&r.isFragmented&&!r.isEmbedded){var o=e;var a=r;var s=n;if(f[o])for(var l=f[o].getConfig().fragmentedTracks,u=0;u<l.length;u++){var c,d=l[u];a.lang===d.lang&&(d.id?a.id===d.id:a.index===d.index)&&(c=E.getCurrentTrackFor(Be.Z.TEXT,o),(d.id?c.id!==d.id:c.index!==d.index)?(p[o].deleteCuesFromTrackIdx(s),f[o].setCurrentFragmentedTrackIdx(u)):-1===s&&h.trigger(Ge.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:o,mediaType:Be.Z.TEXT}))}}else r&&!r.isFragmented&&h.trigger(Ge.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:r},{streamId:e,mediaType:Be.Z.TEXT});E.setTrack(r)}}function D(e){return p[e].getCurrentTrackIdx()}function O(){f={},p={},o={},l=s=!(g=!0)}return l=s=n=!(t={deactivateStream:function(e){e&&(e=e.id,f[e]&&f[e].resetMediaInfos(),p[e])&&p[e].deleteAllTextTracks()},initialize:function(){u=fo(d).create({adapter:m,baseURLController:_}),h.on(Ge.Z.TEXT_TRACKS_QUEUE_INITIALIZED,w,t),h.on(Ge.Z.DVB_FONT_DOWNLOAD_FAILED,S,t),h.on(Ge.Z.DVB_FONT_DOWNLOAD_COMPLETE,A,t),b.get().streaming.text.webvtt.customRenderingEnabled&&(h.on(Ge.Z.PLAYBACK_TIME_UPDATED,I,t),h.on(Ge.Z.PLAYBACK_SEEKING,R,t))},initializeForStream:function(e){var t=e.id,n=eo(d).create({videoModel:T,settings:b,streamInfo:e}),n=(n.initialize(),p[t]=n,Vi(d).create({errHandler:y,adapter:m,dvbFonts:u,manifestModel:v,mediaController:E,videoModel:T,textTracks:n,vttParser:r,vttCustomRenderingParser:i,ttmlParser:a,streamInfo:e,settings:b}));n.initialize(),f[t]=n,o[t]={},o[t].lastEnabledIndex=-1},createTracks:function(e){e=e.id;p[e]&&p[e].createTracks()},getTextSourceBuffer:function(e){e=e.id;if(f&&f[e])return f[e]},getAllTracksAreDisabled:function(){return g},addEmbeddedTrack:function(e,t){e=e.id;f[e]&&f[e].addEmbeddedTrack(t)},enableText:function(e,t){return(0,Te.PS)(t,"boolean"),C()!==t&&(t&&N(e,o[e].lastEnabledIndex),t||(o[e].lastEnabledIndex=D(e),s?N(e,-1):l=!0)),!0},isTextEnabled:C,setTextTrack:N,getCurrentTrackIdx:D,enableForcedTextStreaming:function(e){return(0,Te.PS)(e,"boolean"),n=e,!0},addMediaInfosToBuffer:function(e,t,n){e=e.id;f[e]&&f[e].addMediaInfos(t,n,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){u.reset(),O(),h.off(Ge.Z.TEXT_TRACKS_QUEUE_INITIALIZED,w,t),h.off(Ge.Z.DVB_FONT_DOWNLOAD_FAILED,S,t),h.off(Ge.Z.DVB_FONT_DOWNLOAD_COMPLETE,A,t),b.get().streaming.text.webvtt.customRenderingEnabled&&(h.off(Ge.Z.PLAYBACK_TIME_UPDATED,I,t),h.off(Ge.Z.PLAYBACK_SEEKING,R,t)),Object.keys(f).forEach(function(e){f[e].resetEmbedded(),f[e].reset()})}}),r=no(d).getInstance(),i=io(d).getInstance(),a=ao(d).getInstance(),h=(0,qe.Z)(d).getInstance(),c=(0,je.Z)(d).getInstance().getLogger(t),O(),t}po.__dashjs_factory_name="TextController";var ho=ve.Z.getClassFactory(po);function go(){var e,i,n,r,o,a,s,U,l,u,B,Z,c,d,t,q,f,p,h,g,m,y,v,G,E,_,T,b,S,A,w,I,R,j,H,C,Y,K,N,D="You must first call initialize() and set a source before calling this method",O="You must first call initialize() and set a valid source and view before calling this method",$="You must first call attachView() to set the video element before calling this method",z="You must first call attachSource() with a valid source before calling this method",M="MediaPlayer not initialized!",P=this.context,L=(0,qe.Z)(P).getInstance(),x=(0,Ee.Z)(P).getInstance(),k=(0,je.Z)(P).getInstance({settings:x});function V(){le(null),ae(null),r=null,d&&(d.reset(),d=null),t&&(t.reset(),t=null),g&&g.reset(),x.reset(),f&&(f.reset(),f=null)}function W(){return!!n&&!!C.getElement()}function X(){return(0,Qr.e)()}function Q(){if(s)return b.isPaused();throw O}function J(){if(s)return b.getIsDynamic();throw O}function ee(e){var t,n=E&&E.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,n=I.getCurrentDVRInfo(n);return n?(t=b.getOriginalLiveDelay(),(e=n.range.start+e)>n.range.end-t?n.range.end-t:e):0}function te(e){var t;if(s)return t=F().currentTime,void 0!==e?t=E.getTimeRelativeToStreamId(t,e):b.getIsDynamic()&&(e=E&&E.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,t=null===(e=I.getCurrentDVRInfo(e))||0===t?0:Math.max(0,t-e.range.start)),t;throw O}function ne(){var e,t;if(s)return t=F().duration,b.getIsDynamic()&&(e=E&&E.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,t=(e=I.getCurrentDVRInfo(e))?e.range.end-e.range.start:0),t;throw O}function re(e){(0,Te.PS)(e,"boolean"),U=e}function ie(){g.restoreDefaultUTCTimingSources()}function oe(){return I}function F(){if(C.getElement())return C.getElement();throw $}function ae(e){if(!o)throw M;C.setElement(e),e&&(fe(),t||"function"==typeof(e=dashjs.MetricsReporting)&&(e=e(P).create(),t=e.createMetricsReporting({debug:k,eventBus:L,mediaElement:F(),adapter:p,dashMetrics:I,mediaPlayerModel:h,events:Ge.Z,constants:Be.Z,metricsConstants:Ze.Z})),q||"function"==typeof(e=dashjs.MssHandler)&&(Ke.extend(e.errors),q=e(P).create({eventBus:L,mediaPlayerModel:h,dashMetrics:I,manifestModel:R,playbackController:b,streamController:E,protectionController:d,baseURLController:y,errHandler:m,events:Ge.Z,constants:Be.Z,debug:k,initSegmentType:_e.w.INIT_SEGMENT_TYPE,BASE64:Bi,ISOBoxer:Zi,settings:x})),E)&&E.switchToVideoElement(l),s&&ce(),ge(l)}function se(e){var t;if(a)return(t=E.getActiveStreamInfo())?c.getTracksFor(e,t.id):[];throw D}function le(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!o)throw M;"string"==typeof e&&Y.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),l=t,n=e,(a||s)&&ce(),W()&&ge(l)}function ue(){var e;if(a)return(e=E.getActiveStreamInfo())?E.getStreamById(e.id):null;throw D}function ce(){a=s=!1,p.reset(),E.reset(),T.reset(),w.reset(),b.reset(),S.reset(),A.reset(),u.reset(),c.reset(),N.reset(),d&&(x.get().streaming.protection.keepProtectionMediaKeys?d.stop():(d.reset(),d=null,fe())),_.reset(),j.reset(),H.reset()}function de(){return yr(P).create({debug:k,errHandler:m,dashMetrics:I,mediaPlayerModel:h,requestModifier:(0,be.Z)(P).getInstance(),mssHandler:q,settings:x})}function fe(){var e,t;return d||("function"==typeof(e=dashjs.Protection)?(t=e(P).create(),Ge.Z.extend(e.events),He.Z.extend(e.events,{publicOnly:!0}),Ke.extend(e.errors),v=v||(0,_r.Z)(P).getInstance(),d=t.createProtectionSystem({debug:k,errHandler:m,videoModel:C,customParametersModel:g,capabilities:v,eventBus:L,events:Ge.Z,BASE64:Bi,constants:Be.Z,cmcdModel:j,settings:x})):null)}function pe(){var e,t,n;if(o)return f||("function"==typeof(e=dashjs.OfflineController)?(Ge.Z.extend(e.events),He.Z.extend(e.events,{publicOnly:!0}),Ke.extend(e.errors),t=de(),(n=Gt(P).create()).setConfig({manifestModel:R,adapter:p,manifestLoader:t,errHandler:m,contentSteeringController:A}),f=e(P).create({debug:k,manifestUpdater:n,baseURLController:y,manifestLoader:t,manifestModel:R,mediaPlayerModel:h,abrController:u,playbackController:b,adapter:p,errHandler:m,dashMetrics:I,timelineConverter:Z,segmentBaseController:N,schemeLoaderFactory:B,eventBus:L,events:Ge.Z,errors:Ke,constants:Be.Z,settings:x,dashConstants:ye.Z,urlUtils:(0,Se.Z)(P).getInstance()})):null);throw M}function he(e){var t=E&&E.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,t=I.getCurrentDVRInfo(t);return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ge(e){var t,e=0<arguments.length&&void 0!==e?e:NaN;f&&f.resetRecords(),!a&&n&&(a=!0,i.info("Streaming Initialized"),t=de(),E=E||Xt(P).getInstance(),_=_||ho(P).create({errHandler:m,manifestModel:R,adapter:p,mediaController:c,baseURLController:y,videoModel:C,settings:x}),G.setConfig({capabilities:v,customParametersModel:g,adapter:p,settings:x,manifestModel:R,errHandler:m}),E.setConfig({capabilities:v,capabilitiesFilter:G,manifestLoader:t,manifestModel:R,mediaPlayerModel:h,customParametersModel:g,protectionController:d,textController:_,adapter:p,dashMetrics:I,errHandler:m,timelineConverter:Z,videoModel:C,playbackController:b,serviceDescriptionController:S,contentSteeringController:A,abrController:u,mediaController:c,settings:x,baseURLController:y,uriFragmentModel:Y,segmentBaseController:N}),T.setConfig({settings:x,playbackController:b,streamController:E,videoModel:C,timelineConverter:Z,adapter:p}),b.setConfig({streamController:E,serviceDescriptionController:S,dashMetrics:I,adapter:p,videoModel:C,timelineConverter:Z,settings:x}),w.setConfig({streamController:E,playbackController:b,mediaPlayerModel:h,videoModel:C,settings:x}),u.setConfig({streamController:E,domStorage:K,mediaPlayerModel:h,customParametersModel:g,cmsdModel:H,dashMetrics:I,adapter:p,videoModel:C,settings:x}),j.setConfig({abrController:u,dashMetrics:I,playbackController:b}),H.setConfig({}),u.initialize(),E.initialize(U,r),_.initialize(),T.initialize(),w.initialize(),j.initialize(),H.initialize(),A.initialize(),N.initialize(),"string"==typeof n?E.load(n,e):E.loadWithManifest(n,e)),!s&&W()&&(s=!0,i.info("Playback Initialized"))}return i=k.getLogger(e={initialize:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:NaN;v||(v=(0,_r.Z)(P).getInstance()).setConfig({settings:x}),m=m||Er(P).getInstance(),v.supportsMediaSource()?(o||(o=!0,Z=Ui(P).getInstance(),u||(u=qr(P).getInstance()).setConfig({settings:x}),B=B||pt(P).getInstance(),b=b||Ae(P).getInstance(),c=c||cn(P).getInstance(),E=E||Xt(P).getInstance(),T=T||Jt(P).getInstance(),w=w||tn(P).getInstance(),S=S||on(P).getInstance(),A=A||Ut(P).getInstance(),G=G||Sr(P).getInstance(),p=yi(P).getInstance(),R=Rr(P).getInstance(),j=xe(P).getInstance(),H=at(P).getInstance(),I=ki(P).getInstance({settings:x}),K=Xr(P).getInstance({settings:x}),p.setConfig({constants:Be.Z,cea608parser:me(),errHandler:m,BASE64:Bi}),(y=y||Sn(P).create()).setConfig({adapter:p,contentSteeringController:A}),S.setConfig({adapter:p}),N=N||di(P).getInstance({dashMetrics:I,mediaPlayerModel:h,errHandler:m,baseURLController:y,events:Ge.Z,eventBus:L,debug:k,boxParser:(0,Nt.Z)(P).getInstance(),requestModifier:(0,be.Z)(P).getInstance(),errors:Ke}),c.setConfig({domStorage:K,settings:x,customParametersModel:g}),h.setConfig({playbackController:b,serviceDescriptionController:S}),A.setConfig({adapter:p,errHandler:m,dashMetrics:I,mediaPlayerModel:h,manifestModel:R,serviceDescriptionController:S,eventBus:L,requestModifier:(0,be.Z)(P).getInstance()}),ie(),re(void 0===n||n),pe()),e&&ae(e),t&&le(t,r),i.info("[dash.js "+X()+"] MediaPlayer has been initialized")):m.error(new Ye.Z(Ke.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ke.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(v=e.capabilities),e.capabilitiesFilter&&(G=e.capabilitiesFilter),e.streamController&&(E=e.streamController),e.textController&&(_=e.textController),e.gapController&&(T=e.gapController),e.playbackController&&(b=e.playbackController),e.serviceDescriptionController&&(S=e.serviceDescriptionController),e.contentSteeringController&&(A=e.contentSteeringController),e.catchupController&&(w=e.catchupController),e.mediaPlayerModel&&(h=e.mediaPlayerModel),e.customParametersModel&&(g=e.customParametersModel),e.abrController&&(u=e.abrController),e.schemeLoaderFactory&&(B=e.schemeLoaderFactory),e.mediaController&&(c=e.mediaController),e.settings)&&(x=e.settings)},on:function(e,t,n,r){L.on(e,t,n,r)},off:function(e,t,n){L.off(e,t,n)},extend:function(e,t,n){ve.Z.extend(e,t,n,P)},attachView:ae,attachSource:le,refreshManifest:function(n){if(!o)throw M;if(!W())return n(null,z);var r=this;"function"==typeof n&&L.on(Ge.Z.INTERNAL_MANIFEST_LOADED,function e(t){L.off(Ge.Z.INTERNAL_MANIFEST_LOADED,e,r),t.error?n(null,t.error):n(t.manifest)},r),E.refreshManifest()},isReady:W,preload:function(){if(!C.getElement()&&!a){if(!n)throw z;ge(l)}},play:function(){if(!s)throw O;(!U||Q()&&s)&&b.play(!0)},isPaused:Q,pause:function(){if(!s)throw O;b.pause()},isSeeking:function(){if(s)return b.isSeeking();throw O},isDynamic:J,getLowLatencyModeEnabled:function(){if(s)return b.getLowLatencyModeEnabled();throw O},seek:function(e){if(!s)throw O;if((0,Te.PS)(e,"number"),isNaN(e))throw Be.Z.BAD_ARGUMENT_ERROR;e<0&&(e=0);var e=b.getIsDynamic()?ee(e):e,t=F();!b.getIsDynamic()&&t.duration&&(e=Math.min(t.duration,e)),b.seek(e,!1,!1,!0)},seekToOriginalLive:function(){s&&J()&&b.seekToOriginalLive()},setPlaybackRate:function(e){F().playbackRate=e},getPlaybackRate:function(){return F().playbackRate},setMute:function(e){(0,Te.PS)(e,"boolean"),F().muted=e},isMuted:function(){return F().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw Be.Z.BAD_ARGUMENT_ERROR;F().volume=e},getVolume:function(){return F().volume},time:te,duration:ne,timeAsUTC:function(){if(s)return te()<0?NaN:he(te());throw O},durationAsUTC:function(){if(s)return he(ne());throw O},getActiveStream:ue,getDVRWindowSize:function(){var e=E&&E.hasVideoTrack()?Be.Z.VIDEO:Be.Z.AUDIO,e=I.getCurrentDVRInfo(e);return e?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ee,getAvailableBaseUrls:function(){var e=R.getValue();return e?y.getBaseUrls(e):[]},getAvailableLocations:function(){var e,t=R.getValue();return t?(t=p.getLocation(t),e=A.getSynthesizedLocationElements(t),t.concat(e)):[]},getTargetLiveDelay:function(){if(s)return b.getOriginalLiveDelay();throw O},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),e=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=new Date(1e3*e),i=e.toLocaleDateString(t),e=e.toLocaleTimeString(t,{hour12:n});return r?e+" "+i:e},getVersion:X,getDebug:function(){return k},getBufferLength:function(e){var t=[Be.Z.VIDEO,Be.Z.AUDIO,Be.Z.TEXT];return e?-1!==t.indexOf(e)?I.getCurrentBufferLevel(e)||NaN:(i.warn("getBufferLength requested for invalid type"),NaN):(e=t.map(function(e){return 0<se(e).length?I.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:e},getTTMLRenderingDiv:function(){return C?C.getTTMLRenderingDiv():null},getVideoElement:F,getSource:function(){if(n)return n;throw z},updateSource:function(e){n=e,E.load(n)},getCurrentLiveLatency:function(){if(o)return s?b.getCurrentLiveLatency():NaN;throw M},getTopBitrateInfoFor:function(e){if(a)return u.getTopBitrateInfoFor(e);throw D},setAutoPlay:re,getAutoPlay:function(){return U},getDashMetrics:oe,getQualityFor:function(e){var t;if(a)return e===Be.Z.IMAGE?(t=ue())&&(t=t.getThumbnailController())?t.getCurrentTrackIndex():-1:u.getQualityFor(e);throw D},setQualityFor:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!a)throw D;if(e===Be.Z.IMAGE){var r=ue();if(!r)return;r=r.getThumbnailController();r&&r.setTrackByIndex(t)}u.setPlaybackQuality(e,E.getActiveStreamInfo(),t,{forceReplace:n})},updatePortalSize:function(){u.setElementSize(),u.setWindowResizeEventCalled(!0)},enableText:function(e){var t=E.getActiveStreamInfo();return!(!t||!_)&&_.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!E.getActiveStreamInfo()||!_)&&_.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=E.getActiveStreamInfo();return!(!e||!_)&&_.isTextEnabled(e)},setTextTrack:function(e){if(!s)throw O;var t=E.getActiveStreamInfo();t&&_&&_.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){var t;if(a)return(t=ue())?t.getBitrateListFor(e):[];throw D},getStreamsFromManifest:function(e){if(a)return p.getStreamsInfo(e);throw D},getTracksFor:se,getTracksForTypeFromManifest:function(e,t,n){if(a)return(n=n||p.getStreamsInfo(t,1)[0])?p.getAllMediaInfoForType(n,e,t):[];throw D},getCurrentTrackFor:function(e){var t;if(a)return t=E.getActiveStreamInfo(),c.getCurrentTrackFor(e,t.id);throw D},setInitialMediaSettingsFor:function(e,t){if(!o)throw M;c.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(o)return c.getInitialSettings(e);throw M},setCurrentTrack:function(e){if(!a)throw D;c.setTrack(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(e,t,n){g.addAbrCustomRule(e,t,n)},removeABRCustomRule:function(e){g.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){g.removeAllAbrCustomRule()},getABRCustomRules:function(){return g.getAbrCustomRules()},getAverageThroughput:function(e){var t=u.getThroughputHistory(),n=b.getIsDynamic();return t?t.getAverageThroughput(e,n):0},retrieveManifest:function(e,n){var r=de(),i=this;L.on(Ge.Z.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),L.off(Ge.Z.INTERNAL_MANIFEST_LOADED,e,i),r.reset()},i),Y.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){g.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){g.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){g.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:ie,setXHRWithCredentialsForType:function(e,t){g.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return g.getXHRWithCredentialsForType(e)},getProtectionController:fe,attachProtectionController:function(e){d=e},setProtectionData:function(e){r=e,E&&E.setProtectionData(r)},registerLicenseRequestFilter:function(e){g.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){g.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){g.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){g.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){g.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){g.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){g.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){g.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!C.getElement())throw $;C.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!C.getElement())throw $;C.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=E.getActiveStreamInfo();if(e&&_)return _.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t){if(!(e<0)){var e=b.getIsDynamic()?ee(e):e,n=E.getStreamForTime(e);if(null!==n){n=n.getThumbnailController();if(n)return n.provide(e,t)}}t(null)}},getDashAdapter:function(){return p},getOfflineController:pe,triggerSteeringRequest:function(){if(A)return A.loadSteeringData()},getCurrentSteeringResponseData:function(){if(A)return A.getCurrentSteeringResponseData()},getSettings:function(){return x.get()},updateSettings:function(e){x.update(e)},resetSettings:function(){x.reset()},reset:V,destroy:function(){V(),ve.Z.deleteSingletonInstances(P)}}),U=!(a=s=o=!1),l=NaN,N=p=r=f=d=null,Ge.Z.extend(He.Z),h=Nr(P).getInstance(),g=(0,ut.Z)(P).getInstance(),C=Hr(P).getInstance(),Y=wr(P).getInstance(),e}go.__dashjs_factory_name="MediaPlayer";var e=ve.Z.getClassFactory(go),mo=(e.events=He.Z,e.errors=Ke,ve.Z.updateClassFactory(go.__dashjs_factory_name,e),e)},8825:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=l(n),t=(e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).AST_IN_FUTURE="astInFuture",e.BASE_URLS_UPDATED="baseUrlsUpdated",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",e.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",e.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADING_STARTED="manifestLoadingStarted",e.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CUE_ENTER="cueEnter",e.CUE_EXIT="cueExit",e.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e.INBAND_PRFT="inbandPrft",e.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",e.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",e;throw new TypeError("Cannot call a class as a function")}return o}(n(8342).Z));t.Z=n},3393:function(e,t){"use strict";var n=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}for(var t=e.prototype,n=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}());t.Z=n},3860:function(e,t){"use strict";var n=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}for(var t=e.prototype,n=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}());t.Z=n},8080:function(k,e,t){"use strict";t.d(e,{default:function(){return Y}});function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00";var p=n,h=t(1180);function r(e){var t,r,n=(e=e||{}).eventBus,i=e.dashMetrics,o=e.metricsConstants,a=e.events;function s(e){var t=new p;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function l(e){e.error||(r=e.manifest)}function u(e){s({errorcode:p.BASE_URL_CHANGED,servicelocation:e.entry})}function c(){s({errorcode:p.BECAME_REPORTER})}function d(e){e.metric===o.HTTP_REQUEST&&(0===(e=e.value).responsecode||null==e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&s({errorcode:e.responsecode||p.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function f(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}return t={initialize:function(){n.on(a.MANIFEST_UPDATED,l,t),n.on(a.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,u,t),n.on(a.METRIC_ADDED,d,t),n.on(a.METRIC_UPDATED,d,t),n.on(a.PLAYBACK_ERROR,f,t),n.on(h.Z.BECAME_REPORTING_PLAYER,c,t)},reset:function(){n.off(a.MANIFEST_UPDATED,l,t),n.off(a.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,u,t),n.off(a.METRIC_ADDED,d,t),n.off(a.METRIC_UPDATED,d,t),n.off(a.PLAYBACK_ERROR,f,t),n.off(h.Z.BECAME_REPORTING_PLAYER,c,t)}}}r.__dashjs_factory_name="DVBErrorsTranslator";var i=dashjs.FactoryMaker.getSingletonFactory(r),l=t(2295);function o(e){var o=!1,t=this.context,a=(e=e||{}).mediaElement,e={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,e=t+e.duration;s.add(t,e)}),o=!!e[0]._useWallClockTime)},reset:function(){s.clear()},isEnabled:function(){var e=s.length;if(!e)return!0;for(var t=o?(new Date).getTime()/1e3:a.currentTime,n=0;n<e;n+=1){var r=s.start(n),i=s.end(n);if(r<=t&&t<i)return!0}return!1}},s=(0,l.Z)(t).create();return e}o.__dashjs_factory_name="RangeController";var s=dashjs.FactoryMaker.getClassFactory(o);function a(){return{serialise:function n(e){var t,r,i=[],o=[];for(t in e)if(e.hasOwnProperty(t)&&0!==t.indexOf("_")){if(null==(r=e[t])&&(r=""),Array.isArray(r)){if(!r.length)continue;o=[],r.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);o.push(t?e:n(e))}),r=o.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(t+"="+r)}return i.join("&")}}}a.__dashjs_factory_name="MetricSerialiser";var f=dashjs.FactoryMaker.getSingletonFactory(a);function u(){var r,i,e,o=window.crypto||window.msCrypto,t=Uint32Array,a=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1;function s(){o&&(r=r||new t(10),o.getRandomValues(r),i=0)}return e={random:function(e,t){var n;return e=e||0,t=t||1,o?(i===r.length&&s(),n=r[i]/a,i+=1):n=Math.random(),n*(t-e)+e}},s(),e}u.__dashjs_factory_name="RNG";var g=dashjs.FactoryMaker.getSingletonFactory(u),m=t(5717);function c(e){var a,s,n,r,l,u,i,t=this.context,c=[],d=(e=e||{}).metricsConstants;function o(){l=r=!1,i=u=null}return e={report:function(o,e){Array.isArray(e)||(e=[e]),l&&i.isEnabled()&&e.forEach(function(e){var e=a.serialise(e),t=(o!==d.DVB_ERRORS&&(e="metricname=".concat(o,"&").concat(e)),e="".concat(u,"?").concat(e)),n=function(){l=!1};function r(){var e=c.indexOf(i);-1===e||(c.splice(e,1),200<=i.status&&i.status<300)||!n||n()}var i=new XMLHttpRequest;i.withCredentials=s.getXHRWithCredentialsForType(d.HTTP_REQUEST_DVB_REPORTING_TYPE),c.push(i);try{i.open("GET",t),i.onloadend=r,i.onerror=r,i.send()}catch(t){i.onerror()}})},initialize:function(e,t){if(i=t,!(u=e.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");r||((t=e.dvbProbability)&&(1e3===t||t/1e3>=n.random())&&(l=!0),r=!0)},reset:function(){o()}},a=f(t).getInstance(),n=g(t).getInstance(),s=(0,m.Z)(t).getInstance(),o(),e}c.__dashjs_factory_name="DVBReporting";var d=dashjs.FactoryMaker.getClassFactory(c);function y(e){var r={"urn:dvb:dash:reporting:2014":d},i=this.context,o=(e=e||{}).debug?e.debug.getLogger(void 0):{},a=e.metricsConstants,s=e.mediaPlayerModel||{};return{create:function(e,t){var n;try{(n=r[e.schemeIdUri](i).create({metricsConstants:a,mediaPlayerModel:s})).initialize(e,t)}catch(t){n=null,o.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return n},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}y.__dashjs_factory_name="ReportingFactory";var v=dashjs.FactoryMaker.getSingletonFactory(y);function E(e){var r=[],n=v(this.context).getInstance(e);return{initialize:function(e,t){e.some(function(e){e=n.create(e,t);if(e)return r.push(e),!0})},reset:function(){r.forEach(function(e){return e.reset()}),r=[]},report:function(t,n){r.forEach(function(e){return e.report(t,n)})}}}E.__dashjs_factory_name="ReportingController";var F=dashjs.FactoryMaker.getClassFactory(E);function _(){return{reconstructFullMetricName:function(e,t,n){return t&&(e+="("+t,n&&n.length&&(e+=","+n),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}_.__dashjs_factory_name="HandlerHelpers";var T=dashjs.FactoryMaker.getSingletonFactory(_);function b(e){e=e||{};var r,i,o,a,t,n=this.context,s=T(n).getInstance(),l=[],u=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map(function(e){return l[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){}}();e&&t!==e.t&&(t=e.t,r.report(o,e))}return{initialize:function(e,t,n){t&&(i=s.validateN(n),r=t,o=s.reconstructFullMetricName(e,n),a=setInterval(c,i))},reset:function(){clearInterval(a),i=0,t=r=a=null},handleNewMetric:function(e,t,n){e===u.BUFFER_LEVEL&&(l[n]=t)}}}b.__dashjs_factory_name="BufferLevelHandler";var U=dashjs.FactoryMaker.getClassFactory(b),B=dashjs.FactoryMaker.getClassFactory(function(e){var n,r=(e=e||{}).eventBus,i=e.metricsConstants;function o(){r.off(h.Z.METRICS_INITIALISATION_COMPLETE,o,this),r.trigger(h.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(n=t,r.on(h.Z.METRICS_INITIALISATION_COMPLETE,o,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}}});function S(e){e=e||{};var i,o,a,s,l,n=[],u=T(this.context).getInstance(),r=e.metricsConstants;function c(){var e=n;e.length&&i&&i.report(s,e),n=[]}return{initialize:function(e,t,n,r){t&&(o=u.validateN(n),i=t,r&&r.length&&(a=r),s=u.reconstructFullMetricName(e,n,r),l=setInterval(c,o))},reset:function(){clearInterval(l),n=[],i=a=o=l=null},handleNewMetric:function(e,t){e!==r.HTTP_REQUEST||a&&a!==t.type||n.push(t)}}}S.__dashjs_factory_name="HttpListHandler";var Z=dashjs.FactoryMaker.getClassFactory(S);function A(){var n,r;return{initialize:function(e,t){n=e,r=t},reset:function(){r=null,n=void 0},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t)}}}A.__dashjs_factory_name="GenericMetricHandler";var w=dashjs.FactoryMaker.getClassFactory(A);function I(r){var i=(r=r||{}).debug?r.debug.getLogger(void 0):{},o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,a=this.context,s={BufferLevel:U,DVBErrors:B,HttpList:Z,PlayList:w,RepSwitchList:w,TcpList:w};return{create:function(t,e){var n,t=t.match(o);if(t){try{(n=s[t[1]](a).create({eventBus:r.eventBus,metricsConstants:r.metricsConstants})).initialize(t[1],e,t[3],t[5])}catch(e){n=null,i.error("MetricsHandlerFactory: Could not create handler for type ".concat(t[1]," with args ").concat(t[3],", ").concat(t[5]," (").concat(e.message,")"))}return n}},register:function(e,t){s[e]=t},unregister:function(e){delete s[e]}}}I.__dashjs_factory_name="MetricsHandlerFactory";var R=dashjs.FactoryMaker.getSingletonFactory(I);function C(e){var t,o=[],n=this.context,r=(e=e||{}).eventBus,a=e.events,s=R(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function l(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,i){e.split(",").forEach(function(e,t,n){var r;-1!==e.indexOf("(")&&-1===e.indexOf(")")&&(r=n[t+1])&&-1===r.indexOf("(")&&-1!==r.indexOf(")")&&(e+=","+r,delete n[t+1]),(r=s.create(e,i))&&o.push(r)}),r.on(a.METRIC_ADDED,l,t),r.on(a.METRIC_UPDATED,l,t)},reset:function(){r.off(a.METRIC_ADDED,l,t),r.off(a.METRIC_UPDATED,l,t),o.forEach(function(e){return e.reset()}),o=[]}}}C.__dashjs_factory_name="MetricsHandlersController";var q=dashjs.FactoryMaker.getClassFactory(C);function N(t){t=t||{};var n,r,i,o=this.context;function a(){n&&n.reset(),r&&r.reset(),i&&i.reset()}return{initialize:function(e){try{(i=s(o).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=F(o).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel})).initialize(e.Reporting,i),(n=q(o).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r)}catch(e){throw a(),e}},reset:a}}N.__dashjs_factory_name="MetricsController";function D(){if(!(this instanceof D))throw new TypeError("Cannot call a class as a function");this.metrics="",this.Range=[],this.Reporting=[]}function O(){if(!(this instanceof O))throw new TypeError("Cannot call a class as a function");this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}function M(){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}var G=dashjs.FactoryMaker.getClassFactory(N);function P(e){var l=(e=e||{}).adapter,u=e.constants;return{getMetrics:function(s){var t=[];return s&&s.Metrics_asArray&&s.Metrics_asArray.forEach(function(e){var o=new D,a=l.getIsDynamic(s);e.hasOwnProperty("metrics")&&(o.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,n,r,i=new O;i.starttime=(t=s,n=e,r=0,a?r=l.getAvailabilityStartTime(t)/1e3:(t=l.getRegularPeriods(t)).length&&(r=t[0].start),t=r,n&&n.hasOwnProperty(u.START_TIME)&&(t+=n.starttime),t),e.hasOwnProperty("duration")?i.duration=e.duration:i.duration=l.getDuration(s),i._useWallClockTime=a,o.Range.push(i)}),e.Reporting_asArray)&&(e.Reporting_asArray.forEach(function(e){var t=new M;e.hasOwnProperty(u.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(u.DVB_REPORTING_URL)&&(t.dvbReportingUrl=e[u.DVB_REPORTING_URL]),e.hasOwnProperty(u.DVB_PROBABILITY)&&(t.dvbProbability=e[u.DVB_PROBABILITY]),o.Reporting.push(t))}),t.push(o))}),t}}}P.__dashjs_factory_name="ManifestParsing";var j=dashjs.FactoryMaker.getSingletonFactory(P);function L(i){i=i||{};var e,o={},a=this.context,t=i.eventBus,n=i.events;function r(e){var r;e.error||(r=Object.keys(o),j(a).getInstance({adapter:i.adapter,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(o.hasOwnProperty(t))r.splice(t,1);else try{var n=G(a).create(i);n.initialize(e),o[t]=n}catch(e){}}),r.forEach(function(e){o[e].reset(),delete o[e]}),t.trigger(h.Z.METRICS_INITIALISATION_COMPLETE))}function s(){Object.keys(o).forEach(function(e){o[e].reset()}),o={}}return e={reset:function(){t.off(n.MANIFEST_UPDATED,r,e),t.off(n.STREAM_TEARDOWN_COMPLETE,s,e)}},t.on(n.MANIFEST_UPDATED,r,e),t.on(n.STREAM_TEARDOWN_COMPLETE,s,e),e}L.__dashjs_factory_name="MetricsCollectionController";var H=dashjs.FactoryMaker.getClassFactory(L);function x(){var t=this.context;return{createMetricsReporting:function(e){return i(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialize(),H(t).create(e)},getReportingFactory:function(){return v(t).getInstance()},getMetricsHandlerFactory:function(){return R(t).getInstance()}}}x.__dashjs_factory_name="MetricsReporting";var e=dashjs.FactoryMaker.getClassFactory(x),Y=(e.events=h.Z,dashjs.FactoryMaker.updateClassFactory(x.__dashjs_factory_name,e),e)},1180:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=l(n),t=(e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e;throw new TypeError("Cannot call a class as a function")}return o}(n(8342).Z));t.Z=n},5717:function(e,t,n){"use strict";var h=n(2610),r=n(5448),g=n(1264),m=n(3106),y=n(1767),v=n(3393);function i(){var i,r,t,n,o,a,s,e=this.context,l=(0,g.Z)(e).getInstance();function u(){t=[],n=[],o=[],s=[],a=null,i=[]}function c(e,n){var r=-1;e.some(function(e,t){if(e===n)return r=t,!0}),r<0||e.splice(r,1)}function d(e){for(var t=0;t<s.length;t++)if(s[t].rulename===e)return t;return-1}function f(e,t){p(e,t);var n=new h.Z;n.schemeIdUri=e,n.value=t,i.push(n)}function p(n,r){(0,m.PS)(n,"string"),(0,m.PS)(r,"string"),i.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&i.splice(t,1)})}return r={default:!(e={getCustomInitialTrackSelectionFunction:function(){return a},setCustomInitialTrackSelectionFunction:function(e){a=e},resetCustomInitialTrackSelectionFunction:function(){a=null},getLicenseResponseFilters:function(){return n},getLicenseRequestFilters:function(){return t},getCustomCapabilitiesFilters:function(){return o},registerCustomCapabilitiesFilter:function(e){o.push(e)},registerLicenseResponseFilter:function(e){n.push(e)},registerLicenseRequestFilter:function(e){t.push(e)},unregisterCustomCapabilitiesFilter:function(e){c(o,e)},unregisterLicenseResponseFilter:function(e){c(n,e)},unregisterLicenseRequestFilter:function(e){c(t,e)},addAbrCustomRule:function(e,t,n){if("string"!=typeof e||e!==y.Z.ABANDON_FRAGMENT_RULES&&e!==y.Z.QUALITY_SWITCH_RULES||"string"!=typeof t)throw v.Z.BAD_ARGUMENT_ERROR;var r=d(t);-1===r?s.push({type:e,rulename:t,rule:n}):(s[r].type=e,s[r].rule=n)},removeAllAbrCustomRule:function(){s=[]},removeAbrCustomRule:function(e){e?-1!==(e=d(e))&&s.splice(e,1):s=[]},getAbrCustomRules:function(){return s},addUTCTimingSource:f,removeUTCTimingSource:p,getUTCTimingSources:function(){return i},clearDefaultUTCTimingSources:function(){i=[]},restoreDefaultUTCTimingSources:function(){var e=l.get().streaming.utcSynchronization.defaultTimingSource;f(e.scheme,e.value)},setXHRWithCredentialsForType:function t(e,n){e?r[e]=!!n:Object.keys(r).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){e=r[e];return void 0===e?r.default:e},setConfig:function(){},reset:function(){u()}})},u(),e}i.__dashjs_factory_name="CustomParametersModel",t.Z=r.Z.getSingletonFactory(i)},9032:function(e,t,n){"use strict";var r=n(5448),i=n(7473);function o(e){var a=(e=e||{}).requestModifier;function t(e){var t=new Date,n=e.request,r=new XMLHttpRequest;if(r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),a&&a.modifyRequestHeader&&(r=a.modifyRequestHeader(r,{url:e.url})),e.headers)for(var i in e.headers){var o=e.headers[i];o&&r.setRequestHeader(i,o)}r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.ontimeout=e.ontimeout,r.timeout=e.timeout,r.send(),e.response=r}return{load:function(e){a&&a.modifyRequest?(0,i.k)(e,a).then(function(){return t(e)}):t(e)},abort:function(e){e=e.response;e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}o.__dashjs_factory_name="XHRLoader";n=r.Z.getClassFactory(o);t.Z=n},1737:function(R,e,t){"use strict";function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.d(e,{default:function(){return pe}});function b(e,t){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.contentType=e,this.robustness=t}function S(e,t,n,r,i){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=i}var f={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},G=(C(n,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),e.slice(t+=4)}},{key:"getPSSHForKeySystem",value:function(e,t){t=n.parsePSSHList(t);return e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,o,a=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r)&&(r+=4,0===(o=t.getUint8(r))||1===o)){r++,r+=3;for(var a="",l=void 0,u=void 0,l=0;l<4;l++)a+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=4,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,a+="-",l=0;l<6;l++)a+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;r=r+6+4,n[a=a.toLowerCase()]=t.buffer.slice(s,i)}r=i}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var n=0,r=null;n<e.length&&!r;){var i=e[n];if(i&&i.contentProtection&&0<i.contentProtection.length){var o=i.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===t});if(o&&0<o.length)for(var a=0;a<o.length&&!r;){for(var s=o[a],l=0;l<f.attributes.length&&!r;){for(var u=0,c=f.attributes[l];u<f.prefixes.length&&!r;){var d=f.prefixes[u];s[c]&&s[c].__prefix&&s[c].__prefix===d&&s[c].__text&&(r=s[c].__text),u+=1}l+=1}a+=1}}n+=1}return r}catch(e){return null}}}]),n);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n,r,i,o,a,s){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");this.url=e,this.method=t,this.responseType=n,this.headers=r,this.withCredentials=i,this.messageType=o,this.sessionId=a,this.data=s}function H(e,t,n){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");this.url=e,this.headers=t,this.data=n}var Y=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=l(n),t=(e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e;throw new TypeError("Cannot call a class as a function")}return o}(t(2230).Z)),K=t(5459),$=t(7855),z=t(703),V=t(3393),e=t(5448);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){var t,w,i,I,l,o,u,R,c,C,N,D=(e=e||{}).protectionKeyController,O=e.protectionModel,M=e.eventBus,P=e.events,_=e.debug,T=e.BASE64,d=e.constants,a=[],L=e.cmcdModel,x=e.settings,k=e.customParametersModel;function n(){if(!(M&&M.hasOwnProperty("on")&&D&&D.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function s(e,t){if(R||c)R&&f();else{var n=e,r=t;if(!c){c=!0;var i,o=[];n=n.sort(function(e,t){return(l&&l[e.ks.systemString]&&0<=l[e.ks.systemString].priority?l[e.ks.systemString].priority:n.length)-(l&&l[t.ks.systemString]&&0<=l[t.ks.systemString].priority?l[t.ks.systemString].priority:n.length)});for(var a=0;a<n.length;a++){var s=function(e){var t=e.protData,n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:u,o=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:u,e=e.sessionType,a=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===e?"optional":"required";return I.forEach(function(e){e.type===d.AUDIO?n.push(new b(e.codec,i)):e.type===d.VIDEO&&r.push(new b(e.codec,o))}),new S(n,r,a,t,[e])}(n[a]);o.push({ks:n[a].ks,configs:[s],protData:n[a].protData})}O.requestKeySystemAccess(o).then(function(e){e=(i=e.data).mksa&&i.mksa.selectedSystemString?i.mksa.selectedSystemString:i.keySystem.systemString;return w.info("DRM: KeySystem Access Granted for system string ("+e+")!  Selecting key system..."),O.selectKeySystem(i)}).then(function(e){R=e,c=!1,O&&(M.trigger(P.KEY_SYSTEM_SELECTED,{data:i}),(e=F(R))&&e.serverCertificate&&0<e.serverCertificate.length&&O.setServerCertificate(T.decodeArray(e.serverCertificate).buffer),f())}).catch(function(e){R=null,c=!1,r||M.trigger(P.KEY_SYSTEM_SELECTED,{data:null,error:new K.Z(Y.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,Y.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})})}}}function f(){for(var e,t=0;t<i.length;t++)for(e=0;e<i[t].length;e++)if(R===i[t][e].ks){n=r=void 0;var n,r=i[t][e];D.isClearKey(R)&&r.protData&&r.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(r.protData.clearkeys).length&&(n={kids:Object.keys(r.protData.clearkeys)},r.initData=(new TextEncoder).encode(JSON.stringify(n))),r.sessionId?p(r):null!==r.initData&&h(r);break}i=[]}function p(e){n(),O.loadKeySession(e)}function h(e){var t=G.getPSSHForKeySystem(R,e?e.initData:null);if(t){if(!function(e){if(e)try{for(var t=O.getSessions(),n=0;n<t.length;n++)if(t[n].getKeyId()===e)return 1}catch(e){}}(e.keyId)&&!g(t))try{e.initData=t,O.createKeySession(e)}catch(e){M.trigger(P.KEY_SESSION_CREATED,{data:null,error:new K.Z(Y.KEY_SESSION_CREATED_ERROR_CODE,Y.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?O.createKeySession(e):M.trigger(P.KEY_SESSION_CREATED,{data:null,error:new K.Z(Y.KEY_SESSION_CREATED_ERROR_CODE,Y.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(R?R.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function F(e){if(e){e=e.systemString;if(l)return e in l?l[e]:null}return null}function g(e){if(e)try{for(var t=O.getAllInitData(),n=0;n<t.length;n++)if(D.initDataEquals(e,t[n]))return w.debug("DRM: Ignoring initData because we have already seen it!"),1}catch(e){}}function r(e){n(),e?(O.setMediaElement(e),M.on(P.NEED_KEY,E,t)):null===e&&(O.setMediaElement(e),M.off(P.NEED_KEY,E,t))}function m(e){e.error?M.trigger(P.KEY_STATUSES_CHANGED,{data:null,error:e.error}):w.debug("DRM: key status = "+e.status)}function y(e){w.debug("DRM: onKeyMessage");var r,t,n,i,o,a,s,l,u,c,d,f,p,h,g,m,y,v,E=e.data,_=(M.trigger(P.KEY_MESSAGE,{data:E}),E.messageType||"license-request"),T=E.message,b=E.sessionToken,S=F(R),A=D.getLicenseServerModelInstance(R,S,_),_={sessionToken:b,messageType:_};if(T&&0!==T.byteLength)if(A){if(D.isClearKey(R)){var T=D.processClearKeyLicenseRequest(R,S,T);if(T&&T.keyPairs&&0<T.keyPairs.length)return w.debug("DRM: ClearKey license request handled by application!"),U(_),void O.updateKeySession(b,T)}r=A,T=S,g=(A=E).sessionToken,m=A.messageType||"license-request",y={sessionToken:g,messageType:m},v=R?R.systemString:null,S=T,E=m,t=g,u=r,c=null,f=(l=A).message,S&&S.serverURL?"string"==typeof(i=S.serverURL)&&""!==i?c=i:"object"===W(i)&&i.hasOwnProperty(E)&&(c=i[E]):S&&S.laURL&&""!==S.laURL?c=S.laURL:(c=G.getLicenseServerUrlFromMediaInfo(I,R.schemeIdURI))||D.isClearKey(R)||(i=G.getPSSHData(t.initData),c=(c=R.getLicenseServerURLFromInitData(i))||l.laURL),(S=u.getServerURLFromMessage(c,f,E))?(n=!(t={}),T&&B(t,T.httpRequestHeaders),i=A.message,B(t,R.getRequestHeadersFromMessage(i)),Object.keys(t).forEach(function(e){"authorization"===e.toLowerCase()&&(n=!0)}),T&&"boolean"==typeof T.withCredentials&&(n=T.withCredentials),o=function(t){var e,n;O&&(200<=t.status&&t.status<=299?(e=z.Z.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),n=new H(t.responseURL,e,t.response),q(k.getLicenseResponseFilters(),n).then(function(){var e=r.getLicenseMessage(n.data,v,m);null!==e?(U(y),O.updateKeySession(g,e)):Z(t,y,v,m,r)})):Z(t,y,v,m,r))},a=function(e){U(y,new K.Z(Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+v+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},s=function(e){U(y,new K.Z(Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+v+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},l=R.getLicenseRequestFromMessage(i),u=r.getHTTPMethod(m),c=r.getResponseType(v,m),d=T&&!isNaN(T.httpTimeout)?T.httpTimeout:8e3,f=g.getSessionId()||null,p=new j(S,u,c,t,n,m,f,l),h=isNaN(x.get().streaming.retryAttempts[$.w.LICENSE])?3:x.get().streaming.retryAttempts[$.w.LICENSE],q(k.getLicenseRequestFilters(),p).then(function(){!function t(n,r,i,o,a,s){var e=new XMLHttpRequest;{var l;x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===V.Z.CMCD_MODE_QUERY&&(l=L.getQueryParameter({url:n.url,type:$.w.LICENSE}))&&(n.url=z.Z.addAditionalQueryParameterToUrl(n.url,[l]))}for(var u in e.open(n.method,n.url,!0),e.responseType=n.responseType,e.withCredentials=n.withCredentials,0<i&&(e.timeout=i),n.headers)e.setRequestHeader(u,n.headers[u]);if(x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===V.Z.CMCD_MODE_HEADER){var c=L.getHeaderParameters({url:n.url,type:$.w.LICENSE});if(c)for(var d in c){var f=c[d];f&&e.setRequestHeader(d,f)}}var p=function(){r--;var e=isNaN(x.get().streaming.retryIntervals[$.w.LICENSE])?1e3:x.get().streaming.retryIntervals[$.w.LICENSE];N=setTimeout(function(){t(n,r,i,o,a,s)},e)};e.onload=function(){C=null,200<=this.status&&this.status<=299||r<=0?o(this):(w.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+r),p())},e.ontimeout=e.onerror=function(){C=null,r<=0?s(this):(w.warn("License request network request failed . Retrying it... Pending retries: "+r),p())},e.onabort=function(){a(this)},M.trigger(P.LICENSE_REQUEST_SENDING,{url:n.url,headers:n.headers,payload:n.data,sessionId:n.sessionId}),C=e,e.send(n.data)}(p,h,d,o,a,s)})):U(y,new K.Z(Y.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else w.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+b.getSessionId()),U(_);else U(_,new K.Z(Y.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function U(e,t){M.trigger(P.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function v(){C&&(C.onloadend=C.onerror=C.onprogress=void 0,C.abort(),C=null),N&&(clearTimeout(N),N=null)}function B(e,t){if(t)for(var n in t)e[n]=t[n]}function Z(e,t,n,r,i){var o="NONE",a=null;e.response&&(o=i.getErrorResponse(e.response,n,r),a={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),U(t,new K.Z(Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+o,a))}function q(e,n){return e?e.reduce(function(e,t){return e.then(function(){return t(n)})},Promise.resolve()):Promise.resolve()}function E(e,t){if(!x.get().streaming.protection.ignoreEmeEncryptedEvent)if(w.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)w.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);else if(0===I.length&&(w.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))a.push(setTimeout(function(){E(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),R){var r=G.getPSSHForKeySystem(R,n);if(r&&g(r))return}w.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));r=D.getSupportedKeySystemsFromSegmentPssh(n,l,o);0===r.length?w.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!"):(n=r,i.push(n),s(n,!1))}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");n(),I.push(e)},clearMediaInfoArray:function(){I=[]},handleKeySystemFromManifest:function(){var t;I&&0!==I.length&&(t=[],I.forEach(function(e){e=D.getSupportedKeySystemsFromContentProtection(e.contentProtection,l,o);0<e.length&&(0===t.length&&(t=e),i.push(e))}),t)&&0<t.length&&s(t,!0)},createKeySession:h,loadKeySession:p,removeKeySession:function(e){n(),O.removeKeySession(e)},closeKeySession:function(e){n(),O.closeKeySession(e)},setServerCertificate:function(e){n(),O.setServerCertificate(e)},setMediaElement:r,setSessionType:function(e){o=e},setRobustnessLevel:function(e){u=e},setProtectionData:function(e){l=e,D.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return n(),D.getSupportedKeySystemsFromContentProtection(e,l,o)},getKeySystems:function(){return D?D.getKeySystems():[]},setKeySystems:function(e){D&&D.setKeySystems(e)},stop:function(){v(),O&&O.stop()},reset:function(){M.off(P.INTERNAL_KEY_MESSAGE,y,t),M.off(P.INTERNAL_KEY_STATUS_CHANGED,m,t),n(),v(),r(null),R=null,c=!1,O&&(O.reset(),O=null),a.forEach(function(e){return clearTimeout(e)}),a=[],I=[],i=[]}},w=_.getLogger(t),i=[],I=[],o="temporary",u="",N=C=null,M.on(P.INTERNAL_KEY_MESSAGE,y,t),M.on(P.INTERNAL_KEY_STATUS_CHANGED,m,t),t}r.__dashjs_factory_name="ProtectionController";function u(e,t){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.keyID=e,this.key=t}var N=e.Z.getClassFactory(r);var c=function(){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}for(var e=n.prototype,t=[{key:"toJWK",value:function(){for(var e=this.keyPairs.length,t={keys:[]},n=0;n<e;n++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[n].keyID,k:this.keyPairs[n].key};t.keys.push(r)}this.type&&(t.type=this.type);var i=JSON.stringify(t),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(n=0;n<o;n++)s[n]=i.charCodeAt(n);return a}}],r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return n}();var y=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}for(var t=e.prototype,n=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return e}()),D="e2719d58-a985-b3c9-781a-b030af78d30e",O=y.CLEARKEY_KEYSTEM_STRING;function i(e){var i=(e=e||{}).BASE64;return{uuid:D,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:O,getInitData:function(e,t){try{var n,r=G.parseInitDataFromContentProtection(e,i);return!r&&t&&(n={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(t["cenc:default_KID"])]},r=(new TextEncoder).encode(JSON.stringify(n))),r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<r.kids.length;o++){var a=r.kids[o],s=e.clearkeys&&e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+a+") is not known!");i.push(new u(a,s))}n=new c(i)}return n}}}i.__dashjs_factory_name="KeySystemClearKey";var M=dashjs.FactoryMaker.getSingletonFactory(i),P="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",L=y.CLEARKEY_KEYSTEM_STRING;function o(e){var t=e.BASE64,l=e.debug.getLogger(void 0);return{uuid:P,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:L,getInitData:function(e){return G.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<r.kids.length;o++){var a=r.kids[o],s=e.clearkeys&&e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+a+") is not known!");i.push(new u(a,s))}n=new c(i),l.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}o.__dashjs_factory_name="KeySystemW3CClearKey";var x=dashjs.FactoryMaker.getSingletonFactory(o),k="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",F=y.WIDEVINE_KEYSTEM_STRING;function d(e){var t=(e=e||{}).BASE64;return{uuid:k,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:F,getInitData:function(e){return G.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}d.__dashjs_factory_name="KeySystemWidevine";var U=dashjs.FactoryMaker.getSingletonFactory(d),B="9a04f079-9840-4286-ab92-e65be0885f95",Z=y.PLAYREADY_KEYSTEM_STRING;function p(e){var a="utf-16",l=(e=e||{}).BASE64,s=e.settings;function u(){if(!l||!l.hasOwnProperty("decodeArray")||!l.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:B,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:Z,getInitData:function(e){var t,n,r,i=new Uint8Array([112,115,115,104,0,0,0,0]),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),a=0,s=null;if(u(),!e)return null;if("pssh"in e)return G.parseInitDataFromContentProtection(e,l);if("pro"in e)s=l.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=l.decodeArray(e.prheader.__text)}return e=s.length,t=4+i.length+o.length+4+e,r=new ArrayBuffer(t),n=new Uint8Array(r),(r=new DataView(r)).setUint32(0,t),a+=4,n.set(i,4),a+=i.length,n.set(o,a),a+=o.length,r.setUint32(a,e),n.set(s,a+=4),n.buffer},getRequestHeadersFromMessage:function(e){var t={},n=new DOMParser;if(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===a&&e&&e.byteLength%2==1)t["Content-Type"]="text/xml; charset=utf-8";else{for(var e=new("utf-16"===a?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),r=(n=n.parseFromString(e,"application/xml")).getElementsByTagName("name"),i=n.getElementsByTagName("value"),o=0;o<r.length;o++)t[r[o].childNodes[0].nodeValue]=i[o].childNodes[0].nodeValue;t.hasOwnProperty("Content")&&(t["Content-Type"]=t.Content,delete t.Content),t.hasOwnProperty("Content-Type")||(t["Content-Type"]="text/xml; charset=utf-8")}return t},getLicenseRequestFromMessage:function(e){var t,n=null,r=new DOMParser;return!(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===a&&e&&e.byteLength%2==1)&&(t=new("utf-16"===a?Uint16Array:Uint8Array)(e),u(),t=String.fromCharCode.apply(null,t),(r=r.parseFromString(t,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0])?(t=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)?l.decode(t):n:e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,o=0;o<n;o++){var a=t.getUint16(r,!0),s=(r+=2,t.getUint16(r,!0));if(r+=2,1===a){a=e.slice(r,r+s),a=String.fromCharCode.apply(null,new Uint16Array(a)),a=i.parseFromString(a,"application/xml");if(a.getElementsByTagName("LA_URL")[0]){var l=a.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(l)return l}if(a.getElementsByTagName("LUI_URL")[0]){l=a.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(l)return l}}else r+=s}return null},getCDMData:function(e){var t,n,r,i;if(u(),!e)return null;for(t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=l.encode(t),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),r=[],i=0;i<n.length;++i)r.push(n.charCodeAt(i)),r.push(0);return new Uint8Array(r).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');a=e}}}p.__dashjs_factory_name="KeySystemPlayReady";var q=dashjs.FactoryMaker.getSingletonFactory(p);function h(e){var n=(e=e||{}).BASE64,r={};return r[y.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[y.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){if(n&&n.hasOwnProperty("decodeArray"))return r[t].getLicenseMessage(e);throw new Error("Missing config parameter(s)")},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}h.__dashjs_factory_name="DRMToday";var X=dashjs.FactoryMaker.getSingletonFactory(h);function g(){var a="http://schemas.xmlsoap.org/soap/envelope/";function s(e){e=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=s(e),t=(new window.DOMParser).parseFromString(t,"text/xml"),t=t?t.getElementsByTagNameNS(a,"Envelope")[0]:null,t=t?t.getElementsByTagNameNS(a,"Body")[0]:null;if(t&&t.getElementsByTagNameNS(a,"Fault")[0])return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="";if(window.DOMParser){var e=s(e),i=(new window.DOMParser).parseFromString(e,"text/xml"),i=i?i.getElementsByTagNameNS(a,"Envelope")[0]:null,i=i?i.getElementsByTagNameNS(a,"Body")[0]:null,i=i?i.getElementsByTagNameNS(a,"Fault")[0]:null,o=i?i.getElementsByTagName("detail")[0]:null,o=o?o.getElementsByTagName("Exception")[0]:null;if(null===i)return e;t=(e=i.getElementsByTagName("faultstring")[0].firstChild)?e.nodeValue:null,null!==o&&(n=(e=o.getElementsByTagName("StatusCode")[0])?e.firstChild.nodeValue:null,i=(r=(e=o.getElementsByTagName("Message")[0])?e.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,o=r?r.indexOf("]"):-1,r=r?r.substring(i,o):"")}return e="code: ".concat(n,", name: ").concat(t),r&&(e+=", message: ".concat(r)),e}.call(this,e)}}}g.__dashjs_factory_name="PlayReady";var Q=e.Z.getSingletonFactory(g);function m(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}m.__dashjs_factory_name="Widevine";var J=dashjs.FactoryMaker.getSingletonFactory(m);function ee(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),r=r.k.replace(/=/g,"");t.push(new u(i,r))}return new c(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}ee.__dashjs_factory_name="ClearKey";var te=dashjs.FactoryMaker.getSingletonFactory(ee);function ne(){var t,n,r,d,i,o,a,s,l=this.context;function f(e,t){return t&&e in t?t[e]:null}function p(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function h(e,t){return e&&e.sessionType?e.sessionType:t}return t={initialize:function(){var e;d=[],e=q(l).getInstance({BASE64:i,settings:o}),d.push(e),e=U(l).getInstance({BASE64:i}),d.push(e),e=M(l).getInstance({BASE64:i}),d.push(e),a=e,e=x(l).getInstance({BASE64:i,debug:n}),d.push(e),s=e},setProtectionData:function(e){for(var t,n=0;n<d.length;n++){var r=d[n];r.hasOwnProperty("init")&&r.init((r=r.systemString,void 0,t=null,t=e?r in e?e[r]:null:t))}},isClearKey:function(e){return e===a||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},getKeySystems:function(){return d},setKeySystems:function(e){d=e},getKeySystemBySystemString:function(e){for(var t=0;t<d.length;t++)if(d[t].systemString===e)return d[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,n){var r,i,o=[];if(e)for(var a=G.findCencContentProtection(e),s=0;s<d.length;++s)for(var l,u=f((i=d[s]).systemString,t),c=0;c<e.length;++c)(r=e[c]).schemeIdUri.toLowerCase()===i.schemeIdURI&&(l=i.getInitData(r,a),o.push({ks:d[s],keyId:r.keyId,initData:l,protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:p(u,r),sessionType:h(u,n)}));return o},getSupportedKeySystemsFromSegmentPssh:function(e,t,n){for(var r,i=[],o=G.parsePSSHList(e),a=0;a<d.length;++a){var s=f((r=d[a]).systemString,t);r.uuid in o&&i.push({ks:r,initData:o[r.uuid],protData:s,cdmData:r.getCDMData(s?s.cdmData:null),sessionId:p(s),sessionType:h(s,n)})}return i},getLicenseServerModelInstance:function(e,t,n){return"license-release"===n||"individualization-request"===n?null:(n=null,t&&t.hasOwnProperty("drmtoday")?n=X(l).getInstance({BASE64:i}):e.systemString===y.WIDEVINE_KEYSTEM_STRING?n=J(l).getInstance():e.systemString===y.PLAYREADY_KEYSTEM_STRING?n=Q(l).getInstance():e.systemString===y.CLEARKEY_KEYSTEM_STRING&&(n=te(l).getInstance()),n)},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(i=e.BASE64),e.settings)&&(o=e.settings)}}}ne.__dashjs_factory_name="ProtectionKeyController";var T=dashjs.FactoryMaker.getSingletonFactory(ne);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");this.initData=e,this.initDataType=t}function w(e,t,n,r){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r||"license-request"}function I(e,t){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.keySystem=e,this.ksConfiguration=t}var e=new(function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e);n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=v(n),t=(e=r?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==re(e)&&"function"!=typeof e){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return e};function o(){var e;if(this instanceof o)return(e=i.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e;throw new TypeError("Cannot call a class as a function")}return o}(t(8342).Z)),E={};function oe(e){var c,o,i,a,s,l,r,t=this.context,d=(e=e||{}).eventBus,f=e.events,e=e.debug;function p(n,r,i,o){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return d.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:e="Insecure origins are not allowed"}),o({error:e});var a,s,e=n[r].protData&&n[r].protData.systemStringPriority?n[r].protData.systemStringPriority:null,t=n[r].configs,l=n[r].ks,u=l.systemString;a=e||E[u]||[u],s=t,new Promise(function(e,t){!function t(n,r,i,o,a){var s=n[i];c.debug("Requesting key system access for system string ".concat(s)),navigator.requestMediaKeySystemAccess(s,r).then(function(e){e.selectedSystemString=s,o(e)}).catch(function(e){i+1<n.length?t(n,r,i+1,o,a):a(e)})}(a,s,0,e,t)}).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,t=new I(l,t);t.mksa=e,d.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:t}),i({data:t})}).catch(function(e){var t;r+1<n.length?p(n,r+1,i,o):(d.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:(t="Key system access denied! ")+e.message}),o({error:t+e.message}))})}function u(e){var t;return e&&e.session?((t=e.session).removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()):Promise.resolve}function h(e){for(var t=0;t<s.length;t++)if(s[t]===e){s.splice(t,1);break}}function g(e){var t,n;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1])&&("string"==typeof e[1]?t=e[1]:n=e[1]),{status:t,keyId:n}}function m(t,e){var n={session:t,keyId:e.keyId,initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":d.trigger(f.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=g(arguments);"expired"===e.status?d.trigger(f.INTERNAL_KEY_STATUS_CHANGED,{error:new K.Z(Y.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Y.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):d.trigger(f.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;d.trigger(f.INTERNAL_KEY_MESSAGE,{data:new w(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===g(arguments).status&&(e=!0)}),e}};return t.addEventListener("keystatuseschange",n),t.addEventListener("message",n),t.closed.then(function(){h(n),c.debug("DRM: Session closed.  SessionID = "+n.getSessionId()),d.trigger(f.KEY_SESSION_CLOSED,{data:n.getSessionId()})}),s.push(n),n}return c=e.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)s[t].initData&&e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(n){return new Promise(function(e,t){p(n,0,e,t)})},selectKeySystem:function(n){return new Promise(function(e,t){n.mksa.createMediaKeys().then(function(e){return o=n.keySystem,a=e,i?i.setMediaKeys(a):Promise.resolve()}).then(function(){e(o)}).catch(function(){t({error:"Error selecting keys system ("+n.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",l),i.setMediaKeys)&&i.setMediaKeys(null),i=e)&&(i.addEventListener("encrypted",l),i.setMediaKeys)&&a&&i.setMediaKeys(a)},setServerCertificate:function(e){if(!o||!a)throw new Error("Can not set server certificate until you have selected a key system");a.setServerCertificate(e).then(function(){c.info("DRM: License server certificate successfully updated."),d.trigger(f.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){d.trigger(f.SERVER_CERTIFICATE_UPDATED,{error:new K.Z(Y.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,Y.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e){if(!o||!a)throw new Error("Can not create sessions until you have selected a key system");var t=a.createSession(e.sessionType),n=m(t,e),r=o.systemString===y.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?y.INITIALIZATION_DATA_TYPE_KEYIDS:y.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(r,e.initData).then(function(){c.debug("DRM: Session created.  SessionID = "+n.getSessionId()),d.trigger(f.KEY_SESSION_CREATED,{data:n})}).catch(function(e){h(n),d.trigger(f.KEY_SESSION_CREATED,{data:null,error:new K.Z(Y.KEY_SESSION_CREATED_ERROR_CODE,Y.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;r.isClearKey(o)&&(e=e.toJWK()),n.update(e).then(function(){d.trigger(f.KEY_SESSION_UPDATED)}).catch(function(e){d.trigger(f.KEY_ERROR,{error:new K.Z(Y.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(e){if(!o||!a)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,n=0;n<s.length;n++)if(t===s[n].sessionId)return void c.warn("DRM: Ignoring session ID because we have already seen it!");var r=a.createSession(e.sessionType),i=m(r,e);r.load(t).then(function(e){e?(c.debug("DRM: Session loaded.  SessionID = "+i.getSessionId()),d.trigger(f.KEY_SESSION_CREATED,{data:i})):(h(i),d.trigger(f.KEY_SESSION_CREATED,{data:null,error:new K.Z(Y.KEY_SESSION_CREATED_ERROR_CODE,Y.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){h(i),d.trigger(f.KEY_SESSION_CREATED,{data:null,error:new K.Z(Y.KEY_SESSION_CREATED_ERROR_CODE,Y.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){c.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),d.trigger(f.KEY_SESSION_REMOVED,{data:t.getSessionId()})},function(e){d.trigger(f.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})})},closeKeySession:function(t){u(t).catch(function(e){h(t),d.trigger(f.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})})},stop:function(){for(var e,t=0;t<s.length;t++)(e=s[t]).getUsable()||(u(e),h(e))},reset:function(){var e,t=s.length;if(0!==t)for(var n,r=0;r<t;r++)n=e=s[r],u(e),h(n),0===s.length&&(i?(i.removeEventListener("encrypted",l),i.setMediaKeys(null).then(function(){d.trigger(f.TEARDOWN_COMPLETE)})):d.trigger(f.TEARDOWN_COMPLETE));else d.trigger(f.TEARDOWN_COMPLETE)}}),a=i=o=null,s=[],r=T(t).getInstance(),l={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,d.trigger(f.NEED_KEY,{key:new A(t,e.initDataType)}))}},e}E[y.PLAYREADY_KEYSTEM_STRING]=[y.PLAYREADY_KEYSTEM_STRING,y.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],E[y.WIDEVINE_KEYSTEM_STRING]=[y.WIDEVINE_KEYSTEM_STRING],E[y.CLEARKEY_KEYSTEM_STRING]=[y.CLEARKEY_KEYSTEM_STRING],oe.__dashjs_factory_name="ProtectionModel_21Jan2015";var ae=dashjs.FactoryMaker.getClassFactory(oe);function se(e){var n,r,i,o,a,s,t,y,l=this.context,v=(e=e||{}).eventBus,E=e.events,u=e.debug,_=e.api;function c(){try{for(var e=0;e<s.length;e++)d(s[e]);r&&r.removeEventListener(_.needkey,t),v.trigger(E.TEARDOWN_COMPLETE)}catch(e){v.trigger(E.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function d(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<s.length;n++)if(s[n]===e){s.splice(n,1);break}t[_.release]()}function f(){function e(){r.removeEventListener("loadedmetadata",t),r[_.setMediaKeys](o),v.trigger(E.VIDEO_ELEMENT_SELECTED)}var t=null;1<=r.readyState?e():(t=e.bind(this),r.addEventListener("loadedmetadata",t))}return n=u.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(m){return new Promise(function(e,t){for(var n,r=!1,i=0;i<m.length;i++)for(var o=m[i].ks.systemString,a=m[i].configs,s=null,l=null,u=0;u<a.length;u++){var c=a[u].audioCapabilities,d=a[u].videoCapabilities;if(c&&0!==c.length)for(var s=[],f=0;f<c.length;f++)window[_.MediaKeys].isTypeSupported(o,c[f].contentType)&&s.push(c[f]);if(d&&0!==d.length)for(var l=[],p=0;p<d.length;p++)window[_.MediaKeys].isTypeSupported(o,d[p].contentType)&&l.push(d[p]);if(!(!s&&!l||s&&0===s.length||l&&0===l.length)){var r=!0,h=new S(s,l),g=y.getKeySystemBySystemString(o),g=new I(g,h);v.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{data:g}),e({data:g});break}}r||(v.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{error:n="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:n}))})},selectKeySystem:function(n){return new Promise(function(e,t){try{o=n.mediaKeys=new window[_.MediaKeys](n.keySystem.systemString),i=n.keySystem,a=n,r&&f(),e(i)}catch(e){t({error:"Error selecting keys system ("+i.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){r!==e&&(r&&r.removeEventListener(_.needkey,t),r=e)&&(r.addEventListener(_.needkey,t),o)&&f()},createKeySession:function(e){if(!i||!o||!a)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null===(t=null===(t=a.ksConfiguration.videoCapabilities&&0<a.ksConfiguration.videoCapabilities.length?a.ksConfiguration.videoCapabilities[0]:t)&&a.ksConfiguration.audioCapabilities&&0<a.ksConfiguration.audioCapabilities.length?a.ksConfiguration.audioCapabilities[0]:t))throw new Error("Can not create sessions for unknown content types.");t=t.contentType,t=o.createSession(t,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),e={session:t,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case _.error:v.trigger(E.KEY_ERROR,{error:new K.Z(Y.MEDIA_KEYERR_CODE,"KeyError",this)});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;v.trigger(E.INTERNAL_KEY_MESSAGE,{data:new w(this,t,e.destinationURL)});break;case _.ready:n.debug("DRM: Key added."),v.trigger(E.KEY_ADDED);break;case _.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),v.trigger(E.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};t.addEventListener(_.error,e),t.addEventListener(_.message,e),t.addEventListener(_.ready,e),t.addEventListener(_.close,e),s.push(e),n.debug("DRM: Session created.  SessionID = "+e.getSessionId()),v.trigger(E.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session;y.isClearKey(i)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t)),v.trigger(E.KEY_SESSION_UPDATED)},closeKeySession:d,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c}),a=o=i=r=null,s=[],y=T(l).getInstance(),t={handleEvent:function(e){e.type===_.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,v.trigger(E.NEED_KEY,{key:new A(e,"cenc")}))}},e}se.__dashjs_factory_name="ProtectionModel_3Feb2014";var le=dashjs.FactoryMaker.getClassFactory(se);function ue(e){var o,g,i,m,a,s,l,n,t=this.context,y=(e=e||{}).eventBus,v=e.events,r=e.debug,u=e.api,c=e.errHandler;function d(){g&&h();for(var e=0;e<s.length;e++)f(s[e]);y.trigger(v.TEARDOWN_COMPLETE)}function f(t){try{g[u.cancelKeyRequest](i.systemString,t.sessionId)}catch(e){y.trigger(v.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function p(e,t){if(t&&e)for(var n=e.length,r=0;r<n;r++)if(e[r].sessionId==t)return e[r];return null}function h(){g.removeEventListener(u.keyerror,n),g.removeEventListener(u.needkey,n),g.removeEventListener(u.keymessage,n),g.removeEventListener(u.keyadded,n)}return o=r.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].initData);for(var n=0;n<s.length;n++)e.push(s[n].initData);return e},getSessions:function(){return s.concat(a)},requestKeySystemAccess:function(h){return new Promise(function(e,t){for(var n,r=(r=g)||document.createElement("video"),i=!1,o=0;o<h.length;o++)for(var a=h[o].ks.systemString,s=h[o].configs,l=null,u=0;u<s.length;u++){var c=s[u].videoCapabilities;if(c&&0!==c.length)for(var l=[],d=0;d<c.length;d++)""!==r.canPlayType(c[d].contentType,a)&&l.push(c[d]);if(l&&(!l||0!==l.length)){var i=!0,f=new S(null,l),p=m.getKeySystemBySystemString(a),p=new I(p,f);y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{data:p}),e({data:p});break}}i||(y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:n="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:n}))})},selectKeySystem:function(e){return i=e.keySystem,Promise.resolve(i)},setMediaElement:function(e){if(g!==e){if(g){h();for(var t=0;t<s.length;t++)f(s[t]);s=[]}(g=e)&&(g.addEventListener(u.keyerror,n),g.addEventListener(u.needkey,n),g.addEventListener(u.keymessage,n),g.addEventListener(u.keyadded,n),y.trigger(v.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");var t;if(l||0===s.length)return t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}},a.push(t),g[u.generateKeyRequest](i.systemString,new Uint8Array(e.initData)),t;throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionId;if(m.isClearKey(i))for(var r=0;r<t.keyPairs.length;r++)g[u.addKey](i.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else g[u.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);y.trigger(v.KEY_SESSION_UPDATED)},closeKeySession:f,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:d,reset:d}),i=g=null,a=[],s=[],m=T(t).getInstance(),n={handleEvent:function(e){var t=null;switch(e.type){case u.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(v.NEED_KEY,{key:new A(n,"cenc")});break;case u.keyerror:if(t=(t=p(s,e.sessionId))||p(a,e.sessionId)){var r=Y.MEDIA_KEYERR_CODE,i="";switch(e.errorCode.code){case 1:r=Y.MEDIA_KEYERR_UNKNOWN_CODE,i+="MEDIA_KEYERR_UNKNOWN - "+Y.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:r=Y.MEDIA_KEYERR_CLIENT_CODE,i+="MEDIA_KEYERR_CLIENT - "+Y.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:r=Y.MEDIA_KEYERR_SERVICE_CODE,i+="MEDIA_KEYERR_SERVICE - "+Y.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:r=Y.MEDIA_KEYERR_OUTPUT_CODE,i+="MEDIA_KEYERR_OUTPUT - "+Y.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:r=Y.MEDIA_KEYERR_HARDWARECHANGE_CODE,i+="MEDIA_KEYERR_HARDWARECHANGE - "+Y.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:r=Y.MEDIA_KEYERR_DOMAIN_CODE,i+="MEDIA_KEYERR_DOMAIN - "+Y.MEDIA_KEYERR_DOMAIN_MESSAGE}i+="  System Code = "+e.systemCode,y.trigger(v.KEY_ERROR,{error:new K.Z(r,i,t)})}else o.error("No session token found for key error");break;case u.keyadded:(t=(t=p(s,e.sessionId))||p(a,e.sessionId))?(o.debug("DRM: Key added."),y.trigger(v.KEY_ADDED,{data:t})):o.debug("No session token found for key added");break;case u.keymessage:(l=null!==e.sessionId&&void 0!==e.sessionId)?!(t=p(s,e.sessionId))&&0<a.length&&(t=a.shift(),s.push(t),t.sessionId=e.sessionId,y.trigger(v.KEY_SESSION_CREATED,{data:t})):0<a.length&&(t=a.shift(),s.push(t),0!==a.length)&&c.error(new K.Z(Y.MEDIA_KEY_MESSAGE_ERROR_CODE,Y.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)),t?(n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=n,y.trigger(v.INTERNAL_KEY_MESSAGE,{data:new w(t,n,e.defaultURL)})):o.warn("No session token found for key message")}}},e}ue.__dashjs_factory_name="ProtectionModel_01b";var ce=dashjs.FactoryMaker.getClassFactory(ue),de=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],fe=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function _(){var u,c=this.context;function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return u={createProtectionSystem:function(e){var t,n,r,i,o,a=null,s=T(c).getInstance(),l=(s.setConfig({debug:e.debug,BASE64:e.BASE64,settings:e.settings}),s.initialize(),n=(t=e).debug,r=n.getLogger(u),i=t.eventBus,l=t.errHandler,(o=t.videoModel?t.videoModel.getElement():null)&&void 0===o.onencrypted||o&&void 0===o.mediaKeys?d(o,fe)?(r.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),le(c).create({debug:n,eventBus:i,events:t.events,api:d(o,fe)})):d(o,de)?(r.info("EME detected on this user agent! (ProtectionModel_01b)"),ce(c).create({debug:n,eventBus:i,errHandler:l,events:t.events,api:d(o,de)})):(r.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(r.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),ae(c).create({debug:n,eventBus:i,events:t.events})));return!a&&l&&(a=N(c).create({protectionModel:l,protectionKeyController:s,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants,cmcdModel:e.cmcdModel,customParametersModel:e.customParametersModel,settings:e.settings}),e.capabilities.setEncryptedMediaSupported(!0)),a}}}_.__dashjs_factory_name="Protection";var t=dashjs.FactoryMaker.getClassFactory(_),pe=(t.events=e,t.errors=Y,dashjs.FactoryMaker.updateClassFactory(_.__dashjs_factory_name,t),t)},2068:function(e,t,n){"use strict";var n=n(5448),r={DEFAULT:.5,STRONG:1,WEAK:0};function i(e,t,n){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:n!==r.DEFAULT&&n!==r.STRONG&&n!==r.WEAK?r.DEFAULT:n}}i.__dashjs_factory_name="SwitchRequest";var o=n.Z.getClassFactory(i);o.NO_CHANGE=-1,o.PRIORITY=r,n.Z.updateClassFactory(i.__dashjs_factory_name,o),t.Z=o},1767:function(e,t,n){"use strict";var c=n(5628),d=n(6535),f=n(7423),p=n(895),h=n(6070),g=n(3112),m=n(1914),y=n(5435),r=n(5448),v=n(2068),E=n(3393),_="qualitySwitchRules",T="abandonFragmentRules";function i(e){var n,r,l=this.context,t=(e=e||{}).mediaPlayerModel,i=e.customParametersModel,o=e.dashMetrics,a=e.settings;function s(e){return e.filter(function(e){return e.quality>v.Z.NO_CHANGE})}function u(e){var t,n,r,i,o,a={},s=null;if(0!==e.length){for(a[v.Z.PRIORITY.STRONG]={quality:v.Z.NO_CHANGE,reason:null},a[v.Z.PRIORITY.WEAK]={quality:v.Z.NO_CHANGE,reason:null},a[v.Z.PRIORITY.DEFAULT]={quality:v.Z.NO_CHANGE,reason:null},t=0,n=e.length;t<n;t+=1)(r=e[t]).quality!==v.Z.NO_CHANGE&&(a[r.priority].quality===v.Z.NO_CHANGE||a[r.priority].quality>r.quality)&&(a[r.priority].quality=r.quality,a[r.priority].reason=r.reason||null);return a[v.Z.PRIORITY.WEAK].quality!==v.Z.NO_CHANGE&&(s=a[v.Z.PRIORITY.WEAK]),a[v.Z.PRIORITY.DEFAULT].quality!==v.Z.NO_CHANGE&&(s=a[v.Z.PRIORITY.DEFAULT]),(s=a[v.Z.PRIORITY.STRONG].quality!==v.Z.NO_CHANGE?a[v.Z.PRIORITY.STRONG]:s)&&(i=s.quality,o=s.reason),(0,v.Z)(l).create(i,o)}}return{initialize:function(){n=[],r=[],a.get().streaming.abr.useDefaultABRRules&&(a.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_L2A?n.push((0,m.Z)(l).create({dashMetrics:o,settings:a})):a.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_LoLP?n.push((0,y.Z)(l).create({dashMetrics:o})):(n.push((0,g.Z)(l).create({dashMetrics:o,mediaPlayerModel:t,settings:a})),n.push((0,c.Z)(l).create({dashMetrics:o})),a.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&n.push((0,d.Z)(l).create({dashMetrics:o,settings:a})),a.get().streaming.abr.additionalAbrRules.switchHistoryRule&&n.push((0,h.Z)(l).create()),a.get().streaming.abr.additionalAbrRules.droppedFramesRule&&n.push((0,p.Z)(l).create()),a.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&r.push((0,f.Z)(l).create({dashMetrics:o,mediaPlayerModel:t,settings:a})))),i.getAbrCustomRules().forEach(function(e){e.type===_&&n.push(e.rule(l).create()),e.type===T&&r.push(e.rule(l).create())})},reset:function(){[n,r].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),n=[],r=[]},getMaxQuality:function(t){return u(s(n.map(function(e){return e.getMaxIndex(t)})))||(0,v.Z)(l).create()},getMinSwitchRequest:u,shouldAbandonFragment:function(t,n){var e=u(s(r.map(function(e){return e.shouldAbandon(t,n)})));return e&&(e.reason.forceAbandon=!0),e||(0,v.Z)(l).create()},getQualitySwitchRules:function(){return n}}}i.__dashjs_factory_name="ABRRulesCollection";n=r.Z.getClassFactory(i);n.QUALITY_SWITCH_RULES=_,n.ABANDON_FRAGMENT_RULES=T,r.Z.updateSingletonFactory(i.__dashjs_factory_name,n),t.Z=n},7423:function(e,t,n){"use strict";var y=n(2068),r=n(5448),i=n(6398);function v(e){var u,c,d,f,p=this.context,h=(e=e||{}).mediaPlayerModel,g=e.dashMetrics,m=e.settings;function t(){c={},d={},f=[]}return e={shouldAbandon:function(e){var t=(0,y.Z)(p).create(y.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")){var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getStreamInfo(),i=i?i.id:null,o=e.getCurrentRequest();if(!isNaN(o.index)){s=o.index,c[a=r]=c[a]||{},c[a][s]=c[a][s]||{};var a=h.getStableBufferTime();if(g.getCurrentBufferLevel(r)>a)return t;var s=c[r][o.index];if(null===s||null===o.firstByteDate||d.hasOwnProperty(s.id))return t;if(void 0===s.firstByteTime&&(f[r]=[],s.firstByteTime=o.firstByteDate.getTime(),s.segmentDuration=o.duration,s.bytesTotal=o.bytesTotal,s.id=o.index),s.bytesLoaded=o.bytesLoaded,s.elapsedTime=(new Date).getTime()-s.firstByteTime,0<s.bytesLoaded&&0<s.elapsedTime&&(a=r,o=Math.round(8*s.bytesLoaded/s.elapsedTime),f[a]=f[a]||[],f[a].push(o)),f[r].length>=m.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&s.elapsedTime>m.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&s.bytesLoaded<s.bytesTotal){var l,a=f[r].reduce(function(e,t){return e+t},0);if(s.measuredBandwidthInKbps=Math.round(a/f[r].length),s.estimatedTimeOfDownload=+(8*s.bytesTotal/s.measuredBandwidthInKbps/1e3).toFixed(2),s.estimatedTimeOfDownload<s.segmentDuration*m.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===e.getRepresentationInfo().quality)return t;d.hasOwnProperty(s.id)||(o=e.getAbrController(),a=s.bytesTotal-s.bytesLoaded,e=o.getBitrateList(n),n=o.getQualityForBitrate(n,s.measuredBandwidthInKbps*m.get().streaming.abr.bandwidthSafetyFactor,i),l=void 0!==(l=o.getMinAllowedIndexFor(r,i))?Math.max(l,n):n,a>s.bytesTotal*e[l].bitrate/e[o.getQualityFor(r,i)].bitrate&&(t.quality=l,t.reason.throughput=s.measuredBandwidthInKbps,t.reason.fragmentID=s.id,t.reason.rule=this.getClassName(),d[s.id]=s,u.debug("["+r+"] frag id",s.id," is asking to abandon and switch to quality to ",l," measured bandwidth was",s.measuredBandwidthInKbps),delete c[r][s.id]))}else s.bytesLoaded===s.bytesTotal&&delete c[r][s.id]}}return t},reset:t},u=(0,i.Z)(p).getInstance().getLogger(e),t(),e}v.__dashjs_factory_name="AbandonRequestsRule",t.Z=r.Z.getClassFactory(v)},3112:function(e,t,n){"use strict";var d=n(3860),x=n(2068),r=n(5448),f=n(7855),p=n(5595),h=n(8512),g=n(6398),m=n(8825),y=n(3393);function i(e){var t,w,I,R=this.context,C=(e=e||{}).dashMetrics,N=e.mediaPlayerModel,n=(0,p.Z)(R).getInstance();function D(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);return 0===n?null:(e=Math.max(e,10+2*t.length),{gp:t=(r[n]-1)/(e/10-1),Vp:10/t})}function O(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function M(e,t){var n,r,i=N.getStableBufferTime();e.stableBufferTime===i||(n=D(i,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(r=(t=C.getCurrentBufferLevel(t))+e.placeholderBuffer,r=(r-=10)*(n.Vp/e.Vp)+10,e.stableBufferTime=i,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,r-t))}function P(e,t){return e.Vp*(e.utilities[t]+e.gp)}function L(e,t){for(var n,r,i=e.bitrates[t],o=e.utilities[t],a=0,s=t-1;0<=s;--s)e.utilities[s]<e.utilities[t]&&(n=e.bitrates[s],r=e.utilities[s],r=e.Vp*(e.gp+(i*r-n*o)/(i-n)),a=Math.max(a,r));return a}function r(e){for(var t in e.mediaType===y.Z.AUDIO?[y.Z.AUDIO]:I)I.hasOwnProperty(t)&&2===I[t].state&&(I[t].placeholderBuffer=0)}function i(){for(var e in I)I.hasOwnProperty(e)&&0!==(e=I[e]).state&&(e.state=1,O(e))}function o(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=I[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,s(t,e.chunk.mediaInfo.type))}function a(e){var t;e&&e.metric===d.Z.HTTP_REQUEST&&e.value&&e.value.type===f.w.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=I[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),s(t,e.mediaType))}function s(e,t){var n;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(t=C.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=P(e,e.lastQuality),n=Math.max(0,n-t),e.placeholderBuffer=Math.min(n,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function l(e){var t;e&&(t=I[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function u(e){var t,n;e&&(t=I[e.mediaType])&&0!==t.state&&(e=C.getCurrentBufferLevel(e.mediaType),n=0<t.abrQuality?L(t,t.abrQuality):10,n=Math.max(0,n-e),t.placeholderBuffer=Math.min(t.placeholderBuffer,n))}function c(){I={}}return t={getMaxIndex:function(e){var t=(0,x.Z)(R).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")){var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getScheduleController(),o=e.getStreamInfo(),a=e.getAbrController(),s=a.getThroughputHistory(),l=o?o.id:null,o=o&&o.manifestInfo&&o.manifestInfo.isDynamic,u=e.useBufferOccupancyABR();if(t.reason=t.reason||{},u){i.setTimeToLoadDelay(0);e=(u=e).getMediaType(),(h=I[e])?0!==h.state&&M(h,e):(c={},u=u.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),d=(d=u.map(function(e){return Math.log(e)})).map(function(e){return e-d[0]+1}),f=N.getStableBufferTime(),(p=D(f,u,d))?(c.state=1,c.bitrates=u,c.utilities=d,c.stableBufferTime=f,c.Vp=p.Vp,c.gp=p.gp,c.lastQuality=0,O(c)):c.state=0,h=c,I[e]=h);var c,d,f,p,h,g=h;if(0!==g.state){var m,y,v=C.getCurrentBufferLevel(r),E=s.getAverageThroughput(r,o),_=s.getSafeAverageThroughput(r,o),T=s.getAverageLatency(r);if(t.reason.state=g.state,t.reason.throughput=E,t.reason.latency=T,!isNaN(E))switch(g.state){case 1:b=a.getQualityForBitrate(n,_,l,T),t.quality=b,t.reason.throughput=_,g.placeholderBuffer=Math.max(0,L(g,b)-v),g.lastQuality=b,!isNaN(g.lastSegmentDurationS)&&v>=g.lastSegmentDurationS&&(g.state=2);break;case 2:m=g,y=r,A=Date.now(),isNaN(m.lastSegmentFinishTimeMs)?isNaN(m.lastCallTimeMs)||(S=.001*(A-m.lastCallTimeMs),m.placeholderBuffer+=Math.max(0,S)):(S=.001*(A-m.lastSegmentFinishTimeMs),m.placeholderBuffer+=Math.max(0,S)),m.lastCallTimeMs=A,m.lastSegmentStart=NaN,m.lastSegmentRequestTimeMs=NaN,m.lastSegmentFinishTimeMs=NaN,M(m,y);var b=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,o=0;o<n;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||i<=a)&&(i=a,r=o)}return r}(g,v+g.placeholderBuffer),S=a.getQualityForBitrate(n,_,l,T),A=(b>g.lastQuality&&S<b&&(b=Math.max(S,g.lastQuality)),Math.max(0,v+g.placeholderBuffer-P(g,b)));A<=g.placeholderBuffer?(g.placeholderBuffer-=A,A=0):(A-=g.placeholderBuffer,g.placeholderBuffer=0,b<a.getMaxAllowedIndexFor(r,l)?i.setTimeToLoadDelay(1e3*A):A=0),t.quality=b,t.reason.throughput=E,t.reason.latency=T,t.reason.bufferLevel=v,t.reason.placeholderBuffer=g.placeholderBuffer,t.reason.delay=A,g.lastQuality=b;break;default:w.debug("BOLA ABR rule invoked in bad state."),t.quality=a.getQualityForBitrate(n,_,l,T),t.reason.state=g.state,t.reason.throughput=_,t.reason.latency=T,g.state=1,O(g)}}}}return t},reset:function(){c(),n.off(m.Z.BUFFER_EMPTY,r,t),n.off(m.Z.PLAYBACK_SEEKING,i,t),n.off(m.Z.METRIC_ADDED,a,t),n.off(m.Z.QUALITY_CHANGE_REQUESTED,l,t),n.off(m.Z.FRAGMENT_LOADING_ABANDONED,u,t),n.off(h.Z.MEDIA_FRAGMENT_LOADED,o,t)}},w=(0,g.Z)(R).getInstance().getLogger(t),c(),n.on(m.Z.BUFFER_EMPTY,r,t),n.on(m.Z.PLAYBACK_SEEKING,i,t),n.on(m.Z.METRIC_ADDED,a,t),n.on(m.Z.QUALITY_CHANGE_REQUESTED,l,t),n.on(m.Z.FRAGMENT_LOADING_ABANDONED,u,t),n.on(h.Z.MEDIA_FRAGMENT_LOADED,o,t),t}i.__dashjs_factory_name="BolaRule",t.Z=r.Z.getClassFactory(i)},895:function(e,t,n){"use strict";var r=n(5448),c=n(2068),i=n(6398);function o(){var l=this.context,e={getMaxIndex:function(e){var t=(0,c.Z)(l).create();if(e&&e.hasOwnProperty("getDroppedFramesHistory")){var n=e.getDroppedFramesHistory(),e=e.getStreamInfo().id;if(n){var r=n.getFrameHistory(e);if(!r||0===r.length)return t;for(var i=0,o=0,a=c.Z.NO_CHANGE,s=1;s<r.length;s++)if(r[s]&&(i=r[s].droppedVideoFrames,375<(o=r[s].totalVideoFrames))&&.15<i/o){u.debug("index: "+(a=s-1)+" Dropped Frames: "+i+" Total Frames: "+o);break}return(0,c.Z)(l).create(a,{droppedFrames:i})}}return t}},u=(0,i.Z)(l).getInstance().getLogger(e);return e}o.__dashjs_factory_name="DroppedFramesRule",t.Z=r.Z.getClassFactory(o)},6535:function(e,t,n){"use strict";var a=n(5595),s=n(8512),r=n(5448),l=n(6398),p=n(2068),h=n(3393),g=n(3860),m=n(8825);function i(e){e=e||{};var t,u,c,d=this.context,n=(0,a.Z)(d).getInstance(),f=e.dashMetrics;function r(){(c={})[h.Z.VIDEO]={ignoreCount:2},c[h.Z.AUDIO]={ignoreCount:2}}function i(){r()}function o(e){isNaN(e.startTime)||e.mediaType!==h.Z.AUDIO&&e.mediaType!==h.Z.VIDEO||0<c[e.mediaType].ignoreCount&&c[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=(0,p.Z)(d).create();if(e&&e.hasOwnProperty("getMediaType")){if(!f||!f.hasOwnProperty("getCurrentBufferLevel")||!f.hasOwnProperty("getCurrentBufferState"))throw new Error(h.Z.MISSING_CONFIG_ERROR);var n,r=e.getMediaType(),i=f.getCurrentBufferState(r),o=e.getRepresentationInfo().fragmentDuration,a=e.getStreamInfo(),s=a?a.id:null,l=e.getScheduleController(),a=a&&a.manifestInfo&&a.manifestInfo.isDynamic;!l.getPlaybackController().getLowLatencyModeEnabled()&&0<c[r].ignoreCount||!o||(i&&i.state===g.Z.BUFFER_EMPTY?(u.debug("["+r+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(l=e.getMediaInfo(),e=(i=e.getAbrController()).getThroughputHistory(),n=f.getCurrentBufferLevel(r),a=e.getAverageThroughput(r,a),e=e.getAverageLatency(r),t.quality=i.getQualityForBitrate(l,a*(n/o)*.5,s,e),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"))}return t},reset:function(){r(),n.off(m.Z.PLAYBACK_SEEKING,i,t),n.off(s.Z.BYTES_APPENDED_END_FRAGMENT,o,t)}},u=(0,l.Z)(d).getInstance().getLogger(t),r(),n.on(m.Z.PLAYBACK_SEEKING,i,t),n.on(s.Z.BYTES_APPENDED_END_FRAGMENT,o,t),t}i.__dashjs_factory_name="InsufficientBufferRule",t.Z=r.Z.getClassFactory(i)},1914:function(e,t,n){"use strict";var u=n(3860),Z=n(2068),r=n(5448),q=n(7855),c=n(5595),d=n(8512),f=n(6398),G=n(3393);function i(e){var t,P,L,x,k=this.context,F=(e=e||{}).dashMetrics,n=(0,c.Z)(k).getInstance();function U(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function r(){for(var e in P)P.hasOwnProperty(e)&&0!==(e=P[e]).state&&(e.state=1,U(e))}function i(e){var t,n,r;e&&e.chunk&&e.chunk.mediaInfo&&(t=P[e.chunk.mediaInfo.type],n=L[e.chunk.mediaInfo.type],t)&&0!==t.state&&(r=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,a(t,n))}function o(e){var t,n;e&&e.metric===u.Z.HTTP_REQUEST&&e.value&&e.value.type===q.w.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=P[e.mediaType],n=L[e.mediaType],t)&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),a(t,n))}function a(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function s(e){var t;e&&e.mediaType&&(t=P[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function B(e,t){if(e.length!==t.length)return-1;for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function l(){P={},L={}}return t={getMaxIndex:function(e){var t,n=(0,Z.Z)(k).create(),r=Math.pow(4,.99),i=Math.max(Math.pow(4,1),r*Math.sqrt(4)),o=e.getMediaInfo(),a=e.getMediaType(),s=o.bitrateList.map(function(e){return e.bandwidth}),l=s.length,u=e.getScheduleController(),c=e.getStreamInfo(),d=e.getAbrController(),f=d.getThroughputHistory(),p=c&&c.manifestInfo&&c.manifestInfo.isDynamic,h=e.useL2AABR(),g=F.getCurrentBufferLevel(a,!0),m=f.getSafeAverageThroughput(a,p),y=f.getAverageThroughput(a,p),v=f.getAverageLatency(a),E=e.getVideoModel().getPlaybackRate();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")&&(n.reason=n.reason||{},h)&&a!==G.Z.AUDIO){u.setTimeToLoadDelay(0);f=(p=e).getMediaType(),(h=P[f])||(u={},p=p.getMediaInfo(),e=p.bitrateList.map(function(e){return e.bandwidth/1e3}),u.state=1,u.bitrates=e,u.lastQuality=0,(e=p)&&e.type&&(L[e.type]={},L[e.type].w=[],L[e.type].prev_w=[],L[e.type].Q=0,L[e.type].segment_request_start_s=0,L[e.type].segment_download_finish_s=0,L[e.type].B_target=1.5),U(u),h=u,P[f]=h);var _=h;if(0!==_.state){var T=L[a];if(T&&(n.reason.state=_.state,n.reason.throughput=y,n.reason.latency=v,!isNaN(y)))switch(_.state){case 1:if(t=d.getQualityForBitrate(o,m,c.id,v),n.quality=t,n.reason.throughput=m,_.lastQuality=t,!isNaN(_.lastSegmentDurationS)&&g>=T.B_target){_.state=2,T.Q=r;for(var b=0;b<l;++b)b===_.lastQuality?T.prev_w[b]=1:T.prev_w[b]=0}break;case 2:var S=[],A=F.getCurrentHttpRequest(a).trace.reduce(function(e,t){return e+t.d},0),w=F.getCurrentHttpRequest(a).trace.reduce(function(e,t){return e+t.b[0]},0),I=Math.round(8*w/A),w=F.getCurrentHttpRequest(a);if(I<1&&(I=1),w.url===_.lastSegmentUrl||w.type===q.w.INIT_SEGMENT_TYPE)t=_.lastQuality;else{for(var R=_.lastSegmentDurationS,C=1,N=0;N<l;++N)s[N]=s[N]/1e3,E*s[N]>I&&(C=-1),T.w[N]=T.prev_w[N]+C*(R/(2*i))*((T.Q+r)*(E*s[N]/I));T.w=function(e){for(var t=e.length,n=!1,r=[],i=0;i<t;++i)r[i]=e[i];for(var o=e.sort(function(e,t){return t-e}),a=0,s=0,l=[],u=0;u<t-1;++u)if((s=((a+=o[u])-1)/(u+1))>=o[u+1]){n=!0;break}n||(s=(a+o[t-1]-1)/t);for(var c=0;c<t;++c)l[c]=Math.max(r[c]-s,0);return l}(T.w);for(var D=0;D<l;++D)S[D]=T.w[D]-T.prev_w[D],T.prev_w[D]=T.w[D];T.Q=Math.max(0,T.Q-R+R*E*((B(s,T.prev_w)+B(s,S))/I));for(var O=[],M=0;M<l;++M)O[M]=Math.abs(s[M]-B(T.w,s));s[t=(t=O.indexOf(Math.min.apply(Math,O)))>_.lastQuality&&s[_.lastQuality+1]<=I?_.lastQuality+1:t]>=I&&(T.Q=2*Math.max(r,T.Q)),_.lastSegmentUrl=w.url}n.quality=t,n.reason.throughput=y,n.reason.latency=v,n.reason.bufferLevel=g,_.lastQuality=n.quality;break;default:x.debug("L2A ABR rule invoked in bad state."),n.quality=d.getQualityForBitrate(o,m,c.id,v),n.reason.state=_.state,n.reason.throughput=m,n.reason.latency=v,_.state=1,U(_)}}}return n},reset:function(){l(),n.off(d.Z.PLAYBACK_SEEKING,r,t),n.off(d.Z.MEDIA_FRAGMENT_LOADED,i,t),n.off(d.Z.METRIC_ADDED,o,t),n.off(d.Z.QUALITY_CHANGE_REQUESTED,s,t)}},x=(0,f.Z)(k).getInstance().getLogger(t),l(),n.on(d.Z.PLAYBACK_SEEKING,r,t),n.on(d.Z.MEDIA_FRAGMENT_LOADED,i,t),n.on(d.Z.METRIC_ADDED,o,t),n.on(d.Z.QUALITY_CHANGE_REQUESTED,s,t),t}i.__dashjs_factory_name="L2ARule",t.Z=r.Z.getClassFactory(i)},6070:function(e,t,n){"use strict";var r=n(5448),i=n(6398),u=n(2068);function o(){var s=this.context,e={getMaxIndex:function(e){for(var e=e?e.getSwitchHistory():null,t=e?e.getSwitchRequests():[],n=0,r=0,i=0,o=(0,u.Z)(s).create(),a=0;a<t.length;a++)if(void 0!==t[a]&&(n+=t[a].drops,r+=t[a].noDrops,i+=t[a].dropSize,6<=n+r)&&.075<n/r){o.quality=0<a&&0<t[a].drops?a-1:a,o.reason={index:o.quality,drops:n,noDrops:r,dropSize:i},l.debug("Switch history rule index: "+o.quality+" samples: "+(n+r)+" drops: "+n);break}return o}},l=(0,i.Z)(s).getInstance().getLogger(e);return e}o.__dashjs_factory_name="SwitchHistoryRule",t.Z=r.Z.getClassFactory(o)},5628:function(e,t,n){"use strict";var r=n(5448),p=n(2068),h=n(3393),g=n(3860);function i(e){var d=this.context,f=(e=e||{}).dashMetrics;return{getMaxIndex:function(e){var t=(0,p.Z)(d).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")){if(!f||!f.hasOwnProperty("getCurrentBufferState"))throw new Error(h.Z.MISSING_CONFIG_ERROR);var n=e.getMediaInfo(),r=e.getMediaType(),i=f.getCurrentBufferState(r),o=e.getScheduleController(),a=e.getAbrController(),s=e.getStreamInfo(),l=s?s.id:null,s=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,u=a.getThroughputHistory(),c=u.getSafeAverageThroughput(r,s),u=u.getAverageLatency(r),e=e.useBufferOccupancyABR();isNaN(c)||!i||e||a.getAbandonmentStateFor(l,r)===g.Z.ABANDON_LOAD||i.state!==g.Z.BUFFER_LOADED&&!s||(t.quality=a.getQualityForBitrate(n,c,l,u),o.setTimeToLoadDelay(0),t.reason={throughput:c,latency:u})}return t},reset:function(){}}}i.__dashjs_factory_name="ThroughputRule",t.Z=r.Z.getClassFactory(i)},4722:function(e,t,n){"use strict";var r=n(5448),i=n(6398);function o(){var e,A,w,I,R,C,N,D,O,t=this.context;function n(){I=1,R=100,C=0,D=N=w=null,O="dynamic_weight_selection"}function M(){var e=0;if(w)for(var t=0;t<w.length;t++){var n=w[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function P(e,n,r){e=e.map(function(e,t){return r[t]*Math.pow(e-n[t],2)}).reduce(function(e,t){return e+t});return(e<0?-1:1)*Math.sqrt(Math.abs(e))}function L(e,t,n){for(var r,i,o=0;o<t.length;o++){var a=t[o],s=P([a.state.throughput,a.state.latency,a.state.rebuffer,a.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1]);a=a,r=n,s=Math.exp(-1*Math.pow(s,2)/(2*Math.pow(.1,2))),i=void 0,a=a.state,i=[.01,.01,.01,.01],a.throughput=a.throughput+(r[0]-a.throughput)*i[0]*s,a.latency=a.latency+(r[1]-a.latency)*i[1]*s,a.rebuffer=a.rebuffer+(r[2]-a.rebuffer)*i[2]*s,a.switch=a.switch+(r[3]-a.switch)*i[3]*s}}return e={getNextQuality:function(o,e,t,n,r,i,a){var s=t,l=n,u=e,c=function(){if(!w){w=[];var e=o.bitrateList,t=[];C=e[0].bandwidth,e.forEach(function(e){t.push(e.bandwidth),e.bandwidth<C&&(C=e.bandwidth)}),i=t.map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}),I=Math.sqrt(i);for(var n=0;n<e.length;n++){var r={qualityIndex:n,bitrate:e[n].bandwidth,state:{throughput:e[n].bandwidth/I,latency:0,rebuffer:0,switch:0}};w.push(r)}D=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var r=[Math.random()*M(),Math.random(),Math.random(),Math.random()];t.push(r)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var r=[1,1,1,1],i=1;i<e.length;i++){for(var o=null,a=null,s=0;s<n.length;s++){for(var l=n[s],u=null,c=0;c<t.length;c++){var d=P(l,t[c],r);(null===u||d<u)&&(u=d)}(null===a||a<u)&&(o=l,a=u)}t.push(o)}for(var f=null,p=null,h=0;h<t.length;h++){for(var g=0,m=0;m<t.length;m++)h!==m&&(g+=P(t[h],t[m],r));(null===f||f<g)&&(f=g,p=h)}var y=[];for(y.push(t[p]),t.splice(p,1);0<t.length;){for(var v=null,E=null,_=0;_<t.length;_++){var T=P(y[0],t[_],r);(null===v||T<v)&&(v=T,E=_)}y.push(t[E]),t.splice(E,1)}return y}(w)}var i;return w}(),d=e/I,n=(1<d&&(d=M()),t/=R,A.debug("getNextQuality called throughput:".concat(d," latency:").concat(t," bufferSize:").concat(n," currentQualityIndex:").concat(i," playbackRate:").concat(r)),c[i]),f=n.bitrate*a.getSegmentDuration()/u,p=Math.max(0,f-l);if(l-f<a.getMinBuffer())return A.debug("Buffer is low for bitrate= ".concat(n.bitrate," downloadTime=").concat(f," currentBuffer=").concat(l," rebuffer=").concat(p)),function(e,t){var n=0,r=e;if(w)for(var i=0;i<w.length;i++){var o=w[i];o.bitrate<e.bitrate&&o.bitrate>n&&t>o.bitrate&&(n=o.bitrate,r=o)}return r}(n,u).qualityIndex;switch(O){case"manual_weight_selection":N=[.4,.4,.4,.4];break;case"random_weight_selection":N=function(e){for(var t=[],n=Math.sqrt(2/e),r=0;r<4;r++)t.push(Math.random()*n);return N=t}(c.length);break;default:var h=a;N=N||D[D.length-1],null!==(h=h.findWeightVector(c,s,l,p,u,r))&&-1!==h&&(N=h)}for(var g=null,m=null,y=null,v=0;v<c.length;v++){var E=c[v],_=E.state,_=[_.throughput,_.latency,_.rebuffer,_.switch],T=N.slice(),b=a.getNextBufferWithBitrate(E.bitrate,l,u),S=b<a.getMinBuffer(),b=(S&&A.debug("Buffer is low for bitrate=".concat(E.bitrate," downloadTime=").concat(f," currentBuffer=").concat(l," nextBuffer=").concat(b)),(E.bitrate>e-1e4||S)&&E.bitrate!==C&&(T[0]=100),P(_,[d,0,0,0],T));(null===g||b<g)&&(g=b,m=E.qualityIndex,y=E)}i=Math.abs(n.bitrate-y.bitrate)/I;return L(n,c,[d,t,p,i]),L(y,c,[d,0,0,i]),m},reset:function(){n()}},A=(0,i.Z)(t).getInstance().getLogger(e),n(),e}o.__dashjs_factory_name="LearningAbrController",t.Z=r.Z.getClassFactory(o)},5317:function(e,t,n){"use strict";var r=n(5448),c=n(2298);function i(){var i,o,a,s;function e(){s=a=o=i=null}function l(e,t,n,r){var i=new c.Z;return i.type=e,i.weights.bitrateReward=t||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=n||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),i.weights.playbackSpeedPenalty=r||200,i}function u(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var o=0;o<i.weights.latencyPenalty.length;o++){var a=i.weights.latencyPenalty[o];if(n<=a.threshold){i.latencyWSum+=a.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e(),{setupPerSegmentQoe:function(e,t,n){i=l("segment",e,t,n),o=e,a=t,s=n},logSegmentMetrics:function(e,t,n,r){i&&u(e,t,n,r,i)},getPerSegmentQoe:function(){return i},calculateSingleUseQoe:function(e,t,n,r){var i=null;return(i=o&&a&&s?l("segment",o,a,s):i)?(u(e,t,n,r,i),i.totalQoe):0},reset:function(){e()}}}i.__dashjs_factory_name="LoLpQoeEvaluator",t.Z=r.Z.getClassFactory(i)},5435:function(e,t,n){"use strict";var r=n(6398),i=n(5448),o=n(4722),a=n(5317),O=n(2068),M=n(3860),P=n(6523),L=n(3393);function s(e){var I=(e=e||{}).dashMetrics,R=this.context,e={getMaxIndex:function(e){try{var t=(0,O.Z)(R).create(),n=e.getMediaInfo().type,r=e.getAbrController(),i=e.getStreamInfo(),o=r.getQualityFor(n,i.id),a=e.getMediaInfo(),s=I.getCurrentBufferState(n),l=e.getScheduleController(),u=I.getCurrentBufferLevel(n,!0),c=i&&i.manifestInfo?i.manifestInfo.isDynamic:null,d=l.getPlaybackController(),f=d.getCurrentLiveLatency();if(e.useLoLPABR()&&n!==L.Z.AUDIO){var f=f||0,p=d.getPlaybackRate(),h=r.getThroughputHistory().getSafeAverageThroughput(n,c);if(C.debug("Throughput ".concat(Math.round(h)," kbps")),!isNaN(h)&&s&&r.getAbandonmentStateFor(i.id,n)!==M.Z.ABANDON_LOAD){for(var g=a.bitrateList,m=e.getRepresentationInfo().fragmentDuration,y=g[0].bandwidth/1e3,v=g[g.length-1].bandwidth/1e3,E=0;E<g.length;E++){var _=g[E].bandwidth/1e3;v<_?v=_:_<y&&(y=_)}var T=g[o].bandwidth/1e3,b=I.getCurrentHttpRequest(n,!0),S=(b.tresponse.getTime()-b.trequest.getTime())/1e3,A=m<S?S-m:0,w=(D.setupPerSegmentQoe(m,v,y),D.logSegmentMetrics(T,A,f,p),(0,P.Z)(R).create({targetLatency:1.5,bufferMin:.3,segmentDuration:m,qoeEvaluator:D}));t.quality=N.getNextQuality(a,1e3*h,f,u,p,o,w),t.reason={throughput:h,latency:f},t.priority=O.Z.PRIORITY.STRONG,l.setTimeToLoadDelay(0),t.quality!==o&&C.debug("[TgcLearningRule]["+n+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(h),"kbps")}}return t}catch(e){throw e}},reset:function(){N.reset(),D.reset()}},C=(0,r.Z)(R).getInstance().getLogger(e),N=(0,o.Z)(R).create(),D=(0,a.Z)(R).create();return e}s.__dashjs_factory_name="LoLPRule",t.Z=i.Z.getClassFactory(s)},6523:function(e,t,n){"use strict";n=n(5448);function r(e){var n,r,l,h=e.targetLatency,g=e.bufferMin,m=e.segmentDuration,y=e.qoeEvaluator;function t(){return m}function v(e,t){return m<t?e-m:e+m-t}return e={getMinBuffer:function(){return g},getSegmentDuration:t,getNextBufferWithBitrate:function(e,t,n){return v(t,e*m/n)},getNextBuffer:v,findWeightVector:function(e,a,s,t,l,u){var c=null,d=null,f=null,p=Math.abs(a-r);return e.forEach(function(o){n.forEach(function(e){e[0];var t=e[1],n=e[2],r=(e[3],o.bitrate*m/l),i=v(s,r),n=(0===n?10:1/n)*Math.max(1e-5,r-i),r=(0===t?10:1/t)*o.state.latency,t=y.calculateSingleUseQoe(o.bitrate,n,r,u);(null===c||c<t)&&!(h+p<a)&&g<=i&&(c=t,d=e,f=o.bitrate)})}),r=a,d=null===d&&null===f?-1:d}},n=function e(t,n,r){if(r===n)return t;for(var i=t.length,o=0;o<i;o++)for(var a=t.shift(),s=0;s<l.length;s++)t.push(a.concat(l[s]));return e(t,n,r+1)}((l=[.2,.4,.6,.8,1]).map(function(e){return[e]}),4,1),r=0,e}r.__dashjs_factory_name="LoLpWeightSelector",t.Z=n.Z.getClassFactory(r)},2298:function(e,t){"use strict";t.Z=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(e,t,n){"use strict";n.d(t,{Y:function(){return D}});var T=n(3393),b=n(1553),r=n(5448),S=n(2128),A=n(2594),w=n(7387),I=n(7417),R=n(9032),C=n(9326),N=n(7802),D=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function i(e){var t,i,o,a,s,l,u,c,n=this.context,d=e.adapter,f=e.baseURLController,r=e.streamInfo,p=e.timelineConverter,h=e.debug,g=e.eventBus,m=e.events,y=e.dashConstants,v=(0,A.Z)(n).getInstance();function E(n,e){var t,r=new S.Z;r.id=n.id,r.bitrate=n.bandwidth,r.width=n.width,r.height=n.height,r.tilesHor=1,r.tilesVert=1,n.essentialProperties&&n.essentialProperties.forEach(function(e){0<=D.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(r.tilesHor=parseInt(e[0],10),r.tilesVert=parseInt(e[1],10)))}),e?l.updateSegmentData(n).then(function(e){var t,i,o;t=r,o=[],e=function(e,t){for(var n,r=[],i=0,o=0,a=e.segments.length;o<a;o++)n=e.segments[o],(n=(0,w.TJ)(p,d.getIsDynamic(),t,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,i))&&(r.push(n),i++);return r}(e,i=n),i.segments=e,t.segmentDuration=i.segments[0].duration,t.readThumbnail=function(t,r){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?r(n):i.segments.some(function(n){var e;if(n.mediaStartTime<=t&&n.mediaStartTime+n.duration>t)return e=f.resolve(i.path),u.load({method:"get",url:e.url,request:{range:n.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=c.getSamplesInfo(e.target.response),e=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),t=window.URL.createObjectURL(e);o.push({start:n.mediaStartTime,end:n.mediaStartTime+n.duration,url:t}),r&&r(t)}}),!0})}}):(r.startNumber=n.startNumber,r.segmentDuration=n.segmentDuration,r.timescale=n.timescale,r.templateUrl=(e=n,(t=v.isRelative(e.media)?v.resolve(e.media,f.resolve(e.path).url):e.media)?(0,w.Aj)(t,e.id):"")),0<r.tilesHor&&0<r.tilesVert&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,i.push(r))}function _(){i=[],a=-1,s=null}return t={getTracks:function(){return i},addTracks:function(){var e;r&&d&&(s=d.getMediaInfoForType(r,T.Z.IMAGE))&&((e=d.getVoRepresentations(s))&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===b.Z.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===b.Z.SEGMENT_TIMELINE)&&E(e),e.segmentInfoType===b.Z.SEGMENT_BASE&&E(e,!0)}),0<i.length)&&i.sort(function(e,t){return e.bitrate-t.bitrate})},reset:_,setTrackByIndex:function(e){i&&0!==i.length&&(e>=i.length&&(e=i.length-1),a=e)},getCurrentTrack:function(){return a<0?null:i[a]},getCurrentTrackIndex:function(){return a},getThumbnailRequestForTime:function(e){for(var t,n=d.getVoRepresentations(s),r=0;r<n.length;r++)if(i[a].id===n[r].id){t=n[r];break}return o.getSegmentRequestForTime(s,t,e)}},_(),u=(0,R.Z)(n).create({}),c=(0,I.Z)(n).getInstance(),l=(0,N.Z)(n).create({events:m,eventBus:g,streamInfo:r,timelineConverter:p,dashConstants:y,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:T.Z.IMAGE}),(o=(0,C.Z)(n).create({streamInfo:r,type:T.Z.IMAGE,timelineConverter:p,segmentsController:l,baseURLController:f,debug:h,eventBus:g,events:m,dashConstants:y,urlUtils:v})).initialize(!!d&&d.getIsDynamic()),t}i.__dashjs_factory_name="ThumbnailTracks",t.Z=r.Z.getClassFactory(i)},7417:function(e,t,n){"use strict";var i=n(6398),o=n(8260),r=n(5448),a=n(6934),c=n(9597);function s(){var r,e,n=this.context;function D(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var e=a.parseBuffer(e),t=(0,o.Z)(n).create();return t.setData(e),t}function l(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function u(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return e={parse:D,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.Z(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;n<i.byteLength;){var a=l(i,n),s=u(i,n+4);if(0===a)break;n+a<=i.byteLength&&(0<=e.indexOf(s)?r=new c.Z(n,!0,a):o=n+a),n+=a}return r||new c.Z(o,!1)},getMediaTimescaleFromMoov:function(e){e=D(e),e=e?e.getBox("mdhd"):void 0;return e?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t,n,r,e=D(e),i=e.getBoxes("moof"),o=e.getBoxes("mfhd"),e=e.getBoxes("moof").length,o=o[o.length-1].sequence_number,a=[],s=-1,l=-1,u=0;u<i.length;u++)for(var c=i[u],d=c.getChildBoxes("traf"),f=0;f<d.length;f++){for(var p=d[f],h=p.getChildBox("tfhd"),g=p.getChildBox("tfdt"),m=g.baseMediaDecodeTime,y=p.getChildBoxes("trun"),v=p.getChildBoxes("subs"),E=0;E<y.length;E++)for(var _=y[E],T=_.sample_count,b=(h.base_data_offset||0)+(_.data_offset||0),S=0;S<T;S++){var A=void 0!==(t=_.samples[S]).sample_duration?t.sample_duration:h.default_sample_duration,w=void 0!==t.sample_size?t.sample_size:h.default_sample_size,I={dts:m,cts:m+(void 0!==t.sample_composition_time_offset?t.sample_composition_time_offset:0),duration:A,offset:c.offset+b,size:w,subSizes:[w]};if(v)for(n=0;n<v.length;n++){var R=v[n];if(s<R.entry_count-1&&l<S&&(s++,l+=R.entries[s].sample_delta),S==l){I.subSizes=[];for(var C=R.entries[s],N=0;N<C.subsample_count;N++)I.subSizes.push(C.subsamples[N].subsample_size)}}a.push(I),b+=w,m+=A}r=m-g.baseMediaDecodeTime}return{sampleList:a,lastSequenceNumber:o,totalDuration:r,numSequences:e}},findInitRange:function(e){var t,n=null,e=D(e);return e&&(t=e.getBox("ftyp"),e=e.getBox("moov"),r.debug("Searching for initialization."),e)&&e.isComplete&&(n=(t||e).offset+"-"+(e.offset+e.size-1),r.debug("Found the initialization.  Range: "+n)),n},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.Z(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;n<i.byteLength;){var a=l(i,n),s=u(i,n+4);if(0===a)break;n+a<=i.byteLength&&(0<=e.indexOf(s)?r=new c.Z(n,!0,a,s):o=n+a),n+=a}return r||new c.Z(o,!1)}},r=(0,i.Z)(n).getInstance().getLogger(e),e}s.__dashjs_factory_name="BoxParser",t.Z=r.Z.getSingletonFactory(s)},1715:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var r=n(5448),i=n(7803),l=n(3393),o=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function a(){var e="ManagedMediaSource"in window,t="WebKitMediaSource"in window,n="MediaSource"in window;return e||t||n}function s(){var s,t=!1;return{setConfig:function(e){e&&e.settings&&(s=e.settings)},supportsMediaSource:a,supportsEncryptedMedia:function(){return t},supportsCodec:function(e,t){return t!==l.Z.AUDIO&&t!==l.Z.VIDEO?Promise.resolve(!0):(o=e,a=t,s.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(o.codec&&a===l.Z.AUDIO||a===l.Z.VIDEO&&o.codec&&o.width&&o.height&&o.bitrate&&o.framerate)?(r=e,i=t,new Promise(function(t){var e;r&&r.codec?((e={type:"media-source"})[i]={},e[i].contentType=r.codec,e[i].width=r.width,e[i].height=r.height,e[i].bitrate=parseInt(r.bitrate),e[i].framerate=parseFloat(r.framerate),navigator.mediaCapabilities.decodingInfo(e).then(function(e){t(e.supported)}).catch(function(){t(!1)})):t(!1)})):(n=e,new Promise(function(e){var t;n&&n.codec&&(t=n.codec,n.width&&n.height&&(t+=';width="'+n.width+'";height="'+n.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(t)||"MediaSource"in window&&MediaSource.isTypeSupported(t)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t))?e(!0):e(!1)})));var n,r,i,o,a},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==i.Y.indexOf(e.schemeIdUri)||l.Z.FONT_DOWNLOAD_DVB_SCHEME===e.schemeIdUri}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n,r=e.split(".")[0],e=0===t.indexOf(r),i=0;i<o.length;i++)if(o[i].codec===r){n=o[i];break}return n?e||n.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):e}}}s.__dashjs_factory_name="Capabilities",t.Z=r.Z.getSingletonFactory(s)},2295:function(e,t,n){"use strict";var r=n(5448),i=n(3106);function o(){return{customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,i.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,i.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}o.__dashjs_factory_name="CustomTimeRanges",t.Z=r.Z.getClassFactory(o)},5:function(e,t,n){"use strict";n=n(5448);function r(){function e(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}function t(e,t){var n=s;return t&&c(e)?(d(e)&&(n=l),n=(n=f(e)?u:n)(t),t="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"",[n,e].join(t)):e}var n,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,o=/^https:\/\//i,a=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(e=-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e).substring(0,n+1):""}function l(e){e=e.match(a);return e?e[1]:""}function u(e){e=e.match(r);return e?e[0]:""}function c(e){return!r.test(e)}function d(e){return c(e)&&"/"===e.charAt(0)}function f(e){return 0===e.indexOf("//")}try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||t}return{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:c,isPathAbsolute:d,isSchemeRelative:f,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return o.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}r.__dashjs_factory_name="DefaultURLUtils",t.Z=n.Z.getSingletonFactory(r)},8260:function(e,t,n){"use strict";var r=n(2839),n=n(5448);function i(){var a;function t(e){var t=[];if(e&&a&&"function"==typeof a.fetchAll)for(var n,r=a.fetchAll(e),i=0,o=r.length;i<o;i++)(n=s(r[i]))&&t.push(n);return t}function s(e){var t;return e?(t=new r.Z(e),e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t):null}return{getBox:function(e){return e&&a&&a.boxes&&0!==a.boxes.length&&"function"==typeof a.fetch?s(a.fetch(e)):null},getBoxes:t,setData:function(e){a=e},getLastBox:function(){var e;return a&&a.boxes&&a.boxes.length&&0<(e=t(a.boxes[a.boxes.length-1].type)).length?e[e.length-1]:null}}}i.__dashjs_factory_name="IsoFile",t.Z=n.Z.getClassFactory(i)},7473:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});n=n(5448);function r(e,t){var n={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(t.modifyRequest(n)).then(function(){return Object.assign(e,n,{withCredentials:"include"===n.credentials})})}function i(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}i.__dashjs_factory_name="RequestModifier",t.Z=n.Z.getSingletonFactory(i)},3106:function(e,t,n){"use strict";n.d(t,{PS:function(){return o},SE:function(){return a}});var r=n(3393);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(i(e)!==t)throw r.Z.BAD_ARGUMENT_ERROR}function a(e){if(null===e||isNaN(e)||e%1!=0)throw r.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(e,t,n){"use strict";var r=n(5448),a=n(5);function i(){var i,o=[],e=this.context;function n(e,t,n){var r=function(e){for(var t=0;t<o.length;t++)if(o[t].regex.test(e))return o[t].utils;return i}(n||t);return(r&&"function"==typeof r[e]?r:i)[e](t,n)}return i=(0,a.Z)(e).getInstance(),{registerUrlRegex:function(e,t){o.push({regex:e,utils:t})},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}i.__dashjs_factory_name="URLUtils";n=r.Z.getSingletonFactory(i);t.Z=n},5459:function(e,t){"use strict";t.Z=function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.code=t||null,this.message=n||null,this.data=r||null}},3186:function(e,t,n){"use strict";var o=n(7855);n=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.action=t.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}for(var e=t.prototype,n=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===o.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?o.w.INIT_SEGMENT_TYPE:o.w.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}],r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return t}();n.ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",t.Z=n},2839:function(e,t){"use strict";var n=function(){function s(e){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");if(this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new s(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var n=0;n<e.references.length;n++){var r={reference_type:e.references[n].reference_type,referenced_size:e.references[n].referenced_size,subsegment_duration:e.references[n].subsegment_duration};this.references.push(r)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var i=0,o=e.samples.length;i<o;i++){var a={sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset};this.samples.push(a)}}break;case"prft":this.version=e.version,this.reference_track_ID=e.reference_track_ID,this.ntp_timestamp_sec=e.ntp_timestamp_sec,this.ntp_timestamp_frac=e.ntp_timestamp_frac,this.media_time=e.media_time,this.flags=e.flags}}for(var e=s.prototype,t=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}],n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return s}();t.Z=n},9597:function(e,t){"use strict";t.Z=function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.lastCompletedOffset=t,this.found=n,this.size=r}},2128:function(e,t){"use strict";t.Z=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{O:function(){return o},w:function(){return i}});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},o=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.CONTENT_STEERING_TYPE="ContentSteering",i.OTHER_TYPE="other"},3039:function(e,t){"use strict";function n(u,c){return function(e,t){for(var n,r,i,o=d(e,"tag"),a=d(null==t?"*":t,"range"),s=[],l=-1;++l<a.length;)if(n=a[l].toLowerCase(),c||"*"!==n){for(r=-1,i=[];++r<o.length;)if(u(o[r].toLowerCase(),n)){if(!c)return o[r];s.push(o[r])}else i.push(o[r]);o=i}return c?s:void 0}}function d(e,t){e=e&&"string"==typeof e?[e]:e;if(e&&"object"==typeof e&&"length"in e)return e;throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string")}t.basicFilter=n(function(e,t){return"*"===t||e===t||-1<e.indexOf(t+"-")},!0),t.extendedFilter=n(function(e,t){var n=e.split("-"),r=t.split("-"),i=0,o=0;if("*"===r[o]||n[i]===r[o]){for(i++,o++;o<r.length;)if("*"!==r[o]){if(!n[i])return;if(n[i]!==r[o]){if(1===n[i].length)return;i++}else i++,o++}else o++;return 1}},!0),t.lookup=n(function(e,t){for(var n,r=t;;){if("*"===r||e===r)return 1;if((n=r.lastIndexOf("-"))<0)return;"-"===r.charAt(n-2)&&(n-=2),r=r.slice(0,n)}})},3973:function(e,t,n){"use strict";e.exports=n(3854)},3854:function(e,t,n){"use strict";var s=n(2415),l=n(3039),u=n(7778),c=n(5813),d=n(3165),f=n(9460),p=(e.exports=function(e,t){var n,r=t||{},i=s.parse(String(e||"").toLowerCase(),r),o=s.stringify(i),a=-1;if(!o)return o;for(;++a<u.length;)l.extendedFilter(o,u[a].from).length&&(g(i,u[a].from,u[a].to),o=s.stringify(i));for(a=-1;++a<c.length;)m(i,c[a].from.field,c[a].from.value)&&y(i,c[a].to.field,c[a].to.value);for(o=s.stringify(Object.assign({},i,h)),a=-1;++a<d.length;)o===d[a]&&(g(i,d[a],d[a].split("-").slice(0,-1).join("-")),o=s.stringify(Object.assign({},i,h)));if(i.extensions.sort(v),r.warning)for(n in f)p.call(f[n],i[n])&&r.warning("Deprecated "+n+" `"+i[n]+"`, expected one of `"+f[n][i[n]].join("`, `")+"`",null,7);return i.script&&(i.script=i.script.charAt(0).toUpperCase()+i.script.slice(1)),i.region&&(i.region=i.region.toUpperCase()),s.stringify(i)},{}.hasOwnProperty),r=new Intl.Collator,h={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function g(e,t,n){var r,i=s.parse(t),o=s.parse(n),a=[];for(r in i)i[r]&&i[r].length&&m(e,r,i[r])&&a.push(r);for(r in o)o[r]&&o[r].length&&(-1<a.indexOf(r)||!e[r]||!e[r].length)&&y(e,r,o[r])}function m(e,t,n){var r,i,o,a,s=!1;if(n){if(i=r=e[t],r&&"object"==typeof r)for(i=[],o=-1;++o<r.length;)a=r[o],n.indexOf(a)<0?i.push(a):s=!0;else r===n&&(s=!(i=null));e[t]=i}return s}function y(e,t,n){var r,i,o,a=e[t];if(a&&"object"==typeof a)for(r=[].concat(n),i=-1;++i<r.length;)o=r[i],a.indexOf(o)<0&&a.push(o);else e[t]=n}function v(e,t){return r.compare(e.singleton,t.singleton)}},2415:function(e,t,n){"use strict";t.parse=n(6903),t.stringify=n(6713)},6903:function(e,t,n){"use strict";var f=n(2219),p=n(3516),h=n(395),g=n(858),m=n(8589),y=(e.exports=function e(t,n){var r,i,o,a=n||{},s={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},l=String(t),u=l.toLowerCase(),c=0;if(null==t)throw new Error("Expected string, got `"+t+"`");if(y.call(m,u))return(null==a.normalize||a.normalize)&&m[u]?e(m[u]):(s[-1===g.indexOf(u)?"irregular":"regular"]=l,s);for(;p(u.charCodeAt(c))&&c<9;)c++;if(1<c&&c<9){if(s.language=l.slice(0,c),c<4)for(i=0;45===u.charCodeAt(c)&&p(u.charCodeAt(c+1))&&p(u.charCodeAt(c+2))&&p(u.charCodeAt(c+3))&&!p(u.charCodeAt(c+4));){if(2<i)return d(c,3,"Too many extended language subtags, expected at most 3 subtags");s.extendedLanguageSubtags.push(l.slice(c+1,c+4)),c+=4,i++}for(45===u.charCodeAt(c)&&p(u.charCodeAt(c+1))&&p(u.charCodeAt(c+2))&&p(u.charCodeAt(c+3))&&p(u.charCodeAt(c+4))&&!p(u.charCodeAt(c+5))&&(s.script=l.slice(c+1,c+5),c+=5),45===u.charCodeAt(c)&&(p(u.charCodeAt(c+1))&&p(u.charCodeAt(c+2))&&!p(u.charCodeAt(c+3))?(s.region=l.slice(c+1,c+3),c+=3):h(u.charCodeAt(c+1))&&h(u.charCodeAt(c+2))&&h(u.charCodeAt(c+3))&&!h(u.charCodeAt(c+4))&&(s.region=l.slice(c+1,c+4),c+=4));45===u.charCodeAt(c);){for(o=r=c+1;f(u.charCodeAt(o));){if(7<o-r)return d(o,1,"Too long variant, expected at most 8 characters");o++}if(!(4<o-r||3<o-r&&h(u.charCodeAt(r))))break;s.variants.push(l.slice(r,o)),c=o}for(;45===u.charCodeAt(c)&&120!==u.charCodeAt(c+1)&&f(u.charCodeAt(c+1))&&45===u.charCodeAt(c+2)&&f(u.charCodeAt(c+3));){for(o=c+2,i=0;45===u.charCodeAt(o)&&f(u.charCodeAt(o+1))&&f(u.charCodeAt(o+2));)for(o=(r=o+1)+2,i++;f(u.charCodeAt(o));){if(7<o-r)return d(o,2,"Too long extension, expected at most 8 characters");o++}if(!i)return d(o,4,"Empty extension, extensions must have at least 2 characters of content");s.extensions.push({singleton:l.charAt(c+1),extensions:l.slice(c+3,o).split("-")}),c=o}}else c=0;if(0===c&&120===u.charCodeAt(c)||45===u.charCodeAt(c)&&120===u.charCodeAt(c+1))for(o=c=c?c+2:1;45===u.charCodeAt(o)&&f(u.charCodeAt(o+1));){for(o=r=c+1;f(u.charCodeAt(o));){if(7<o-r)return d(o,5,"Too long private-use area, expected at most 8 characters");o++}s.privateuse.push(l.slice(c+1,o)),c=o}return c!==l.length?d(c,6,"Found superfluous content after tag"):s;function d(e,t,n){return a.warning&&a.warning(n,t,e),a.forgiving?s:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}},{}.hasOwnProperty)},6713:function(e){"use strict";e.exports=function(e){var t,n,r,e=e||{},i=[];if(e.irregular||e.regular)return e.irregular||e.regular;if(e.language)for(i=i.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),t=e.extensions||[],n=-1;++n<t.length;)(r=t[n]).singleton&&r.extensions&&r.extensions.length&&(i=i.concat(r.singleton,r.extensions));return(i=e.privateuse&&e.privateuse.length?i.concat("x",e.privateuse):i).join("-")}},1549:function(e,n,t){"use strict";var A=t(6693),o=t(2165),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,r=(n.Buffer=d,n.SlowBuffer=function(e){return d.alloc(+(e=+e!=e?0:e))},n.INSPECT_MAX_BYTES=50,2147483647);function u(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,d.prototype),e}function d(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function i(e,t,n){if("string"==typeof e){var r=e,i=t;if(d.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return(r=(a=u(o=0|h(r,i))).write(r,i))!==o?a.slice(0,r):a;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return D(o=e,Uint8Array)?f((r=new Uint8Array(o)).buffer,r.byteOffset,r.byteLength):c(o);var o;if(null!=e){if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return d.from(a,t,n);var s,l=d.isBuffer(i=e)?(0!==(s=u(l=0|p(i.length))).length&&i.copy(s,0,0,l),s):void 0!==i.length?"number"!=typeof i.length||O(i.length)?u(0):c(i):"Buffer"===i.type&&Array.isArray(i.data)?c(i.data):void 0;if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return a(e),u(e<0?0:0|p(e))}function c(e){for(var t=e.length<0?0:0|p(e.length),n=u(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return Object.setPrototypeOf(e,d.prototype),e}function p(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function h(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(e).length;default:if(i)return r?-1:R(e).length;t=(""+t).toLowerCase(),i=!0}}function l(e,t,n){var r,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,a=t,s=n,l=o.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=a=!a||a<0?0:a;c<s;++c)u+=M[o[c]];return u;case"utf8":case"utf-8":return w(this,t,n);case"ascii":var d=this,l=t,f=n,p="";f=Math.min(d.length,f);for(var h=l;h<f;++h)p+=String.fromCharCode(127&d[h]);return p;case"latin1":case"binary":var g=this,a=t,m=n,y="";m=Math.min(g.length,m);for(var v=a;v<m;++v)y+=String.fromCharCode(g[v]);return y;case"base64":return E=this,r=n,0===(_=t)&&r===E.length?A.fromByteArray(E):A.fromByteArray(E.slice(_,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var E=t,_=n,T=this.slice(E,_),b="",S=0;S<T.length-1;S+=2)b+=String.fromCharCode(T[S]+256*T[S+1]);return b;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=O(n=+n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var u=-1,c=n;c<a;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(c=n=a<n+s?a-s:n;0<=c;c--){for(var d=!0,f=0;f<s;f++)if(l(e,c+f)!==l(t,f)){d=!1;break}if(d)return c}return-1}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,d=239<u?4:223<u?3:191<u?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,d=1):65535<c&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}var f=r,p=f.length;if(p<=v)return String.fromCharCode.apply(String,f);for(var h="",g=0;g<p;)h+=String.fromCharCode.apply(String,f.slice(g,g+=v));return h}n.kMaxLength=r,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=i,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return t=t,n=n,a(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?u(e).fill(t,n):u(e).fill(t):u(e)},d.allocUnsafe=s,d.allocUnsafeSlow=s,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(D(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=d.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(D(o,Uint8Array))r+o.length>n.length?d.from(o).copy(n,r):Uint8Array.prototype.set.call(n,o,r);else{if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r)}r+=o.length}return n},d.byteLength=h,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):l.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(d.prototype[t]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(D(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l,u,c,d=!1;;)switch(r){case"hex":var f=this,p=e,h=t,g=n,m=(h=Number(h)||0,f.length-h);(!g||(g=Number(g))>m)&&(g=m),(m=p.length)/2<g&&(g=m/2);for(var y=0;y<g;++y){var v=parseInt(p.substr(2*y,2),16);if(O(v))return y;f[h+y]=v}return y;case"utf8":case"utf-8":return m=t,c=n,N(R(e,(u=this).length-m),u,m,c);case"ascii":case"latin1":case"binary":return u=this,c=t,l=n,N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),u,c,l);case"base64":return l=this,a=t,s=n,N(C(e),l,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=n,N(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,(o=this).length-a),o,a,s);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function b(e,t,n,r,i){return t=+t,n>>>=0,i||T(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function S(e,t,n,r,i){return t=+t,n>>>=0,i||T(e,0,n,8),o.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length,n=((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(n,d.prototype),n},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),o.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),o.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),o.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),o.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return b(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return b(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=e.length-t<r-n?e.length-t+n:r)-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===r&&i<128||"latin1"===r)&&(e=i)}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");var o;if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var a=d.isBuffer(e)?e:d.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var I=/[^+/0-9A-Za-z-_]/g;function R(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function C(e){return A.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function O(e){return e!=e}var M=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},6693:function(e,t){"use strict";t.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],n=n[1],i=new u(3*(r+n)/4-n),o=0,a=0<n?r-4:r,s=0;s<a;s+=4)t=l[e.charCodeAt(s)]<<18|l[e.charCodeAt(s+1)]<<12|l[e.charCodeAt(s+2)]<<6|l[e.charCodeAt(s+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=255&t;return 2===n&&(t=l[e.charCodeAt(s)]<<2|l[e.charCodeAt(s+1)]>>4,i[o++]=255&t),1===n&&(t=l[e.charCodeAt(s)]<<10|l[e.charCodeAt(s+1)]<<4|l[e.charCodeAt(s+2)]>>2,i[o++]=t>>8&255,i[o++]=255&t),i},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(function(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s[(r=r)>>18&63]+s[r>>12&63]+s[r>>6&63]+s[63&r]);return i.join("")}(e,o,a<o+16383?a:o+16383));return 1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),i.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,i=n.length;r<i;++r)s[r]=n[r],l[n.charCodeAt(r)]=r;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},2165:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,i=e[t+d];for(d+=f,o=i&(1<<-c)-1,i>>=-c,c+=s;0<c;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,r),o-=u}return(i?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l=8*o-i-1,u=(1<<l)-1,c=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+c?d/r:d*Math.pow(2,1-c))*r&&(a++,r/=2),u<=a+c?(s=0,a=u):1<=a+c?(s=(t*r-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*o}},6934:function(e,t){var i={parseBuffer:function(e){return new o(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(r.prototype._boxProcessors[e]=t)},createFile:function(){return new o},createBox:function(e,t,n){e=r.create(e);return t&&t.append(e,n),e},createFullBox:function(e,t,n){e=i.createBox(e,t,n);return e.version=0,e.flags=0,e},Utils:{}},o=(i.Utils.dataViewToString=function(e,t){t=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var n=[],r=0;if("utf-8"===t)for(;r<e.byteLength;){var i=e.getUint8(r++);i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e.getUint8(r++))<<12),i|=(63&e.getUint8(r++))<<6),i|=63&e.getUint8(r++)),n.push(String.fromCharCode(i))}else for(;r<e.byteLength;)n.push(String.fromCharCode(e.getUint8(r++)));return n.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var o=0;o<e.boxes.length;o++)if(r===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=i.parseBuffer,t.addBoxProcessor=i.addBoxProcessor,t.createFile=i.createFile,t.createBox=i.createBox,t.createFullBox=i.createFullBox,t.Utils=i.Utils,i.Cursor=function(e){this.offset=void 0===e?0:e},function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))}),r=(o.prototype.fetch=function(e){e=this.fetchAll(e,!0);return e.length?e[0]:null},o.prototype.fetchAll=function(e,t){var n=[];return o._sweep.call(this,e,n,t),n},o.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=r.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},o._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;o._sweep.call(this.boxes[r],e,t,n)}},o.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},function(){this._cursor=new i.Cursor});r.parse=function(e){var t=new r;return t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},r.create=function(e){var t=new r;return t.type=e,t.boxes=[],t},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],r.prototype._boxProcessors={},r.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},r.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},r.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},r.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},r.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(r.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},r.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},r.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(4+n),t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},r.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},r.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},r.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},r.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},r.prototype._readData=function(e){var t,e=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);return 0<e?(t=new Uint8Array(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e,t):null},r.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t&&i.Utils.dataViewToString(t)},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:r=255&t,this._rawo.setUint16(i,n=(16776960&t)>>8),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},r.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},r.prototype._writeTemplate=function(e,t){var n=Math.floor(t),t=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,t)},r.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},r.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},r.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.avc2=r.prototype._boxProcessors.avc3=r.prototype._boxProcessors.avc4=r.prototype._boxProcessors.hvc1=r.prototype._boxProcessors.hev1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)})},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},r.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},5530:function(e,t,n){"use strict";e.exports=n(6146).polyfill()},6146:function(e,t,k){e.exports=function(){"use strict";function l(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,i=void 0,s=function(e,t){d[r]=e,d[r+1]=t,2===(r+=2)&&(i?i(f):m())},e="undefined"!=typeof window?window:void 0,o=e||{},o=o.MutationObserver||o.WebKitMutationObserver,a="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(f,1)}}var d=new Array(1e3);function f(){for(var e=0;e<r;e+=2)(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;r=0}var p,h,g,m=void 0;function y(e,t){var n,r=this,i=new this.constructor(_),o=(void 0===i[E]&&O(i),r._state);return o?(n=arguments[o-1],s(function(){return N(o,i,n,r._result)})):R(r,i,e,t),i}function v(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(S(t=new this(_),e),t)}var m=a?function(){return process.nextTick(f)}:o?(h=0,a=new o(f),g=document.createTextNode(""),a.observe(g,{characterData:!0}),function(){g.data=h=++h%2}):u?((p=new MessageChannel).port1.onmessage=f,function(){return p.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(f)}:c()}catch(e){return c()}}:c)(),E=Math.random().toString(36).substring(2);function _(){}var T=void 0;function b(e,t,n){var i,o,r,a;t.constructor===e.constructor&&n===y&&t.constructor.resolve===v?(r=e,1===(a=t)._state?w(r,a._result):2===a._state?I(r,a._result):R(a,void 0,function(e){return S(r,e)},function(e){return I(r,e)})):void 0!==n&&l(n)?(i=t,o=n,s(function(n){var r=!1,e=function(e,t){try{e.call(t,function(e){r||(r=!0,i!==e?S(n,e):w(n,e))},function(e){r||(r=!0,I(n,e))})}catch(e){return e}}(o,i,n._label);!r&&e&&(r=!0,I(n,e))},e)):w(e,t)}function S(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)w(e,t);else{n=void 0;try{n=t.then}catch(t){return void I(e,t)}b(e,t,n)}var n}function A(e){e._onerror&&e._onerror(e._result),C(e)}function w(e,t){e._state===T&&(e._result=t,e._state=1,0!==e._subscribers.length)&&s(C,e)}function I(e,t){e._state===T&&(e._state=2,e._result=t,s(A,e))}function R(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=n,i[o+2]=r,0===o&&e._state&&s(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?N(n,r,i,o):i(o);e._subscribers.length=0}}function N(e,t,n,r){var i=l(n),o=void 0,a=void 0,s=!0;if(i){try{o=n(r)}catch(e){s=!1,a=e}if(t===o)return void I(t,new TypeError("A promises callback cannot return that same promise."))}else o=r;t._state===T&&(i&&s?S(t,o):!1===s?I(t,a):1===e?w(t,o):2===e&&I(t,o))}var D=0;function O(e){e[E]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}P.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},P.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===v){var i,o=void 0,a=void 0,s=!1;try{o=t.then}catch(t){s=!0,a=t}o===y&&t._state!==T?this._settledAt(t._state,e,t._result):"function"!=typeof o?(this._remaining--,this._result[e]=t):n===L?(i=new n(_),s?I(i,a):b(i,t,o),this._willSettleAt(i,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},P.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===T&&(this._remaining--,2===e?I(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},P.prototype._willSettleAt=function(e,t){var n=this;R(e,void 0,function(e){return n._settledAt(1,t,e)},function(e){return n._settledAt(2,t,e)})};var M=P;function P(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[E]||O(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||w(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}x.prototype.catch=function(e){return this.then(null,e)},x.prototype.finally=function(t){var n=this.constructor;return l(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)};var L=x;function x(e){if(this[E]=D++,this._result=this._state=void 0,this._subscribers=[],_!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof x))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n(function(e){S(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}}return L.prototype.then=y,L.all=function(e){return new M(this,e).promise},L.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=v,L.reject=function(e){var t=new this(_);return I(t,e),t},L._setScheduler=function(e){i=e},L._setAsap=function(e){s=e},L._asap=s,L.polyfill=function(){var e=void 0;if(void 0!==k.g)e=k.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=L},L.Promise=L}()},1159:function(e){"use strict";var t="object"==typeof Reflect?Reflect:null,l=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},n=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(i,o){return new Promise(function(e,t){function n(e){i.removeListener(o,r),t(e)}function r(){"function"==typeof i.removeListener&&i.removeListener("error",n),e([].slice.call(arguments))}h(i,o,r,{once:!0}),"error"!==o&&"function"==typeof i.on&&h(i,"error",n,{once:!0})})},(i.EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function s(e,t,n,r){var i,o;return u(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]),void 0===o?(o=i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(i=a(e))&&o.length>i&&!o.warned&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,console)&&console.warn&&console.warn(r)),e}function c(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function d(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var r=e,i=new Array(r.length),o=0;o<i.length;++o)i[o]=r[o].listener||r[o];return i}return p(e,e.length)}}function f(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(n,r,i,o){if("function"==typeof n.on)o.once?n.once(r,i):n.on(r,i);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(r,function e(t){o.once&&n.removeEventListener(r,e),i(t)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if((o=0<t.length?t[0]:o)instanceof Error)throw o;r=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw r.context=o,r}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)l(o,this,t);else for(var a=o.length,s=p(o,a),n=0;n<a;++n)l(s[n],this,t);return!0},i.prototype.on=i.prototype.addListener=function(e,t){return s(this,e,t,!1)},i.prototype.prependListener=function(e,t){return s(this,e,t,!0)},i.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},i.prototype.off=i.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0!==(r=this._events)&&void 0!==(n=r[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(0===i)n.shift();else{var s=n;var l=i;for(;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},3101:function(e){"use strict";var u=Array.isArray,c=Object.keys,d=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,o,a=u(t),s=u(n);if(a&&s){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1}else{if(a!=s)return!1;a=t instanceof Date,s=n instanceof Date;if(a!=s)return!1;if(a&&s)return t.getTime()==n.getTime();a=t instanceof RegExp,s=n instanceof RegExp;if(a!=s)return!1;if(a&&s)return t.toString()==n.toString();var l=c(t);if((i=l.length)!==c(n).length)return!1;for(r=i;0!=r--;)if(!d.call(n,l[r]))return!1;for(r=i;0!=r--;)if(!e(t[o=l[r]],n[o]))return!1}return!0}return t!=t&&n!=n}},3362:function(r,e,t){function h(e,t,n,r){var i=r&&"seq"===r.timeContainer,o=0,a=(r&&(o=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o,t.begin),s=null;if("sets"in t)for(var l=0;l<t.sets.length;l++)h(e,t.sets[l],s,t),a="seq"===t.timeContainer?t.sets[l].end:Math.max(a,t.sets[l].end),s=t.sets[l];if("contents"in t){if("contents"in t)for(var u=0;u<t.contents.length;u++)h(e,t.contents[u],s,t),a="seq"===t.timeContainer?t.contents[u].end:Math.max(a,t.contents[u].end),s=t.contents[u]}else a=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=a,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function g(e){this.node=e}function m(){this.events=[],this.head=new y,this.body=null}function y(){this.styling=new v,this.layout=new T}function v(){this.styles={},this.initials={}}function E(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function _(){this.styleAttrs=null}function T(){this.regions={}}function b(e,t){n.call(this,"image"),this.src=e,this.type=t}function n(e){this.kind=e}function i(e){this.id=e}function a(e){this.regionID=e}function s(e){this.styleAttrs=e}function l(e){this.sets=e}function u(e){this.contents=e}function c(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function S(){n.call(this,"body")}function A(){n.call(this,"div")}function w(){n.call(this,"p")}function I(){n.call(this,"span")}function o(){n.call(this,"span")}function R(){n.call(this,"br")}function C(){}function F(){}function U(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function d(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function f(e,t){var n={};if(null!==e)for(var r in e.attributes){var i,o=e.attributes[r].uri+" "+e.attributes[r].local,a=x.byQName[o];void 0!==a&&(null!==(i=a.parse(e.attributes[r].value))?(n[o]=i,a===x.byName.zIndex&&O(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):M(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[r].value))}return n}function p(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function N(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function B(e,t,n,r){for(var i=t.length-1;0<=i;i--){var o=t[i];o in e.styles?D(e.styles[o].styleAttrs,n):M(r,"Non-existant style id referenced")}}function D(e,t){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}function O(e,t){if(e&&e.warn&&e.warn(t))throw t}function M(e,t){if(e&&e.error&&e.error(t))throw t}function P(e,t){throw e&&e.fatal&&e.fatal(t),t}function Z(e,t){for(var n,r=0,i=e.length-1;r<=i;){var o=e[n=Math.floor((r+i)/2)];if(o<t)r=n+1;else{if(!(t<o))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}var q,L,x,k;e=e,q="undefined"==typeof sax?t(5378):sax,L="undefined"==typeof imscNames?t(210):imscNames,x="undefined"==typeof imscStyles?t(6811):imscStyles,k="undefined"==typeof imscUtils?t(5926):imscUtils,e.fromXML=function(e,s,l){var t,n,r=q.parser(!0,{xmlns:!0}),u=[],c=[],d=[],f=0,p=null,i=(r.onclosetag=function(e){if(u[0]instanceof C)null!==p.head&&null!==p.head.styling&&B(p.head.styling,u[0].styleRefs,u[0].styleAttrs,s),delete u[0].styleRefs;else if(u[0]instanceof v)for(var t in u[0].styles)u[0].styles.hasOwnProperty(t)&&function e(t,n,r){for(;0<n.styleRefs.length;){var i=n.styleRefs.pop();i in t.styles?(e(t,t.styles[i],r),D(t.styles[i].styleAttrs,n.styleAttrs)):M(r,"Non-existant style id referenced")}}(u[0],u[0].styles[t],s);else if(u[0]instanceof w||u[0]instanceof I){if(1<u[0].contents.length){for(var n=[u[0].contents[0]],r=1;r<u[0].contents.length;r++)u[0].contents[r]instanceof o&&n[n.length-1]instanceof o?n[n.length-1].text+=u[0].contents[r].text:n.push(u[0].contents[r]);u[0].contents=n}u[0]instanceof I&&1===u[0].contents.length&&u[0].contents[0]instanceof o&&(u[0].text=u[0].contents[0].text,delete u[0].contents)}else u[0]instanceof g&&(u[0].node.uri===L.ns_tt&&"metadata"===u[0].node.local?f--:0<f&&l&&"onCloseTag"in l&&l.onCloseTag());d.shift(),c.shift(),u.shift()},r.ontext=function(e){if(void 0!==u[0])if(u[0]instanceof I||u[0]instanceof w){if(u[0]instanceof I){var t=u[0].styleAttrs[x.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}t=new o;t.initFromText(p,u[0],e,c[0],d[0],s),u[0].contents.push(t)}else u[0]instanceof g&&0<f&&l&&"onText"in l&&l.onText(e)},r.onopentag=function(e){var t,n,r=e.attributes["xml:space"],r=(d.unshift(r?r.value:0===d.length?"default":d[0]),e.attributes["xml:lang"]);if(c.unshift(r?r.value:0===c.length?"":c[0]),e.uri===L.ns_tt)if("tt"===e.local)null!==p&&P(s,"Two <tt> elements at ("+this.line+","+this.column+")"),(p=new m).initFromNode(e,c[0],s),u.unshift(p);else if("head"===e.local)u[0]instanceof m||P(s,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),u.unshift(p.head);else if("styling"===e.local)u[0]instanceof y||P(s,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),u.unshift(p.head.styling);else if("style"===e.local)u[0]instanceof v?((n=new E).initFromNode(e,s),n.id?p.head.styling.styles[n.id]=n:M(s,"<style> element missing @id attribute"),u.unshift(n)):u[0]instanceof C?((n=new E).initFromNode(e,s),D(n.styleAttrs,u[0].styleAttrs),u.unshift(n)):P(s,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===e.local)if(u[0]instanceof v){for(var i in(t=new _).initFromNode(e,s),t.styleAttrs)t.styleAttrs.hasOwnProperty(i)&&(p.head.styling.initials[i]=t.styleAttrs[i]);u.unshift(t)}else P(s,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else"layout"===e.local?(u[0]instanceof y||P(s,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),u.unshift(p.head.layout)):"region"===e.local?(u[0]instanceof T||P(s,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(r=new C).initFromNode(p,e,c[0],s),!r.id||r.id in p.head.layout.regions?M(s,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):p.head.layout.regions[r.id]=r,u.unshift(r)):"body"===e.local?(u[0]instanceof m||P(s,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==p.body&&P(s,"Second <body> element at "+this.line+","+this.column+")"),(n=new S).initFromNode(p,e,c[0],s),p.body=n,u.unshift(n)):"div"===e.local?(u[0]instanceof A||u[0]instanceof S||P(s,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(r=new A).initFromNode(p,u[0],e,c[0],s),(n=r.styleAttrs[x.byName.backgroundImage.qname])&&(r.contents.push(new b(n)),delete r.styleAttrs[x.byName.backgroundImage.qname]),u[0].contents.push(r),u.unshift(r)):"image"===e.local?(u[0]instanceof A||P(s,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),(n=new b).initFromNode(p,u[0],e,c[0],s),u[0].contents.push(n),u.unshift(n)):"p"===e.local?(u[0]instanceof A||P(s,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(r=new w).initFromNode(p,u[0],e,c[0],s),u[0].contents.push(r),u.unshift(r)):"span"===e.local?(u[0]instanceof I||u[0]instanceof w||P(s,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(n=new I).initFromNode(p,u[0],e,c[0],d[0],s),u[0].contents.push(n),u.unshift(n)):"br"===e.local?(u[0]instanceof I||u[0]instanceof w||P(s,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(r=new R).initFromNode(p,u[0],e,c[0],s),u[0].contents.push(r),u.unshift(r)):"set"===e.local?(u[0]instanceof I||u[0]instanceof w||u[0]instanceof A||u[0]instanceof S||u[0]instanceof C||u[0]instanceof R||P(s,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(n=new F).initFromNode(p,u[0],e,s),u[0].sets.push(n),u.unshift(n)):u.unshift(new g(e));else u.unshift(new g(e));if(u[0]instanceof g)if(e.uri===L.ns_tt&&"metadata"===e.local)f++;else if(0<f&&l&&"onOpenTag"in l){var o,a=[];for(o in e.attributes)a[e.attributes[o].uri+" "+e.attributes[o].local]={uri:e.attributes[o].uri,local:e.attributes[o].local,value:e.attributes[o].value};l.onOpenTag(e.uri,e.local,a)}},r.write(e).close(),delete p.head.styling.styles,!1);for(t in p.head.layout.regions)if(p.head.layout.regions.hasOwnProperty(t)){i=!0;break}for(n in i||(r=C.prototype.createDefaultRegion(p.lang),p.head.layout.regions[r.id]=r),p.head.layout.regions)p.head.layout.regions.hasOwnProperty(n)&&h(p,p.head.layout.regions[n],null,null);return p.body&&h(p,p.body,null,null),p.body&&function e(t){if("contents"in t)for(var n=("styleAttrs"in t?t.styleAttrs[x.byName.ruby.qname]:null),r="span"===t.kind&&("container"===n||"textContainer"===n||"baseContainer"===n),i=t.contents.length-1;0<=i;i--)!r||"styleAttrs"in t.contents[i]&&x.byName.ruby.qname in t.contents[i].styleAttrs?e(t.contents[i]):delete t.contents[i]}(p.body),p},m.prototype.initFromNode=function(e,t,n){i=n,a=p(e,L.ns_ttp,"cellResolution"),u=15,s=32,null!==a&&(null!==(a=/(\d+) (\d+)/.exec(a))?(s=parseInt(a[1]),u=parseInt(a[2])):O(i,"Malformed cellResolution value (using initial value instead)"));var r,i,o,a={w:s,h:u},s=(this.cellLength={h:new k.ComputedLength(0,1/a.h),w:new k.ComputedLength(1/a.w,0)},i=n,u=p(s=e,L.ns_ttp,"frameRate"),a=30,null!==u&&(null!==(r=/(\d+)/.exec(u))?a=parseInt(r[1]):O(i,"Malformed frame rate attribute (using initial value instead)")),l=p(s,L.ns_ttp,"frameRateMultiplier"),o=1,null!==l&&(null!==(r=/(\d+) (\d+)/.exec(l))?o=parseInt(r[1])/parseInt(r[2]):O(i,"Malformed frame rate multiplier attribute (using initial value instead)")),l=o*a,o=1,null===(a=p(s,L.ns_ttp,"tickRate"))?null!==u&&(o=l):null!==(r=/(\d+)/.exec(a))?o=parseInt(r[1]):O(i,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:o}),l=(this.effectiveFrameRate=s.effectiveFrameRate,this.tickRate=s.tickRate,this.aspectRatio=(u=n,r=p(a=e,L.ns_ittp,"aspectRatio"),(i=null)!==(r=null===r?p(a,L.ns_ttp,"displayAspectRatio"):r)&&(null!==(a=/(\d+)\s+(\d+)/.exec(r))?(r=parseInt(a[1]),a=parseInt(a[2]),0!==r&&0!==a?i=r/a:M(u,"Illegal aspectRatio values (ignoring)")):M(u,"Malformed aspectRatio attribute (ignoring)")),i),p(e,L.ns_ttp,"timeBase")),u=(null!==l&&"media"!==l&&P(n,"Unsupported time base"),o=n,null===(s=p(e,L.ns_tts,"extent"))?null:2!==(s=s.split(" ")).length?(O(o,"Malformed extent (ignoring)"),null):(a=k.parseLength(s[0]),(s=k.parseLength(s[1]))&&a?{h:s,w:a}:(O(o,"Malformed extent values (ignoring)"),null)));null===u?this.pxLength={h:null,w:null}:("px"===u.h.unit&&"px"===u.w.unit||P(n,"Extent on TT must be in px or absent"),this.pxLength={h:new k.ComputedLength(0,1/u.h.value),w:new k.ComputedLength(1/u.w.value,0)}),this.dimensions={h:new k.ComputedLength(0,1),w:new k.ComputedLength(1,0)},this.lang=t},m.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=Z(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end===Number.POSITIVE_INFINITY)||(t=Z(this.events,e.end)).found||this.events.splice(t.index,0,e.end)},m.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},m.prototype.getMediaTimeEvents=function(){return this.events},E.prototype.initFromNode=function(e,t){this.id=U(e),this.styleAttrs=f(e,t),this.styleRefs=d(e)},_.prototype.initFromNode=function(e,t){for(var n in this.styleAttrs={},e.attributes){var r;e.attributes[n].uri!==L.ns_itts&&e.attributes[n].uri!==L.ns_ebutts&&e.attributes[n].uri!==L.ns_tts||(r=e.attributes[n].uri+" "+e.attributes[n].local,this.styleAttrs[r]=e.attributes[n].value)}},b.prototype.initFromNode=function(e,t,n,r,i){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||M(i,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||M(i,"Invalid image@type attribute"),s.prototype.initFromNode.call(this,e,t,n,i),c.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},i.prototype.initFromNode=function(e,t,n,r){this.id=U(n)},a.prototype.initFromNode=function(e,t,n,r){this.regionID=(n=n)&&"region"in n.attributes?n.attributes.region.value:""},s.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=f(n,r),null!==e.head&&null!==e.head.styling&&B(e.head.styling,d(n),this.styleAttrs,r)},l.prototype.initFromNode=function(e,t,n,r){this.sets=[]},u.prototype.initFromNode=function(e,t,n,r){this.contents=[]},c.prototype.initFromNode=function(e,t,n,r){e=e,o=r,a=null,(i=n)&&"begin"in i.attributes&&null===(a=N(e.tickRate,e.effectiveFrameRate,i.attributes.begin.value))&&O(o,"Malformed begin value "+i.attributes.begin.value+" (using 0)"),s=null,i&&"dur"in i.attributes&&null===(s=N(e.tickRate,e.effectiveFrameRate,i.attributes.dur.value))&&O(o,"Malformed dur value "+i.attributes.dur.value+" (ignoring)"),l=null,i&&"end"in i.attributes&&null===(l=N(e.tickRate,e.effectiveFrameRate,i.attributes.end.value))&&O(o,"Malformed end value (ignoring)");var i,o,a,s,l,e={explicit_begin:a,explicit_end:l,explicit_dur:s};this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return e&&"par"!==e?"seq"===e?"seq":(M(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},S.prototype.initFromNode=function(e,t,n,r){s.prototype.initFromNode.call(this,e,null,t,r),c.prototype.initFromNode.call(this,e,null,t,r),l.prototype.initFromNode.call(this,e,null,t,r),a.prototype.initFromNode.call(this,e,null,t,r),u.prototype.initFromNode.call(this,e,null,t,r),this.lang=n},A.prototype.initFromNode=function(e,t,n,r,i){s.prototype.initFromNode.call(this,e,t,n,i),c.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),u.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},w.prototype.initFromNode=function(e,t,n,r,i){s.prototype.initFromNode.call(this,e,t,n,i),c.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),u.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},I.prototype.initFromNode=function(e,t,n,r,i,o){s.prototype.initFromNode.call(this,e,t,n,o),c.prototype.initFromNode.call(this,e,t,n,o),l.prototype.initFromNode.call(this,e,t,n,o),a.prototype.initFromNode.call(this,e,t,n,o),u.prototype.initFromNode.call(this,e,t,n,o),this.space=i,this.lang=r},o.prototype.initFromText=function(e,t,n,r,i,o){c.prototype.initFromNode.call(this,e,t,null,o),this.text=n,this.space=i,this.lang=r},R.prototype.initFromNode=function(e,t,n,r,i){a.prototype.initFromNode.call(this,e,t,n,i),c.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},C.prototype.createDefaultRegion=function(e){var t=new C;return i.call(t,""),s.call(t,{}),l.call(t,[]),c.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},C.prototype.initFromNode=function(e,t,n,r){i.prototype.initFromNode.call(this,e,null,t,r),c.prototype.initFromNode.call(this,e,null,t,r),l.prototype.initFromNode.call(this,e,null,t,r),this.styleAttrs=f(t,r),this.styleRefs=d(t),this.lang=n},F.prototype.initFromNode=function(e,t,n,r){c.prototype.initFromNode.call(this,e,t,n,r);var i,o=f(n,r);for(i in this.qname=null,this.value=null,o)if(o.hasOwnProperty(i)){if(this.qname){M(r,"More than one style specified on set");break}this.qname=i,this.value=o[i]}}},506:function(e,t,n){var w=/firefox/i.test(navigator.userAgent),I=("undefined"==typeof imscNames&&n(210),"undefined"==typeof imscStyles?n(6811):imscStyles);function R(e,t,n,r){if("region"===n.kind)(i=document.createElement("div")).style.position="absolute";else if("body"===n.kind)i=document.createElement("div");else if("div"===n.kind)i=document.createElement("div");else if("image"===n.kind){var i=document.createElement("img");null!==e.imgResolver&&null!==n.src&&((u=e.imgResolver(n.src,i))&&(i.src=u),i.height=e.regionH,i.width=e.regionW)}else if("p"===n.kind)i=document.createElement("p");else if("span"===n.kind)if("container"===n.styleAttrs[I.byName.ruby.qname])i=document.createElement("ruby"),e.ruby=!0;else if("base"===n.styleAttrs[I.byName.ruby.qname])i=document.createElement("span");else if("text"===n.styleAttrs[I.byName.ruby.qname])i=document.createElement("rt");else if("baseContainer"===n.styleAttrs[I.byName.ruby.qname])i=document.createElement("rbc");else if("textContainer"===n.styleAttrs[I.byName.ruby.qname])i=document.createElement("rtc");else{if("delimiter"===n.styleAttrs[I.byName.ruby.qname])return;i=document.createElement("span")}else"br"===n.kind&&(i=document.createElement("br"));if(i){!n.lang||"region"!==n.kind&&n.lang===r.lang||(i.lang=n.lang),t.appendChild(i),i.style.margin="0","region"===n.kind?"lrtb"===(u=n.styleAttrs[I.byName.writingMode.qname])||"lr"===u?(e.ipd="lr",e.bpd="tb"):"rltb"===u||"rl"===u?(e.ipd="rl",e.bpd="tb"):"tblr"===u?(e.ipd="tb",e.bpd="lr"):"tbrl"!==u&&"tb"!==u||(e.ipd="tb",e.bpd="rl"):"p"===n.kind&&"tb"===e.bpd&&(r=n.styleAttrs[I.byName.direction.qname],e.ipd="ltr"===r?"lr":"rl");for(var o=0;o<M.length;o++){var a=M[o],s=n.styleAttrs[a.qname];void 0!==s&&null!==a.map&&a.map(e,i,n,s)}var l=i,t=n.styleAttrs[I.byName.linePadding.qname],u=(t&&!t.isZero()&&0<(u=t.toUsedLength(e.w,e.h))&&(r=Math.ceil(u)+"px","tb"===e.bpd?(l.style.paddingLeft=r,l.style.paddingRight=r):(l.style.paddingTop=r,l.style.paddingBottom=r),e.lp=t),n.styleAttrs[I.byName.multiRowAlign.qname]),t=(u&&"auto"!==u&&((r=document.createElement("span")).style.display="inline-block",r.style.textAlign=u,i.appendChild(r),l=r,e.mra=u),n.styleAttrs[I.byName.rubyReserve.qname]);if(t&&"none"!==t[0]&&(e.rubyReserve=t),n.styleAttrs[I.byName.fillLineGap.qname]&&(e.flg=!0),"span"===n.kind&&n.text){var c=n.styleAttrs[I.byName.textEmphasis.qname];if(c&&"none"!==c.style&&(e.textEmphasis=!0),I.byName.textCombine.qname in n.styleAttrs&&"all"===n.styleAttrs[I.byName.textCombine.qname])i.textContent=n.text,i._isd_element=n,c&&O(e,i,0,c);else for(var d="",f=0;f<n.text.length;f++){d+=n.text.charAt(f);var p=n.text.charCodeAt(f);(p<55296||56319<p||f===n.text.length-1)&&((p=document.createElement("span")).textContent=d,c&&O(e,p,0,c),i.appendChild(p),d="",p._isd_element=n)}}if("contents"in n)for(var h=0;h<n.contents.length;h++)R(e,l,n.contents[h],n);var r=[];if("p"===n.kind&&(D(e,l,r,null),e.rubyReserve&&(function(e,t){for(var n=0;n<e.length;n++){var r,i=document.createElement("ruby"),o=document.createElement("span");o.textContent="",i.appendChild(o);var a,o=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((r=document.createElement("rtc")).style[L]=P?"after":"under",r.textContent="",r.style.fontSize=o,(a=document.createElement("rtc")).style[L]=P?"before":"over",a.textContent="",a.style.fontSize=o,i.appendChild(r),i.appendChild(a)):((r=document.createElement("rtc")).textContent="",r.style.fontSize=o,a="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&0<n?P?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":P?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",r.style[L]=a,i.appendChild(r));for(var s=null,l=0;l<e[n].rbc.length;l++)if("ruby"===e[n].rbc[l].localName){for(var s=e[n].rbc[l],u=0;u<s.style.length;u++)i.style.setProperty(s.style.item(u),s.style.getPropertyValue(s.style.item(u)));break}(s=s||e[n].elements[0].node).parentElement.insertBefore(i,s)}}(r,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(function(e,t){for(var n,r=0;r<e.length;r++)for(var i=0;i<e[r].rbc.length;i++)e[r].rbc[i].style[L]||(n=P?0===r?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===r?"over":"under":0===r?"under":"over",e[r].rbc[i].style[L]=n)}(r,e),e.ruby=null),e.textEmphasis&&(function(e,t){for(var n,r=0;r<e.length;r++)for(var i=0;i<e[r].te.length;i++)e[r].te[i].style[x]&&"none"!==e[r].te[i].style[x]||(n="tb"===t.bpd?0===r?"left over":"left under":"rl"===t.bpd?0===r?"right under":"left under":0===r?"left under":"right under",e[r].te[i].style[x]=n)}(r,e),e.textEmphasis=null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n,r=e[t].elements.length;0!==r&&!1===e[t].br&&(n=document.createElement("br"),(r=e[t].elements[r-1].node).parentElement.insertBefore(n,r.nextSibling))}}(r),e.mra=null),e.lp&&(function(e,t,n){if(null!==e)for(var r=0;r<e.length;r++){var i=e[r].elements.length,o=Math.ceil(t)+"px",a="-"+Math.ceil(t)+"px";if(0!==i){var i=e[r].elements[e[r].start_elem],s=e[r].elements[e[r].end_elem];if(i===s){var l=i.node.getBoundingClientRect();if(0==l.width||0==l.height)continue}"lr"===n.ipd?(i.node.style.marginLeft=a,i.node.style.paddingLeft=o):"rl"===n.ipd?(i.node.style.paddingRight=o,i.node.style.marginRight=a):"tb"===n.ipd&&(i.node.style.paddingTop=o,i.node.style.marginTop=a),"lr"===n.ipd?(w||(s.node.style.marginRight=a),s.node.style.paddingRight=o):"rl"===n.ipd?(s.node.style.paddingLeft=o,w||(s.node.style.marginLeft=a)):"tb"===n.ipd&&(s.node.style.paddingBottom=o,s.node.style.marginBottom=a)}}}(r,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=1;i<r.elements.length;){var o=r.elements[i-1],a=r.elements[i];!function(e,t,n){if("SPAN"!==e.tagName||"SPAN"!==t.tagName||e._isd_element!==t._isd_element)return;if(!e._isd_element)return k(n.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),0;e.textContent+=t.textContent;for(var r=0;r<t.style.length;r++){var i=t.style[r];(0<=i.indexOf("border")||0<=i.indexOf("padding")||0<=i.indexOf("margin"))&&(e.style[i]=t.style[i])}return t.parentElement.removeChild(t),1}(o.node,a.node,t)?i++:r.elements.splice(i,1)}for(var s,l,u=[],c=0;c<e.length;c++)for(var d=0;d<e[c].elements.length;d++)(l=function e(t,n,r){return t.style.backgroundColor?(r&&!n.includes(t)&&n.push(t),t.style.backgroundColor):"SPAN"===t.parentElement.nodeName||"RUBY"===t.parentElement.nodeName||"RBC"===t.parentElement.nodeName||"RTC"===t.parentElement.nodeName||"RT"===t.parentElement.nodeName?e(t.parentElement,n,!0):void 0}(s=e[c].elements[d].node,u,!1))&&(s.style.backgroundColor=l);for(var f=0;f<u.length;f++)u[f].style.backgroundColor=""}(r,e),e.flg)){for(var u=N(l.getBoundingClientRect(),e),g=r,m=u.before,y=u.after,v=e,E=Math.sign(y-m),_=0;_<=g.length;_++){var T,b,S,A=0===_?Math.round(m):_===g.length?Math.round(y):Math.round((g[_-1].after+g[_].before)/2);if(0<_&&g[_-1])for(b=0;b<g[_-1].elements.length;b++)T=E*(A-(S=g[_-1].elements[b]).after)+"px","lr"===v.bpd?S.node.style.paddingRight=T:"rl"===v.bpd?S.node.style.paddingLeft=T:"tb"===v.bpd&&(S.node.style.paddingBottom=T);if(_<g.length)for(b=0;b<g[_].elements.length;b++)T=E*((S=g[_].elements[b]).before-A)+"px","lr"===v.bpd?S.node.style.paddingLeft=T:"rl"===v.bpd?S.node.style.paddingRight=T:"tb"===v.bpd&&(S.node.style.paddingTop=T)}e.flg=null}"region"===n.kind&&"tb"===e.bpd&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[I.byName.displayAlign.qname]&&(D(e,l,r,null),t=new C(""===n.id?"_":n.id,r),e.currentISDState[t.id]=t,e.previousISDState)&&t.id in e.previousISDState&&0<e.previousISDState[t.id].plist.length&&1<t.plist.length&&t.plist[t.plist.length-2].text===e.previousISDState[t.id].plist[e.previousISDState[t.id].plist.length-1].text&&(u=i.firstElementChild,r=t.plist[t.plist.length-1].after-t.plist[t.plist.length-1].before,u.style.bottom="-"+r+"px",u.style.transition="transform 0.4s",u.style.position="relative",u.style.transform="translateY(-"+r+"px)")}else k(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function C(e,t){this.id=e,this.plist=t}function N(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function D(e,t,n,r){if("rt"!==t.localName&&"rtc"!==t.localName){var i,o,a,s,l=t.style.backgroundColor||r;if(0===t.childElementCount)"span"===t.localName||"rb"===t.localName?(r=N(t.getBoundingClientRect(),e),0!==n.length&&(i=r.before,s=r.after,o=n[n.length-1].before,s<(a=n[n.length-1].after)&&o<i||a<=s&&i<=o)?(a=Math.sign(r.after-r.before),s=Math.sign(r.end-r.start),a*(r.before-n[n.length-1].before)<0&&(n[n.length-1].before=r.before),0<a*(r.after-n[n.length-1].after)&&(n[n.length-1].after=r.after),s*(r.start-n[n.length-1].start)<0&&(n[n.length-1].start=r.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<s*(r.end-n[n.length-1].end)&&(n[n.length-1].end=r.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:r.before,after:r.after,start:r.start,end:r.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:l,before:r.before,after:r.after})):"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var u=t.firstChild;u;)u.nodeType===Node.ELEMENT_NODE&&(D(e,u,n,l),"ruby"===u.localName||"rtc"===u.localName?0<n.length&&n[n.length-1].rbc.push(u):"span"===u.localName&&u.style[c]&&"none"!==u.style[c]&&0<n.length&&n[n.length-1].te.push(u)),u=u.nextSibling}}function O(e,t,n,r){"none"!==r.style&&("auto"===r.style?t.style[c]="filled":t.style[c]=r.style+" "+r.symbol,"before"===r.position||"after"===r.position)&&(e="tb"===e.bpd?"before"===r.position?"left over":"left under":"rl"===e.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",t.style[x]=e)}function r(e,t){this.qname=e,this.map=t}"undefined"==typeof imscUtils&&n(5926),t.render=function(e,t,n,r,i,o,a,s,l){var u,r=r||t.clientHeight,i=i||t.clientWidth,c=(null!==e.aspectRatio&&(i<(u=r*e.aspectRatio)?r=Math.round(i/e.aspectRatio):i=u),document.createElement("div")),d=(c.style.position="relative",c.style.width=i+"px",c.style.height=r+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0,{h:r,w:i,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:a,previousISDState:s,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null});if(t.appendChild(c),"contents"in e)for(var f=0;f<e.contents.length;f++)R(d,c,e.contents[f],e);return d.currentISDState};for(var M=[new r("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")}),new r("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new r("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new r("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new r("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new r("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h.toUsedLength(e.w,e.h),e.regionW=r.w.toUsedLength(e.w,e.h);var r=0,i=0,n=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];n&&(r=n[0].toUsedLength(e.w,e.h)+n[2].toUsedLength(e.w,e.h),i=n[1].toUsedLength(e.w,e.h)+n[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-r+"px",t.style.width=e.regionW-i+"px"}),new r("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){for(var i=[],o=0;o<r.length;o++)r[o]=r[o].trim(),"monospaceSerif"===r[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[o]?i.push("monospace"):"sansSerif"===r[o]?i.push("sans-serif"):"serif"===r[o]?i.push("serif"):"monospaceSansSerif"===r[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[o]?i.push("serif"):i.push(r[o]);if(0<i.length){for(var a=[i[0]],s=1;s<i.length;s++)-1==a.indexOf(i[s])&&a.push(i[s]);i=a}t.style.fontFamily=i.join(",")}),new r("http://www.w3.org/ns/ttml#styling shear",function(e,t,n,r){0!==r&&(r=-.9*r,"tb"===e.bpd?t.style.transform="skewX("+r+"deg)":t.style.transform="skewY("+r+"deg)")}),new r("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r.toUsedLength(e.w,e.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new r("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new r("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r.toUsedLength(e.w,e.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new r("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new r("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0].toUsedLength(e.w,e.h)+"px",i[1]=r[3].toUsedLength(e.w,e.h)+"px",i[2]=r[2].toUsedLength(e.w,e.h)+"px",i[3]=r[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")}),new r("http://www.w3.org/ns/ttml#styling position",function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,n,r){t.style.rubyAlign="spaceAround"===r?"space-around":"center"}),new r("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,n,r){"before"!==r&&"after"!==r||(e=P?r:"tb"===e.bpd||"rl"===e.bpd?"before"===r?"over":"under":"before"===r?"under":"over",t.parentElement.style[L]=e)}),new r("http://www.w3.org/ns/ttml#styling showBackground",null),new r("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){e="start"===r?"rl"===e.ipd?"right":"left":"end"===r?"rl"===e.ipd?"left":"right":r;t.style.textAlign=e}),new r("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new r("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){}),new r("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,n,r){n=n.styleAttrs[I.byName.textOutline.qname];if("none"===r&&"none"===n)t.style.textShadow="";else{var i=[];if("none"!==n&&(n="rgba("+n.color[0].toString()+","+n.color[1].toString()+","+n.color[2].toString()+","+(n.color[3]/255).toString()+")",i.push("1px 1px 1px "+n),i.push("-1px 1px 1px "+n),i.push("1px -1px 1px "+n),i.push("-1px -1px 1px "+n)),"none"!==r)for(var o=0;o<r.length;o++)i.push(r[o].x_off.toUsedLength(e.w,e.h)+"px "+r[o].y_off.toUsedLength(e.w,e.h)+"px "+r[o].b_radius.toUsedLength(e.w,e.h)+"px rgba("+r[o].color[0].toString()+","+r[o].color[1].toString()+","+r[o].color[2].toString()+","+(r[o].color[3]/255).toString()+")");t.style.textShadow=i.join(",")}}),new r("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,n,r){t.style.textCombineUpright=r}),new r("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,n,r){}),new r("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){t.style.unicodeBidi="bidiOverride"===r?"bidi-override":r}),new r("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new r("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new r("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new r("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new r("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],i=0;i<M.length;i++)M[i].qname,M[i];var P="webkitRubyPosition"in window.getComputedStyle(document.documentElement),L=P?"webkitRubyPosition":"rubyPosition",c="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",x="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function k(e,t){if(e&&e.error&&e.error(t))throw t}},4080:function(e,t,n){function M(e,t){if("contents"in e)for(var n=0;n<e.contents.length;n++){var r=e.contents[n],i=r.styleAttrs[k.byName.ruby.qname];("span"!==r.kind||"textContainer"!==i&&"text"!==i)&&("contents"in r?M(r,t):("span"===r.kind&&0!==r.text.length||"br"===r.kind)&&t.push(r))}}function P(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)P(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function g(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function L(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function x(e,t){if(e&&e.error&&e.error(t))throw t}var k,F,U;t=t,"undefined"==typeof imscNames&&n(210),k="undefined"==typeof imscStyles?n(6811):imscStyles,F="undefined"==typeof imscUtils?n(5926):imscUtils,t.generateISD=function(e,t,n){var r,i,o,a,s,l,u,c=new g(e),d={},f={},p=e.head.styling.initials[k.byName.showBackground.qname],h=e.head.styling.initials[k.byName.backgroundColor.qname];for(i in e.head.layout.regions)e.head.layout.regions.hasOwnProperty(i)&&(a=(o=e.head.layout.regions[i]).styleAttrs[k.byName.showBackground.qname]||p,s=o.styleAttrs[k.byName.backgroundColor.qname]||h,f[o.id]=("always"===a||void 0===a)&&void 0!==s&&!(t<o.begin||t>=o.end));for(l in e.body&&e.body.regionID&&(f[e.body.regionID]=!0),r=null!==e.body?function t(n,e){if(e.contents){var r,i={};for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i.contents=[],e.contents.filter(function(e){return!(n<e.begin||n>=e.end)}).forEach(function(e){e=t(n,e);e.regionID&&(f[e.regionID]=!0),null!==e&&i.contents.push(e)}),i}return e}(t,e.body):null,void 0!==f[""]&&(f[""]=!0),f)f[l]&&null!==(u=function e(t,n,r,i,o,a,s,l,u){if(n<s.begin||n>=s.end)return null;var c="regionID"in s&&""!==s.regionID?s.regionID:a;if(null!==o&&c!==r.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==c))return null;var d=new L(s);if("sets"in s)for(var f=0;f<s.sets.length;f++)n<s.sets[f].begin||n>=s.sets[f].end||(d.styleAttrs[s.sets[f].qname]=s.sets[f].value);var p={};for(var h in d.styleAttrs)!d.styleAttrs.hasOwnProperty(h)||(p[h]=!0,"region"!==d.kind)||h!==k.byName.writingMode.qname||k.byName.direction.qname in d.styleAttrs||("lrtb"===(h=d.styleAttrs[h])||"lr"===h?d.styleAttrs[k.byName.direction.qname]="ltr":"rltb"!==h&&"rl"!==h||(d.styleAttrs[k.byName.direction.qname]="rtl"));if(null!==o)for(var g=0;g<k.all.length;g++){var m,y,v,E=k.all[g];E.qname===k.byName.textDecoration.qname?(y=o.styleAttrs[E.qname],v=d.styleAttrs[E.qname],m=[],void 0===v?m=y:-1===v.indexOf("none")?((-1===v.indexOf("noUnderline")&&-1!==y.indexOf("underline")||-1!==v.indexOf("underline"))&&m.push("underline"),(-1===v.indexOf("noLineThrough")&&-1!==y.indexOf("lineThrough")||-1!==v.indexOf("lineThrough"))&&m.push("lineThrough"),(-1===v.indexOf("noOverline")&&-1!==y.indexOf("overline")||-1!==v.indexOf("overline"))&&m.push("overline")):m.push("none"),d.styleAttrs[E.qname]=m):E.qname!==k.byName.fontSize.qname||E.qname in d.styleAttrs||"span"!==d.kind||"textContainer"!==d.styleAttrs[k.byName.ruby.qname]?E.qname!==k.byName.fontSize.qname||E.qname in d.styleAttrs||"span"!==d.kind||"text"!==d.styleAttrs[k.byName.ruby.qname]?E.inherit&&E.qname in o.styleAttrs&&!(E.qname in d.styleAttrs)&&(d.styleAttrs[E.qname]=o.styleAttrs[E.qname]):(y=o.styleAttrs[k.byName.fontSize.qname],"textContainer"===o.styleAttrs[k.byName.ruby.qname]?d.styleAttrs[E.qname]=y:d.styleAttrs[E.qname]=new F.ComputedLength(.5*y.rw,.5*y.rh)):(v=o.styleAttrs[k.byName.fontSize.qname],d.styleAttrs[E.qname]=new F.ComputedLength(.5*v.rw,.5*v.rh))}for(var _=0;_<k.all.length;_++){var T,b=k.all[_];b.qname in d.styleAttrs||b.qname===k.byName.position.qname&&k.byName.origin.qname in d.styleAttrs||b.qname===k.byName.origin.qname&&k.byName.position.qname in d.styleAttrs||null!==(T=t.head.styling.initials[b.qname]||b.initial)&&("region"===d.kind||!1===b.inherit&&null!==T)&&(null!==(T=b.parse(T))?(d.styleAttrs[b.qname]=T,p[b.qname]=!0):x(l,"Invalid initial value for '"+b.qname+"' on element '"+d.kind))}for(var S=0;S<k.all.length;S++){var A,w=k.all[S];w.qname in p&&null!==w.compute&&(null!==(A=w.compute(t,o,d,d.styleAttrs[w.qname],u))?d.styleAttrs[w.qname]=A:(d.styleAttrs[w.qname]=w.compute(t,o,d,w.parse(w.initial),u),x(l,"Style '"+w.qname+"' on element '"+d.kind+"' cannot be computed")))}if("none"===d.styleAttrs[k.byName.display.qname])return null;var I=null;null===o?I=null===i?[]:[i]:"contents"in s&&(I=s.contents);for(var R=0;null!==I&&R<I.length;R++){var C=e(t,n,r,i,d,c,I[R],l,u);null!==C&&d.contents.push(C.element)}for(var N in d.styleAttrs){var D,O;d.styleAttrs.hasOwnProperty(N)&&(D=!1,"span"===d.kind&&(O=d.styleAttrs[k.byName.ruby.qname],D=(D=(D=("container"===O||"textContainer"===O||"baseContainer"===O)&&-1!==U.indexOf(N))||"container"!==O&&N===k.byName.rubyAlign.qname)||!("textContainer"===O||"text"===O)&&N===k.byName.rubyPosition.qname),D||"applies"in(O=k.byQName[N])&&(D=-1===O.applies.indexOf(d.kind)),D)&&delete d.styleAttrs[N]}a=d.styleAttrs[k.byName.ruby.qname];"p"!==d.kind&&("span"!==d.kind||"textContainer"!==a&&"text"!==a)||(M(d,a=[]),function(e){for(var t,n,r,i,o=0;o<e.length;)"br"!==(t=e[o]).kind&&"preserve"!==t.space&&(n=t.text.replace(/[\t\r\n ]+/g," "),/^[ ]/.test(n)&&(0===o||"br"===(r=e[o-1]).kind||/[\r\n\t ]$/.test(r.text))&&(n=n.substring(1)),0===(t.text=n).length)?e.splice(o,1):o++;for(o=0;o<e.length;o++)"br"!==(t=e[o]).kind&&"preserve"!==t.space?/[ ]$/.test(t.text)&&(o===e.length-1||"br"===(i=e[o+1]).kind||"preserve"===i.space&&/^[\r\n]/.test(i.text))&&(t.text=t.text.slice(0,-1)):o++}(a),P(d));return"div"===d.kind&&k.byName.backgroundImage.qname in d.styleAttrs||"br"===d.kind||"image"===d.kind||"contents"in d&&0<d.contents.length||"span"===d.kind&&null!==d.text||"region"===d.kind&&"always"===d.styleAttrs[k.byName.showBackground.qname]?{region_id:c,element:d}:null}(e,t,e.head.layout.regions[l],r,null,"",e.head.layout.regions[l],n,d))&&c.contents.push(u.element);return c},U=[k.byName.color.qname,k.byName.textCombine.qname,k.byName.textDecoration.qname,k.byName.textEmphasis.qname,k.byName.textOutline.qname,k.byName.textShadow.qname]},4403:function(e,t,n){t.generateISD=n(4080).generateISD,t.fromXML=n(3362).fromXML,t.renderHTML=n(506).render},210:function(e,t){(t=t).ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"},6811:function(e,t,n){var r,i,l=t,t="undefined"==typeof imscNames?n(210):imscNames,u="undefined"==typeof imscUtils?n(5926):imscUtils;function o(e,t,n,r,i,o,a,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=n,this.applies=r,this.parse=a,this.compute=s}for(r in l.all=[new o(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,u.parseColor,null),new o(t.ns_tts,"color","white",["span"],!0,!0,u.parseColor,null),new o(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new o(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new o(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new o(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=u.parseLength(e[0]),e=u.parseLength(e[1]))&&t?{h:e,w:t}:null},function(e,t,n,r,i){var o,a;if("auto"===r)o=new u.ComputedLength(0,1);else if(null===(o=u.toComputedLength(r.h.value,r.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===r)a=new u.ComputedLength(1,0);else if(null===(a=u.toComputedLength(r.w.value,r.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:o,w:a}}),new o(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),n=[],r=0;r<t.length;r++)t[r]=t[r].trim(),"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new o(t.ns_tts,"shear","0%",["p"],!0,!0,u.parseLength,function(e,t,n,r){return"%"!==r.unit?null:100<Math.abs(r.value)?100*Math.sign(r.value):r.value}),new o(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,u.parseLength,function(e,t,n,r,i){return u.toComputedLength(r.value,r.unit,null!==t?t.styleAttrs[l.byName.fontSize.qname]:e.cellLength.h,null!==t?t.styleAttrs[l.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)}),new o(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new o(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new o(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:u.parseLength(e)},function(e,t,n,r,i){var o;if("normal"===r)o=r;else if(null===(o=u.toComputedLength(r.value,r.unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return o}),new o(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new o(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=u.parseLength(e[0]),e=u.parseLength(e[1]))&&t?{h:e,w:t}:null},function(e,t,n,r,i){var o,a;if("auto"===r)o=new u.ComputedLength(0,0);else if(null===(o=u.toComputedLength(r.h.value,r.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===r)a=new u.ComputedLength(0,0);else if(null===(a=u.toComputedLength(r.w.value,r.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:o,w:a}}),new o(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new o(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;for(var n=[],r=0;r<t.length;r++){var i=u.parseLength(t[r]);if(!i)return null;n.push(i)}return n},function(e,t,n,r,i){var o;if(1===r.length)o=[r[0],r[0],r[0],r[0]];else if(2===r.length)o=[r[0],r[1],r[0],r[1]];else if(3===r.length)o=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;o=[r[0],r[1],r[2],r[3]]}r=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===r||"lr"===r)o=[o[0],o[3],o[2],o[1]];else if("rltb"===r||"rl"===r)o=[o[0],o[1],o[2],o[3]];else if("tblr"===r)o=[o[3],o[0],o[1],o[2]];else{if("tbrl"!==r&&"tb"!==r)return null;o=[o[3],o[2],o[1],o[0]]}for(var a=[],s=0;s<o.length;s++)if(0===o[s].value)a[s]=new u.ComputedLength(0,0);else if(a[s]=u.toComputedLength(o[s].value,o[s].unit,n.styleAttrs[l.byName.fontSize.qname],0===s||2===s?n.styleAttrs[l.byName.extent.qname].h:n.styleAttrs[l.byName.extent.qname].w,0===s||2===s?e.cellLength.h:e.cellLength.w,0===s||2===s?e.pxLength.h:e.pxLength.w),null===a[s])return null;return a}),new o(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return u.parsePosition(e)},function(e,t,n,r){var i,o;return null===(i=u.toComputedLength(r.v.offset.value,r.v.offset.unit,null,new u.ComputedLength(-n.styleAttrs[l.byName.extent.qname].h.rw,e.dimensions.h.rh-n.styleAttrs[l.byName.extent.qname].h.rh),null,e.pxLength.h))||("bottom"===r.v.edge&&(i=new u.ComputedLength(-i.rw-n.styleAttrs[l.byName.extent.qname].h.rw,e.dimensions.h.rh-i.rh-n.styleAttrs[l.byName.extent.qname].h.rh)),o=u.toComputedLength(r.h.offset.value,r.h.offset.unit,null,new u.ComputedLength(e.dimensions.w.rw-n.styleAttrs[l.byName.extent.qname].w.rw,-n.styleAttrs[l.byName.extent.qname].w.rh),null,e.pxLength.w),null===i)?null:{h:i,w:o="right"===r.h.edge?new u.ComputedLength(e.dimensions.w.rw-o.rw-n.styleAttrs[l.byName.extent.qname].w.rw,-o.rh-n.styleAttrs[l.byName.extent.qname].w.rh):o}}),new o(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new o(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new o(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new o(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var e=e.split(" "),t=[null,null];if(0===e.length||2<e.length)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(t[0]=e[0],2===e.length&&"none"!==e[0]){e=u.parseLength(e[1]);if(!e)return null;t[1]=e}return t},function(e,t,n,r,i){return"none"===r[0]?r:null===(n=null===r[1]?new u.ComputedLength(.5*n.styleAttrs[l.byName.fontSize.qname].rw,.5*n.styleAttrs[l.byName.fontSize.qname].rh):u.toComputedLength(r[1].value,r[1].unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[r[0],n]}),new o(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new o(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r}),new o(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new o(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new o(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),n={style:null,symbol:null,color:null,position:null},r=0;r<t.length;r++)if("none"===t[r]||"auto"===t[r])n.style=t[r];else if("filled"===t[r]||"open"===t[r])n.style=t[r];else if("circle"===t[r]||"dot"===t[r]||"sesame"===t[r])n.symbol=t[r];else if("current"===t[r])n.color=t[r];else if("outside"===t[r]||"before"===t[r]||"after"===t[r])n.position=t[r];else if(n.color=u.parseColor(t[r]),null===n.color)return null;return null==n.style&&null==n.symbol?n.style="auto":(n.symbol=n.symbol||"circle",n.style=n.style||"filled"),n.position=n.position||"outside",n.color=n.color||"current",n},null),new o(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){var t,n;return"none"===e?e:(t={},!(0===(e=e.split(" ")).length||2<e.length)&&(n=u.parseColor(e[0]),null!==(t.color=n)&&e.shift(),1===e.length)&&(n=u.parseLength(e[0]))?(t.thickness=n,t):null)},function(e,t,n,r,i){var o;return"none"===r?r:(o={},null===r.color?o.color=n.styleAttrs[l.byName.color.qname]:o.color=r.color,o.thickness=u.toComputedLength(r.thickness.value,r.thickness.unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===o.thickness?null:o)}),new o(t.ns_tts,"textShadow","none",["span"],!0,!0,u.parseTextShadow,function(e,t,n,r){if("none"===r)return r;for(var i=[],o=0;o<r.length;o++){var a={};if(a.x_off=u.toComputedLength(r[o][0].value,r[o][0].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.w),null===a.x_off)return null;if(a.y_off=u.toComputedLength(r[o][1].value,r[o][1].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.h),null===a.y_off)return null;if(null===r[o][2])a.b_radius=0;else if(a.b_radius=u.toComputedLength(r[o][2].value,r[o][2].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.h),null===a.b_radius)return null;null===r[o][3]?a.color=n.styleAttrs[l.byName.color.qname]:a.color=r[o][3],i.push(a)}return i}),new o(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new o(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new o(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new o(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new o(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new o(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,u.parseLength,function(e,t,n,r,i){return u.toComputedLength(r.value,r.unit,null,null,e.cellLength.w,null)}),new o(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new o(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new o(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new o(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],l.byQName={},l.all)l.byQName[l.all[r].qname]=l.all[r];for(i in l.byName={},l.all)l.byName[l.all[i].name]=l.all[i]},5926:function(e,t){var u,r,i,o,a,n;r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]},(u=t).parseColor=function(e){var t=null,n=a[e.toLowerCase()];return void 0!==n?t=n:null!==(n=r.exec(e))?t=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0!==n[4]?parseInt(n[4],16):255]:null!==(n=i.exec(e))?t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),255]:null!==(n=o.exec(e))&&(t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])]),t},n=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,u.parseLength=function(e){var t=null;return t=null!==(e=n.exec(e))?{value:parseFloat(e[1]),unit:e[2]}:t},u.parseTextShadow=function(e){for(var t=e.match(/([^\(,\)]|\([^\)]+\))+/g),n=[],r=0;r<t.length;r++){var i=t[r].split(" ");if(1===i.length&&"none"===i[0])return"none";if(1<i.length&&i.length<5){var o=[null,null,null,null],a=u.parseLength(i.shift());if(null===a)return null;if(o[0]=a,null===(a=u.parseLength(i.shift())))return null;if(o[1]=a,0===i.length);else if(null!==(a=u.parseLength(i[0]))&&(o[2]=a,i.shift()),0!==i.length){a=u.parseColor(i[0]);if(null===a)return null;o[3]=a}n.push(o)}}return n},u.parsePosition=function(e){function t(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e}var n=e.split(" ");if(4<n.length)return null;for(var r=0;r<n.length;r++)if(!t(n[r])){var i=u.parseLength(n[r]);if(null===i)return null;n[r]=i}for(var o={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},a=0;a<n.length;){var s=n[a++];if(t(s)){var l={value:0,unit:"%"};2!==n.length&&a<n.length&&!t(n[a])&&(l=n[a++]),"right"===s?(o.h.edge=s,o.h.offset=l):"bottom"===s?(o.v.edge=s,o.v.offset=l):"left"===s?o.h.offset=l:"top"===s&&(o.v.offset=l)}else{if(1!==n.length&&2!==n.length)return null;1===a?o.h.offset=s:o.v.offset=s}}return o},u.ComputedLength=function(e,t){this.rw=e,this.rh=t},u.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},u.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},u.toComputedLength=function(e,t,n,r,i,o){return"%"===t&&r?new u.ComputedLength(r.rw*e/100,r.rh*e/100):"em"===t&&n?new u.ComputedLength(n.rw*e,n.rh*e):"c"===t&&i?new u.ComputedLength(e*i.rw,e*i.rh):"px"===t&&o?new u.ComputedLength(e*o.rw,e*o.rh):"rh"===t?new u.ComputedLength(0,e/100):"rw"===t?new u.ComputedLength(e/100,0):null}},3516:function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 97<=e&&e<=122||65<=e&&e<=90}},2219:function(e,t,n){"use strict";var r=n(3516),i=n(395);e.exports=function(e){return r(e)||i(e)}},395:function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 48<=e&&e<=57}},3875:function(e){"use strict";function f(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o!==s-1&&1!==a)if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(2<r.length){var l=r.lastIndexOf("/");if(l!==r.length-1){i=-1===l?(r="",0):(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",o=s,a=i=0;continue}t&&(0<r.length?r+="/..":r="..",i=2)}else 0<r.length?r+="/"+e.slice(o+1,s):r=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var p={resolve:function(){for(var e,t="",n=!1,r=arguments.length-1;-1<=r&&!n;r--){var i=0<=r?arguments[r]:e=void 0===e?process.cwd():e;f(i),0!==i.length&&(t=i+"/"+t,n=47===i.charCodeAt(0))}return t=o(t,!n),n?0<t.length?"/"+t:"/":0<t.length?t:"."},normalize:function(e){var t,n;return f(e),0===e.length?".":(t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1),0<(e=0!==(e=o(e,!t)).length||t?e:".").length&&n&&(e+="/"),t?"/"+e:e)},isAbsolute:function(e){return f(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];f(n),0<n.length&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":p.normalize(e)},relative:function(e,t){if(f(e),f(t),e===t)return"";if((e=p.resolve(e))===(t=p.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,i=r-n,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var a=t.length-o,s=i<a?i:a,l=-1,u=0;u<=s;++u){if(u===s){if(s<a){if(47===t.charCodeAt(o+u))return t.slice(o+u+1);if(0===u)return t.slice(o+u)}else s<i&&(47===e.charCodeAt(n+u)?l=u:0===u&&(l=0));break}var c=e.charCodeAt(n+u);if(c!==t.charCodeAt(o+u))break;47===c&&(l=u)}for(var d="",u=n+l+1;u<=r;++u)u!==r&&47!==e.charCodeAt(u)||(0===d.length?d+="..":d+="/..");return 0<d.length?d+t.slice(o+l):(47===t.charCodeAt(o+=l)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(f(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,r=!0,i=e.length-1;1<=i;--i)if(47===e.charCodeAt(i)){if(!r){n=i;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');f(e);var n=0,r=-1,i=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var o=t.length-1,a=-1,s=e.length-1;0<=s;--s){var l=e.charCodeAt(s);if(47===l){if(!i){n=s+1;break}}else-1===a&&(i=!1,a=s+1),0<=o&&(l===t.charCodeAt(o)?-1==--o&&(r=s):(o=-1,r=a))}return n===r?r=a:-1===r&&(r=e.length),e.slice(n,r)}for(s=e.length-1;0<=s;--s)if(47===e.charCodeAt(s)){if(!i){n=s+1;break}}else-1===r&&(i=!1,r=s+1);return-1===r?"":e.slice(n,r)},extname:function(e){f(e);for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n;var t,n},parse:function(e){f(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0!==e.length){for(var n,r=47===e.charCodeAt(0),i=r?(t.root="/",1):0,o=-1,a=0,s=-1,l=!0,u=e.length-1,c=0;i<=u;--u)if(47!==(n=e.charCodeAt(u)))-1===s&&(l=!1,s=u+1),46===n?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1);else if(!l){a=u+1;break}-1===o||-1===s||0===c||1===c&&o===s-1&&o===a+1?-1!==s&&(t.base=t.name=0===a&&r?e.slice(1,s):e.slice(a,s)):(0===a&&r?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(a,o),t.base=e.slice(a,s)),t.ext=e.slice(o,s)),0<a?t.dir=e.slice(0,a-1):r&&(t.dir="/")}return t},sep:"/",delimiter:":",win32:null,posix:null};p.posix=p,e.exports=p},8387:function(e,t,n){var r=n(1549),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},5378:function(g,e,n){var E=e;E.parser=function(e,t){return new a(e,t)},E.SAXParser=a,E.SAXStream=o,E.createStream=function(e,t){return new o(e,t)},E.MAX_BUFFER_LENGTH=65536;var r,_=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,t){if(!(this instanceof a))return new a(e,t);for(var n=this,r=n,i=0,o=_.length;i<o;i++)r[_[i]]="";n.q=n.c="",n.bufferCheckPosition=E.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=C.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(E.XML_ENTITIES):Object.create(E.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(u)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),p(n,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),a.prototype={end:function(){P(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return M(t,"Cannot write after close. Assign an onready handler.");if(null===e)return P(t);"object"==typeof e&&(e=e.toString());for(var n,r,i,o,a,s,l,u=0,c="";c=B(e,u++),t.c=c;)switch(t.trackPosition&&(t.position++,"\n"===c?(t.line++,t.column=0):t.column++),t.state){case C.BEGIN:if(t.state=C.BEGIN_WHITESPACE,"\ufeff"===c)continue;U(t,c);continue;case C.BEGIN_WHITESPACE:U(t,c);continue;case C.TEXT:if(t.sawRoot&&!t.closedRoot){for(var d=u-1;c&&"<"!==c&&"&"!==c;)(c=B(e,u++))&&t.trackPosition&&(t.position++,"\n"===c?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(d,u-1)}"<"!==c||t.sawRoot&&t.closedRoot&&!t.strict?(!R(S,c)||t.sawRoot&&!t.closedRoot||L(t,"Text data outside of root node."),"&"===c?t.state=C.TEXT_ENTITY:t.textNode+=c):(t.state=C.OPEN_WAKA,t.startTagPosition=t.position);continue;case C.SCRIPT:"<"===c?t.state=C.SCRIPT_ENDING:t.script+=c;continue;case C.SCRIPT_ENDING:"/"===c?t.state=C.CLOSE_TAG:(t.script+="<"+c,t.state=C.SCRIPT);continue;case C.OPEN_WAKA:"!"===c?(t.state=C.SGML_DECL,t.sgmlDecl=""):I(S,c)||(I(A,c)?(t.state=C.OPEN_TAG,t.tagName=c):"/"===c?(t.state=C.CLOSE_TAG,t.tagName=""):"?"===c?(t.state=C.PROC_INST,t.procInstName=t.procInstBody=""):(L(t,"Unencoded <"),t.startTagPosition+1<t.position&&(d=t.position-t.startTagPosition,c=new Array(d).join(" ")+c),t.textNode+="<"+c,t.state=C.TEXT));continue;case C.SGML_DECL:"[CDATA["===(t.sgmlDecl+c).toUpperCase()?(N(t,"onopencdata"),t.state=C.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+c==="--"?(t.state=C.COMMENT,t.comment="",t.sgmlDecl=""):"DOCTYPE"===(t.sgmlDecl+c).toUpperCase()?(t.state=C.DOCTYPE,(t.doctype||t.sawRoot)&&L(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===c?(N(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=C.TEXT):(I(T,c)&&(t.state=C.SGML_DECL_QUOTED),t.sgmlDecl+=c);continue;case C.SGML_DECL_QUOTED:c===t.q&&(t.state=C.SGML_DECL,t.q=""),t.sgmlDecl+=c;continue;case C.DOCTYPE:">"===c?(t.state=C.TEXT,N(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=c,"["===c?t.state=C.DOCTYPE_DTD:I(T,c)&&(t.state=C.DOCTYPE_QUOTED,t.q=c));continue;case C.DOCTYPE_QUOTED:t.doctype+=c,c===t.q&&(t.q="",t.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:t.doctype+=c,"]"===c?t.state=C.DOCTYPE:I(T,c)&&(t.state=C.DOCTYPE_DTD_QUOTED,t.q=c);continue;case C.DOCTYPE_DTD_QUOTED:t.doctype+=c,c===t.q&&(t.state=C.DOCTYPE_DTD,t.q="");continue;case C.COMMENT:"-"===c?t.state=C.COMMENT_ENDING:t.comment+=c;continue;case C.COMMENT_ENDING:"-"===c?(t.state=C.COMMENT_ENDED,t.comment=O(t.opt,t.comment),t.comment&&N(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+c,t.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==c?(L(t,"Malformed comment"),t.comment+="--"+c,t.state=C.COMMENT):t.state=C.TEXT;continue;case C.CDATA:"]"===c?t.state=C.CDATA_ENDING:t.cdata+=c;continue;case C.CDATA_ENDING:"]"===c?t.state=C.CDATA_ENDING_2:(t.cdata+="]"+c,t.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===c?(t.cdata&&N(t,"oncdata",t.cdata),N(t,"onclosecdata"),t.cdata="",t.state=C.TEXT):"]"===c?t.cdata+="]":(t.cdata+="]]"+c,t.state=C.CDATA);continue;case C.PROC_INST:"?"===c?t.state=C.PROC_INST_ENDING:I(S,c)?t.state=C.PROC_INST_BODY:t.procInstName+=c;continue;case C.PROC_INST_BODY:if(!t.procInstBody&&I(S,c))continue;"?"===c?t.state=C.PROC_INST_ENDING:t.procInstBody+=c;continue;case C.PROC_INST_ENDING:">"===c?(N(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=C.TEXT):(t.procInstBody+="?"+c,t.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:I(w,c)?t.tagName+=c:(l=s=void 0,(a=t).strict||(a.tagName=a.tagName[a.looseCase]()),s=a.tags[a.tags.length-1]||a,l=a.tag={name:a.tagName,attributes:{}},a.opt.xmlns&&(l.ns=s.ns),a.attribList.length=0,N(a,"onopentagstart",l),">"===c?k(t):"/"===c?t.state=C.OPEN_TAG_SLASH:(R(S,c)&&L(t,"Invalid character in tag name"),t.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===c?(k(t,!0),F(t)):(L(t,"Forward-slash in opening tag not followed by >"),t.state=C.ATTRIB);continue;case C.ATTRIB:if(I(S,c))continue;">"===c?k(t):"/"===c?t.state=C.OPEN_TAG_SLASH:I(A,c)?(t.attribName=c,t.attribValue="",t.state=C.ATTRIB_NAME):L(t,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===c?t.state=C.ATTRIB_VALUE:">"===c?(L(t,"Attribute without value"),t.attribValue=t.attribName,x(t),k(t)):I(S,c)?t.state=C.ATTRIB_NAME_SAW_WHITE:I(w,c)?t.attribName+=c:L(t,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===c)t.state=C.ATTRIB_VALUE;else{if(I(S,c))continue;L(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",N(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===c?k(t):I(A,c)?(t.attribName=c,t.state=C.ATTRIB_NAME):(L(t,"Invalid attribute name"),t.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(I(S,c))continue;I(T,c)?(t.q=c,t.state=C.ATTRIB_VALUE_QUOTED):(L(t,"Unquoted attribute value"),t.state=C.ATTRIB_VALUE_UNQUOTED,t.attribValue=c);continue;case C.ATTRIB_VALUE_QUOTED:if(c!==t.q){"&"===c?t.state=C.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=c;continue}x(t),t.q="",t.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:I(S,c)?t.state=C.ATTRIB:">"===c?k(t):"/"===c?t.state=C.OPEN_TAG_SLASH:I(A,c)?(L(t,"No whitespace between attributes"),t.attribName=c,t.attribValue="",t.state=C.ATTRIB_NAME):L(t,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(R(b,c)){"&"===c?t.state=C.ATTRIB_VALUE_ENTITY_U:t.attribValue+=c;continue}x(t),">"===c?k(t):t.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(t.tagName)">"===c?F(t):I(w,c)?t.tagName+=c:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=C.SCRIPT):(R(S,c)&&L(t,"Invalid tagname in closing tag"),t.state=C.CLOSE_TAG_SAW_WHITE);else{if(I(S,c))continue;R(A,c)?t.script?(t.script+="</"+c,t.state=C.SCRIPT):L(t,"Invalid tagname in closing tag."):t.tagName=c}continue;case C.CLOSE_TAG_SAW_WHITE:if(I(S,c))continue;">"===c?F(t):L(t,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:switch(t.state){case C.TEXT_ENTITY:n=C.TEXT,r="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:n=C.ATTRIB_VALUE_QUOTED,r="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:n=C.ATTRIB_VALUE_UNQUOTED,r="attribValue"}";"===c?(t[r]+=(o=l=a=s=void 0,a=(i=t).entity,l=a.toLowerCase(),o="",i.ENTITIES[a]||i.ENTITIES[l]||("#"===(a=l).charAt(0)&&(o="x"===a.charAt(1)?(a=a.slice(2),(s=parseInt(a,16)).toString(16)):(a=a.slice(1),(s=parseInt(a,10)).toString(10))),a=a.replace(/^0+/,""),o.toLowerCase()!==a?(L(i,"Invalid character entity"),"&"+i.entity+";"):String.fromCodePoint(s))),t.entity="",t.state=n):I(t.entity.length?q:Z,c)?t.entity+=c:(L(t,"Invalid character in entity name"),t[r]+="&"+t.entity+c,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}if(t.position>=t.bufferCheckPosition){for(var f=t,p=Math.max(E.MAX_BUFFER_LENGTH,10),h=0,g=0,m=_.length;g<m;g++){var y=f[_[g]].length;if(p<y)switch(_[g]){case"textNode":D(f);break;case"cdata":N(f,"oncdata",f.cdata),f.cdata="";break;case"script":N(f,"onscript",f.script),f.script="";break;default:M(f,"Max buffer length exceeded: "+_[g])}h=Math.max(h,y)}var v=E.MAX_BUFFER_LENGTH-h;f.bufferCheckPosition=v+f.position}return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){D(this),""!==this.cdata&&(N(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(N(this,"onscript",this.script),this.script="")}};try{r=n(182).Stream}catch(E){r=function(){}}var i=E.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,i.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){var t;return"function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)&&(this._decoder||(t=n(7503).s,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===i.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var T="'\"",b=(S="\r\n\t ")+">",s="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",u={xml:s,xmlns:l},S=t(S),A=(t("0124356789"),t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function t(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function I(e,t){return"[object RegExp]"===Object.prototype.toString.call(e)?t.match(e):e[t]}function R(e,t){return!I(e,t)}var c,d,f,T=t(T),b=t(b),C=0;for(f in E.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(e){var t=E.ENTITIES[e],t="number"==typeof t?String.fromCharCode(t):t;E.ENTITIES[e]=t}),E.STATE)E.STATE[E.STATE[f]]=f;function p(e,t,n){e[t]&&e[t](n)}function N(e,t,n){e.textNode&&D(e),p(e,t,n)}function D(e){e.textNode=O(e.opt,e.textNode),e.textNode&&p(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),t=e.normalize?t.replace(/\s+/g," "):t}function M(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,p(e,"onerror",t),e}function P(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&M(e,"Unexpected end"),D(e),e.c="",e.closed=!0,p(e,"onend"),a.call(e,e.strict,e.opt),e}function L(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&M(e,t)}function h(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],n=n[1];return t&&"xmlns"===e&&(r="xmlns",n=""),{prefix:r,local:n}}function x(e){var t,n,r;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=h(e.attribName,!0)).prefix,t=t.local,"xmlns"===n&&("xml"===t&&e.attribValue!==s?L(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==l?L(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue):(n=e.tag,r=e.tags[e.tags.length-1]||e,n.ns===r.ns&&(n.ns=Object.create(r.ns)),n.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,N(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function k(t,e){if(t.opt.xmlns){var n=t.tag,r=h(t.tagName),r=(n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(L(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix),t.tags[t.tags.length-1]||t);n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){N(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var i=0,o=t.attribList.length;i<o;i++){var a=t.attribList[i],s=a[0],a=a[1],l=h(s,!0),u=l.prefix,l=l.local,c=""!==u&&n.ns[u]||"",a={name:s,value:a,prefix:u,local:l,uri:c};u&&"xmlns"!==u&&!c&&(L(t,"Unbound namespace prefix: "+JSON.stringify(u)),a.uri=u),t.tag.attributes[s]=a,N(t,"onattribute",a)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),N(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=C.TEXT:t.state=C.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function F(n){if(!n.tagName)return L(n,"Weird empty close tag."),n.textNode+="</>",n.state=C.TEXT;if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",n.state=C.SCRIPT;N(n,"onscript",n.script),n.script=""}for(var e=n.tags.length,t=n.tagName,r=t=n.strict?t:t[n.looseCase]();e--&&n.tags[e].name!==r;)L(n,"Unexpected close tag");if(e<0)return L(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",n.state=C.TEXT;n.tagName=t;for(var i=n.tags.length;i-- >e;){var o,a=n.tag=n.tags.pop();n.tagName=n.tag.name,N(n,"onclosetag",n.tagName);for(o in a.ns)o,a.ns[o];var s=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==s.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];N(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=C.TEXT}function U(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):R(S,t)&&(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function B(e,t){var n="";return n=t<e.length?e.charAt(t):n}C=E.STATE,String.fromCodePoint||(c=String.fromCharCode,d=Math.floor,e=function(){var e,t=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var o=Number(arguments[n]);if(!isFinite(o)||o<0||1114111<o||d(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?t.push(o):(e=55296+((o-=65536)>>10),t.push(e,o%1024+56320)),(n+1===r||16384<t.length)&&(i+=c.apply(null,t),t.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:e,configurable:!0,writable:!0}):String.fromCodePoint=e)},182:function(e,t,n){e.exports=r;var c=n(1159).EventEmitter;function r(){c.call(this)}n(1765)(r,c),r.Readable=n(2846),r.Writable=n(8318),r.Duplex=n(6138),r.Transform=n(9798),r.PassThrough=n(5472),r.finished=n(8800),r.pipeline=n(7295),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(u(),0===c.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",l),t.on("error",l),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},1765:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},3690:function(e){"use strict";var s={};function t(e,r,t){t=t||Error;n=i=t,(o=a).prototype=Object.create(n.prototype),(o.prototype.constructor=o).__proto__=n;var i,n,o=a;function a(e,t,n){return i.call(this,"string"==typeof r?r:r(e,t,n))||this}o.prototype.name=t.name,o.prototype.code=e,s[e]=o}function l(e,t){var n;return Array.isArray(e)?(n=e.length,e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,o,a;return"string"==typeof t&&"not "===t.substr(0,"not ".length)?(r="must not be",t=t.replace(/^not /,"")):r="must be",o=e,(void 0===a||a>o.length)&&(a=o.length),(" argument"===o.substring(a-" argument".length,a)?"The ".concat(e," "):(o=(i="number"!=typeof i?0:i)+".".length>e.length||-1===e.indexOf(".",i)?"argument":"property",'The "'.concat(e,'" ').concat(o," "))).concat(r," ").concat(l(t,"type"))+". Received type ".concat(typeof n)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=s},6138:function(e,t,n){"use strict";var r=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},i=(e.exports=u,n(2846)),o=n(8318);n(1765)(u,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",c))}function c(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5472:function(e,t,n){"use strict";e.exports=i;var r=n(9798);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(1765)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},2846:function(e,k,i){"use strict";var r;(e.exports=T).ReadableState=_,i(1159).EventEmitter;function g(e,t){return e.listeners(t).length}var o,t,n,a=i(9299),d=i(1549).Buffer,f=i.g.Uint8Array||function(){},e=i(964),m=e&&e.debuglog?e.debuglog("stream"):function(){},s=i(8393),e=i(6163),l=i(7269).getHighWaterMark,u=i(3690).q,p=u.ERR_INVALID_ARG_TYPE,h=u.ERR_STREAM_PUSH_AFTER_EOF,c=u.ERR_METHOD_NOT_IMPLEMENTED,y=u.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v=(i(1765)(T,a),e.errorOrDestroy),E=["error","close","destroy","pause","resume"];function _(e,t,n){r=r||i(6138),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=l(this,e,"readableHighWaterMark",n),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||i(7503).s,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function T(e){if(r=r||i(6138),!(this instanceof T))return new T(e);var t=this instanceof r;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),a.call(this)}function b(e,t,n,r,i){m("readableAddChunk",t);var o,a,s,l,u,c=e._readableState;if(null===t)c.reading=!1,s=e,l=c,m("onEofChunk"),l.ended||(l.decoder&&(u=l.decoder.end())&&u.length&&(l.buffer.push(u),l.length+=l.objectMode?1:u.length),l.ended=!0,l.sync?w(s):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,I(s))));else if(i||(u=c,s=l=t,o=a=d.isBuffer(s)||s instanceof f||"string"==typeof l||void 0===l||u.objectMode?a:new p("chunk",["string","Buffer","Uint8Array"],l)),o)v(e,o);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===d.prototype||(i=t,t=d.from(i)),r)c.endEmitted?v(e,new y):S(e,c,t,!0);else if(c.ended)v(e,new h);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||n||(t=c.decoder.write(t),c.objectMode)||0!==t.length?S(e,c,t,!1):R(e,c)}else r||(c.reading=!1,R(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),R(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=e.destroy,T.prototype._undestroy=e.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},T.prototype.unshift=function(e){return b(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){var t=new(o=o||i(7503).s)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(1073741824<=(n=e)?n=1073741824:(n--,n=(n=(n=(n=(n|=n>>>1)|n>>>2)|n>>>4)|n>>>8)|n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function w(e){var t=e._readableState;m("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(I,e))}function I(e){var t=e._readableState;m("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function R(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(m("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function D(e){m("readable nexttick read 0"),e.read(0)}function O(e,t){m("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;m("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){m("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy()}function x(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t,n=this._readableState,r=e;return 0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:0<n.length)||n.ended)?(m("read: emitReadable",n.length,n.ended),(0===n.length&&n.ended?L:w)(this),null):0===(e=A(e,n))&&n.ended?(0===n.length&&L(this),null):(t=n.needReadable,m("need readable",t),(0===n.length||n.length-e<n.highWaterMark)&&m("length less than watermark",t=!0),n.ended||n.reading?m("reading or ended",t=!1):t&&(m("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=A(r,n))),null===(t=0<e?P(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e)&&n.ended&&L(this),null!==t&&this.emit("data",t),t)},T.prototype._read=function(e){v(this,new c("_read()"))},T.prototype.pipe=function(r,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=r;break;case 1:o.pipes=[o.pipes,r];break;default:o.pipes.push(r)}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,e);e=e&&!1===e.end||r===process.stdout||r===process.stderr?h:a;function a(){m("onend"),r.end()}o.endEmitted?process.nextTick(e):i.once("end",e),r.on("unpipe",function e(t,n){m("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,m("cleanup"),r.removeListener("close",f),r.removeListener("finish",p),r.removeListener("drain",l),r.removeListener("error",d),r.removeListener("unpipe",e),i.removeListener("end",a),i.removeListener("end",h),i.removeListener("data",c),u=!0,!o.awaitDrain||r._writableState&&!r._writableState.needDrain||l())});t=i;var t,n,s,l=function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&g(t,"data")&&(e.flowing=!0,M(t))},u=(r.on("drain",l),!1);function c(e){m("ondata");e=r.write(e);m("dest.write",e),!1===e&&((1===o.pipesCount&&o.pipes===r||1<o.pipesCount&&-1!==x(o.pipes,r))&&!u&&(m("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function d(e){m("onerror",e),h(),r.removeListener("error",d),0===g(r,"error")&&v(r,e)}function f(){r.removeListener("finish",p),h()}function p(){m("onfinish"),r.removeListener("close",f),h()}function h(){m("unpipe"),i.unpipe(r)}return i.on("data",c),e="error",s=d,"function"==typeof(n=r).prependListener?n.prependListener(e,s):n._events&&n._events[e]?Array.isArray(n._events[e])?n._events[e].unshift(s):n._events[e]=[s,n._events[e]]:n.on(e,s),r.once("close",f),r.once("finish",p),r.emit("pipe",i),o.flowing||(m("pipe resume"),i.resume()),r},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n));else if(e){var r=x(t.pipes,e);-1!==r&&(t.pipes.splice(r,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n))}else{var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)i[a].emit("unpipe",this,{hasUnpiped:!1})}return this},T.prototype.addListener=T.prototype.on=function(e,t){var t=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=0<this.listenerCount("readable"),!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,m("on readable",n.length,n.reading),n.length?w(this):n.reading||process.nextTick(D,this)),t},T.prototype.removeListener=function(e,t){t=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(N,this),t},T.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(N,this),t},T.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(m("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,process.nextTick(O,e,t))),n.paused=!1,this},T.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e,n=this,r=this._readableState,i=!1;for(e in t.on("end",function(){var e;m("wrapped end"),r.decoder&&!r.ended&&(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){m("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!n.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){m("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return(t=void 0===t?i(7299):t)(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=P,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return(n=void 0===n?i(6233):n)(T,e,t)})},9798:function(e,t,n){"use strict";e.exports=l;var e=n(3690).q,r=e.ERR_METHOD_NOT_IMPLEMENTED,i=e.ERR_MULTIPLE_CALLBACK,o=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=e.ERR_TRANSFORM_WITH_LENGTH_0,s=n(6138);function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState,r=(n.transforming=!1,n.writecb);if(null===r)return this.emit("error",new i);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(n=this._readableState).reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",u)}function u(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,t){c(n,e,t)})}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;e.push(null)}n(1765)(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming&&(n=this._readableState,r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},8318:function(e,t,n){"use strict";function c(i){var o=this;this.next=null,this.entry=null,this.finish=function(){var e=o,t=i,n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(void 0),n=n.next}t.corkedRequestsFree.next=e}}var r;(e.exports=S).WritableState=g;var i,e={deprecate:n(7839)},o=n(9299),m=n(1549).Buffer,y=n.g.Uint8Array||function(){},a=n(6163),s=n(7269).getHighWaterMark,l=n(3690).q,v=l.ERR_INVALID_ARG_TYPE,u=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,E=l.ERR_STREAM_NULL_VALUES,_=l.ERR_STREAM_WRITE_AFTER_END,h=l.ERR_UNKNOWN_ENCODING,T=a.errorOrDestroy;function b(){}function g(e,u,t){r=r||n(6138),e=e||{},"boolean"!=typeof t&&(t=u instanceof r),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=s(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t,n,r,i,o=u,a=o._writableState,s=a.sync,l=a.writecb;if("function"!=typeof l)throw new d;(i=a).writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,e?(i=o,n=s,e=e,r=l,--(t=a).pendingcb,n?(process.nextTick(r,e),process.nextTick(N,i,t),i._writableState.errorEmitted=!0,T(i,e)):(r(e),i._writableState.errorEmitted=!0,T(i,e),N(i,t))):((n=R(a)||o.destroyed)||a.corked||a.bufferProcessing||!a.bufferedRequest||I(o,a),s?process.nextTick(w,o,a,n,l):w(o,a,n,l))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function S(e){var t=this instanceof(r=r||n(6138));if(!t&&!i.call(S,this))return new S(e);this._writableState=new g(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),o.call(this)}function A(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,n,r){var i;n||(n=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,n.emit("drain"))),t.pendingcb--,r(),N(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),r=t.corkedRequestsFree;r.entry=n;for(var o=0,a=!0;n;)(i[o]=n).isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,A(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new c(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,l=n.encoding,u=n.callback;if(A(e,t,!1,t.objectMode?1:s.length,s,l,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,n){t._final(function(e){n.pendingcb--,e&&T(t,e),n.prefinished=!0,t.emit("prefinish"),N(t,n)})}function N(e,t){var n,r,i=R(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,process.nextTick(C,n,r))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&((!(n=e._readableState)||n.autoDestroy&&n.endEmitted)&&e.destroy()),i}n(1765)(S,o),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(g.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===S&&e&&e._writableState instanceof g}})):i=function(e){return e instanceof this},S.prototype.pipe=function(){T(this,new f)},S.prototype.write=function(e,t,n){var r,i,o,a,s,l,u,c,d,f,p=this._writableState,h=!1,g=!p.objectMode&&(g=e,m.isBuffer(g)||g instanceof y);return g&&!m.isBuffer(e)&&(f=e,e=m.from(f)),"function"==typeof t&&(n=t,t=null),t=g?"buffer":t||p.defaultEncoding,"function"!=typeof n&&(n=b),p.ending?(f=this,c=n,d=new _,T(f,d),process.nextTick(c,d)):g||(c=this,d=p,l=n,null===(s=e)?u=new E:"string"==typeof s||d.objectMode||(u=new v("chunk",["string","Buffer"],s)),!u)?(p.pendingcb++,s=this,p=p,e=e,t=t,n=n,(r=g)||(a=e,o=t,a=p.objectMode||!1===p.decodeStrings||"string"!=typeof a?a:m.from(a,o),e!==a&&(r=!0,t="buffer",e=a)),o=p.objectMode?1:e.length,p.length+=o,(a=p.length<p.highWaterMark)||(p.needDrain=!0),p.writing||p.corked?(i=p.lastBufferedRequest,p.lastBufferedRequest={chunk:e,encoding:t,isBuf:r,callback:n,next:null},i?i.next=p.lastBufferedRequest:p.bufferedRequest=p.lastBufferedRequest,p.bufferedRequestCount+=1):A(s,p,!1,o,e,t,n),h=a):(T(c,u),process.nextTick(l,u)),h},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new h(e)},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new u("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||(e=this,t=n,(n=r).ending=!0,N(e,n),t&&(n.finished?process.nextTick(t):e.once("finish",t)),n.ended=!0,e.writable=!1),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=a.destroy,S.prototype._undestroy=a.undestroy,S.prototype._destroy=function(e,t){t(e)}},7299:function(e,t,n){"use strict";var r;function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var o=n(8800),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t,n=e[a];null!==n&&null!==(t=e[f].read())&&(e[c]=null,e[a]=null,e[s]=null,n(p(t,!1)))}var n=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var n=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,t){process.nextTick(function(){n[l]?t(n[l]):e(p(void 0,!0))})});var t,r,i,e=this[c];if(e)t=new Promise((r=e,i=this,function(e,t){r.then(function(){i[u]?e(p(void 0,!0)):i[d](e,t)},t)}));else{e=this[f].read();if(null!==e)return Promise.resolve(p(e,!1));t=new Promise(this[d])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var e=this;return new Promise(function(t,n){e[f].destroy(null,function(e){e?n(e):t(p(void 0,!0))})})}),r),n);e.exports=function(e){var t,r=Object.create(g,(i(t={},f,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[f].read();n?(r[c]=null,r[a]=null,r[s]=null,e(p(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[c]=null,o(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=r[s])&&(r[c]=null,r[a]=null,r[s]=null,t(e)),r[l]=e):(null!==(t=r[a])&&(r[c]=null,r[a]=null,t(p(void 0,!(r[s]=null)))),r[u]=!0)}),e.on("readable",function(e){process.nextTick(h,e)}.bind(null,r)),r}},8393:function(e,t,n){"use strict";function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var s=n(1549).Buffer,l=n(9862).inspect,u=l&&l.custom||"inspect";e.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}for(var t=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,n=o,s.prototype.copy.call(t,r,n),o+=i.data.length,i=i.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(o);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=i.slice(o);break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return l(this,function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},t,{depth:0,customInspect:!1}))}}],n=e.prototype,r=t,i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}return e}()},6163:function(e){"use strict";function o(e,t){s(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,e)):process.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?process.nextTick(a,n):(n._writableState.errorEmitted=!0,process.nextTick(o,n,e)):process.nextTick(o,n,e):t?(process.nextTick(a,n),t(e)):process.nextTick(a,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8800:function(e,t,n){"use strict";var m=n(3690).q.ERR_STREAM_PREMATURE_CLOSE;function y(){}e.exports=function e(t,n,r){var i,o,a,s,l,u,c,d,f,p,h,g;return"function"==typeof n?e(t,null,n):(i=r||y,o=!1,r=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}},a=(n=n||{}).readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){u=!(s=!1),a||r.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){d=!(a=!1),s||r.call(t)},p=function(e){r.call(t,e)},h=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new m),r.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new m),r.call(t,e)):void 0},g=function(){t.req.on("finish",c)},t.setHeader&&"function"==typeof t.abort?(t.on("complete",c),t.on("abort",h),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",f),t.on("finish",c),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",c),t.removeListener("abort",h),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)})}},6233:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(e,t,h){"use strict";var g,n=h(3690).q,r=n.ERR_MISSING_ARGS,m=n.ERR_STREAM_DESTROYED;function i(e){if(e)throw e}function y(e){e()}function o(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,c=new Array(e),t=0;t<e;t++)c[t]=arguments[t];var d,n,f=!(n=c).length||"function"!=typeof n[n.length-1]?i:n.pop();if((c=Array.isArray(c[0])?c[0]:c).length<2)throw new r("streams");var p=c.map(function(e,t){var n,r,i,o,a,s,l,u=t<c.length-1;return r=u,t=0<t,o=i=function(e){d=d||e,e&&p.forEach(y),u||(p.forEach(y),f(d))},a=!1,s=!(i=function(){a||(a=!0,o.apply(void 0,arguments))}),(n=e).on("close",function(){s=!0}),(g=void 0===g?h(8800):g)(n,{readable:r,writable:t},function(e){if(e)return i(e);s=!0,i()}),l=!1,function(e){if(!s&&!l)return l=!0,n.setHeader&&"function"==typeof n.abort?n.abort():"function"==typeof n.destroy?n.destroy():void i(e||new m("pipe"))}});return c.reduce(o)}},7269:function(e,t,n){"use strict";var i=n(3690).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){t=null!=t.highWaterMark?t.highWaterMark:r?t[n]:null;if(null==t)return e.objectMode?16:16384;if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new i(r?n:"highWaterMark",t);return Math.floor(t)}}},9299:function(e,t,n){e.exports=n(1159).EventEmitter},7503:function(e,t,n){"use strict";var r=n(8387).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||r.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t,n=this.lastTotal-this.lastNeed,r=(t=this,128!=(192&(r=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<r.length?128!=(192&r[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<r.length&&128!=(192&r[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var n=t.charCodeAt(t.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(t.s=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){n=this,o=t;var n,r,i,o=(i=(a=e).length-1)<o?0:0<=(r=s(a[i]))?(0<r&&(n.lastNeed=r-1),r):--i<o||-2===r?0:0<=(r=s(a[i]))?(0<r&&(n.lastNeed=r-2),r):!(--i<o||-2===r)&&0<=(r=s(a[i]))?(0<r&&(2===r?r=0:n.lastNeed=r-3),r):0;if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=o;var a=e.length-(o-this.lastNeed);return e.copy(this.lastChar,0,a),e.toString("utf8",t,a)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},1067:function(G,j,H){var Y;!function(s,d){"use strict";function e(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t}function k(e,t){return typeof e===g&&-1!==L(t).indexOf(L(e))}function l(e,t){if(typeof e===g)return e=e.replace(/^\s\s*/,""),typeof t==p?e:e.substring(0,500)}function u(e,t){for(var n,r,i,o,a,s=0;s<t.length&&!o;){for(var l=t[s],u=t[s+1],c=n=0;c<l.length&&!o&&l[c];)if(o=l[c++].exec(e))for(r=0;r<u.length;r++)a=o[++n],typeof(i=u[r])===h&&0<i.length?2===i.length?typeof i[1]==f?this[i[0]]=i[1].call(this,a):this[i[0]]=i[1]:3===i.length?typeof i[1]!==f||i[1].exec&&i[1].test?this[i[0]]=a?a.replace(i[1],i[2]):d:this[i[0]]=a?i[1].call(this,a,i[2]):d:4===i.length&&(this[i[0]]=a?i[3].call(this,a.replace(i[1],i[2])):d):this[i]=a||d;s+=2}}function t(e,t){for(var n in t)if(typeof t[n]===h&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(k(t[n][r],e))return"?"===n?d:n}else if(k(t[n],e))return"?"===n?d:n;return e}function c(e,t){var n,r,i,o,a;return typeof e===h&&(t=e,e=d),this instanceof c?(n=typeof s!=p&&s.navigator?s.navigator:d,r=e||(n&&n.userAgent?n.userAgent:""),i=n&&n.userAgentData?n.userAgentData:d,o=t?function(e,t){var n,r={};for(n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(q,t):q,a=n&&n.userAgent==r,this.getBrowser=function(){var e,t={};return t.name=d,t[v]=d,u.call(t,r,o.browser),t.major=typeof(e=t[v])===g?e.replace(/[^\d\.]/g,"").split(".")[0]:d,a&&n&&n.brave&&typeof n.brave.isBrave==f&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e[E]=d,u.call(e,r,o.cpu),e},this.getDevice=function(){var e={};return e[y]=d,e[m]=d,e.type=d,u.call(e,r,o.device),a&&!e.type&&i&&i.mobile&&(e.type=_),a&&"Macintosh"==e[m]&&n&&typeof n.standalone!=p&&n.maxTouchPoints&&2<n.maxTouchPoints&&(e[m]="iPad",e.type=T),e},this.getEngine=function(){var e={};return e.name=d,e[v]=d,u.call(e,r,o.engine),e},this.getOS=function(){var e={};return e.name=d,e[v]=d,u.call(e,r,o.os),a&&!e.name&&i&&"Unknown"!=i.platform&&(e.name=i.platform.replace(/chrome os/i,B).replace(/macos/i,"Mac OS")),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===g&&500<e.length?l(e,500):e,this},this.setUA(r),this):new c(e,t).getResult()}var r,f="function",p="undefined",h="object",g="string",m="model",n="name",i="type",y="vendor",v="version",E="architecture",o="console",_="mobile",T="tablet",a="smarttv",b="wearable",S="embedded",A="Amazon",w="Apple",F="BlackBerry",I="Browser",R="Chrome",C="Firefox",N="Google",D="Microsoft",O="Opera",M="Samsung",P="Sony",U="Xiaomi",B="Chromium OS",L=function(e){return e.toLowerCase()},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[n,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[n,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[n,v],[/opios[\/ ]+([\w\.]+)/i],[v,[n,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[n,O]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[n,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[n,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[n,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[n,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[n,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[n,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[n,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[n,"Smart Lenovo "+I]],[/(avast|avg)\/([\w\.]+)/i],[[n,/(.+)/,"$1 Secure "+I],v],[/\bfocus\/([\w\.]+)/i],[v,[n,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[n,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[n,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[n,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[n,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[n,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[v,[n,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[n,"360 "+I]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[n,/(.+)/,"$1 "+I],v],[/samsungbrowser\/([\w\.]+)/i],[v,[n,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[n,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[n,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[n,v],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[n],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[n,"Facebook"],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[n,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[n,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[n,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[n,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[n,R+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[n,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[n,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[n,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,n],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[n,[v,t,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[n,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[n,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[n,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[n,v],[/(cobalt)\/([\w\.]+)/i],[n,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,L]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,"",L]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[y,M],[i,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[y,M],[i,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[y,w],[i,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[y,w],[i,T]],[/(macintosh);/i],[m,[y,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[y,"Sharp"],[i,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[y,"Huawei"],[i,T]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[y,"Huawei"],[i,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[y,U],[i,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[y,U],[i,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[y,"OPPO"],[i,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[y,"Vivo"],[i,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[m,[y,"Realme"],[i,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[y,"Motorola"],[i,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[y,"Motorola"],[i,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[y,"LG"],[i,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[y,"LG"],[i,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[y,"Lenovo"],[i,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[y,"Nokia"],[i,_]],[/(pixel c)\b/i],[m,[y,N],[i,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[y,N],[i,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[y,P],[i,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[y,P],[i,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[y,"OnePlus"],[i,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[y,A],[i,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[y,A],[i,_]],[/(playbook);[-\w\),; ]+(rim)/i],[m,y,[i,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[y,F],[i,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[y,"ASUS"],[i,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[y,"ASUS"],[i,_]],[/(nexus 9)/i],[m,[y,"HTC"],[i,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[m,/_/g," "],[i,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[y,"Acer"],[i,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[y,"Meizu"],[i,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[m,[y,"Ulefone"],[i,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,m,[i,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,m,[i,T]],[/(surface duo)/i],[m,[y,D],[i,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[y,"Fairphone"],[i,_]],[/(u304aa)/i],[m,[y,"AT&T"],[i,_]],[/\bsie-(\w*)/i],[m,[y,"Siemens"],[i,_]],[/\b(rct\w+) b/i],[m,[y,"RCA"],[i,T]],[/\b(venue[\d ]{2,7}) b/i],[m,[y,"Dell"],[i,T]],[/\b(q(?:mv|ta)\w+) b/i],[m,[y,"Verizon"],[i,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[y,"Barnes & Noble"],[i,T]],[/\b(tm\d{3}\w+) b/i],[m,[y,"NuVision"],[i,T]],[/\b(k88) b/i],[m,[y,"ZTE"],[i,T]],[/\b(nx\d{3}j) b/i],[m,[y,"ZTE"],[i,_]],[/\b(gen\d{3}) b.+49h/i],[m,[y,"Swiss"],[i,_]],[/\b(zur\d{3}) b/i],[m,[y,"Swiss"],[i,T]],[/\b((zeki)?tb.*\b) b/i],[m,[y,"Zeki"],[i,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],m,[i,T]],[/\b(ns-?\w{0,9}) b/i],[m,[y,"Insignia"],[i,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[y,"NextBook"],[i,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],m,[i,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],m,[i,_]],[/\b(ph-1) /i],[m,[y,"Essential"],[i,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[y,"Envizen"],[i,T]],[/\b(trio[-\w\. ]+) b/i],[m,[y,"MachSpeed"],[i,T]],[/\btu_(1491) b/i],[m,[y,"Rotor"],[i,T]],[/(shield[\w ]+) b/i],[m,[y,"Nvidia"],[i,T]],[/(sprint) (\w+)/i],[y,m,[i,_]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[y,D],[i,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[y,"Zebra"],[i,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[y,"Zebra"],[i,_]],[/smart-tv.+(samsung)/i],[y,[i,a]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[y,M],[i,a]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,"LG"],[i,a]],[/(apple) ?tv/i],[y,[m,w+" TV"],[i,a]],[/crkey/i],[[m,R+"cast"],[y,N],[i,a]],[/droid.+aft(\w+)( bui|\))/i],[m,[y,A],[i,a]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[y,"Sharp"],[i,a]],[/(bravia[\w ]+)( bui|\))/i],[m,[y,P],[i,a]],[/(mitv-\w{5}) bui/i],[m,[y,U],[i,a]],[/Hbbtv.*(technisat) (.*);/i],[y,m,[i,a]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,l],[m,l],[i,a]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[i,a]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,m,[i,o]],[/droid.+; (shield) bui/i],[m,[y,"Nvidia"],[i,o]],[/(playstation [345portablevi]+)/i],[m,[y,P],[i,o]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[y,D],[i,o]],[/((pebble))app/i],[y,m,[i,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[y,w],[i,b]],[/droid.+; (glass) \d/i],[m,[y,N],[i,b]],[/droid.+; (wt63?0{2,3})\)/i],[m,[y,"Zebra"],[i,b]],[/(quest( 2| pro)?)/i],[m,[y,"Facebook"],[i,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[i,S]],[/(aeobc)\b/i],[m,[y,A],[i,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[m,[i,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[i,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[i,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[i,_]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[n,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,n]],os:[[/microsoft (windows) (vista|xp)/i],[n,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[n,[v,t,Z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,t,Z],[n,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[n,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[n,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,n],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[n,v],[/\(bb(10);/i],[v,[n,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[n,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[n,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[n,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[n,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[n,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[n,B],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[n,v],[/(sunos) ?([\w\.\d]*)/i],[[n,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[n,v]]},x=(c.VERSION="1.0.37",c.BROWSER=e([n,v,"major"]),c.CPU=e([E]),c.DEVICE=e([m,y,i,o,_,a,T,b,S]),c.ENGINE=c.OS=e([n,v]),typeof j!=p?(j=G.exports?G.exports=c:j).UAParser=c:H.amdO?(Y=function(){return c}.call(j,H,j,G))!==d&&(G.exports=Y):typeof s!=p&&(s.UAParser=c),typeof s!=p&&(s.jQuery||s.Zepto));x&&!x.ua&&(r=new c,x.ua=r.getResult(),x.ua.get=function(){return r.getUA()},x.ua.set=function(e){r.setUA(e);var t,n=r.getResult();for(t in n)x.ua[t]=n[t]})}("object"==typeof window?window:this)},7839:function(e,t,n){function r(e){try{if(!n.g.localStorage)return}catch(e){return}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){var n;return r("noDeprecation")?e:(n=!1,function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)})}},9862:function(){},964:function(){},3165:function(e){"use strict";e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(e){"use strict";e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(e){"use strict";e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(e){"use strict";e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(e){"use strict";e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(e){"use strict";e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},r={},f.amdO={},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,{a:t}),t},f.d=function(e,t){for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p={},function(){"use strict";f.d(p,{default:function(){return d}}),f(8416);var e,i,u,t=f(1715),n=f(8080),r=f(1737),o=f(1139),a=(u="application/dash+xml",{create:c,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var o=c(r[i],null);n.push(o)}for(var a=t.querySelectorAll('source[type="'+u+'"]'),s=0;s<a.length;s++){var l=c(function e(t){return/^VIDEO$/i.test(t.nodeName)?t:e(t.parentNode)}(a[s]),null);n.push(l)}return n}});function c(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==u})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return(n=(0,o.Z)(n=n||{}).create()).initialize(e,t.src,e.autoplay),(i=i||n.getDebug().getLogger()).debug("Converted "+r+" to dash.js player and added content: "+t.src),e._dashjs_player=n}"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?a.createAll():e=window.setInterval(function(){window.dashjs&&(window.clearInterval(e),a.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),a.createAll()}));var s=a,l=f(6398),d=(dashjs.Protection=r.default,dashjs.MetricsReporting=n.default,dashjs.MediaPlayerFactory=s,dashjs.Debug=l.Z,dashjs.supportsMediaSource=t.B,dashjs)}(),p.default;function f(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,f)),t.exports}var n,r,p}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(b,k){"use strict";function v(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function g(e){return null!=e&&e===e.window}var t=[],F=Object.getPrototypeOf,s=t.slice,U=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},B=t.push,Z=t.indexOf,q={},G=q.toString,j=q.hasOwnProperty,H=j.toString,Y=H.call(Object),m={},S=b.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function $(e,t,n){var r,i,o=(n=n||S).createElement("script");if(o.text=e,t)for(r in K)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function h(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[G.call(e)]||"object":typeof e}var A=function(e,t){return new A.fn.init(e,t)};function z(e){var t=!!e&&"length"in e&&e.length,n=h(e);return!v(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}A.fn=A.prototype={jquery:"3.6.3",constructor:A,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=A.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return A.each(this,e)},map:function(n){return this.pushStack(A.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:B,sort:t.sort,splice:t.splice},A.extend=A.fn.extend=function(){var e,t,n,r,i,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(l&&n&&(A.isPlainObject(n)||(r=Array.isArray(n)))?(i=o[t],i=r&&!Array.isArray(i)?[]:r||A.isPlainObject(i)?i:{},r=!1,o[t]=A.extend(l,i,n)):void 0!==n&&(o[t]=n));return o},A.extend({expando:"jQuery"+("3.6.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==G.call(e)||(e=F(e))&&("function"!=typeof(e=j.call(e,"constructor")&&e.constructor)||H.call(e)!==Y))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){$(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(z(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(z(Object(e))?A.merge(t,"string"==typeof e?[e]:e):B.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!=a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(z(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return U(a)},guid:1,support:m}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=t[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});function r(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&A(e).is(n))break;r.push(e)}return r}function V(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var e=function(k){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function F(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function U(){b()}var e,f,_,o,B,p,Z,q,T,l,u,b,S,n,A,h,r,i,g,w="sizzle"+ +new Date,c=k.document,I=0,G=0,j=O(),H=O(),Y=O(),m=O(),K=function(e,t){return e===t&&(u=!0),0},$={}.hasOwnProperty,t=[],z=t.pop,V=t.push,R=t.push,W=t.slice,v=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},X="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",s="(?:\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Q="\\["+a+"*("+s+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+s+"))|)"+a+"*\\]",J=":("+s+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Q+")*)|.*)\\)|)",ee=new RegExp(a+"+","g"),y=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),te=new RegExp("^"+a+"*,"+a+"*"),ne=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),re=new RegExp(a+"|>"),ie=new RegExp(J),oe=new RegExp("^"+s+"$"),E={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),TAG:new RegExp("^("+s+"|[*])"),ATTR:new RegExp("^"+Q),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+X+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ae=/HTML$/i,se=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,C=/^[^{]+\{\s*\[native \w/,ue=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ce=/[+~]/,N=new RegExp("\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fe=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(t=W.call(c.childNodes),c.childNodes),t[c.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){V.apply(e,W.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function D(e,t,n,r){var i,o,a,s,l,u,c=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!r&&(b(t),t=t||S,A)){if(11!==d&&(s=ue.exec(e)))if(i=s[1]){if(9===d){if(!(u=t.getElementById(i)))return n;if(u.id===i)return n.push(u),n}else if(c&&(u=c.getElementById(i))&&g(t,u)&&u.id===i)return n.push(u),n}else{if(s[2])return R.apply(n,t.getElementsByTagName(e)),n;if((i=s[3])&&f.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(i)),n}if(f.qsa&&!m[e+" "]&&(!h||!h.test(e))&&(1!==d||"object"!==t.nodeName.toLowerCase())){if(u=e,c=t,1===d&&(re.test(e)||ne.test(e))){for((c=ce.test(e)&&me(t.parentNode)||t)===t&&f.scope||((a=t.getAttribute("id"))?a=a.replace(de,F):t.setAttribute("id",a=w)),o=(l=p(e)).length;o--;)l[o]=(a?"#"+a:":scope")+" "+x(l[o]);u=l.join(",")}try{if(f.cssSupportsSelector&&!CSS.supports("selector(:is("+u+"))"))throw new Error;return R.apply(n,c.querySelectorAll(u)),n}catch(t){m(e,!0)}finally{a===w&&t.removeAttribute("id")}}}return q(e.replace(y,"$1"),t,n,r)}function O(){var r=[];return function e(t,n){return r.push(t+" ")>_.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function M(e){return e[w]=!0,e}function P(e){var t=S.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var n=e.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&fe(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function L(a){return M(function(o){return o=+o,M(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=D.support={},B=D.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!ae.test(t||e&&e.nodeName||"HTML")},b=D.setDocument=function(e){var e=e?e.ownerDocument||e:c;return e!=S&&9===e.nodeType&&e.documentElement&&(n=(S=e).documentElement,A=!B(S),c!=S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",U,!1):e.attachEvent&&e.attachEvent("onunload",U)),f.scope=P(function(e){return n.appendChild(e).appendChild(S.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.cssSupportsSelector=P(function(){return CSS.supports("selector(*)")&&S.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),f.attributes=P(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=P(function(e){return e.appendChild(S.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=C.test(S.getElementsByClassName),f.getById=P(function(e){return n.appendChild(e).id=w,!S.getElementsByName||!S.getElementsByName(w).length}),f.getById?(_.filter.ID=function(e){var t=e.replace(N,d);return function(e){return e.getAttribute("id")===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&A)return(t=t.getElementById(e))?[t]:[]}):(_.filter.ID=function(e){var t=e.replace(N,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),_.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},_.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},r=[],h=[],(f.qsa=C.test(S.querySelectorAll))&&(P(function(e){var t;n.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&h.push("[*^$]="+a+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||h.push("\\["+a+"*(?:value|"+X+")"),e.querySelectorAll("[id~="+w+"-]").length||h.push("~="),(t=S.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||h.push("\\["+a+"*name"+a+"*="+a+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||h.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||h.push(".#.+[+~]"),e.querySelectorAll("\\\f"),h.push("[\\r\\n\\f]")}),P(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=S.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&h.push("name"+a+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&h.push(":enabled",":disabled"),n.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(f.matchesSelector=C.test(i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&P(function(e){f.disconnectedMatch=i.call(e,"*"),i.call(e,"[s!='']:x"),r.push("!=",J)}),f.cssSupportsSelector||h.push(":has"),h=h.length&&new RegExp(h.join("|")),r=r.length&&new RegExp(r.join("|")),e=C.test(n.compareDocumentPosition),g=e||C.test(n.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=e?function(e,t){var n;return e===t?(u=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e==S||e.ownerDocument==c&&g(c,e)?-1:t==S||t.ownerDocument==c&&g(c,t)?1:l?v(l,e)-v(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==S?-1:t==S?1:i?-1:o?1:l?v(l,e)-v(l,t):0;if(i===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?he(a[r],s[r]):a[r]==c?-1:s[r]==c?1:0}),S},D.matches=function(e,t){return D(e,null,null,t)},D.matchesSelector=function(e,t){if(b(e),f.matchesSelector&&A&&!m[t+" "]&&(!r||!r.test(t))&&(!h||!h.test(t)))try{var n=i.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){m(t,!0)}return 0<D(t,S,null,[e]).length},D.contains=function(e,t){return(e.ownerDocument||e)!=S&&b(e),g(e,t)},D.attr=function(e,t){(e.ownerDocument||e)!=S&&b(e);var n=_.attrHandle[t.toLowerCase()],n=n&&$.call(_.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==n?n:f.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},D.escape=function(e){return(e+"").replace(de,F)},D.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},D.uniqueSort=function(e){var t,n=[],r=0,i=0;if(u=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(K),u){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},o=D.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(_=D.selectors={cacheLength:50,createPseudo:M,match:E,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(N,d),e[3]=(e[3]||e[4]||e[5]||"").replace(N,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||D.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&D.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return E.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ie.test(n)&&(t=(t=p(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(N,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+a+")"+e+"("+a+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=D.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(ee," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,g,m){var y="nth"!==h.slice(0,3),v="last"!==h.slice(-4),E="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,l,u=y!=v?"nextSibling":"previousSibling",c=e.parentNode,d=E&&e.nodeName.toLowerCase(),f=!n&&!E,p=!1;if(c){if(y){for(;u;){for(a=e;a=a[u];)if(E?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=u="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&f){for(p=(s=(r=(i=(o=(a=c)[w]||(a[w]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===I&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(p=s=0,l.pop());)if(1===a.nodeType&&++p&&a===e){i[h]=[I,s,p];break}}else if(!1===(p=f?s=(r=(i=(o=(a=e)[w]||(a[w]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===I&&r[1]:p))for(;(a=++s&&a&&a[u]||(p=s=0,l.pop()))&&((E?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++p||(f&&((i=(o=a[w]||(a[w]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[I,p]),a!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,o){var t,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||D.error("unsupported pseudo: "+e);return a[w]?a(o):1<a.length?(t=[e,e,"",o],_.setFilters.hasOwnProperty(e.toLowerCase())?M(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=v(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:M(function(e){var r=[],i=[],s=Z(e.replace(y,"$1"));return s[w]?M(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:M(function(t){return function(e){return 0<D(t,e).length}}),contains:M(function(t){return t=t.replace(N,d),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:M(function(n){return oe.test(n||"")||D.error("unsupported lang: "+n),n=n.replace(N,d).toLowerCase(),function(e){var t;do{if(t=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=k.location&&k.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===n},focus:function(e){return e===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return se.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:L(function(){return[0]}),last:L(function(e,t){return[t-1]}),eq:L(function(e,t,n){return[n<0?n+t:n]}),even:L(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:L(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:L(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:L(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})_.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ye(){}function x(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(a,e,t){var s=e.dir,l=e.next,u=l||s,c=t&&"parentNode"===u,d=G++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[I,d];if(n){for(;e=e[s];)if((1===e.nodeType||c)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||c)if(i=(i=e[w]||(e[w]={}))[e.uniqueID]||(i[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((r=i[u])&&r[0]===I&&r[1]===d)return o[2]=r[2];if((i[u]=o)[2]=a(e,t,n))return!0}return!1}}function Ee(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function _e(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)!(o=e[s])||n&&!n(o,r,i)||(a.push(o),u&&t.push(s));return a}function Te(e){for(var r,t,n,i=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,l=ve(function(e){return e===r},a,!0),u=ve(function(e){return-1<v(r,e)},a,!0),c=[function(e,t,n){e=!o&&(n||t!==T)||((r=t).nodeType?l:u)(e,t,n);return r=null,e}];s<i;s++)if(t=_.relative[e[s].type])c=[ve(Ee(c),t)];else{if((t=_.filter[e[s].type].apply(null,e[s].matches))[w]){for(n=++s;n<i&&!_.relative[e[n].type];n++);return function e(p,h,g,m,y,t){return m&&!m[w]&&(m=e(m)),y&&!y[w]&&(y=e(y,t)),M(function(e,t,n,r){var i,o,a,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)D(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!p||!e&&h?c:_e(c,s,p,n,r),f=g?y||(e?p:u||m)?[]:t:d;if(g&&g(d,f,n,r),m)for(i=_e(f,l),m(i,[],n,r),o=i.length;o--;)(a=i[o])&&(f[l[o]]=!(d[l[o]]=a));if(e){if(y||p){if(y){for(i=[],o=f.length;o--;)(a=f[o])&&i.push(d[o]=a);y(null,f=[],i,r)}for(o=f.length;o--;)(a=f[o])&&-1<(i=y?v(e,a):s[o])&&(e[i]=!(t[i]=a))}}else f=_e(f===t?f.splice(u,f.length):f),y?y(null,t,f,r):R.apply(t,f)})}(1<s&&Ee(c),1<s&&x(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(y,"$1"),t,s<n&&Te(e.slice(s,n)),n<i&&Te(e=e.slice(n)),n<i&&x(e))}c.push(t)}return Ee(c)}return ye.prototype=_.filters=_.pseudos,_.setFilters=new ye,p=D.tokenize=function(e,t){var n,r,i,o,a,s,l,u=H[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=_.preFilter;a;){for(o in n&&!(r=te.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=ne.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(y," ")}),a=a.slice(n.length)),_.filter)!(r=E[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?D.error(e):H(e,s).slice(0)},Z=D.compile=function(e,t){var n,m,y,v,E,r,i=[],o=[],a=Y[e+" "];if(!a){for(n=(t=t||p(e)).length;n--;)((a=Te(t[n]))[w]?i:o).push(a);(a=Y(e,(v=0<(y=i).length,E=0<(m=o).length,r=function(e,t,n,r,i){var o,a,s,l=0,u="0",c=e&&[],d=[],f=T,p=e||E&&_.find.TAG("*",i),h=I+=null==f?1:Math.random()||.1,g=p.length;for(i&&(T=t==S||t||i);u!==g&&null!=(o=p[u]);u++){if(E&&o){for(a=0,t||o.ownerDocument==S||(b(o),n=!A);s=m[a++];)if(s(o,t||S,n)){r.push(o);break}i&&(I=h)}v&&((o=!s&&o)&&l--,e)&&c.push(o)}if(l+=u,v&&u!==l){for(a=0;s=y[a++];)s(c,d,t,n);if(e){if(0<l)for(;u--;)c[u]||d[u]||(d[u]=z.call(r));d=_e(d)}R.apply(r,d),i&&!e&&0<d.length&&1<l+y.length&&D.uniqueSort(r)}return i&&(I=h,T=f),c},v?M(r):r))).selector=e}return a},q=D.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,c=!r&&p(e=u.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&A&&_.relative[o[1].type]){if(!(t=(_.find.ID(a.matches[0].replace(N,d),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=E.needsContext.test(e)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((l=_.find[s])&&(r=l(a.matches[0].replace(N,d),ce.test(o[0].type)&&me(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&x(o))break;return R.apply(n,r),n}}return(u||Z(e,c))(r,t,!A,n,!t||ce.test(e)&&me(t.parentNode)||t),n},f.sortStable=w.split("").sort(K).join("")===w,f.detectDuplicates=!!u,b(),f.sortDetached=P(function(e){return 1&e.compareDocumentPosition(S.createElement("fieldset"))}),P(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&P(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),P(function(e){return null==e.getAttribute("disabled")})||pe(X,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),D}(b),W=(A.find=e,A.expr=e.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=e.uniqueSort,A.text=e.getText,A.isXMLDoc=e.isXML,A.contains=e.contains,A.escapeSelector=e.escape,A.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var X=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Q(e,n,r){return v(n)?A.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?A.grep(e,function(e){return e===n!==r}):"string"!=typeof n?A.grep(e,function(e){return-1<Z.call(n,e)!==r}):A.filter(n,e,r)}A.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?A.find.matchesSelector(r,e)?[r]:[]:A.find.matches(e,A.grep(t,function(e){return 1===e.nodeType}))},A.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(A(e).filter(function(){for(t=0;t<r;t++)if(A.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)A.find(e,i[t],n);return 1<r?A.uniqueSort(n):n},filter:function(e){return this.pushStack(Q(this,e||[],!1))},not:function(e){return this.pushStack(Q(this,e||[],!0))},is:function(e){return!!Q(this,"string"==typeof e&&W.test(e)?A(e):e||[],!1).length}});var J,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((A.fn.init=function(e,t,n){if(e){if(n=n||J,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(A):A.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),X.test(r[1])&&A.isPlainObject(t))for(var r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r])}else(n=S.getElementById(r[2]))&&(this[0]=n,this.length=1)}return this}).prototype=A.fn,J=A(S),/^(?:parents|prev(?:Until|All))/),ne={children:!0,contents:!0,next:!0,prev:!0};function re(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(A.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&A(e);if(!W.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&A.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?A.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(A(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return r(e,"parentNode")},parentsUntil:function(e,t,n){return r(e,"parentNode",n)},next:function(e){return re(e,"nextSibling")},prev:function(e){return re(e,"previousSibling")},nextAll:function(e){return r(e,"nextSibling")},prevAll:function(e){return r(e,"previousSibling")},nextUntil:function(e,t,n){return r(e,"nextSibling",n)},prevUntil:function(e,t,n){return r(e,"previousSibling",n)},siblings:function(e){return V((e.parentNode||{}).firstChild,e)},children:function(e){return V(e.firstChild)},contents:function(e){return null!=e.contentDocument&&F(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},function(r,i){A.fn[r]=function(e,t){var n=A.map(this,i,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=A.filter(t,n)),1<this.length&&(ne[r]||A.uniqueSort(n),te.test(r))&&n.reverse(),this.pushStack(n)}});var w=/[^\x20\t\r\n\f]+/g;function c(e){return e}function ie(e){throw e}function oe(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}A.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},A.each(e.match(w)||[],function(e,t){n[t]=!0}),n):A.extend({},r);function i(){for(s=s||r.once,a=o=!0;u.length;c=-1)for(t=u.shift();++c<l.length;)!1===l[c].apply(t[0],t[1])&&r.stopOnFalse&&(c=l.length,t=!1);r.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],u=[],c=-1,d={add:function(){return l&&(t&&!o&&(c=l.length-1,u.push(t)),function n(e){A.each(e,function(e,t){v(t)?r.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==h(t)&&n(t)})}(arguments),t)&&!o&&i(),this},remove:function(){return A.each(arguments,function(e,t){for(var n;-1<(n=A.inArray(t,l,n));)l.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<A.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=u=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=u=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),o)||i(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},A.extend({Deferred:function(e){var o=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return A.Deferred(function(r){A.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var l=0;function u(i,o,a,s){return function(){function e(){var e,t;if(!(i<l)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,u(l,o,c,s),u(l,o,ie,s)):(l++,t.call(e,u(l,o,c,s),u(l,o,ie,s),u(l,o,c,o.notifyWith))):(a!==c&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}}var n=this,r=arguments,t=s?e:function(){try{e()}catch(e){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(e,t.stackTrace),l<=i+1&&(a!==ie&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(A.Deferred.getStackHook&&(t.stackTrace=A.Deferred.getStackHook()),b.setTimeout(t))}}return A.Deferred(function(e){o[0][3].add(u(0,e,v(r)?r:c,e.notifyWith)),o[1][3].add(u(0,e,v(t)?t:c)),o[2][3].add(u(0,e,v(n)?n:ie))}).promise()},promise:function(e){return null!=e?A.extend(e,a):a}},s={};return A.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){i[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--n||a.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=s.call(arguments),a=A.Deferred();if(n<=1&&(oe(e,a.done(t(r)).resolve,a.reject,!n),"pending"===a.state()||v(o[r]&&o[r].then)))return a.then();for(;r--;)oe(o[r],t(r),a.reject);return a.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,se=(A.Deferred.exceptionHook=function(e,t){b.console&&b.console.warn&&e&&ae.test(e.name)&&b.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){b.setTimeout(function(){throw e})},A.Deferred());function le(){S.removeEventListener("DOMContentLoaded",le),b.removeEventListener("load",le),A.ready()}A.fn.ready=function(e){return se.then(e).catch(function(e){A.readyException(e)}),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0)!==e&&0<--A.readyWait||se.resolveWith(S,[A])}}),A.ready.then=se.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?b.setTimeout(A.ready):(S.addEventListener("DOMContentLoaded",le),b.addEventListener("load",le));function d(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===h(n))for(s in i=!0,n)d(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),t=u?a?(t.call(e,r),null):(u=t,function(e,t,n){return u.call(A(e),n)}):t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o}var ue=/^-ms-/,ce=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function E(e){return e.replace(ue,"ms-").replace(ce,de)}function y(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function fe(){this.expando=A.expando+fe.uid++}fe.uid=1,fe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[E(t)]=n;else for(r in t)i[E(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][E(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(E):(t=E(t))in r?[t]:t.match(w)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!A.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!A.isEmptyObject(e)}};var _=new fe,u=new fe,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,he=/[A-Z]/g;function ge(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(he,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:pe.test(i)?JSON.parse(i):i)}catch(e){}u.set(e,t,n)}else n=void 0;return n}A.extend({hasData:function(e){return u.hasData(e)||_.hasData(e)},data:function(e,t,n){return u.access(e,t,n)},removeData:function(e,t){u.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),A.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){u.set(this,n)}):d(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=u.get(o,n))||void 0!==(t=ge(o,n))?t:void 0;this.each(function(){u.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=u.get(o),1===o.nodeType)&&!_.get(o,"hasDataAttrs")){for(t=a.length;t--;)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=E(r.slice(5)),ge(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){u.remove(this,e)})}}),A.extend({queue:function(e,t,n){var r;if(e)return r=_.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=_.access(e,t,A.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=A.queue(e,t),r=n.length,i=n.shift(),o=A._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){A.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:A.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),A.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?A.queue(this[0],t):void 0===n?this:this.each(function(){var e=A.queue(this,t,n);A._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&A.dequeue(this,t)})},dequeue:function(e){return this.each(function(){A.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(a,[a])}var r,i=1,o=A.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=_.get(a[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function me(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&I(e)&&"none"===A.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ye=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),f=["Top","Right","Bottom","Left"],T=S.documentElement,I=function(e){return A.contains(e.ownerDocument,e)},ve={composed:!0};T.getRootNode&&(I=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});function Ee(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return A.css(e,t,"")},l=s(),u=n&&n[3]||(A.cssNumber[t]?"":"px"),c=e.nodeType&&(A.cssNumber[t]||"px"!==u&&+l)&&ye.exec(A.css(e,t));if(c&&c[3]!==u){for(u=u||c[3],c=+(l/=2)||1;a--;)A.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;A.style(e,t,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r)&&(r.unit=u,r.start=c,r.end=i),i}var _e={};function R(e,t){for(var n,r,i,o,a,s,l=[],u=0,c=e.length;u<c;u++)(r=e[u]).style&&(n=r.style.display,t?("none"===n&&(l[u]=_.get(r,"display")||null,l[u]||(r.style.display="")),""===r.style.display&&me(r)&&(l[u]=(s=o=i=void 0,o=r.ownerDocument,a=r.nodeName,(s=_e[a])||(i=o.body.appendChild(o.createElement(a)),s=A.css(i,"display"),i.parentNode.removeChild(i),_e[a]=s="none"===s?"block":s)))):"none"!==n&&(l[u]="none",_.set(r,"display",n)));for(u=0;u<c;u++)null!=l[u]&&(e[u].style.display=l[u]);return e}A.fn.extend({show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?A(this).show():A(this).hide()})}});var Te=/^(?:checkbox|radio)$/i,be=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i,n=S.createDocumentFragment().appendChild(S.createElement("div")),C=((o=S.createElement("input")).setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),n.appendChild(o),m.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,n.innerHTML="<option></option>",m.option=!!n.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function N(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?A.merge([e],n):n}function Ae(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}C.tbody=C.tfoot=C.colgroup=C.caption=C.thead,C.th=C.td,m.option||(C.optgroup=C.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function Ie(e,t,n,r,i){for(var o,a,s,l,u,c=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===h(o))A.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(a=a||c.appendChild(t.createElement("div")),s=(be.exec(o)||["",""])[1].toLowerCase(),s=C[s]||C._default,a.innerHTML=s[1]+A.htmlPrefilter(o)+s[2],u=s[0];u--;)a=a.lastChild;A.merge(d,a.childNodes),(a=c.firstChild).textContent=""}else d.push(t.createTextNode(o));for(c.textContent="",f=0;o=d[f++];)if(r&&-1<A.inArray(o,r))i&&i.push(o);else if(l=I(o),a=N(c.appendChild(o),"script"),l&&Ae(a),n)for(u=0;o=a[u++];)Se.test(o.type||"")&&n.push(o);return c}var Re=/^([^.]*)(?:\.(.+)|)/;function a(){return!0}function p(){return!1}function Ce(e,t){return e===function(){try{return S.activeElement}catch(e){}}()==("focus"===t)}function Ne(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ne(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=p;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return A().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=A.guid++)),e.each(function(){A.event.add(this,t,i,r,n)})}function De(e,i,o){o?(_.set(e,i,!1),A.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=_.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(A.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),_.set(this,i,r),t=o(this,i),this[i](),r!==(n=_.get(this,i))||t?_.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(_.set(this,i,{value:A.event.trigger(A.extend(r[0],A.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===_.get(e,i)&&A.event.add(e,i,a)}A.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,d,f,p,h=_.get(t);if(y(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&A.find.matchesSelector(T,i),n.guid||(n.guid=A.guid++),s=(s=h.events)||(h.events=Object.create(null)),a=(a=h.handle)||(h.handle=function(e){return void 0!==A&&A.event.triggered!==e.type?A.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(w)||[""]).length;l--;)d=p=(f=Re.exec(e[l])||[])[1],f=(f[2]||"").split(".").sort(),d&&(u=A.event.special[d]||{},d=(i?u.delegateType:u.bindType)||d,u=A.event.special[d]||{},p=A.extend({type:d,origType:p,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&A.expr.match.needsContext.test(i),namespace:f.join(".")},o),(c=s[d])||((c=s[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,f,a))||t.addEventListener&&t.addEventListener(d,a),u.add&&(u.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),i?c.splice(c.delegateCount++,0,p):c.push(p),A.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,g,m=_.hasData(e)&&_.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(w)||[""]).length;u--;)if(p=g=(s=Re.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=A.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,m.handle)||A.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)A.event.remove(e,p+t[u],n,r,!0);A.isEmptyObject(l)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a=new Array(arguments.length),s=A.event.fix(e),e=(_.get(this,"events")||Object.create(null))[s.type]||[],l=A.event.special[s.type]||{};for(a[0]=s,t=1;t<arguments.length;t++)a[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(o=A.event.handlers.call(this,s,e),t=0;(r=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==i.namespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(i=((A.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<A(i,this).index(u):A.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(A.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Te.test(e.type)&&e.click&&l(e,"input")&&De(e,"click",a),!1},trigger:function(e){e=this||e;return Te.test(e.type)&&e.click&&l(e,"input")&&De(e,"click"),!0},_default:function(e){e=e.target;return Te.test(e.type)&&e.click&&l(e,"input")&&_.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?a:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(t,e){A.event.special[t]={setup:function(){return De(this,t,Ce),!1},trigger:function(){return De(this,t),!0},_default:function(e){return _.get(e.target,t)},delegateType:e}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){A.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||A.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),A.fn.extend({on:function(e,t,n,r){return Ne(this,e,t,n,r)},one:function(e,t,n,r){return Ne(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)r=e.handleObj,A(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=p),this.each(function(){A.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i])}return this}});var Oe=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Le(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function xe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ke(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o;if(1===t.nodeType){if(_.hasData(e)&&(o=_.get(e).events))for(i in _.remove(t,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)A.event.add(t,i,o[i][n]);u.hasData(e)&&(e=u.access(e),e=A.extend({},e),u.set(t,e))}}function D(n,r,i,o){r=U(r);var e,t,a,s,l,u,c=0,d=n.length,f=d-1,p=r[0],h=v(p);if(h||1<d&&"string"==typeof p&&!m.checkClone&&Me.test(p))return n.each(function(e){var t=n.eq(e);h&&(r[0]=p.call(this,e,t.html())),D(t,r,i,o)});if(d&&(t=(e=Ie(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=A.map(N(e,"script"),xe)).length;c<d;c++)l=e,c!==f&&(l=A.clone(l,!0,!0),s)&&A.merge(a,N(l,"script")),i.call(n[c],l,c);if(s)for(u=a[a.length-1].ownerDocument,A.map(a,ke),c=0;c<s;c++)l=a[c],Se.test(l.type||"")&&!_.access(l,"globalEval")&&A.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):$(l.textContent.replace(Pe,""),l,u))}return n}function Ue(e,t,n){for(var r,i=t?A.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||A.cleanData(N(r)),r.parentNode&&(n&&I(r)&&Ae(N(r,"script")),r.parentNode.removeChild(r));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,l,u,c=e.cloneNode(!0),d=I(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(a=N(c),r=0,i=(o=N(e)).length;r<i;r++)s=o[r],"input"===(u=(l=a[r]).nodeName.toLowerCase())&&Te.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||N(e),a=a||N(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=N(c,"script")).length&&Ae(a,!d&&N(e,"script")),c},cleanData:function(e){for(var t,n,r,i=A.event.special,o=0;void 0!==(n=e[o]);o++)if(y(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?A.event.remove(n,r):A.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[u.expando]&&(n[u.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return d(this,function(e){return void 0===e?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return D(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return D(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Le(this,e)).insertBefore(e,t.firstChild)})},before:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(N(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return A.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!C[(be.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(A.cleanData(N(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return D(this,arguments,function(e){var t=this.parentNode;A.inArray(this,n)<0&&(A.cleanData(N(this)),t)&&t.replaceChild(e,this)},n)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){A.fn[e]=function(e){for(var t,n=[],r=A(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),A(r[o])[a](t),B.apply(n,t.get());return this.pushStack(n)}});function Be(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:b).getComputedStyle(e)}function Ze(e,t,n){var r,i={};for(r in t)i[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=i[r];return n}var qe,Ge,je,He,Ye,Ke,$e,i,ze=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ve=/^--/,We=new RegExp(f.join("|"),"i"),o="[\\x20\\t\\r\\n\\f]",Xe=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g");function Qe(e,t,n){var r,i=Ve.test(t),o=e.style;return(n=n||Be(e))&&(r=n.getPropertyValue(t)||n[t],""!==(r=i?r&&(r.replace(Xe,"$1")||void 0):r)||I(e)||(r=A.style(e,t)),!m.pixelBoxStyles())&&ze.test(r)&&We.test(t)&&(i=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=i,o.minWidth=e,o.maxWidth=t),void 0!==r?r+"":r}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function et(){var e;i&&($e.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",i.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",T.appendChild($e).appendChild(i),e=b.getComputedStyle(i),qe="1%"!==e.top,Ke=12===tt(e.marginLeft),i.style.right="60%",He=36===tt(e.right),Ge=36===tt(e.width),i.style.position="absolute",je=12===tt(i.offsetWidth/3),T.removeChild($e),i=null)}function tt(e){return Math.round(parseFloat(e))}$e=S.createElement("div"),(i=S.createElement("div")).style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===i.style.backgroundClip,A.extend(m,{boxSizingReliable:function(){return et(),Ge},pixelBoxStyles:function(){return et(),He},pixelPosition:function(){return et(),qe},reliableMarginLeft:function(){return et(),Ke},scrollboxSize:function(){return et(),je},reliableTrDimensions:function(){var e,t,n;return null==Ye&&(e=S.createElement("table"),t=S.createElement("tr"),n=S.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",T.appendChild(e).appendChild(t).appendChild(n),n=b.getComputedStyle(t),Ye=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,T.removeChild(e)),Ye}}));var nt=["Webkit","Moz","ms"],rt=S.createElement("div").style,it={};function ot(e){return A.cssProps[e]||it[e]||(e in rt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if((e=nt[n]+t)in rt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},lt={letterSpacing:"0",fontWeight:"400"};function ut(e,t,n){var r=ye.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=A.css(e,n+f[a],!0,i)),r?("content"===n&&(l-=A.css(e,"padding"+f[a],!0,i)),"margin"!==n&&(l-=A.css(e,"border"+f[a]+"Width",!0,i))):(l+=A.css(e,"padding"+f[a],!0,i),"padding"!==n?l+=A.css(e,"border"+f[a]+"Width",!0,i):s+=A.css(e,"border"+f[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function dt(e,t,n){var r=Be(e),i=(!m.boxSizingReliable()||n)&&"border-box"===A.css(e,"boxSizing",!1,r),o=i,a=Qe(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&l(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===A.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===A.css(e,"boxSizing",!1,r),o=s in e)&&(a=e[s]),(a=parseFloat(a)||0)+ct(e,t,n||(i?"border":"content"),o,r,a)+"px"}function O(e,t,n,r,i){return new O.prototype.init(e,t,n,r,i)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Qe(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=E(t),l=Ve.test(t),u=e.style;if(l||(t=ot(s)),a=A.cssHooks[t]||A.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"==(o=typeof n)&&(i=ye.exec(n))&&i[1]&&(n=Ee(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(A.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o=E(t);return Ve.test(t)||(t=ot(o)),"normal"===(i=void 0===(i=(o=A.cssHooks[t]||A.cssHooks[o])&&"get"in o?o.get(e,!0,n):i)?Qe(e,t,r):i)&&t in lt&&(i=lt[t]),(""===n||n)&&(o=parseFloat(i),!0===n||isFinite(o))?o||0:i}}),A.each(["height","width"],function(e,a){A.cssHooks[a]={get:function(e,t,n){if(t)return!at.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,a,n):Ze(e,st,function(){return dt(e,a,n)})},set:function(e,t,n){var r=Be(e),i=!m.scrollboxSize()&&"absolute"===r.position,o=(i||n)&&"border-box"===A.css(e,"boxSizing",!1,r),n=n?ct(e,a,n,o,r):0;return o&&i&&(n-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(r[a])-ct(e,a,"border",!1,r)-.5)),n&&(o=ye.exec(t))&&"px"!==(o[3]||"px")&&(e.style[a]=t,t=A.css(e,a)),ut(0,t,n)}}}),A.cssHooks.marginLeft=Je(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(i,o){A.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+f[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(A.cssHooks[i+o].set=ut)}),A.fn.extend({css:function(e,t){return d(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Be(e),i=t.length;a<i;a++)o[t[a]]=A.css(e,t[a],!1,r);return o}return void 0!==n?A.style(e,t,n):A.css(e,t)},e,t,1<arguments.length)}}),((A.Tween=O).prototype={constructor:O,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(A.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return(e&&e.get?e:O.propHooks._default).get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:O.propHooks._default).set(this),this}}).init.prototype=O.prototype,(O.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=A.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=O.prototype.init,A.fx.step={};var M,ft,pt=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function gt(){ft&&(!1===S.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(gt):b.setTimeout(gt,A.fx.interval),A.fx.tick())}function mt(){return b.setTimeout(function(){M=void 0}),M=Date.now()}function yt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=f[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(P.tweeners[t]||[]).concat(P.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function P(i,e,t){var n,o,r,a,s,l,u,c=0,d=P.prefilters.length,f=A.Deferred().always(function(){delete p.elem}),p=function(){if(o)return!1;for(var e=M||mt(),e=Math.max(0,h.startTime+h.duration-e),t=1-(e/h.duration||0),n=0,r=h.tweens.length;n<r;n++)h.tweens[n].run(t);return f.notifyWith(i,[h,t,e]),t<1&&r?e:(r||f.notifyWith(i,[h,1,0]),f.resolveWith(i,[h]),!1)},h=f.promise({elem:i,props:A.extend({},e),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},t),originalProperties:e,originalOptions:t,startTime:M||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=A.Tween(i,h.opts,e,t,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(t),t},stop:function(e){var t=0,n=e?h.tweens.length:0;if(!o){for(o=!0;t<n;t++)h.tweens[t].run(1);e?(f.notifyWith(i,[h,1,0]),f.resolveWith(i,[h,e])):f.rejectWith(i,[h,e])}return this}}),g=h.props,m=g,y=h.opts.specialEasing;for(r in m)if(s=y[a=E(r)],l=m[r],Array.isArray(l)&&(s=l[1],l=m[r]=l[0]),r!==a&&(m[a]=l,delete m[r]),(u=A.cssHooks[a])&&"expand"in u)for(r in l=u.expand(l),delete m[a],l)r in m||(m[r]=l[r],y[r]=s);else y[a]=s;for(;c<d;c++)if(n=P.prefilters[c].call(h,i,g,h.opts))return v(n.stop)&&(A._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return A.map(g,vt,h),v(h.opts.start)&&h.opts.start.call(i,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),A.fx.timer(A.extend(p,{elem:i,anim:h,queue:h.opts.queue})),h}A.Animation=A.extend(P,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Ee(n.elem,e,ye.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=v(e)?(t=e,["*"]):e.match(w)).length;r<i;r++)n=e[r],P.tweeners[n]=P.tweeners[n]||[],P.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c="width"in t||"height"in t,d=this,f={},p=e.style,h=e.nodeType&&me(e),g=_.get(e,"fxshow");for(r in n.queue||(null==(a=A._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,A.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],pt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}f[r]=g&&g[r]||A.style(e,r)}if((l=!A.isEmptyObject(t))||!A.isEmptyObject(f))for(r in c&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=_.get(e,"display")),"none"===(c=A.css(e,"display"))&&(u?c=u:(R([e],!0),u=e.style.display||u,c=A.css(e,"display"),R([e]))),"inline"===c||"inline-block"===c&&null!=u)&&"none"===A.css(e,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block"),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(h=g.hidden):g=_.access(e,"fxshow",{display:u}),o&&(g.hidden=!h),h&&R([e],!0),d.done(function(){for(r in h||R([e]),_.remove(e,"fxshow"),f)A.style(e,r,f[r])})),l=vt(h?g[r]:0,r,d),r in g||(g[r]=l.start,h&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?P.prefilters.unshift(e):P.prefilters.push(e)}}),A.speed=function(e,t,n){var r=e&&"object"==typeof e?A.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return A.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in A.fx.speeds?r.duration=A.fx.speeds[r.duration]:r.duration=A.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&A.dequeue(this,r.queue)},r},A.fn.extend({fadeTo:function(e,t,n,r){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=P(this,A.extend({},t),a);(o||_.get(this,"finish"))&&e.stop(!0)}var o=A.isEmptyObject(t),a=A.speed(e,n,r);return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(i,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=A.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ht.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||A.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=A.timers,o=n?n.length:0;for(t.finish=!0,A.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),A.each(["toggle","show","hide"],function(e,r){var i=A.fn[r];A.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(yt(r,!0),e,t,n)}}),A.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){A.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),A.timers=[],A.fx.tick=function(){var e,t=0,n=A.timers;for(M=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||A.fx.stop(),M=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){ft||(ft=!0,gt())},A.fx.stop=function(){ft=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(r,e){return r=A.fx&&A.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=b.setTimeout(e,r);t.stop=function(){b.clearTimeout(n)}})},n=S.createElement("input"),e=S.createElement("select").appendChild(S.createElement("option")),n.type="checkbox",m.checkOn=""!==n.value,m.optSelected=e.selected,(n=S.createElement("input")).value="t",n.type="radio",m.radioValue="t"===n.value;var Et,_t=A.expr.attrHandle,Tt=(A.fn.extend({attr:function(e,t){return d(this,A.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){A.removeAttr(this,e)})}}),A.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?A.prop(e,t,n):(1===o&&A.isXMLDoc(e)||(i=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?Et:void 0)),void 0!==n?null===n?void A.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(i&&"get"in i&&null!==(r=i.get(e,t)))&&null==(r=A.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){var n;if(!m.radioValue&&"radio"===t&&l(e,"input"))return n=e.value,e.setAttribute("type",t),n&&(e.value=n),t}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(w);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Et={set:function(e,t,n){return!1===t?A.removeAttr(e,n):e.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),function(e,t){var a=_t[t]||A.find.attr;_t[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=_t[o],_t[o]=r,r=null!=a(e,t,n)?o:null,_t[o]=i),r}}),/^(?:input|select|textarea|button)$/i),bt=/^(?:a|area)$/i;function L(e){return(e.match(w)||[]).join(" ")}function x(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(w)||[]}A.fn.extend({prop:function(e,t){return d(this,A.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[A.propFix[e]||e]})}}),A.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&A.isXMLDoc(e)||(t=A.propFix[t]||t,i=A.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(A.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){A(this).addClass(t.call(this,e,x(this)))}):(e=St(t)).length?this.each(function(){if(r=x(this),n=1===this.nodeType&&" "+L(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=L(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){A(this).removeClass(t.call(this,e,x(this)))}):arguments.length?(e=St(t)).length?this.each(function(){if(r=x(this),n=1===this.nodeType&&" "+L(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];-1<n.indexOf(" "+i+" ");)n=n.replace(" "+i+" "," ");a=L(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"==a||Array.isArray(t);return v(t)?this.each(function(e){A(this).toggleClass(t.call(this,e,x(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=St(t),this.each(function(){if(s)for(o=A(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!=a||((r=x(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",!r&&!1!==t&&_.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+L(x(t))+" ").indexOf(r))return!0;return!1}});function At(e){e.stopPropagation()}var wt=/\r/g,It=(A.fn.extend({val:function(t){var n,e,r,i=this[0];return arguments.length?(r=v(t),this.each(function(e){1===this.nodeType&&(null==(e=r?t.call(this,e,A(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=A.map(e,function(e){return null==e?"":e+""})),(n=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):i?(n=A.valHooks[i.type]||A.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(wt,""):null==e?"":e:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:L(A.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,i="select-one"===e.type,o=i?null:[],a=i?r+1:n.length,s=r<0?a:i?r:0;s<a;s++)if(((t=n[s]).selected||s===r)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=A(t).val(),i)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,o=A.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<A.inArray(A.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<A.inArray(A(e).val(),t)}},m.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in b,/^(?:focusinfocus|focusoutblur)$/),Rt=(A.extend(A.event,{trigger:function(e,t,n,r){var i,o,a,s,l,u,c,d=[n||S],f=j.call(e,"type")?e.type:e,p=j.call(e,"namespace")?e.namespace.split("."):[],h=c=o=n=n||S;if(3!==n.nodeType&&8!==n.nodeType&&!It.test(f+A.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),s=f.indexOf(":")<0&&"on"+f,(e=e[A.expando]?e:new A.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:A.makeArray(t,[e]),u=A.event.special[f]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!g(n)){for(a=u.delegateType||f,It.test(a+f)||(h=h.parentNode);h;h=h.parentNode)d.push(h),o=h;o===(n.ownerDocument||S)&&d.push(o.defaultView||o.parentWindow||b)}for(i=0;(h=d[i++])&&!e.isPropagationStopped();)c=h,e.type=1<i?a:u.bindType||f,(l=(_.get(h,"events")||Object.create(null))[e.type]&&_.get(h,"handle"))&&l.apply(h,t),(l=s&&h[s])&&l.apply&&y(h)&&(e.result=l.apply(h,t),!1===e.result)&&e.preventDefault();return e.type=f,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),t)||!y(n)||s&&v(n[f])&&!g(n)&&((o=n[s])&&(n[s]=null),A.event.triggered=f,e.isPropagationStopped()&&c.addEventListener(f,At),n[f](),e.isPropagationStopped()&&c.removeEventListener(f,At),A.event.triggered=void 0,o)&&(n[s]=o),e.result}},simulate:function(e,t,n){n=A.extend(new A.Event,n,{type:e,isSimulated:!0});A.event.trigger(n,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return A.event.trigger(e,t,n,!0)}}),m.focusin||A.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){A.event.simulate(r,e.target,A.event.fix(e))}A.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=_.access(e,r);t||e.addEventListener(n,i,!0),_.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=_.access(e,r)-1;t?_.access(e,r,t):(e.removeEventListener(n,i,!0),_.remove(e,r))}}}),b.location),Ct={guid:Date.now()},Nt=/\?/,Dt=(A.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new b.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||A.error("Invalid XML: "+(n?A.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Ot=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;A.param=function(e,t){function n(e,t){t=v(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,i,o){if(Array.isArray(e))A.each(e,function(e,t){i||Dt.test(r)?o(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==h(e))o(r,e);else for(var t in e)n(r+"["+t+"]",e[t],i,o)}(r,e[r],t,n);return i.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Pt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!Te.test(e))}).map(function(e,t){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}});var Lt=/%20/g,xt=/#.*$/,kt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,Bt=/^\/\//,Zt={},qt={},Gt="*/".concat("*"),jt=S.createElement("a");function Ht(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(w)||[];if(v(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Yt(t,r,i,o){var a={},s=t===qt;function l(e){var n;return a[e]=!0,A.each(t[e]||[],function(e,t){t=t(r,i,o);return"string"!=typeof t||s||a[t]?s?!(n=t):void 0:(r.dataTypes.unshift(t),l(t),!1)}),n}return l(r.dataTypes[0])||!a["*"]&&l("*")}function Kt(e,t){var n,r,i=A.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&A.extend(!0,e,r),e}jt.href=Rt.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Kt(Kt(e,A.ajaxSettings),t):Kt(A.ajaxSettings,e)},ajaxPrefilter:Ht(Zt),ajaxTransport:Ht(qt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,u,c,n,d,f,p,r,i,h=A.ajaxSetup({},t=t||{}),g=h.context||h,m=h.context&&(g.nodeType||g.jquery)?A(g):A.event,y=A.Deferred(),v=A.Callbacks("once memory"),E=h.statusCode||{},o={},a={},s="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(f){if(!n)for(n={};t=Ft.exec(c);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?c:null},setRequestHeader:function(e,t){return null==f&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==f&&(h.mimeType=e),this},statusCode:function(e){if(e)if(f)_.always(e[_.status]);else for(var t in e)E[t]=[E[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),T(0,e),this}};if(y.promise(_),h.url=((e||h.url||Rt.href)+"").replace(Bt,Rt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(w)||[""],null==h.crossDomain){i=S.createElement("a");try{i.href=h.url,i.href=i.href,h.crossDomain=jt.protocol+"//"+jt.host!=i.protocol+"//"+i.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=A.param(h.data,h.traditional)),Yt(Zt,h,t,_),!f){for(r in(p=A.event&&h.global)&&0==A.active++&&A.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ut.test(h.type),u=h.url.replace(xt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Lt,"+")):(i=h.url.slice(u.length),h.data&&(h.processData||"string"==typeof h.data)&&(u+=(Nt.test(u)?"&":"?")+h.data,delete h.data),!1===h.cache&&(u=u.replace(kt,"$1"),i=(Nt.test(u)?"&":"?")+"_="+Ct.guid+++i),h.url=u+i),h.ifModified&&(A.lastModified[u]&&_.setRequestHeader("If-Modified-Since",A.lastModified[u]),A.etag[u])&&_.setRequestHeader("If-None-Match",A.etag[u]),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Gt+"; q=0.01":""):h.accepts["*"]),h.headers)_.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(!1===h.beforeSend.call(g,_,h)||f))return _.abort();if(s="abort",v.add(h.complete),_.done(h.success),_.fail(h.error),l=Yt(qt,h,t,_)){if(_.readyState=1,p&&m.trigger("ajaxSend",[_,h]),f)return _;h.async&&0<h.timeout&&(d=b.setTimeout(function(){_.abort("timeout")},h.timeout));try{f=!1,l.send(o,T)}catch(e){if(f)throw e;T(-1,e)}}else T(-1,"No Transport")}return _;function T(e,t,n,r){var i,o,a,s=t;f||(f=!0,d&&b.clearTimeout(d),l=void 0,c=r||"",_.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a=a||i}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,_,n)),!r&&-1<A.inArray("script",h.dataTypes)&&A.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),a=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,a,_,r),r?(h.ifModified&&((n=_.getResponseHeader("Last-Modified"))&&(A.lastModified[u]=n),n=_.getResponseHeader("etag"))&&(A.etag[u]=n),204===e||"HEAD"===h.type?s="nocontent":304===e?s="notmodified":(s=a.state,i=a.data,r=!(o=a.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),_.status=e,_.statusText=(t||s)+"",r?y.resolveWith(g,[i,s,_]):y.rejectWith(g,[_,s,o]),_.statusCode(E),E=void 0,p&&m.trigger(r?"ajaxSuccess":"ajaxError",[_,h,r?i:o]),v.fireWith(g,[_,s]),p&&(m.trigger("ajaxComplete",[_,h]),--A.active||A.event.trigger("ajaxStop")))}},getJSON:function(e,t,n){return A.get(e,t,n,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],function(e,i){A[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),A.ajax(A.extend({url:e,type:i,dataType:r,data:t,success:n},A.isPlainObject(e)&&e))}}),A.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),A._evalUrl=function(e,t,n){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,n)}})},A.fn.extend({wrapAll:function(e){return this[0]&&(v(e)&&(e=e.call(this[0])),e=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){A(this).wrapInner(n.call(this,e))}):this.each(function(){var e=A(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){A(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},zt=A.ajaxSettings.xhr();m.cors=!!zt&&"withCredentials"in zt,m.ajax=zt=!!zt,A.ajaxTransport(function(i){var o,a;if(m.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t($t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&b.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),A.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),A.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=A("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt=[],Wt=/(=)\?(?=&|$)|\?\?/,Xt=(A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||A.expando+"_"+Ct.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Wt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Wt,"$1"+r):!1!==e.jsonp&&(e.url+=(Nt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||A.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=b[r],b[r]=function(){o=arguments},n.always(function(){void 0===i?A(b).removeProp(r):b[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Vt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),m.createHTMLDocument=((o=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===o.childNodes.length),A.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(r)):t=S),r=!n&&[],(n=X.exec(e))?[t.createElement(n[1])]:(n=Ie([e],t,r),r&&r.length&&A(r).remove(),A.merge([],n.childNodes)));var r},A.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=L(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&A.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?A("<div>").append(A.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},A.expr.pseudos.animated=function(t){return A.grep(A.timers,function(e){return t===e.elem}).length},A.offset={setOffset:function(e,t,n){var r,i,o,a,s=A.css(e,"position"),l=A(e),u={};"static"===s&&(e.style.position="relative"),o=l.offset(),r=A.css(e,"top"),a=A.css(e,"left"),s=("absolute"===s||"fixed"===s)&&-1<(r+a).indexOf("auto")?(i=(s=l.position()).top,s.left):(i=parseFloat(r)||0,parseFloat(a)||0),null!=(t=v(t)?t.call(e,n,A.extend({},o)):t).top&&(u.top=t.top-o.top+i),null!=t.left&&(u.left=t.left-o.left+s),"using"in t?t.using.call(e,u):l.css(u)}},A.fn.extend({offset:function(t){var e,n;return arguments.length?void 0===t?this:this.each(function(e){A.offset.setOffset(this,t,e)}):(n=this[0])?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===A.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),i.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-A.css(r,"marginTop",!0),left:t.left-i.left-A.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||T})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;A.fn[t]=function(e){return d(this,function(e,t,n){var r;if(g(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),A.each(["top","left"],function(e,n){A.cssHooks[n]=Je(m.pixelPosition,function(e,t){if(t)return t=Qe(e,n),ze.test(t)?A(e).position()[n]+"px":t})}),A.each({Height:"height",Width:"width"},function(a,s){A.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){A.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,n){var r;return g(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?A.css(e,t,i):A.style(e,t,n,i)},s,n?e:void 0,n)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){A.fn[t]=function(e){return this.on(t,e)}}),A.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){A.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g),Qt=(A.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||A.guid++,r},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=l,A.isFunction=v,A.isWindow=g,A.camelCase=E,A.type=h,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(Xt,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return A}),b.jQuery),Jt=b.$;return A.noConflict=function(e){return b.$===A&&(b.$=Jt),e&&b.jQuery===A&&(b.jQuery=Qt),A},void 0===k&&(b.jQuery=b.$=A),A}),window.languages={hi:{generic:{alert:{cursor:"     "}},login:{username:"  ...",password:"  ...",enter:"",error:{invalid:"    "}},menu:{search:"",home:"",list:" ",history:"",browse:" ",settings:"",logout:""},home:{banner:{play:" ",info:" "},details:{play:" : S{season} E{episode}",continue:" : S{season} E{episode}",add:"  ",remove:"  ",episodes:"",related:" "},episodes:{watched:" "}},exit:{message:"       ?",message_logout:"          ?",no:"",yes:""},search:{placeholder:"..."},video:{skip:"  ",languages:{audios:"",subtitles:""}},settings:{menu:{application_lang:" ",audio_lang:" ",subtitle_lang:" ",video_quality:" ",mature:" ",about:"  "}},lists:{watchlist:"  ",empty:"    "}},ar:{generic:{alert:{cursor:"    ."}},login:{username:"  ...",password:"  ...",enter:" ",error:{invalid:"      ."}},menu:{search:"",home:" ",list:"",history:"",browse:"",settings:"",logout:" "},home:{banner:{play:"",info:"  "},details:{play:": S{season} E{episode}",continue:": S{season} E{episode}",add:"  ",remove:"  ",episodes:"",related:"  "},episodes:{watched:" "}},exit:{message:"     ",message_logout:"       ",no:"",yes:""},search:{placeholder:"..."},video:{skip:" ",languages:{audios:"",subtitles:""}},settings:{menu:{application_lang:" ",audio_lang:" ",subtitle_lang:" ",video_quality:" ",mature:" ",about:""}},lists:{watchlist:" ",empty:"    "}},ca:{generic:{alert:{cursor:"El cursor i el teclat no estan compatibles."}},login:{username:"Introduu l'email...",password:"Introduu la contrasenya...",enter:"INICIA LA SESSI",error:{invalid:"Email o contrasenya incorrectes."}},menu:{search:"Cerca",home:"Inici",list:"La meva llista",history:"Historial",browse:"Navega",settings:"Configuraci",logout:"Tanca la sessi"},home:{banner:{play:"Reprodueix",info:"Ms informaci"},details:{play:"Reprodueix: T{season} E{episode}",continue:"Continua: T{season} E{episode}",add:"Afegir als Preferits",remove:"Treure dels Preferits",episodes:"Episodis",related:"Contingut relacionat"},episodes:{watched:"Vistos"}},exit:{message:"Voleu sortir de l'aplicaci?",message_logout:"Voleu tancar la sessi i sortir de l'aplicaci?",no:"NO",yes:"S"},search:{placeholder:"Cerca..."},video:{skip:"SALTA LA INTRODUCCI",languages:{audios:"udios",subtitles:"Subttols"}},settings:{menu:{application_lang:"Idioma de l'aplicaci",audio_lang:"Idioma de l'udio",subtitle_lang:"Idioma dels subttols",video_quality:"Qualitat del vdeo",mature:"Contingut per a adults",about:"Sobre"}},lists:{watchlist:"Llista de seguiment",empty:"No hi ha ms llistes per mostrar"}},de:{generic:{alert:{cursor:"Mauszeiger und Tastatur werden nicht untersttzt."}},login:{username:"E-Mail eingeben...",password:"Passwort eingeben...",enter:"ANMELDEN",error:{invalid:"E-Mail oder Passwort ungltig."}},menu:{search:"Suchen",home:"Startseite",list:"Meine Liste",history:"Verlauf",browse:"Durchsuchen",settings:"Einstellungen",logout:"Abmelden"},home:{banner:{play:"Abspielen",info:"Weitere Informationen"},details:{play:"Abspielen: S{season} E{episode}",continue:"Fortsetzen: S{season} E{episode}",add:"Zu Favoriten hinzufgen",remove:"Aus Favoriten entfernen",episodes:"Episoden",related:"hnliche Inhalte"},episodes:{watched:"Gesehen"}},exit:{message:"Mchten Sie die Anwendung verlassen?",message_logout:"Mchten Sie sich abmelden und die Anwendung verlassen?",no:"NEIN",yes:"JA"},search:{placeholder:"Suchen..."},video:{skip:"EINFHRUNG BERSPRINGEN",languages:{audios:"Audios",subtitles:"Untertitel"}},settings:{menu:{application_lang:"Anwendungssprache",audio_lang:"Audiosprache",subtitle_lang:"Untertitelsprache",video_quality:"Videoqualitt",mature:"Erwachseneninhalt",about:"ber"}},lists:{watchlist:"Beobachtungsliste",empty:"Keine weiteren Listen vorhanden"}},en:{generic:{alert:{cursor:"Cursor and keyboard is not supported."}},login:{username:"Enter email...",password:"Enter password...",enter:"LOGIN",error:{invalid:"Invalid email or password."}},menu:{search:"Search",home:"Home",list:"My list",history:"History",browse:"Browse",settings:"Settings",logout:"Logout"},home:{banner:{play:"Play",info:"More information"},details:{play:"Play: S{season} E{episode}",continue:"Continue: S{season} E{episode}",add:"Add to Watchlist",remove:"Remove from Watchlist",episodes:"Episodes",related:"Related content"},episodes:{watched:"Watched"}},exit:{message:"Do you want to exit the application?",message_logout:"Do you want to logout and exit the application?",no:"NO",yes:"YES"},search:{placeholder:"Search..."},video:{skip:"SKIP INTRO",languages:{audios:"Audios",subtitles:"Subtitles"}},settings:{menu:{application_lang:"Application Language",audio_lang:"Audio Language",subtitle_lang:"Subtitle Language",video_quality:"Video Quality",mature:"Mature Content",about:"About"}},lists:{watchlist:"Watchlist",empty:"No more lists to show"}},es:{generic:{alert:{cursor:"El cursor y el teclado no son compatibles."}},login:{username:"Ingrese email...",password:"Ingrese contrasea...",enter:"INGRESAR",error:{invalid:"Email o contrasea incorrectos."}},menu:{search:"Buscar",home:"Inicio",list:"Mi lista",history:"Historial",browse:"Explorar",settings:"Configuracin",logout:"Cerrar sesin"},home:{banner:{play:"Reproducir",info:"Ms informacin"},details:{play:"Reproducir: T{season} E{episode}",continue:"Continuar: T{season} E{episode}",add:"Agregar a Favoritos",remove:"Quitar de Favoritos",episodes:"Episodios",related:"Contenido relacionado"},episodes:{watched:"Visto"}},exit:{message:"Desea salir de la aplicacin?",message_logout:"Desea cerrar sesin y salir de la aplicacin?",no:"NO",yes:"S"},search:{placeholder:"Buscar..."},video:{skip:"OMITIR INTRO",languages:{audios:"Audios",subtitles:"Subttulos"}},settings:{menu:{application_lang:"Idioma de la aplicacin",audio_lang:"Idioma del audio",subtitle_lang:"Idioma de los subttulos",video_quality:"Calidad del video",mature:"Contenido para adultos",about:"Acerca de"}},lists:{watchlist:"Favoritos",empty:"No hay ms listas para mostrar"}},fr:{generic:{alert:{cursor:"Le curseur et le clavier ne sont pas pris en charge."}},login:{username:"Entrez l'email...",password:"Entrez le mot de passe...",enter:"CONNEXION",error:{invalid:"Adresse e-mail ou mot de passe incorrect."}},menu:{search:"Rechercher",home:"Accueil",list:"Ma liste",history:"Historique",browse:"Explorer",settings:"Paramtres",logout:"Dconnexion"},home:{banner:{play:"Lire",info:"Plus d'informations"},details:{play:"Lire : S{saison} E{episode}",continue:"Continuer : S{saison} E{episode}",add:"Ajouter aux Favoris",remove:"Retirer des Favoris",episodes:"pisodes",related:"Contenu connexe"},episodes:{watched:"Vu"}},exit:{message:"Voulez-vous quitter l'application?",message_logout:"Voulez-vous vous dconnecter et quitter l'application?",no:"NON",yes:"OUI"},search:{placeholder:"Rechercher..."},video:{skip:"SAUTER L'INTRODUCTION",languages:{audios:"Audios",subtitles:"Sous-titres"}},settings:{menu:{application_lang:"Langue de l'application",audio_lang:"Langue audio",subtitle_lang:"Langue des sous-titres",video_quality:"Qualit de la vido",mature:"Contenu pour adultes",about:" propos de"}},lists:{watchlist:"Liste de suivi",empty:"Aucune autre liste  afficher"}},id:{generic:{alert:{cursor:"Penggunaan kursor dan keyboard tidak didukung."}},login:{username:"Masukkan email...",password:"Masukkan kata sandi...",enter:"MASUK",error:{invalid:"Email atau kata sandi tidak valid."}},menu:{search:"Cari",home:"Beranda",list:"Daftar saya",history:"Riwayat",browse:"Jelajah",settings:"Pengaturan",logout:"Keluar"},home:{banner:{play:"Putar",info:"Informasi lebih lanjut"},details:{play:"Putar: S{season} E{episode}",continue:"Lanjutkan: S{season} E{episode}",add:"Tambahkan ke Favorit",remove:"Hapus dari Favorit",episodes:"Episode",related:"Konten terkait"},episodes:{watched:"Ditonton"}},exit:{message:"Apakah Anda ingin keluar dari aplikasi?",message_logout:"Apakah Anda ingin keluar dan log out dari aplikasi?",no:"TIDAK",yes:"YA"},search:{placeholder:"Cari..."},video:{skip:"LEWATKAN PEMBUKA",languages:{audios:"Audio",subtitles:"Subtitle"}},settings:{menu:{application_lang:"Bahasa Aplikasi",audio_lang:"Bahasa Audio",subtitle_lang:"Bahasa Subjudul",video_quality:"Kualitas Video",mature:"Konten Dewasa",about:"Tentang"}},lists:{watchlist:"Daftar Pantau",empty:"Tidak ada daftar lain untuk ditampilkan"}},it:{generic:{alert:{cursor:"Cursore e tastiera non sono supportati."}},login:{username:"Inserisci email...",password:"Inserisci password...",enter:"ACCEDI",error:{invalid:"Email o password non validi."}},menu:{search:"Cerca",home:"Home",list:"La mia lista",history:"Cronologia",browse:"Esplora",settings:"Impostazioni",logout:"Esci"},home:{banner:{play:"Riproduci",info:"Maggiori informazioni"},details:{play:"Riproduci: S{season} E{episode}",continue:"Continua: S{season} E{episode}",add:"Aggiungi ai Preferiti",remove:"Rimuovi dai Preferiti",episodes:"Episodi",related:"Contenuti correlati"},episodes:{watched:"Visti"}},exit:{message:"Vuoi uscire dall'applicazione?",message_logout:"Vuoi effettuare il logout ed uscire dall'applicazione?",no:"NO",yes:"SI"},search:{placeholder:"Cerca..."},video:{skip:"SALTA INTRO",languages:{audios:"Tracce audio",subtitles:"Sottotitoli"}},settings:{menu:{application_lang:"Lingua dell'applicazione",audio_lang:"Lingua dell'audio",subtitle_lang:"Lingua dei sottotitoli",video_quality:"Qualit del video",mature:"Contenuti per adulti",about:"Informazioni"}},lists:{watchlist:"Daftar Pantau",empty:"Tidak ada daftar lain untuk ditampilkan"}},ms:{generic:{alert:{cursor:"Cursor dan papan kekunci tidak disokong."}},login:{username:"Masukkan emel...",password:"Masukkan kata laluan...",enter:"LOG MASUK",error:{invalid:"Emel atau kata laluan tidak sah."}},menu:{search:"Cari",home:"Laman Utama",list:"Senarai Saya",history:"Sejarah",browse:"Jelajah",settings:"Tetapan",logout:"Log Keluar"},home:{banner:{play:"Mainkan",info:"Maklumat Lanjut"},details:{play:"Mainkan: S{season} E{episode}",continue:"Teruskan: S{season} E{episode}",add:"Tambah ke Kekunci",remove:"Alih dari Kekunci",episodes:"Episod",related:"Kandungan Berkaitan"},episodes:{watched:"Tonton"}},exit:{message:"Adakah anda mahu keluar dari aplikasi?",message_logout:"Adakah anda mahu log keluar dan keluar dari aplikasi?",no:"TIDAK",yes:"YA"},search:{placeholder:"Cari..."},video:{skip:"LEWATKAN PEMULA",languages:{audios:"Audio",subtitles:"Sarikata"}},settings:{menu:{application_lang:"Bahasa Aplikasi",audio_lang:"Bahasa Audio",subtitle_lang:"Bahasa Sarikata",video_quality:"Kualiti Video",mature:"Kandungan Dewasa",about:"Mengenai"}},lists:{watchlist:"Senarai Pantau",empty:"Tiada senarai lain untuk dipaparkan"}},pl:{generic:{alert:{cursor:"Kursor i klawiatura nie s obsugiwane."}},login:{username:"Wprowad email...",password:"Wprowad haso...",enter:"ZALOGUJ SI",error:{invalid:"Nieprawidowy adres email lub haso."}},menu:{search:"Szukaj",home:"Strona gwna",list:"Moja lista",history:"Historia",browse:"Przegldaj",settings:"Ustawienia",logout:"Wyloguj"},home:{banner:{play:"Odtwrz",info:"Wicej informacji"},details:{play:"Odtwrz: S{season} E{episode}",continue:"Kontynuuj: S{season} E{episode}",add:"Dodaj do Ulubionych",remove:"Usu z Ulubionych",episodes:"Odcinki",related:"Powizane treci"},episodes:{watched:"Obejrzane"}},exit:{message:"Czy chcesz wyj z aplikacji?",message_logout:"Czy chcesz wylogowa si i wyj z aplikacji?",no:"NIE",yes:"TAK"},search:{placeholder:"Szukaj..."},video:{skip:"POMWIENIE PRZEWI",languages:{audios:"Dwik",subtitles:"Napisy"}},settings:{menu:{application_lang:"Jzyk aplikacji",audio_lang:"Jzyk dwiku",subtitle_lang:"Jzyk napisw",video_quality:"Jako wideo",mature:"Zawarto dla dorosych",about:"O nas"}},lists:{watchlist:"Lista obserwowanych",empty:"Brak kolejnych list do wywietlenia"}},pt:{generic:{alert:{cursor:"O cursor e o teclado no so suportados."}},login:{username:"Digite o e-mail...",password:"Digite a senha...",enter:"ENTRAR",error:{invalid:"E-mail ou senha invlidos."}},menu:{search:"Buscar",home:"Pgina inicial",list:"Minha lista",history:"Histrico",browse:"Navegar",settings:"Configuraes",logout:"Sair"},home:{banner:{play:"Reproduzir",info:"Mais informaes"},details:{play:"Reproduzir: T{season} E{episode}",continue:"Continuar: T{season} E{episode}",add:"Adicionar aos Favoritos",remove:"Remover dos Favoritos",episodes:"Episdios",related:"Contedo relacionado"},episodes:{watched:"Assistido"}},exit:{message:"Deseja sair do aplicativo?",message_logout:"Deseja fazer logout e sair do aplicativo?",no:"NO",yes:"SIM"},search:{placeholder:"Buscar..."},video:{skip:"PULAR INTRO",languages:{audios:"udios",subtitles:"Legendas"}},settings:{menu:{application_lang:"Idioma da aplicao",audio_lang:"Idioma do udio",subtitle_lang:"Idioma das legendas",video_quality:"Qualidade do vdeo",mature:"Contedo adulto",about:"Sobre"}},lists:{watchlist:"Favoritos",empty:"No h mais listas para mostrar"}},ru:{generic:{alert:{cursor:"    ."}},login:{username:" email...",password:" ...",enter:"",error:{invalid:"     ."}},menu:{search:"",home:"",list:" ",history:"",browse:"",settings:"",logout:""},home:{banner:{play:"",info:" "},details:{play:": S{season} E{episode}",continue:": S{season} E{episode}",add:"  ",remove:"  ",episodes:"",related:" "},episodes:{watched:""}},exit:{message:"    ?",message_logout:"        ?",no:"",yes:""},search:{placeholder:"..."},video:{skip:" ",languages:{audios:"",subtitles:""}},settings:{menu:{application_lang:" ",audio_lang:" ",subtitle_lang:" ",video_quality:" ",mature:"  ",about:" "}},lists:{watchlist:" ",empty:"    "}},th:{generic:{alert:{cursor:""}},login:{username:"...",password:"...",enter:"",error:{invalid:""}},menu:{search:"",home:"",list:"",history:"",browse:"",settings:"",logout:""},home:{banner:{play:"",info:""},details:{play:":  {season}  {episode}",continue:":  {season}  {episode}",add:"",remove:"",episodes:"",related:""},episodes:{watched:""}},exit:{message:"?",message_logout:"?",no:"",yes:""},search:{placeholder:"..."},video:{skip:"",languages:{audios:"",subtitles:""}},settings:{menu:{application_lang:"",audio_lang:"",subtitle_lang:"",video_quality:"",mature:"",about:""}},lists:{watchlist:"",empty:""}},tr:{generic:{alert:{cursor:"mle ve klavye desteklenmemektedir."}},login:{username:"E-posta girin...",password:"ifre girin...",enter:"GR YAP",error:{invalid:"Geersiz e-posta veya ifre."}},menu:{search:"Ara",home:"Ana Sayfa",list:"Listem",history:"Gemi",browse:"Gzat",settings:"Ayarlar",logout:"k"},home:{banner:{play:"Oynat",info:"Daha fazla bilgi"},details:{play:"Oynat: S{season} B{episode}",continue:"Devam: S{season} B{episode}",add:"Favorilere Ekle",remove:"Favorilerden Kaldr",episodes:"Blmler",related:"lgili ierik"},episodes:{watched:"zlendi"}},exit:{message:"Uygulamadan kmak istiyor musunuz?",message_logout:"k yapmak ve uygulamadan kmak istiyor musunuz?",no:"HAYIR",yes:"EVET"},search:{placeholder:"Ara..."},video:{skip:"GR ATLA",languages:{audios:"Sesler",subtitles:"Altyazlar"}},settings:{menu:{application_lang:"Uygulama Dili",audio_lang:"Ses Dili",subtitle_lang:"Altyaz Dili",video_quality:"Video Kalitesi",mature:"Olgun erik",about:"Hakknda"}},lists:{watchlist:"zleme Listesi",empty:"Gsterilecek baka liste yok"}},vi:{generic:{alert:{cursor:"Chut v bn phm khng c h tr."}},login:{username:"Nhp email...",password:"Nhp mt khu...",enter:"NG NHP",error:{invalid:"Email hoc mt khu khng hp l."}},menu:{search:"Tm kim",home:"Trang ch",list:"Danh sch ca ti",history:"Lch s",browse:"Duyt",settings:"Ci t",logout:"ng xut"},home:{banner:{play:"Pht",info:"Thm thng tin"},details:{play:"Pht: S{season} T{episode}",continue:"Tip tc: S{season} T{episode}",add:"Thm vo Watchlist",remove:"Xa khi Watchlist",episodes:"Tp phim",related:"Ni dung lin quan"},episodes:{watched:" xem"}},exit:{message:"Bn c mun thot khi ng dng khng?",message_logout:"Bn c mun ng xut v thot khi ng dng khng?",no:"KHNG",yes:"C"},search:{placeholder:"Tm kim..."},video:{skip:"B QUA GII THIU",languages:{audios:"m thanh",subtitles:"Ph "}},settings:{menu:{application_lang:"Ngn ng ng dng",audio_lang:"Ngn ng m thanh",subtitle_lang:"Ngn ng ph ",video_quality:"Cht lng video",mature:"Ni dung dnh cho ngi trng thnh",about:"V ng dng"}},lists:{watchlist:"Danh sch theo di",empty:"Khng cn danh sch no  hin th"}}},window.mapper={loaded:0,loadedSubcategories:0,home:function(e,n){var r=e.data.filter(e=>["recommendations","history","browse","series","because_you_watched"].includes(e.response_type)),t=e.data.find(e=>"panel"===e.resource_type);home.data.main={banner:{id:t.panel.id,title:t.panel.title,description:t.panel.description,background:mapper.preventImageErrorTest(function(){return t.panel.images.poster_wide[0][4].source},t.panel.id)},lists:r.map(e=>({title:e.title,items:[]}))};for(var i=mapper.loaded=0;i<r.length;i++)mapper.load(r[i],i,{success:function(e,t){home.data.main.lists[t].items=mapper.mapItems(e.data),mapper.loaded++,mapper.loaded===r.length&&(home.data.main.lists=home.data.main.lists.filter(e=>0<e.items.length),n.success())}})},load:(r,i,o)=>{session.refresh({success:function(e){var t="dynamic_collection"===r.resource_type?r.link:`/content/v2/cms/objects/${r.ids.join()}?locale=`+e.account.language,n=new Headers;return n.append("Authorization","Bearer "+e.access_token),n.append("Content-Type","application/x-www-form-urlencoded"),fetch(""+service.api.url+t,{headers:n}).then(e=>e.json()).then(e=>o.success(e,i)).catch(e=>{console.log(e)})}})},continue:function(e){var t=e.data[0];return{id:t.panel.id,stream:t.panel.streams_link.substr(t.panel.streams_link.indexOf("/videos/")+8,9),serie:t.panel.episode_metadata.series_title,episode:t.panel.title,season_number:t.panel.episode_metadata.season_number||0,episode_number:t.panel.episode_metadata.episode_number||0,description:t.panel.description,background:mapper.preventImageErrorTest(function(){return t.panel.images.thumbnail[0][4].source},t.panel.id),watched:!t.never_watched,playhead:Math.round(t.playhead/60),duration:Math.round(t.panel.episode_metadata.duration_ms/6e4),played:100*t.playhead/(t.panel.episode_metadata.duration_ms/1e3)}},seasons:function(e){return e.items.map(e=>({id:e.id,title:e.title,number:e.season_number}))},episodes:function(e,t){var r=e.items.map(e=>({id:e.id,title:e.title,episode:e.title,serie:e.series_title,description:e.description,episode_number:e.episode_number||0,season_number:e.season_number||0,background:mapper.preventImageErrorTest(function(){return e.images.thumbnail?e.images.thumbnail[0][1].source:""},e.id),stream:e.__links__.streams?e.__links__.streams.href.substr(e.__links__.streams.href.indexOf("/videos/")+8,9):void 0,duration:Math.round(e.duration_ms/6e4),premium:e.is_premium_only}));mapper.playheads(r,function(n){r=r.map(e=>{var t=n.get(e.id);return e.playhead=t?t.fully_watched?e.duration:Math.round(t.playhead/60):0,e}),t&&t(r)})},playheads:function(e,t){service.playheads({data:{ids:e.map(e=>e.id).join()},success:function(e){e=new Map(e.data.map(e=>[e.content_id,e]));t&&t(e)},error:function(e){console.log(e)}})},search:function(e){return e.data.reduce((e,t)=>"series"===t.type||"movie_listing"===t.type?[...e,...t.items.map(e=>({display:"serie",type:e.type,id:e.id,title:e.title,description:e.description,background:mapper.preventImageErrorTest(function(){return e.images.poster_wide[0][5].source},e.id),poster:mapper.preventImageErrorTest(function(){return e.images.poster_tall[0][2].source})}))]:e,[])},history:function(e){return e.data.filter(e=>e.panel).map(e=>({id:e.panel.episode_metadata.series_id,playhead:e.playhead?Math.round(e.playhead/60):0,duration:Math.round((e.panel||e).episode_metadata.duration_ms/6e4),title:e.panel?e.panel.episode_metadata.series_title:e.title,description:e.panel.title,background:mapper.preventImageErrorTest(function(){return(e.panel||e).images.thumbnail[0][4].source},e.panel.episode_metadata.series_id)}))},preventImageErrorTest:function(e,t){try{return e()}catch(e){return console.log("error image #"+t),"https://dummyimage.com/600x400/f48321/fff.png&text=IMAGE+"+t}},listByCategories:function(e,n,r){home.data.main={category:n[0].parent_category,banner:{id:"",title:"",description:"",background:""},lists:n.map(e=>({lazy:!0,id:e.tenant_category,title:e.localization.description,items:[]}))};for(var t=mapper.loadedSubcategories=0;t<n.length;t++)mapper.loadCategoryListAsync(e+","+n[t].tenant_category,0,20,t,{success:function(e,t){home.data.main.lists[t].items=mapper.mapItems(e.items),mapper.loadedSubcategories++,mapper.loadedSubcategories===n.length&&(home.data.main.lists=home.data.main.lists.filter(e=>0<e.items.length),home.data.main.banner=home.data.main.lists[t].items[0],r.success())},error:function(e){console.log("fail on load subcategorie list.",e)}})},mapItems:function(e){try{return e.map(e=>{var t,n,r,i=e.playhead?Math.round(e.playhead/60):void 0,o=(e=e.panel||e).id,a="serie",s=e.title;return r="episode"===e.type?(o=e.episode_metadata.series_id,t=Math.round(e.episode_metadata.duration_ms/6e4),a="episode",s=e.episode_metadata.series_title,void(n=e.images.thumbnail[0][4].source)):"movie"==e.type?(t=Math.round(e.movie_metadata.duration_ms/6e4),a="episode",void(n=e.images.thumbnail[0][4].source)):(n=e.images.poster_wide[0][4].source,e.images.poster_tall[0][2].source),{id:o,display:a,duration:t,playhead:i,background:n,poster:r,title:s,description:e.description,type:e.type}})}catch(e){return console.log("CRITICAL: error on map element."),[]}},loadCategoryListAsync:function(n,r,i,o,a){session.refresh({success:function(e){var t=new Headers;return t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(service.api.url+`/content/v1/browse?categories=${n}&n=${i}&start=`+r,{headers:t}).then(e=>e.json()).then(e=>a.success(e,o)).catch(e=>{a.error(e)})}})}},window.player={drmLock:!1,states:{STOPPED:0,PLAYING:1,PAUSED:2,FORWARD:3,REWIND:4},values:{forward_rewind:0},timers:{forward_rewind:NaN},state:-1,plugin:NaN,video:NaN,duration:0,levelId:-1,playhead:null,getVideo:function(){var e;return player.video=document.getElementById("videoplayer"),player.video||((e=document.createElement("video")).id="videoplayer",e.style.height="100%",e.style.width="100%",$("#video-screen .content").prepend(e),player.video=e),player.video},deleteVideo:function(){player.video=document.getElementById("videoplayer"),player.video.parentNode.removeChild(player.video)},config:function(e,t){player.deleteVideo(),player.getVideo().addEventListener("timeupdate",e),player.getVideo().addEventListener("ended",t),player.getVideo().addEventListener("waiting",player.onbufferingstart),player.getVideo().addEventListener("playing",player.onbufferingcomplete)},getPlayed:function(){return player.getVideo().currentTime},getDuration:function(){return player.getVideo().duration},deleteSession:function(n){session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.drm}/v1/token/${n.data.id}/`+n.data.token,{method:"DELETE",headers:t}).then(e=>!0).then(e=>{player.drmLock=!1,n.success&&n.success()}).catch(e=>n.error&&n.error(e))}})},play:function(n,r,i,o){player.config(video.setPlayingTime,video.end),session.refresh({success:function(t){player.plugin=dashjs.MediaPlayer().create(),player.plugin.extend("RequestModifier",()=>({modifyRequestHeader:e=>(e.setRequestHeader("Authorization","Bearer "+t.access_token),e)}),!0),"auto"!==session.storage.quality&&player.plugin.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),player.plugin.initialize(player.getVideo(),r,!0);var e={"com.widevine.alpha":{priority:1,serverURL:"https://cr-license-proxy.prd.crunchyrollsvc.com/v1/license/widevine",httpRequestHeaders:{"X-Cr-Content-Id":n.id,"X-Cr-Video-Token":n.token},serverCertificate:"CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRUwyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJpQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJTUrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0qxUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oHHzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8AbaigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsNRL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUopcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw",audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO",sessionType:"temporary"}};player.plugin.setProtectionData(e),player.plugin.registerLicenseRequestFilter(function(e){e.headers["Content-Type"]="application/octet-stream",e.headers.Authorization="Bearer "+t.access_token}),player.plugin.registerLicenseResponseFilter(function(e){for(var t=new Uint8Array(e.data),t=new TextDecoder("utf-8").decode(t),t=JSON.parse(t),n=atob(t.license),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);e.data=r.buffer,player.drmLock=!0}),player.noplay=o,i&&0<i&&(player.playhead=60*i)}})},pause:function(){player.getVideo().pause(),player.state=player.states.PAUSED,video.showBTN("pause")},resume:function(){player.getVideo().play(),video.hideBTN(),player.state=player.states.PLAYING},playPause:function(){player.getVideo().paused?player.resume():player.pause()},rewind:function(e){player.pause(),clearTimeout(player.timers.forward_rewind),video.showBTN("rewind"),player.values.forward_rewind-=.01*player.getDuration(),e(player.values.forward_rewind),player.timers.forward_rewind=setTimeout(function(){player.getVideo().currentTime=player.values.forward_rewind+player.getPlayed()<0?0:player.values.forward_rewind+player.getPlayed(),player.values.forward_rewind=0,player.resume()},500)},forward:function(e){player.state=player.states.FORWARD,player.pause(),clearTimeout(player.timers.forward_rewind),video.showBTN("forward"),player.values.forward_rewind+=.01*player.getDuration(),e(player.values.forward_rewind),player.timers.forward_rewind=setTimeout(function(){player.getVideo().currentTime=player.values.forward_rewind+player.getPlayed()>player.getDuration()-.02*player.getDuration()?player.getPlayed():player.values.forward_rewind+player.getPlayed(),player.values.forward_rewind=0,player.resume()},500)},forwardTo:function(e){player.getVideo().currentTime=e},getQuality:function(){var t=player.plugin.getBitrateInfoListFor("video"),e=Object.keys(t).find(e=>t[e].height===+session.storage.quality);return void 0!==e?e:-1},stop:function(){player.state!=player.states.STOPPED&&(player.getVideo().pause(),player.plugin=NaN,player.video=NaN,player.STOP_CALLBACK&&player.STOP_CALLBACK(),player.state=player.states.STOPPED)},speed:function(e){player.getVideo().playbackRate=e},destroy:function(){player.stop()},onbufferingstart:function(){video.showBTN("loading")},onbufferingcomplete:function(){"auto"!==session.storage.quality&&player.plugin.setQualityFor("video",player.getQuality()),player.playhead&&(player.getVideo().currentTime=player.playhead,player.playhead=null),player.noplay?(player.noplay=null,player.pause()):(player.getVideo().play(),player.state=player.states.PLAYING),video.hideBTN()},oncurrentplaytime:function(e){video.setPlayingTime(e)},onstreamcompleted:function(){console.log("onstreamcompleted"),app.stop()},onevent:function(e,t){console.log("onevent "+e+" - "+t)},onerror:function(e){console.log("onerror "+e)},ondrmevent:function(e,t){console.log("ondrmevent "+e+" - "+t)},onsubtitlechange:function(e,t,n,r,i){console.log("onsubtitlechange")}},window.service={api:{url:"https://beta-api.crunchyroll.com",static:"https://static.crunchyroll.com",drm:"https://cr-play-service.prd.crunchyrollsvc.com",auth:"Basic bm12anNoZmtueW14eGtnN2ZiaDk6WllJVnJCV1VQYmNYRHRiRDIyVlNMYTZiNFdRb3Mzelg="},token:function(t){var e=new Headers,n=(e.append("Authorization",service.api.auth),e.append("Content-Type","application/x-www-form-urlencoded"),service.format({username:t.data.username,password:t.data.password,grant_type:"password",scope:"offline_access"}));fetch(service.api.url+"/auth/v1/token",{method:"POST",headers:e,body:n}).then(e=>e.json()).then(e=>t.success&&t.success(e)).catch(e=>{console.log(e),t.error&&t.error(e)})},refresh:function(t){var e=new Headers,n=(e.append("Authorization",service.api.auth),e.append("Content-Type","application/x-www-form-urlencoded"),service.format({refresh_token:session.storage.refresh_token,grant_type:"refresh_token",scope:"offline_access"}));fetch(service.api.url+"/auth/v1/token",{method:"POST",headers:e,body:n}).then(e=>e.json()).then(e=>t.success(e)).catch(e=>t.error(e))},profile:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(service.api.url+"/accounts/v1/me/profile",{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},setProfile:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(service.api.url+"/accounts/v1/me/profile",{method:"PATCH",headers:t,body:JSON.stringify(n.data)}).then(e=>null).then(e=>n.success(e)).catch(e=>n.error(e))}})},cookies:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(service.api.url+"/index/v2",{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},home:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/content/v2/discover/${e.id}/home_feed?start=0&n=100&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},continue:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/content/v2/discover/up_next/${n.data.ids}?locale=${e.language}&preferred_audio_language=`+e.account.audio,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},playheads:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/content/v2/${e.id}/playheads?content_ids=${n.data.ids}&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},seasons:function(n){return session.cookies({success:function(e){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/cms/v2${e.cookies.bucket}/seasons?series_id=${n.data.id}&preferred_audio_language=${e.account.audio}&locale=${e.language}&Signature=${e.cookies.signature}&Policy=${e.cookies.policy}&Key-Pair-Id=`+e.cookies.key_pair_id,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))},error:function(e){n.error(e)}})},episodes:function(n){return session.cookies({success:function(e){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/cms/v2${e.cookies.bucket}/episodes?season_id=${n.data.id}&preferred_audio_language=${e.account.audio}&locale=${e.language}&Signature=${e.cookies.signature}&Policy=${e.cookies.policy}&Key-Pair-Id=`+e.cookies.key_pair_id,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))},error:function(e){n.error(e)}})},video_v2:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.drm}/v1/${n.data.id}/web/firefox/play`,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},video:function(n){return session.cookies({success:function(e){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/cms/v2${e.cookies.bucket}/videos/${n.data.id}/streams?Signature=${e.cookies.signature}&Policy=${e.cookies.policy}&Key-Pair-Id=`+e.cookies.key_pair_id,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))},error:function(e){n.error(e)}})},search:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/content/v2/discover/search?q=${n.data.query}&type=series,movie_listing&n=100&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},history:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(`${service.api.url}/content/v2/${e.id}/watch-history?page_size=100&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},setHistory:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/playheads?preferred_audio_language=${e.account.audio}&locale=`+e.language,{method:"POST",headers:t,body:JSON.stringify(n.data)}).then(e=>e.text()).then(e=>n.success(e)).catch(e=>n.error(e))}})},languages:function(t){fetch(service.api.static+"/config/i18n/v3/"+("subtitle"===t.data.type?"timed_text_languages.json":"audio_languages.json")).then(e=>e.json()).then(e=>t.success(e)).catch(e=>t.error(e))},intro:function(t){fetch(`${service.api.static}/datalab-intro-v2/${t.data.id}.json`).then(e=>e.json()).then(e=>t.success(e)).catch(e=>t.error(e))},categories:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/x-www-form-urlencoded"),fetch(service.api.url+"/content/v1/tenant_categories?include_subcategories=true&locale="+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},getCustomLists:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/custom-lists?preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},getCustomListItems:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/custom-lists/${n.data}?ratings=true&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},getWatchList:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/discover/${e.id}/watchlist?order=desc&n=1000&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},inWatchList:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/watchlist?content_ids=${n.data}&preferred_audio_language=${e.account.audio}&locale=`+e.language,{headers:t}).then(e=>e.json()).then(e=>n.success(e)).catch(e=>n.error(e))}})},addWatchlist:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/watchlist?preferred_audio_language=${e.account.audio}&locale=`+e.language,{method:"POST",headers:t,body:JSON.stringify(n.data)}).then(e=>e.text()).then(e=>n.success(e)).catch(e=>n.error(e))}})},removeWatchlist:function(n){return session.refresh({success:function(e){var t=new Headers;t.append("Authorization","Bearer "+e.access_token),t.append("Content-Type","application/json"),fetch(`${service.api.url}/content/v2/${e.id}/watchlist/${n.data.content_id}?preferred_audio_language=${e.account.audio}&locale=`+e.language,{method:"DELETE",headers:t}).then(e=>e.text()).then(e=>n.success(e)).catch(e=>n.error(e))}})},format:function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}},window.session={languages:{audios:{},subtitles:{}},storage:{version:NaN,language:NaN,quality:"auto",account:{password:NaN,username:NaN,avatar:"0001-cr-white-orange.png",premium:!1,language:NaN,audio:NaN},cookies:{bucket:NaN,policy:NaN,signature:NaN,key_pair_id:NaN,expires:NaN},id:NaN,country:NaN,token_type:NaN,access_token:NaN,expires_in:NaN,refresh_token:NaN},init:function(){service.languages({data:{type:"audio"},success:function(e){session.languages.audios=e,session.languages.audios["ja-JP"]="Japanese"},error:function(e){console.log(e)}}),service.languages({data:{type:"subtitle"},success:function(e){session.languages.subtitles=e,session.languages.subtitles.Disabled="Disabled"},error:function(e){console.log(e)}});var e=localStorage.getItem("session");if(e)try{e=JSON.parse(e),session.storage=e||session.storage}catch(e){console.log("error parse session.")}session.update()},start:function(t,n,r){service.token({data:{password:n,username:t},success:function(e){return session.storage.expires_in=(new Date).setSeconds((new Date).getSeconds()+e.expires_in),session.storage.id=e.account_id,session.storage.account.username=t,session.storage.account.password=n,session.storage.country=e.country,session.storage.token_type=e.token_type,session.storage.access_token=e.access_token,session.storage.refresh_token=e.refresh_token,r.success(session.update())},error:function(e){return session.clear(),r.error(e)}})},refresh:function(t){session.isExpired()?service.refresh({data:{refresh_token:session.storage.refresh_token},success:function(e){session.storage.expires_in=(new Date).setSeconds((new Date).getSeconds()+e.expires_in),session.storage.id=e.account_id,session.storage.country=e.country,session.storage.token_type=e.token_type,session.storage.access_token=e.access_token,session.storage.refresh_token=e.refresh_token,t.success(session.update())},error:function(e){t.error(e)}}):t.success(session.storage)},cookies:function(t){session.isExpired(!0)?service.cookies({success:function(e){session.storage.cookies.bucket=e.cms.bucket,session.storage.account.premium=session.storage.cookies.bucket.includes("crunchyroll"),session.storage.cookies.policy=e.cms.policy,session.storage.cookies.signature=e.cms.signature,session.storage.cookies.key_pair_id=e.cms.key_pair_id,session.storage.cookies.expires=new Date(e.cms.expires).getTime(),t.success(session.update())},error:function(e){t.error(e)}}):t.success(session.storage)},load_account:function(t){service.profile({success:function(e){session.storage.account.audio=e.preferred_content_audio_language,session.storage.account.language=e.preferred_content_subtitle_language,session.storage.account.avatar=e.avatar,session.storage.account.mature=e.maturity_rating,session.storage.account.username=e.username,session.update(),t.success()},error:t.error}),session.cookies({success:function(e){},error:function(e){}})},valid:function(e){return session.storage&&session.storage.access_token?session.refresh(e):e.error()},isExpired:function(e){e=e?session.storage.cookies.expires:session.storage.expires_in;return!(e&&e>=(new Date).getTime())},update:function(){return localStorage.setItem("session",JSON.stringify(session.storage)),session.storage},clear:function(){session.storage={language:"en-US",quality:"auto",account:{password:NaN,username:NaN,mature:NaN,avatar:"0001-cr-white-orange.png",premium:!1,language:"en-US",audio:""},cookies:{bucket:NaN,policy:NaN,signature:NaN,key_pair_id:NaN,expires:NaN},id:NaN,country:NaN,token_type:NaN,access_token:NaN,expires_in:NaN,refresh_token:NaN},session.update()}},function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(u){"use strict";var r,o=window.Slick||{};r=0,(o=function(e,t){var n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:u(e),appendDots:u(e),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return u('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},u.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=u(e),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,e=u(e).data("slick")||{},n.options=u.extend({},n.defaults,t,e),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=u.proxy(n.autoPlay,n),n.autoPlayClear=u.proxy(n.autoPlayClear,n),n.autoPlayIterator=u.proxy(n.autoPlayIterator,n),n.changeSlide=u.proxy(n.changeSlide,n),n.clickHandler=u.proxy(n.clickHandler,n),n.selectHandler=u.proxy(n.selectHandler,n),n.setPosition=u.proxy(n.setPosition,n),n.swipeHandler=u.proxy(n.swipeHandler,n),n.dragHandler=u.proxy(n.dragHandler,n),n.keyHandler=u.proxy(n.keyHandler,n),n.instanceUid=r++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},o.prototype.addSlide=o.prototype.slickAdd=function(e,t,n){var r=this;if("boolean"==typeof t)n=t,t=null;else if(t<0||t>=r.slideCount)return!1;r.unload(),"number"==typeof t?0===t&&0===r.$slides.length?u(e).appendTo(r.$slideTrack):n?u(e).insertBefore(r.$slides.eq(t)):u(e).insertAfter(r.$slides.eq(t)):!0===n?u(e).prependTo(r.$slideTrack):u(e).appendTo(r.$slideTrack),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slides.each(function(e,t){u(t).attr("data-slick-index",e)}),r.$slidesCache=r.$slides,r.reinit()},o.prototype.animateHeight=function(){var e;1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical&&(e=this.$slides.eq(this.currentSlide).outerHeight(!0),this.$list.animate({height:e},this.options.speed))},o.prototype.animateSlide=function(e,t){var n={},r=this;r.animateHeight(),!0===r.options.rtl&&!1===r.options.vertical&&(e=-e),!1===r.transformsEnabled?!1===r.options.vertical?r.$slideTrack.animate({left:e},r.options.speed,r.options.easing,t):r.$slideTrack.animate({top:e},r.options.speed,r.options.easing,t):!1===r.cssTransitions?(!0===r.options.rtl&&(r.currentLeft=-r.currentLeft),u({animStart:r.currentLeft}).animate({animStart:e},{duration:r.options.speed,easing:r.options.easing,step:function(e){e=Math.ceil(e),!1===r.options.vertical?n[r.animType]="translate("+e+"px, 0px)":n[r.animType]="translate(0px,"+e+"px)",r.$slideTrack.css(n)},complete:function(){t&&t.call()}})):(r.applyTransition(),e=Math.ceil(e),!1===r.options.vertical?n[r.animType]="translate3d("+e+"px, 0px, 0px)":n[r.animType]="translate3d(0px,"+e+"px, 0px)",r.$slideTrack.css(n),t&&setTimeout(function(){r.disableTransition(),t.call()},r.options.speed))},o.prototype.getNavTarget=function(){var e=this.options.asNavFor;return e=e&&null!==e?u(e).not(this.$slider):e},o.prototype.asNavFor=function(t){var e=this.getNavTarget();null!==e&&"object"==typeof e&&e.each(function(){var e=u(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)})},o.prototype.applyTransition=function(e){var t=this,n={};!1===t.options.fade?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,(!1===t.options.fade?t.$slideTrack:t.$slides.eq(e)).css(n)},o.prototype.autoPlay=function(){this.autoPlayClear(),this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))},o.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},o.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0)&&(e.direction=1)),e.slideHandler(t))},o.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=u(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=u(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},o.prototype.buildDots=function(){var e,t;if(!0===this.options.dots){for(this.$slider.addClass("slick-dotted"),t=u("<ul />").addClass(this.options.dotsClass),e=0;e<=this.getDotCount();e+=1)t.append(u("<li />").append(this.options.customPaging.call(this,this,e)));this.$dots=t.appendTo(this.options.appendDots),this.$dots.find("li").first().addClass("slick-active")}},o.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){u(t).attr("data-slick-index",e).data("originalStyling",u(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?u('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),u("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},o.prototype.buildRows=function(){var e,t,n,r=this,i=document.createDocumentFragment(),o=r.$slider.children();if(1<r.options.rows){for(n=r.options.slidesPerRow*r.options.rows,t=Math.ceil(o.length/n),e=0;e<t;e++){for(var a=document.createElement("div"),s=0;s<r.options.rows;s++){for(var l=document.createElement("div"),u=0;u<r.options.slidesPerRow;u++){var c=e*n+(s*r.options.slidesPerRow+u);o.get(c)&&l.appendChild(o.get(c))}a.appendChild(l)}i.appendChild(a)}r.$slider.empty().append(i),r.$slider.children().children().children().css({width:100/r.options.slidesPerRow+"%",display:"inline-block"})}},o.prototype.checkResponsive=function(e,t){var n,r,i,o=this,a=!1,s=o.$slider.width(),l=window.innerWidth||u(window).width();if("window"===o.respondTo?i=l:"slider"===o.respondTo?i=s:"min"===o.respondTo&&(i=Math.min(l,s)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(n in r=null,o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(!1===o.originalSettings.mobileFirst?i<o.breakpoints[n]&&(r=o.breakpoints[n]):i>o.breakpoints[n]&&(r=o.breakpoints[n]));null!==r?null!==o.activeBreakpoint&&r===o.activeBreakpoint&&!t||(o.activeBreakpoint=r,"unslick"===o.breakpointSettings[r]?o.unslick(r):(o.options=u.extend({},o.originalSettings,o.breakpointSettings[r]),!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e)),a=r):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e),a=r),e||!1===a||o.$slider.trigger("breakpoint",[o,a])}},o.prototype.changeSlide=function(e,t){var n,r=this,i=u(e.currentTarget);switch(i.is("a")&&e.preventDefault(),i.is("li")||(i=i.closest("li")),n=r.slideCount%r.options.slidesToScroll!=0?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":o=0==n?r.options.slidesToScroll:r.options.slidesToShow-n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-o,!1,t);break;case"next":o=0==n?r.options.slidesToScroll:n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+o,!1,t);break;case"index":var o=0===e.data.index?0:e.data.index||i.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(o),!1,t),i.children().trigger("focus");break;default:return}},o.prototype.checkNavigable=function(e){var t=this.getNavigableIndexes(),n=0;if(e>t[t.length-1])e=t[t.length-1];else for(var r in t){if(e<t[r]){e=n;break}n=t[r]}return e},o.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(u("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",u.proxy(e.interrupt,e,!0)).off("mouseleave.slick",u.proxy(e.interrupt,e,!1)),!0===e.options.accessibility)&&e.$dots.off("keydown.slick",e.keyHandler),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility)&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow)&&e.$nextArrow.off("keydown.slick",e.keyHandler),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),u(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&u(e.$slideTrack).children().off("click.slick",e.selectHandler),u(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),u(window).off("resize.slick.slick-"+e.instanceUid,e.resize),u("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),u(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},o.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",u.proxy(this.interrupt,this,!0)),this.$list.off("mouseleave.slick",u.proxy(this.interrupt,this,!1))},o.prototype.cleanUpRows=function(){var e;1<this.options.rows&&((e=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(e))},o.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},o.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),u(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow))&&t.$prevArrow.remove(),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow))&&t.$nextArrow.remove(),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){u(this).attr("style",u(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},o.prototype.disableTransition=function(e){var t={};t[this.transitionType]="",(!1===this.options.fade?this.$slideTrack:this.$slides.eq(e)).css(t)},o.prototype.fadeSlide=function(e,t){var n=this;!1===n.cssTransitions?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},o.prototype.fadeSlideOut=function(e){!1===this.cssTransitions?this.$slides.eq(e).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(e),this.$slides.eq(e).css({opacity:0,zIndex:this.options.zIndex-2}))},o.prototype.filterSlides=o.prototype.slickFilter=function(e){null!==e&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(e).appendTo(this.$slideTrack),this.reinit())},o.prototype.focusHandler=function(){var n=this;n.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(e){e.stopImmediatePropagation();var t=u(this);setTimeout(function(){n.options.pauseOnFocus&&(n.focussed=t.is(":focus"),n.autoPlay())},0)})},o.prototype.getCurrent=o.prototype.slickCurrentSlide=function(){return this.currentSlide},o.prototype.getDotCount=function(){var e=this,t=0,n=0,r=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++r;else for(;t<e.slideCount;)++r,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)r=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++r,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else r=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return r-1},o.prototype.getLeft=function(e){var t,n,r=this,i=0;return r.slideOffset=0,t=r.$slides.first().outerHeight(!0),!0===r.options.infinite?(r.slideCount>r.options.slidesToShow&&(r.slideOffset=r.slideWidth*r.options.slidesToShow*-1,n=-1,!0===r.options.vertical&&!0===r.options.centerMode&&(2===r.options.slidesToShow?n=-1.5:1===r.options.slidesToShow&&(n=-2)),i=t*r.options.slidesToShow*n),r.slideCount%r.options.slidesToScroll!=0&&e+r.options.slidesToScroll>r.slideCount&&r.slideCount>r.options.slidesToShow&&(i=e>r.slideCount?(r.slideOffset=(r.options.slidesToShow-(e-r.slideCount))*r.slideWidth*-1,(r.options.slidesToShow-(e-r.slideCount))*t*-1):(r.slideOffset=r.slideCount%r.options.slidesToScroll*r.slideWidth*-1,r.slideCount%r.options.slidesToScroll*t*-1))):e+r.options.slidesToShow>r.slideCount&&(r.slideOffset=(e+r.options.slidesToShow-r.slideCount)*r.slideWidth,i=(e+r.options.slidesToShow-r.slideCount)*t),r.slideCount<=r.options.slidesToShow&&(i=r.slideOffset=0),!0===r.options.centerMode&&r.slideCount<=r.options.slidesToShow?r.slideOffset=r.slideWidth*Math.floor(r.options.slidesToShow)/2-r.slideWidth*r.slideCount/2:!0===r.options.centerMode&&!0===r.options.infinite?r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)-r.slideWidth:!0===r.options.centerMode&&(r.slideOffset=0,r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)),n=!1===r.options.vertical?e*r.slideWidth*-1+r.slideOffset:e*t*-1+i,!0===r.options.variableWidth&&(t=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow),n=!0===r.options.rtl?t[0]?-1*(r.$slideTrack.width()-t[0].offsetLeft-t.width()):0:t[0]?-1*t[0].offsetLeft:0,!0===r.options.centerMode)&&(t=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow+1),n=!0===r.options.rtl?t[0]?-1*(r.$slideTrack.width()-t[0].offsetLeft-t.width()):0:t[0]?-1*t[0].offsetLeft:0,n+=(r.$list.width()-t.outerWidth())/2),n},o.prototype.getOption=o.prototype.slickGetOption=function(e){return this.options[e]},o.prototype.getNavigableIndexes=function(){for(var e=this,t=0,n=0,r=[],i=!1===e.options.infinite?e.slideCount:(t=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,2*e.slideCount);t<i;)r.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},o.prototype.getSlick=function(){return this},o.prototype.getSlideCount=function(){var n,r=this,i=!0===r.options.centerMode?r.slideWidth*Math.floor(r.options.slidesToShow/2):0;return!0===r.options.swipeToSlide?(r.$slideTrack.find(".slick-slide").each(function(e,t){if(t.offsetLeft-i+u(t).outerWidth()/2>-1*r.swipeLeft)return n=t,!1}),Math.abs(u(n).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},o.prototype.goTo=o.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},o.prototype.init=function(e){var t=this;u(t.$slider).hasClass("slick-initialized")||(u(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},o.prototype.initADA=function(){var n=this,r=Math.ceil(n.slideCount/n.options.slidesToShow),i=n.getNavigableIndexes().filter(function(e){return 0<=e&&e<n.slideCount});n.$slides.add(n.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==n.$dots&&(n.$slides.not(n.$slideTrack.find(".slick-cloned")).each(function(e){var t=i.indexOf(e);u(this).attr({role:"tabpanel",id:"slick-slide"+n.instanceUid+e,tabindex:-1}),-1!==t&&u(this).attr({"aria-describedby":"slick-slide-control"+n.instanceUid+t})}),n.$dots.attr("role","tablist").find("li").each(function(e){var t=i[e];u(this).attr({role:"presentation"}),u(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+n.instanceUid+e,"aria-controls":"slick-slide"+n.instanceUid+t,"aria-label":e+1+" of "+r,"aria-selected":null,tabindex:"-1"})}).eq(n.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var e=n.currentSlide,t=e+n.options.slidesToShow;e<t;e++)n.$slides.eq(e).attr("tabindex",0);n.activateADA()},o.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),!0===e.options.accessibility)&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler))},o.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&(u("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility)&&e.$dots.on("keydown.slick",e.keyHandler),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&u("li",e.$dots).on("mouseenter.slick",u.proxy(e.interrupt,e,!0)).on("mouseleave.slick",u.proxy(e.interrupt,e,!1))},o.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",u.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",u.proxy(this.interrupt,this,!1)))},o.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),u(document).on(e.visibilityChange,u.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&u(e.$slideTrack).children().on("click.slick",e.selectHandler),u(window).on("orientationchange.slick.slick-"+e.instanceUid,u.proxy(e.orientationChange,e)),u(window).on("resize.slick.slick-"+e.instanceUid,u.proxy(e.resize,e)),u("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),u(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),u(e.setPosition)},o.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show()),!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()},o.prototype.keyHandler=function(e){e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?"previous":"next"}}))},o.prototype.lazyLoad=function(){function e(e){u("img[data-lazy]",e).each(function(){var e=u(this),t=u(this).attr("data-lazy"),n=u(this).attr("data-srcset"),r=u(this).attr("data-sizes")||o.$slider.attr("data-sizes"),i=document.createElement("img");i.onload=function(){e.animate({opacity:0},100,function(){n&&(e.attr("srcset",n),r)&&e.attr("sizes",r),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,e,t])})},i.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,e,t])},i.src=t})}var t,n,r,o=this;if(!0===o.options.centerMode?r=!0===o.options.infinite?(n=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(n=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),o.options.slidesToShow/2+1+2+o.currentSlide):(n=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,r=Math.ceil(n+o.options.slidesToShow),!0===o.options.fade&&(0<n&&n--,r<=o.slideCount)&&r++),t=o.$slider.find(".slick-slide").slice(n,r),"anticipated"===o.options.lazyLoad)for(var i=n-1,a=r,s=o.$slider.find(".slick-slide"),l=0;l<o.options.slidesToScroll;l++)i<0&&(i=o.slideCount-1),t=(t=t.add(s.eq(i))).add(s.eq(a)),i--,a++;e(t),o.slideCount<=o.options.slidesToShow?e(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?e(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&e(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},o.prototype.loadSlider=function(){this.setPosition(),this.$slideTrack.css({opacity:1}),this.$slider.removeClass("slick-loading"),this.initUI(),"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()},o.prototype.next=o.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},o.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},o.prototype.pause=o.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},o.prototype.play=o.prototype.slickPlay=function(){this.autoPlay(),this.options.autoplay=!0,this.paused=!1,this.focussed=!1,this.interrupted=!1},o.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),!0===t.options.accessibility&&(t.initADA(),t.options.focusOnChange)&&u(t.$slides.get(t.currentSlide)).attr("tabindex",0).focus())},o.prototype.prev=o.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},o.prototype.preventDefault=function(e){e.preventDefault()},o.prototype.progressiveLazyLoad=function(e){e=e||1;var t,n,r,i,o=this,a=u("img[data-lazy]",o.$slider);a.length?(t=a.first(),n=t.attr("data-lazy"),r=t.attr("data-srcset"),i=t.attr("data-sizes")||o.$slider.attr("data-sizes"),(a=document.createElement("img")).onload=function(){r&&(t.attr("srcset",r),i)&&t.attr("sizes",i),t.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===o.options.adaptiveHeight&&o.setPosition(),o.$slider.trigger("lazyLoaded",[o,t,n]),o.progressiveLazyLoad()},a.onerror=function(){e<3?setTimeout(function(){o.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,t,n]),o.progressiveLazyLoad())},a.src=n):o.$slider.trigger("allImagesLoaded",[o])},o.prototype.refresh=function(e){var t=this,n=t.slideCount-t.options.slidesToShow;!t.options.infinite&&t.currentSlide>n&&(t.currentSlide=n),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),n=t.currentSlide,t.destroy(!0),u.extend(t,t.initials,{currentSlide:n}),t.init(),e||t.changeSlide({data:{message:"index",index:n}},!1)},o.prototype.registerBreakpoints=function(){var e,t,n,r=this,i=r.options.responsive||null;if("array"===u.type(i)&&i.length){for(e in r.respondTo=r.options.respondTo||"window",i)if(n=r.breakpoints.length-1,i.hasOwnProperty(e)){for(t=i[e].breakpoint;0<=n;)r.breakpoints[n]&&r.breakpoints[n]===t&&r.breakpoints.splice(n,1),n--;r.breakpoints.push(t),r.breakpointSettings[t]=i[e].settings}r.breakpoints.sort(function(e,t){return r.options.mobileFirst?e-t:t-e})}},o.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&u(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},o.prototype.resize=function(){var e=this;u(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=u(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},o.prototype.removeSlide=o.prototype.slickRemove=function(e,t,n){var r=this;if(e="boolean"==typeof e?!0===(t=e)?0:r.slideCount-1:!0===t?--e:e,r.slideCount<1||e<0||e>r.slideCount-1)return!1;r.unload(),(!0===n?r.$slideTrack.children():r.$slideTrack.children(this.options.slide).eq(e)).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,r.reinit()},o.prototype.setCSS=function(e){var t,n,r=this,i={};!0===r.options.rtl&&(e=-e),t="left"==r.positionProp?Math.ceil(e)+"px":"0px",n="top"==r.positionProp?Math.ceil(e)+"px":"0px",i[r.positionProp]=e,!1!==r.transformsEnabled&&(!(i={})===r.cssTransitions?i[r.animType]="translate("+t+", "+n+")":i[r.animType]="translate3d("+t+", "+n+", 0px)"),r.$slideTrack.css(i)},o.prototype.setDimensions=function(){var e=this,t=(!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length))),e.$slides.first().outerWidth(!0)-e.$slides.first().width());!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},o.prototype.setFade=function(){var n,r=this;r.$slides.each(function(e,t){n=r.slideWidth*e*-1,!0===r.options.rtl?u(t).css({position:"relative",right:n,top:0,zIndex:r.options.zIndex-2,opacity:0}):u(t).css({position:"relative",left:n,top:0,zIndex:r.options.zIndex-2,opacity:0})}),r.$slides.eq(r.currentSlide).css({zIndex:r.options.zIndex-1,opacity:1})},o.prototype.setHeight=function(){var e;1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical&&(e=this.$slides.eq(this.currentSlide).outerHeight(!0),this.$list.css("height",e))},o.prototype.setOption=o.prototype.slickSetOption=function(){var e,t,n,r,i,o=this,a=!1;if("object"===u.type(arguments[0])?(n=arguments[0],a=arguments[1],i="multiple"):"string"===u.type(arguments[0])&&(n=arguments[0],r=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===u.type(arguments[1])?i="responsive":void 0!==arguments[1]&&(i="single")),"single"===i)o.options[n]=r;else if("multiple"===i)u.each(n,function(e,t){o.options[e]=t});else if("responsive"===i)for(t in r)if("array"!==u.type(o.options.responsive))o.options.responsive=[r[t]];else{for(e=o.options.responsive.length-1;0<=e;)o.options.responsive[e].breakpoint===r[t].breakpoint&&o.options.responsive.splice(e,1),e--;o.options.responsive.push(r[t])}a&&(o.unload(),o.reinit())},o.prototype.setPosition=function(){this.setDimensions(),this.setHeight(),!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade(),this.$slider.trigger("setPosition",[this])},o.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty)&&void 0===t.webkitPerspective&&(e.animType=!1),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty)&&void 0===t.MozPerspective&&(e.animType=!1),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty)&&void 0===t.webkitPerspective&&(e.animType=!1),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform)&&(e.animType=!1),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},o.prototype.setSlideClasses=function(e){var t,n,r,i=this,o=i.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");i.$slides.eq(e).addClass("slick-current"),!0===i.options.centerMode?(n=i.options.slidesToShow%2==0?1:0,r=Math.floor(i.options.slidesToShow/2),!0===i.options.infinite&&((r<=e&&e<=i.slideCount-1-r?i.$slides.slice(e-r+n,e+r+1):(t=i.options.slidesToShow+e,o.slice(t-r+1+n,t+r+2))).addClass("slick-active").attr("aria-hidden","false"),0===e?o.eq(o.length-1-i.options.slidesToShow).addClass("slick-center"):e===i.slideCount-1&&o.eq(i.options.slidesToShow).addClass("slick-center")),i.$slides.eq(e).addClass("slick-center")):(0<=e&&e<=i.slideCount-i.options.slidesToShow?i.$slides.slice(e,e+i.options.slidesToShow):o.length<=i.options.slidesToShow?o:(n=i.slideCount%i.options.slidesToShow,t=!0===i.options.infinite?i.options.slidesToShow+e:e,i.options.slidesToShow==i.options.slidesToScroll&&i.slideCount-e<i.options.slidesToShow?o.slice(t-(i.options.slidesToShow-n),t+n):o.slice(t,t+i.options.slidesToShow))).addClass("slick-active").attr("aria-hidden","false"),"ondemand"!==i.options.lazyLoad&&"anticipated"!==i.options.lazyLoad||i.lazyLoad()},o.prototype.setupInfinite=function(){var e,t,n,r=this;if(!0===r.options.fade&&(r.options.centerMode=!1),!0===r.options.infinite&&!1===r.options.fade&&(t=null,r.slideCount>r.options.slidesToShow)){for(n=!0===r.options.centerMode?r.options.slidesToShow+1:r.options.slidesToShow,e=r.slideCount;e>r.slideCount-n;--e)u(r.$slides[t=e-1]).clone(!0).attr("id","").attr("data-slick-index",t-r.slideCount).prependTo(r.$slideTrack).addClass("slick-cloned");for(e=0;e<n+r.slideCount;e+=1)t=e,u(r.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+r.slideCount).appendTo(r.$slideTrack).addClass("slick-cloned");r.$slideTrack.find(".slick-cloned").find("[id]").each(function(){u(this).attr("id","")})}},o.prototype.interrupt=function(e){e||this.autoPlay(),this.interrupted=e},o.prototype.selectHandler=function(e){e=u(e.target).is(".slick-slide")?u(e.target):u(e.target).parents(".slick-slide"),e=(e=parseInt(e.attr("data-slick-index")))||0;this.slideCount<=this.options.slidesToShow?this.slideHandler(e,!1,!0):this.slideHandler(e)},o.prototype.slideHandler=function(e,t,n){var r,i,o,a=this;t=t||!1,!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===e||(!1===t&&a.asNavFor(e),r=e,t=a.getLeft(r),o=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?o:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(e<0||e>a.getDotCount()*a.options.slidesToScroll)||!1===a.options.infinite&&!0===a.options.centerMode&&(e<0||e>a.slideCount-a.options.slidesToScroll)?!1===a.options.fade&&(r=a.currentSlide,!0!==n?a.animateSlide(o,function(){a.postSlide(r)}):a.postSlide(r)):(a.options.autoplay&&clearInterval(a.autoPlayTimer),i=r<0?a.slideCount%a.options.slidesToScroll!=0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+r:r>=a.slideCount?a.slideCount%a.options.slidesToScroll!=0?0:r-a.slideCount:r,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,i]),e=a.currentSlide,a.currentSlide=i,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(o=(o=a.getNavTarget()).slick("getSlick")).slideCount<=o.options.slidesToShow&&o.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade?(!0!==n?(a.fadeSlideOut(e),a.fadeSlide(i,function(){a.postSlide(i)})):a.postSlide(i),a.animateHeight()):!0!==n?a.animateSlide(t,function(){a.postSlide(i)}):a.postSlide(i)))},o.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},o.prototype.swipeDirection=function(){var e=this.touchObject.startX-this.touchObject.curX,t=this.touchObject.startY-this.touchObject.curY,t=Math.atan2(t,e);return(e=(e=Math.round(180*t/Math.PI))<0?360-Math.abs(e):e)<=45&&0<=e||e<=360&&315<=e?!1===this.options.rtl?"left":"right":135<=e&&e<=225?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=e&&e<=135?"down":"up":"vertical"},o.prototype.swipeEnd=function(e){var t,n,r=this;if(r.dragging=!1,r.swiping=!1,r.scrolling)return r.scrolling=!1;if(r.interrupted=!1,r.shouldClick=!(10<r.touchObject.swipeLength),void 0===r.touchObject.curX)return!1;if(!0===r.touchObject.edgeHit&&r.$slider.trigger("edge",[r,r.swipeDirection()]),r.touchObject.swipeLength>=r.touchObject.minSwipe){switch(n=r.swipeDirection()){case"left":case"down":t=r.options.swipeToSlide?r.checkNavigable(r.currentSlide+r.getSlideCount()):r.currentSlide+r.getSlideCount(),r.currentDirection=0;break;case"right":case"up":t=r.options.swipeToSlide?r.checkNavigable(r.currentSlide-r.getSlideCount()):r.currentSlide-r.getSlideCount(),r.currentDirection=1}"vertical"!=n&&(r.slideHandler(t),r.touchObject={},r.$slider.trigger("swipe",[r,n]))}else r.touchObject.startX!==r.touchObject.curX&&(r.slideHandler(r.currentSlide),r.touchObject={})},o.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},o.prototype.swipeMove=function(e){var t,n,r=this,i=void 0!==e.originalEvent?e.originalEvent.touches:null;return!(!r.dragging||r.scrolling||i&&1!==i.length)&&(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==i?i[0].pageX:e.clientX,r.touchObject.curY=void 0!==i?i[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),i=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2))),!r.options.verticalSwiping&&!r.swiping&&4<i?!(r.scrolling=!0):(!0===r.options.verticalSwiping&&(r.touchObject.swipeLength=i),i=r.swipeDirection(),void 0!==e.originalEvent&&4<r.touchObject.swipeLength&&(r.swiping=!0,e.preventDefault()),e=(!1===r.options.rtl?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),!0===r.options.verticalSwiping&&(e=r.touchObject.curY>r.touchObject.startY?1:-1),n=r.touchObject.swipeLength,(r.touchObject.edgeHit=!1)===r.options.infinite&&(0===r.currentSlide&&"right"===i||r.currentSlide>=r.getDotCount()&&"left"===i)&&(n=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),!1===r.options.vertical?r.swipeLeft=t+n*e:r.swipeLeft=t+n*(r.$list.height()/r.listWidth)*e,!0===r.options.verticalSwiping&&(r.swipeLeft=t+n*e),!0!==r.options.fade&&!1!==r.options.touchMove&&(!0===r.animating?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))))},o.prototype.swipeStart=function(e){var t,n=this;if(n.interrupted=!0,1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow)return!(n.touchObject={});void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,n.dragging=!0},o.prototype.unfilterSlides=o.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())},o.prototype.unload=function(){var e=this;u(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},o.prototype.unslick=function(e){this.$slider.trigger("unslick",[this,e]),this.destroy()},o.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode||e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode)&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},o.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").end(),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active"))},o.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},u.fn.slick=function(){for(var e,t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=this.length,i=0;i<r;i++)if("object"==typeof t||void 0===t?this[i].slick=new o(this[i],t):e=this[i].slick[t].apply(this[i].slick,n),void 0!==e)return e;return this}}),window.translate={lang:"en",init:function(){session.storage.language&&session.storage.language.includes("-")?translate.updateLanguage(session.storage.language):translate.updateLanguage("en-US")},refresh:function(){document.querySelectorAll("[translate]").forEach(e=>e.innerText=translate.go(e.innerText))},go:function(e,t){var n=e.split("."),r=e;try{r=n.reduce((e,t)=>e[t],languages[translate.lang]);r=t?translate.withParams(r,t):r}catch(e){r=n.reduce((e,t)=>e[t],languages.en);r=t?translate.withParams(r,t):r}return r||e},withParams:function(e,n){return Object.keys(n).reduce((e,t)=>e.replace(new RegExp(`{s*${t}s*}`,"g"),n[t]),e)},updateLanguage:function(e){translate.lang=e.split("-")[0],session.storage.language=e,session.update()}},window.main={urls:{src:"server/img"},events:{logout:function(){null!=document.getElementById(menu.id)&&menu.destroy();var e=main.state.replace("-screen","");(void 0===window[e]?(console.log("Failed to find ID of current screen"),menu):(null!=document.getElementById(main.state)&&window[e].destroy(),session.clear(),login)).init()},login:function(){session.valid({success:function(){session.load_account({success:function(){main.events.home()},error:function(e){console.log("load_account",e)}})},error:function(e){console.log(e),loading.destroy(),login.init()}})},home:function(){service.home({success:function(e){mapper.home(e,{success:function(){loading.destroy(),home.init(),menu.init()}})},error:function(e){console.log(e),loading.destroy(),login.init()}})}},mac:null,token:null,state:null,timer:null,init:function(){loading.init(),session.init(),translate.init(),main.events.login(),main.preventClickMessage(),tvKey.IS_KEY_BACK=function(e){return[10009,27,461].includes(e)?e:-1}},preventClickMessage:function(){var e=document.createElement("div");e.className="no-cursor",e.innerHTML=`
    <div id="no-cursor-alert">
      <i class="fa-solid fa-computer-mouse"></i>
      <span></span>
    </div>`,e.addEventListener("click",function(){clearTimeout(main.timer),$("#no-cursor-alert").css("opacity",1),$("#no-cursor-alert span").text(translate.go("generic.alert.cursor")),main.timer=setTimeout(()=>{$("#no-cursor-alert").css("opacity",0)},2e3)}),document.body.appendChild(e)},destroy:function(){player.destroy()},log:function(e){$("#console").html($("#console").html()+(e+"<br/>")),$("#console").scrollTop(3e6)},keyDown:function(e){if(loading.active)tvKey.IS_KEY_BACK(e.keyCode)&&loading.end();else if(e.keyCode==tvKey.KEY_EXIT&&main.state!=exit.id)exit.init();else switch(main.state){case changelog.id:changelog.keyDown(e);break;case loading.id:loading.keyDown(e);break;case exit.id:exit.keyDown(e);break;case login.id:login.keyDown(e);break;case keyboard.id:keyboard.keyDown(e);break;case menu.id:menu.keyDown(e);break;case mylist.id:mylist.keyDown(e);break;case search.id:search.keyDown(e);break;case historyScreen.id:historyScreen.keyDown(e);break;case browse.id:browse.keyDown(e);break;case home.id:home.keyDown(e);break;case home_details.id:home_details.keyDown(e);break;case home_episodes.id:home_episodes.keyDown(e);break;case video.id:video.keyDown(e);break;case settings.id:settings.keyDown(e);break;default:console.log("keyboard action screen not defined.")}}},window.browse={id:"browse-screen",data:{categories:[],main:[]},init:function(r){var t=document.createElement("div");t.id=browse.id,loading.start(),service.categories({success:function(e){browse.data.categories=e.items;var n="";browse.data.categories.forEach((e,t)=>{n+=`
          <li class="item${t===(r||0)?" focus":""}">
            <img src="${e.images.low[0].source}"/>
            ${e.localization.title}
          </li>`}),t.innerHTML=`
        <div class="content">
          <img id="browse-background"/>
          <div id="browse-menu">
            <div class="browse-content">
              <ul class="browse-content-wrapper">
                ${n}
              </ul>
            </div>
          </div>
        </div>`,document.body.appendChild(t),menu.destroy(),loading.end(),browse.move("down"),browse.move("up")},error:function(e){loading.end(),console.log(e)}}),main.state=browse.id},destroy:function(){document.body.removeChild(document.getElementById(browse.id))},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):case 27:browse.destroy(),menu.init(),home.restart();break;case tvKey.KEY_UP:browse.move("up");break;case tvKey.KEY_DOWN:browse.move("down");break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var t=$(".browse-content .item"),t=browse.data.categories[t.index($(".browse-content .item.focus"))];loading.start(),home.data.main=null,mapper.listByCategories(t.tenant_category,t.sub_categories,{success:function(){var e=$(".browse-content .item").index($(".browse-content .item.focus"));loading.end(),home.fromCategory.state=!0,home.fromCategory.index=e,home.fromCategory.title=browse.data.categories[e].localization.title,home.init(),browse.destroy()}})}},move:function(e){var t=$(".browse-content .item"),n=t.index($(".browse-content .item.focus")),n=(t.removeClass("focus"),e="up"===e?0<n?n-1:n:n<t.length-1?n+1:n,t.eq(e).addClass("focus"),$("#browse-background").attr("src",browse.data.categories[e].images.background[4].source),0);9<t.length&&8<e&&(n=-110*(e-8)),$(".browse-content-wrapper")[0].style.marginTop=n+"px"}},window.changelog={id:"changelog-modal",data:{version:"v1.1.6",changes:[]},init:function(){var e=document.createElement("div");e.id=changelog.id,e.innerHTML=`
      <div class="content">
        <div class="header">v1.1.5 important announcement</div>
        <div class="body">
          <div class="text-big">The Crunchyroll OFFICIAL APP is now available for install in the TV STORE.</div>
          <div class="text-small">Thanks.</div>
        </div>
        <div class="footer">
          <a class="button ${login.id}-option">OK</a>
        </div>
      </div>`,session.storage.version=changelog.data.version,session.update(),document.body.appendChild(e),main.state=changelog.id},destroy:function(){main.state=home.id,document.body.removeChild(document.getElementById(changelog.id))},getChanges:function(e){var t="";return changelog.data.changes.forEach(e=>{t+=`
      <li>
        <div class="change-title">
          ${e.title}
        </div>
        <div class="change-description">
          ${e.description} 
        </div>
      </li>`}),t},keyDown:function(e){switch(e.keyCode){case tvKey.KEY_PANEL_ENTER:case tvKey.KEY_ENTER:case tvKey.IS_KEY_BACK(e.keyCode):changelog.destroy()}}},window.exit={id:"exit-screen",previous:null,selected:!1,logout:!1,init:function(e){var t=document.createElement("div");t.id=exit.id,exit.logout=e,t.innerHTML='<div class="content">  <div class="window">    <div class="text">'+translate.go("exit.message"+(exit.logout?"_logout":""))+'    <div class="buttons">'+`      <div class="button" id="exit-screen-yes">${translate.go("exit.yes")}</div>`+`      <div class="button" id="exit-screen-no">${translate.go("exit.no")}</div>`+"    </div>  </div></div>",document.body.appendChild(t),exit.previous=main.state,main.state=exit.id,exit.move(!1)},destroy:function(){document.body.removeChild(document.getElementById(this.id)),main.state=exit.previous},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):case tvKey.KEY_EXIT:exit.destroy();break;case tvKey.KEY_LEFT:exit.move(!0);break;case tvKey.KEY_RIGHT:exit.move(!1);break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:exit.action(exit.selected)}},move:function(e){exit.selected=e,document.getElementById(exit.id+"-"+(e?"yes":"no")).className="button selected",document.getElementById(exit.id+"-"+(e?"no":"yes")).className="button"},action:function(e){e?(exit.logout&&session.clear(),"undefined"!=typeof tizen&&tizen.application.getCurrentApplication().exit()):exit.destroy()}},window.historyScreen={id:"history-screen",data:[],init:function(){var e=document.createElement("div");e.id=historyScreen.id,e.innerHTML=`
    <div class="content">
      <div class="list-container">
        <div class="list-container-over" id="history-list"></div>
      </div>
      <div class="logo-fixed">
        <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
      </div>
    </div>`,document.body.appendChild(e),loading.start(),service.history({success:function(e){var n="";historyScreen.data=mapper.history(e),historyScreen.data.forEach((e,t)=>{n+=`
          <div class="item${0===t?" selected":""}">
            <img src="${e.background}" alt="">
            ${historyScreen.view(e)}
          </div>`}),document.getElementById("history-list").innerHTML=n,loading.end()},error:function(e){loading.end(),console.log(e)}})},destroy:function(){historyScreen.data=[],document.body.removeChild(document.getElementById(historyScreen.id))},view:function(e){return 0!==e.playhead?`<div class="progress" style="width: ${100*e.playhead/e.duration}%" value="${e.duration===e.playhead?translate.go("home.episodes.watched"):e.duration-e.playhead+"m"}"></div>`:""},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):menu.open();break;case tvKey.KEY_NEXT:break;case tvKey.KEY_UP:var t=(i=$(".list-container .item")).index($(".list-container-over .item.selected")),n=(i.removeClass("selected"),4<t?t-5:t),r=(i.eq(n).addClass("selected"),Math.ceil((n+1)/5));$(".list-container-over").get(0).style.marginTop=`${4<r?-210*(r-4):0}px`;break;case tvKey.KEY_DOWN:t=(i=$(".list-container-over .item")).index($(".list-container-over .item.selected")),n=(i.removeClass("selected"),t<i.length-5?t+5:t),r=(i.eq(n).addClass("selected"),Math.ceil((n+1)/5));$(".list-container-over").get(0).style.marginTop=`${4<r?-210*(r-4):0}px`;break;case tvKey.KEY_LEFT:0!==(t=(i=$(".list-container-over .item")).index($(".list-container-over .item.selected")))&&t%5!=0?(i.removeClass("selected"),i.eq(t-1).addClass("selected")):menu.open();break;case tvKey.KEY_RIGHT:t=(i=$(".list-container-over .item")).index($(".list-container-over .item.selected")),n=(i.removeClass("selected"),t+1<i.length&&(t+1)%5!=0?t+1:t);i.eq(n).addClass("selected");break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var i,t=(i=$(".list-container-over .item")).index($(".list-container-over .item.selected"));home_details.init(historyScreen.data[t],function(e){var t=document.createElement("div");t.id=home.id,t.innerHTML=`
            <div class="content">
              <div class="details full">
                <div class="background">
                  <img src="${e.background}">
                </div>
                <div class="info">
                  <div class="title resize">${e.title}</div>
                  <div class="description resize">${e.description}</div>
                  <div class="buttons">
                    <a class="selected">${translate.go("home.banner.play")}</a>
                    <a>${translate.go("home.banner.info")}</a>
                  </div>
                </div>
              </div>
              <div class="logo-fixed">
                <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
              </div>
            </div>`,document.getElementById(historyScreen.id).style.display="none",document.body.appendChild(t)},function(){document.getElementById(historyScreen.id).style.display="block",home.destroy()})}}},window.home_details={id:"home_details-screen",previous:NaN,data:{this:NaN,continue:NaN},callbacks:{init:NaN,destroy:NaN},init:function(e,t,n){home_details.callbacks.init=t,home_details.callbacks.destroy=n,home_details.callbacks.init&&home_details.callbacks.init(e),service.inWatchList({data:e.id,success:function(e){home_details.inWatchList=0<e.data.length,e=home_details.inWatchList?`<i class="fa-solid fa-bookmark"></i>
          <p>${translate.go("home.details.remove")}</p>`:`<i class="fa-regular fa-bookmark"></i>
          <p>${translate.go("home.details.add")}</p>`,document.getElementById("watchlist-status").innerHTML=e},error:function(e){home_details.inWatchList=!1,console.log(e)}});t=document.createElement("div");t.className=`${home_details.id} ${home_details.id}_buttons`,t.innerHTML=`
    <a class="selected">
      <i class="fa-solid fa-play"></i>
      <p>${translate.go("home.details.play",{season:1,episode:1})}</p>
      <span></span>
    </a>
    <a id="watchlist-status">
      <i class="fa-regular fa-bookmark"></i>
      <p>${translate.go("home.details.add")}</p>
    </a>
    <a>
      <i class="fa-solid fa-list"></i>
      <p>${translate.go("home.details.episodes")}</p>
    </a>`,home_details.data.this=e,$(`#${home.id} .details .info`).append(t),"movie"===e.type?($(`.${home_details.id}.${home_details.id}_buttons a`).eq(2).remove(),$(`.${home_details.id}.${home_details.id}_buttons a`).eq(0).addClass(0<e.playhead?"played":"").attr("percent",100*e.playhead/e.duration),n=translate.go("home.details."+(0<e.playhead?"continue":"play"),{season:0,episode:0}),$(`.${home_details.id}.${home_details.id}_buttons a p`).eq(0).text(n),$(`.${home_details.id}.${home_details.id}_buttons a span`).eq(0).width(100*e.playhead/e.duration+"%")):(loading.start(),service.continue({data:{ids:e.id},success:function(e){loading.end(),home_details.data.continue=mapper.continue(e),$(`.${home_details.id}.${home_details.id}_buttons a`).eq(0).addClass(0<home_details.data.continue.played?"played":"").attr("percent",home_details.data.continue.played);e=translate.go("home.details."+(0<home_details.data.continue.played?"continue":"play"),{season:home_details.data.continue.season_number,episode:home_details.data.continue.episode_number});$(`.${home_details.id}.${home_details.id}_buttons a p`).eq(0).text(e),$(`.${home_details.id}.${home_details.id}_buttons a span`).eq(0).width(home_details.data.continue.played+"%")},error:function(e){loading.end(),console.log(e)}})),$(`#${home.id} .details`).addClass("full"),$("body").addClass(""+home_details.id),home_details.previous=main.state,main.state=home_details.id},destroy:function(){$("body").removeClass(""+home_details.id),$(`#${home.id} .details.full`).removeClass("full"),$("."+home_details.id).remove(),home_details.data.continue=NaN,home_details.data.this=NaN,home_details.inWatchList=!1,main.state=home_details.previous,home_details.callbacks.destroy&&home_details.callbacks.destroy()},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):home_details.destroy();break;case tvKey.KEY_UP:var t=(n=$(`.${home_details.id}.${home_details.id}_buttons a`)).index($(`.${home_details.id}.${home_details.id}_buttons a.selected`));n.removeClass("selected"),n.eq(0<t?t-1:t).addClass("selected");break;case tvKey.KEY_DOWN:t=(n=$(`.${home_details.id}.${home_details.id}_buttons a`)).index($(`.${home_details.id}.${home_details.id}_buttons a.selected`));n.removeClass("selected"),n.eq(t<n.length-1?t+1:t).addClass("selected");break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var n;switch(t=(n=$(`.${home_details.id}.${home_details.id}_buttons a`)).index($(`.${home_details.id}.${home_details.id}_buttons a.selected`))){case 0:video.init(home_details.data.continue);break;case 1:loading.start(),mylist.toggleStatus(home_details.data.this.id,!home_details.inWatchList,{success:function(){var e;home_details.inWatchList=!home_details.inWatchList,e=home_details.inWatchList?`<i class="fa-solid fa-bookmark"></i>
                    <p>${translate.go("home.details.remove")}</p>`:`<i class="fa-regular fa-bookmark"></i>
                    <p>${translate.go("home.details.add")}</p>`,document.getElementById("watchlist-status").innerHTML=e,loading.end()},error:function(e){console.log(e),loading.end()}});break;case 2:home_episodes.init(home_details.data.this);break;case 3:console.log("related")}}}},window.home_episodes={id:"home_episodes-screen",previous:NaN,data:{seasons:NaN,episodes:NaN},init:function(e){var t=document.createElement("div");t.className=`${home_episodes.id} ${home_episodes.id}_content`,t.innerHTML=`
    <div class="option seasons">
      <div class="title resize">${e.title}</div>
      <div class="seasons-list">
        <div id="seasons-list-offset"></div>
      </div>
    </div>
    <div class="option episodes active">
      <div class="title"></div>
      <div class="episodes-list"></div>
    </div>
    `,$("#"+home.id).append(t),loading.start(),service.seasons({data:{id:e.id},success:function(e){loading.end(),home_episodes.data.seasons=mapper.seasons(e);var n="";home_episodes.data.seasons.forEach((e,t)=>{n+=`
          <div class="season${0===t?" selected active":""}">${e.number}. ${e.title}</div>`}),$(".seasons #seasons-list-offset").eq(0).html(n),home_episodes.load(home_episodes.data.seasons[0])},error:function(e){loading.end(),console.log(e)}}),$("body").addClass(""+home_episodes.id),home_episodes.previous=main.state,main.state=home_episodes.id},load:function(e){$(".episodes .title")[0].innerText=e.number+". "+e.title,$(".episodes .episodes-list")[0].slick&&$(".episodes .episodes-list")[0].slick.destroy(),$(".episodes .episodes-list")[0].innerHTML="",loading.start(),service.episodes({data:{id:e.id},success:function(e){mapper.episodes(e,function(e){home_episodes.data.episodes=e;var t="";home_episodes.data.episodes.forEach(e=>{t+=`
            <div class="episode">
              <div class="episode-image">
                <img src="${e.background}">
                ${home_episodes.view(e)}
                ${home_episodes.premium(e)}
              </div>
              <div class="episode-details">
                <div class="episode-title">${e.episode_number}. ${e.title}</div>
                <div class="episode-description">${e.description}</div>
              </div>
            </div>`});for(var n=0;n<4;n++)t+=`
            <div class="episode">
              <div class="episode-image">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
              </div>
            </div>`;$(".episodes .episodes-list").eq(0).html(t),$(".episodes .episodes-list").slick({vertical:!0,dots:!1,arrows:!1,infinite:!1,slidesToShow:5,slidesToScroll:1,speed:0,waitForAnimate:!1}),$(".episodes .episodes-list")[0].slick.slickGoTo(0),loading.end()})},error:function(e){loading.end(),console.log(e)}})},view:function(e){return 0!==e.playhead?`<div class="progress" style="width: ${100*e.playhead/e.duration}%" value="${e.duration===e.playhead?translate.go("home.episodes.watched"):e.duration-e.playhead+"m"}"></div>`:""},premium:function(e){return e.premium?'<i class="fa-solid fa-crown premium"></i>':""},destroy:function(){$("body").removeClass(""+home_episodes.id),setTimeout(()=>{$("body").removeClass(""+home_episodes.id),$("."+home_episodes.id).remove(),main.state=home_episodes.previous},0)},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):home_episodes.destroy();break;case tvKey.KEY_LEFT:var t=(i=$(`.${home_episodes.id}.${home_episodes.id}_content .option`)).index($(`.${home_episodes.id}.${home_episodes.id}_content .option.active`));i.removeClass("active"),i.eq(0<t?t-1:t).addClass("active");break;case tvKey.KEY_RIGHT:var t=(i=$(`.${home_episodes.id}.${home_episodes.id}_content .option`)).index($(`.${home_episodes.id}.${home_episodes.id}_content .option.active`)),n=(i.removeClass("active"),i.eq(t<i.length-1?t+1:t).addClass("active"),t=(i=$(".seasons-list .season")).index($(".seasons-list .season.active")),$(".seasons-list .season").removeClass("selected"),0);8<i.length&&4<t&&(n=t>i.length-4?-72*(i.length-8):-72*(t-4)),i.eq(t).addClass("selected"),document.getElementById("seasons-list-offset").style.marginTop=n+"px";break;case tvKey.KEY_UP:0<(t=(i=$(`.${home_episodes.id}.${home_episodes.id}_content .option`)).index($(`.${home_episodes.id}.${home_episodes.id}_content .option.active`)))?$(".episodes .episodes-list")[0].slick.prev():(t=(i=$(".seasons-list .season")).index($(".seasons-list .season.selected")),i.removeClass("selected"),i.eq(r=0<t?t-1:t).addClass("selected"),n=0,8<i.length&&4<r&&(n=r>i.length-4?-72*(i.length-8):-72*(r-4)),document.getElementById("seasons-list-offset").style.marginTop=n+"px");break;case tvKey.KEY_DOWN:var r;0<(t=(i=$(`.${home_episodes.id}.${home_episodes.id}_content .option`)).index($(`.${home_episodes.id}.${home_episodes.id}_content .option.active`)))?$(".episodes .episodes-list")[0].slick.next():(t=(i=$(".seasons-list .season")).index($(".seasons-list .season.selected")),i.removeClass("selected"),r=t<i.length-1?t+1:t,i.eq(r).addClass("selected"),n=0,8<i.length&&4<r&&(n=r>i.length-4?-72*(i.length-8):-72*(r-4)),document.getElementById("seasons-list-offset").style.marginTop=n+"px");break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var i;0<(t=(i=$(`.${home_episodes.id}.${home_episodes.id}_content .option`)).index($(`.${home_episodes.id}.${home_episodes.id}_content .option.active`)))?video.init(home_episodes.data.episodes[$(".episodes .episodes-list")[0].slick.currentSlide]):(t=(i=$(".seasons-list .season")).index($(".seasons-list .season.selected")),i.removeClass("active"),i.eq(t).addClass("active"),home_episodes.load(home_episodes.data.seasons[t]))}}},window.home={id:"home-screen",data:{main:NaN},position:0,fromCategory:{index:NaN,state:!1},init:function(){var e=document.createElement("div"),n=(e.id=home.id,""),e=(home.data.main.lists.forEach((e,t)=>{if(0<e.items.length){n+=`
      <div class="row">
        <div class="row-title">${e.title}</div>
        <div class="row-content ${e.items[0].display}">`,e.items.forEach(e=>{n+=home.createItem(e)});for(t=0;t<9;t++)n+=home.createEmptyItem(e.items[0].display);n+="</div></div>"}}),e.innerHTML=`
    <div class="content">
      ${home.fromCategory.state?`<div class="browse-back"><span></span><p>${home.fromCategory.title}</p></div>`:""}
      <div class="details full">
        <div class="background">
          <img src="${home.data.main.banner.background}">
        </div>
        <div class="info">
          <div class="title resize">${home.data.main.banner.title}</div>
          <div class="description resize">${home.data.main.banner.description}</div>
          <div class="buttons">
            <a class="selected">${translate.go("home.banner.play")}</a>
            <a>${translate.go("home.banner.info")}</a>
          </div>
        </div>
      </div>
      <div class="rows">
        ${n}
      </div>
      <div class="logo-fixed">
        <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
      </div>
    </div>`,document.body.appendChild(e),$(".details .info .title")[0]),e=(e.style.fontSize=e.scrollHeight>e.clientHeight?"3.5vh":"5vh",$(".details .info .description")[0]);e.style.fontSize=e.scrollHeight>e.clientHeight?"2vh":"2.5vh",$(`#${home.id} .rows`).slick({vertical:!0,dots:!1,arrows:!1,infinite:!1,slidesToShow:1.5,slidesToScroll:1,speed:150}),$(`#${home.id} .rows .row-content`).not(".episode").slick({dots:!1,arrows:!1,infinite:!1,slidesToShow:10,slidesToScroll:1,speed:150}),$(`#${home.id} .rows .row-content.episode`).slick({dots:!1,arrows:!1,infinite:!1,slidesToShow:5.5,slidesToScroll:1,speed:150}),$(`#${home.id} .rows`)[0].slick.slickGoTo(0),$(`#${home.id} .rows .row-content`)[0].slick.slickGoTo(0),main.state=home.id,changelog.init()},destroy:function(){home.position=0,document.body.removeChild(document.getElementById(home.id))},show_details:function(){var e=0<home.position?home.data.main.lists[home.position-1].items[$(".row-content")[home.position-1].slick.currentSlide]:home.data.main.banner,t=($(".details .background img").attr("src",e.background),$(".details .info .title")[0]),t=(t.innerText=e.title,t.style.fontSize=t.scrollHeight>t.clientHeight?"3.5vh":"5vh",$(".details .info .description")[0]);t.innerText=e.description,t.style.fontSize=t.scrollHeight>t.clientHeight?"2vh":"2.5vh"},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):home.fromCategory.state?(home.destroy(),browse.init(home.fromCategory.index)):menu.open();break;case tvKey.KEY_NEXT:break;case tvKey.KEY_UP:$(".row-content").removeClass("selected"),1<home.position?(home.position--,$(".rows")[0].slick.slickGoTo(home.position-1),$(".row-content")[home.position-1].slick.slickGoTo($(".row-content")[home.position-1].slick.getCurrent()),$(".row-content")[home.position-1].className=$(".row-content")[home.position-1].className+" selected"):($(".details").addClass("full"),home.position=0),home.show_details();break;case tvKey.KEY_DOWN:0<home.position?($(".row-content").removeClass("selected"),home.position=home.position<home.data.main.lists.length?home.position+1:home.position,home.position<=home.data.main.lists.length&&($(".rows")[0].slick.slickGoTo(home.position-1),$(".row-content")[home.position-1].slick.slickGoTo($(".row-content")[home.position-1].slick.getCurrent())),$(".row-content")[home.position-1].className=$(".row-content")[home.position-1].className+" selected"):($(".details.full").removeClass("full"),i=$(".row-content")[0],$(".rows")[0].slick.slickGoTo(0),i.slick.slickGoTo(i.slick.getCurrent()),i.className=i.className+" selected",home.position++),home.show_details();break;case tvKey.KEY_LEFT:0<home.position?0===$(".row-content")[home.position-1].slick.currentSlide?home.fromCategory.state?(home.destroy(),browse.init(home.fromCategory.index)):menu.open():($(".row-content")[home.position-1].slick.prev(),home.show_details()):0===(r=(n=$(".details .buttons a")).index($(".details .buttons a.selected")))?home.fromCategory.state?(home.destroy(),browse.init(home.fromCategory.index)):menu.open():(n.removeClass("selected"),n.eq(0<r?r-1:r).addClass("selected"));break;case tvKey.KEY_RIGHT:var t,n,r;0<home.position?(i=home.data.main.lists[home.position-1],(t=$(".row-content")[home.position-1]).slick.currentSlide<i.items.length-1&&(home.fromCategory.state&&i.lazy&&15<i.items.length&&t.slick.currentSlide>i.items.length-10&&(i.lazy=!1,loading.start(),mapper.loadCategoryListAsync(home.data.main.category+","+i.id,i.items.length,20,home.position-1,{success:function(e,t){home.data.main.lists[t].lazy=20===e.items.length,home.addToList(t,mapper.mapItems(e.items)),loading.end()},error:function(e){console.log(e),loading.end()}})),t.slick.next(),home.show_details())):(r=(n=$(".details .buttons a")).index($(".details .buttons a.selected")),n.removeClass("selected"),n.eq(r<n.length-1?r+1:r).addClass("selected"));break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var i=0<home.position?home.data.main.lists[home.position-1].items[$(".row-content")[home.position-1].slick.currentSlide]:home.data.main.banner;home_details.init(i)}},restart:function(){home.fromCategory.state=!1,home.fromCategory.index=NaN,loading.start(),home.data.main=null,service.home({success:function(e){mapper.home(e,{success:function(){home.init(),loading.end()}})},error:function(e){loading.end(),console.log(e)}})},addToList:function(e,t){var n=home.data.main.lists[e].items.length,r=$(".row-content")[home.position-1];home.data.main.lists[e].items=home.data.main.lists[e].items.concat(t);for(e=0;e<9;e++)r.slick.slickRemove(n+8-e);t.forEach(e=>r.slick.slickAdd(home.createItem(e)));for(e=0;e<9;e++)r.slick.slickAdd(home.createEmptyItem(t[0].display))},createItem:function(e){var t=e.playhead?`<div class="progress" style="width: ${100*e.playhead/e.duration}%" value="${e.duration-e.playhead}m"></div>`:"";return`
    <div class="item">
      <div class="poster ${e.display}">
        ${"serie"!==e.display?'<img src="'+e.background+'">'+t:'<img src="'+e.poster+'">'}
      </div>
    </div>`},createEmptyItem:function(e){return`
    <div class="item">
      <div class="poster ${e}">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
      </div>
    </div>`}},window.keyboard={id:"keyboard-screen",previous:NaN,values:[{keys:[{value:"Q",number:"1",symbol:"1",size:1},{value:"W",number:"2",symbol:"2",size:1},{value:"E",number:"3",symbol:"3",size:1},{value:"R",number:"4",symbol:"4",size:1},{value:"T",number:"5",symbol:"5",size:1},{value:"Y",number:"6",symbol:"6",size:1},{value:"U",number:"7",symbol:"7",size:1},{value:"I",number:"8",symbol:"8",size:1},{value:"O",number:"9",symbol:"9",size:1},{value:"P",number:"0",symbol:"0",size:1}]},{keys:[{value:"A",number:"@",symbol:"|",size:1},{value:"S",number:"#",symbol:"/",size:1},{value:"D",number:"$",symbol:"\\",size:1},{value:"F",number:"_",symbol:"*",size:1},{value:"G",number:"&",symbol:"'",size:1},{value:"H",number:"-",symbol:'"',size:1},{value:"J",number:"+",symbol:"=",size:1},{value:"K",number:"(",symbol:">",size:1},{value:"L",number:")",symbol:"<",size:1}]},{keys:[{value:"",number:"",symbol:"",size:"alpha"},{value:"Z",number:".",symbol:"~",size:1},{value:"X",number:"",symbol:"[",size:1},{value:"C",number:"?",symbol:"]",size:1},{value:"V",number:"",symbol:"{",size:1},{value:"B",number:"!",symbol:"}",size:1},{value:"N",number:";",symbol:"%",size:1},{value:"M",number:":",symbol:"^",size:1},{value:"",number:",",symbol:"`",size:1},{value:"",number:"",symbol:"",size:"backspace"}]},{keys:[{value:"1 2 3",number:"A B C",symbol:"A B C",size:2},{value:"",number:"",symbol:"",size:5},{value:"",number:"",symbol:"",size:"ok"}]}],selected:[0,0],input:NaN,send:NaN,alpha:!1,number:!1,init:function(e,t){keyboard.selected=[0,0],keyboard.input=e,keyboard.send=t,keyboard.alpha=!1,keyboard.number=!1;e=document.createElement("div");e.id=keyboard.id,e.innerHTML=keyboard.generate(),document.body.appendChild(e),keyboard.move(keyboard.selected),keyboard.previous=main.state,main.state=keyboard.id},destroy:function(){document.body.removeChild(document.getElementById(keyboard.id)),main.state=keyboard.previous,keyboard.send=NaN},generate:function(){var e,t="";for(e of keyboard.values){t+=`<div class="${keyboard.id}-option row">`;for(var n of e.keys)t+=`
        <div class="col ${keyboard.getSize(n)}">
          ${keyboard.getValue(n)}
        </div>`;t+="</div>"}return t},getValue:function(e){return keyboard.number?keyboard.alpha?e.symbol:e.number:e.value[keyboard.alpha?"toUpperCase":"toLowerCase"]()},getSize:function(e){return"alpha"===e.size?"size-"+(keyboard.number?"symbol":"alpha")+(keyboard.alpha?" active":""):"size-"+e.size},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):keyboard.destroy();break;case tvKey.KEY_UP:0<keyboard.selected[0]&&(t={1:8,3:2}[keyboard.selected[0]-1]||9,keyboard.move([keyboard.selected[0]-1,3===keyboard.selected[0]?3*(keyboard.selected[1]+1)-1:keyboard.selected[1]>t?t:keyboard.selected[1]]));break;case tvKey.KEY_DOWN:var t={1:8,3:2}[keyboard.selected[0]+1]||9;keyboard.selected[0]<3&&keyboard.move([keyboard.selected[0]+1,2===keyboard.selected[0]?Math.round(keyboard.selected[1]/4.5):keyboard.selected[1]>t?t:keyboard.selected[1]]);break;case tvKey.KEY_LEFT:var n=0<keyboard.selected[1]?keyboard.selected[1]-1:{1:8,3:2}[keyboard.selected[0]]||9;keyboard.move([keyboard.selected[0],n]);break;case tvKey.KEY_RIGHT:t={1:8,3:2}[keyboard.selected[0]]||9;keyboard.move([keyboard.selected[0],keyboard.selected[1]<t?keyboard.selected[1]+1:0]);break;case tvKey.KEY_ENTER:keyboard.action(keyboard.selected)}},move:function(e){keyboard.selected=e;for(var t=document.getElementsByClassName(keyboard.id+"-option"),n=0;n<t.length;n++)for(var r=t[n].children,i=0;i<r.length;i++)n==e[0]&&i==e[1]?r[i].className=r[i].className+" selected":r[i].className=r[i].className.replace(" selected","")},action:function(e){switch(e[0]+""+e[1]){case"20":keyboard.upperCase();break;case"30":keyboard.change();break;case"31":keyboard.input.value=keyboard.input.value+" ";break;case"32":keyboard.send&&keyboard.send(),keyboard.destroy();break;case"29":keyboard.input.value=keyboard.input.value.slice(0,-1);break;default:keyboard.input.value=keyboard.input.value+document.getElementsByClassName(keyboard.id+"-option")[e[0]].children[e[1]].innerText}},upperCase:function(){keyboard.alpha=!keyboard.alpha,document.getElementById("keyboard-screen").innerHTML=keyboard.generate(),keyboard.move(keyboard.selected)},change:function(){keyboard.number=!keyboard.number,keyboard.alpha=!1,document.getElementById("keyboard-screen").innerHTML=keyboard.generate(),keyboard.move(keyboard.selected)}},window.loading={id:"loading-screen",active:!1,start:function(){var e;document.getElementById(loading.id)||(loading.active=!0,(e=document.createElement("div")).id=loading.id,e.className="flat",e.innerHTML=`
      <div class="content flat">
        <div class="loading"></div>
      </div>`,document.body.appendChild(e)),loading.active=!0},end:function(){document.getElementById(loading.id)&&document.body.removeChild(document.getElementById(this.id)),loading.active=!1},init:function(){var e=document.createElement("div");e.id=loading.id,e.innerHTML=`
    <div class="content">
      <div class="logo">
        <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo.png" alt="">
      </div>
      <div class="loading">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>`,document.body.appendChild(e),main.state=loading.id},destroy:function(){document.body.removeChild(document.getElementById(this.id))},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):case tvKey.KEY_EXIT:exit.init(!0)}}},window.login={id:"login-screen",selected:0,init:function(){var e=document.createElement("div");e.id=login.id,e.innerHTML=`
  <div class="content">
    <div class="box">
      <div class="logo">
        <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png" alt="">
      </div>
      <div class="form">
        <div class="input ${login.id}-option">
          <input type="text" tabindex="-1" placeholder="${translate.go("login.username")}">
        </div>
        <div class="input ${login.id}-option">
          <input type="password" tabindex="-1" placeholder="${translate.go("login.password")}">
        </div>
        <a class="button ${login.id}-option" translate>${translate.go("login.enter")}</a>
        <span id="login-error-message"></span>
      </div>
    </div>
  </div>`,document.body.appendChild(e),login.move(login.selected),main.state=login.id},destroy:function(){document.body.removeChild(document.getElementById(this.id))},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):exit.init();break;case tvKey.KEY_UP:login.move(0==login.selected?0:login.selected-1);break;case tvKey.KEY_DOWN:login.move(2==login.selected?2:login.selected+1);break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:login.action(this.selected)}},move:function(e){login.selected=e;for(var t=document.getElementsByClassName(login.id+"-option"),n=0;n<t.length;n++)t[n].className=t[n].className.replace(" focus",""),n==e&&(t[n].className=t[n].className+" focus")},error:function(e){var t=$("#login-error-message");t.text(e),t.show(),setTimeout(function(){t.hide()},3e3)},action:function(e){var t,n,r=document.getElementsByClassName(login.id+"-option");2==e?(t=r[0].firstElementChild.value,n=r[1].firstElementChild.value,!/\S+@\S+\.\S+/.test(t)||n.length<5?login.error(translate.go("login.error.invalid")):(login.destroy(),loading.init(),session.start(t,n,{success:function(){main.events.login()},error:function(){loading.destroy(),login.init()}}))):keyboard.init(r[e].firstElementChild)}},window.menu={id:"menu-screen",options:[{id:"search",label:"menu.search",icon:"fa-solid fa-magnifying-glass",action:"search.init"},{id:"home",label:"menu.home",icon:"fa-solid fa-house",action:"home.restart"},{id:"mylist",label:"menu.list",icon:"fa-solid fa-bookmark",action:"mylist.init"},{id:"historyScreen",label:"menu.history",icon:"fa-solid fa-clock-rotate-left",action:"historyScreen.init"},{id:"browse",label:"menu.browse",icon:"fa-regular fa-rectangle-list",action:"browse.init"},{id:"settings",label:"menu.settings",icon:"fa-solid fa-gear",tool:!0,action:"settings.init"},{id:"logout",label:"menu.logout",icon:"fa-solid fa-sign-out",tool:!0,event:"logout"}],selected:1,previous:NaN,isOpen:!1,init:function(n){var e=document.createElement("div"),r=(e.id=this.id,""),i="";menu.options.forEach((e,t)=>{e.tool?r+=`
        <a class="option ${n&&"settings"===e.id||t===menu.selected?"selected":""}">
          <i class="${e.icon}"></i>
          <p>${translate.go(e.label)}</p>
        </a>`:i+=`
        <a class="option ${n||t!==menu.selected?"":"selected"}">
          <i class="${e.icon}"></i>
          <p>${translate.go(e.label)}</p>
        </a>`}),e.innerHTML=`
    <div class="content">
      <div class="profile ${session.storage.account.premium?"premium":""}">
        <div class="avatar">
          <img src="https://static.crunchyroll.com/assets/avatar/170x170/${session.storage.account.avatar}">
        </div>
        <p>${session.storage.account.username}</p>
        <i class="fa-solid fa-crown"></i>
      </div>
      <div class="options">
        ${i}
      </div>
      <div class="tools">
        ${r}
      </div>
    </div>`,document.body.appendChild(e)},destroy:function(){menu.isOpen&&menu.close(),document.getElementById(this.id)&&document.body.removeChild(document.getElementById(this.id))},open:function(){menu.isOpen=!0,$("body").addClass("open-menu"),$(`#${menu.id} .option.selected`).addClass("focus"),this.previous=main.state,main.state=this.id},close:function(){menu.isOpen=!1,$("body").removeClass("open-menu"),$(`#${menu.id} .option`).removeClass("focus"),main.state=this.previous},move:function(){var n="";(menu.option.root?menu.options:menu.options[menu.option.item].childs).forEach((e,t)=>{n+=`<div class="option ${e.icon}${this.option.selected===t?" selected":""}">${e.text||""}</div>`,this.option.selected===t&&(document.getElementById(this.id+"-title").innerText=e.title)}),document.getElementById(menu.id+"-options").innerHTML=n},keyDown:function(e){switch(e.keyCode){case tvKey.KEY_RIGHT:menu.close();break;case tvKey.IS_KEY_BACK(e.keyCode):exit.init();break;case tvKey.KEY_UP:var t=(n=$(`#${menu.id} .option`)).index($(`#${menu.id} .option.focus`));n.removeClass("focus"),n.eq(0<t?t-1:t).addClass("focus");break;case tvKey.KEY_DOWN:t=(n=$(`#${menu.id} .option`)).index($(`#${menu.id} .option.focus`));n.removeClass("focus"),n.eq(t<n.length-1?t+1:t).addClass("focus");break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var n,r,t=(n=$(`#${menu.id} .option`)).index($(`#${menu.id} .option.focus`));menu.options[t].action?(r=n.index($(`#${menu.id} .option.selected`)),n.removeClass("selected"),n.eq(t).addClass("selected"),this.previous=window[menu.options[t].id].id,window[menu.options[r].id].destroy(),test=menu.options[t].action.split("."),window[test[0]][test[1]](),menu.close()):menu.options[t].event&&window.main.events[menu.options[t].event]()}}},window.mylist={id:"mylist-screen",previous:NaN,data:{loadedLists:0,lists:[]},selectedRow:0,init:function(){var t=document.createElement("div");t.id=mylist.id,loading.start(),mylist.loadLists({success:function(){t.innerHTML=`
        <div class="content">
          <div class="details">
            <div class="background">
              <img id="generic-background"/>
            </div>
            <div class="information">
              <div id="generic-title"></div>
              <div id="generic-description"></div>
              <div class="extra-info"></div>
            </div>
          </div>
          <div class="lists">
            <div class="inner-lists">
              ${mylist.generateLists()}
              <div class="list-end">
                <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/empty_data.png"/>
                <div class="text">${translate.go("lists.empty")}</div>
              </div>
            </div>
          </div>
          <div class="logo-fixed">
            <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
          </div>
        </div>`,document.body.appendChild(t),$(`#${mylist.id} .lists .row-content`).slick({dots:!1,arrows:!1,infinite:!1,slidesToShow:6.5,slidesToScroll:1,speed:150}),mylist.details(),loading.end()},error:function(e){console.log(e),t.innerHTML=`
        <div class="content">
          error
          <div class="logo-fixed">
            <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
          </div>
        </div>`,document.body.appendChild(t),loading.end()}})},destroy:function(){mylist.data.lists=[],mylist.data.loadedLists=0,mylist.selectedRow=0,document.body.removeChild(document.getElementById(mylist.id))},keyDown:function(e){switch(e.keyCode){case tvKey.KEY_BACK:case tvKey.KEY_ESCAPE:menu.open();break;case tvKey.KEY_UP:var t=$(".row"),n=mylist.selectedRow,r=(t.removeClass("selected"),0<n?n-1:n),i=(t.eq(r).addClass("selected"),mylist.selectedRow=r,0),o=1;t.length>o&&o-1<r&&(i=-231*(r-(o-1))),$(".inner-lists")[0].style.marginTop=i+"px",mylist.details();break;case tvKey.KEY_DOWN:t=$(".row"),n=mylist.selectedRow,r=(t.removeClass("selected"),n<t.length-1?n+1:n),i=(t.eq(r).addClass("selected"),mylist.selectedRow=r,0),o=1;t.length>o&&o-1<r&&(i=-231*(r-(o-1))),$(".inner-lists")[0].style.marginTop=i+"px",mylist.details();break;case tvKey.KEY_LEFT:0===$(".row-content").length||0===$(".row-content")[mylist.selectedRow].slick.currentSlide?menu.open():($(".row-content")[mylist.selectedRow].slick.prev(),mylist.details());break;case tvKey.KEY_RIGHT:$(".row-content")[mylist.selectedRow].slick.currentSlide<mylist.data.lists[mylist.selectedRow].items.length-1&&($(".row-content")[mylist.selectedRow].slick.next(),mylist.details());break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:n=mylist.data.lists[mylist.selectedRow].items[$(".row-content")[mylist.selectedRow].slick.currentSlide];home_details.init(n,function(e){var t=document.createElement("div");t.id=home.id,t.innerHTML=`
            <div class="content">
              <div class="details full">
                <div class="background">
                  <img src="${e.background}">
                </div>
                <div class="info">
                  <div class="title resize">${e.title}</div>
                  <div class="description resize">${e.description}</div>
                  <div class="buttons">
                    <a class="selected">${translate.go("home.banner.play")}</a>
                    <a>${translate.go("home.banner.info")}</a>
                  </div>
                </div>
              </div>
              <div class="logo-fixed">
                <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
              </div>
            </div>`,document.getElementById(mylist.id).style.display="none",document.body.appendChild(t)},function(){document.getElementById(mylist.id).style.display="block",home.destroy()})}},loadLists:function(n){service.getCustomLists({success:function(e){listToFetch=[{order:0,title:"lists.watchlist",method:"getWatchList"}],e.data.forEach((e,t)=>{listToFetch.push({order:t+1,title:e.title,method:"getCustomListItems",data:e.list_id})}),listToFetch.forEach(t=>{service[t.method]({data:t.data,success:function(e){mylist.data.loadedLists++,0<e.data.length&&mylist.data.lists.push({order:t.order,title:t.title,items:mapper.mapItems(e.data)}),mylist.data.loadedLists===listToFetch.length&&(mylist.data.lists.sort(function(e,t){return e.order-t.order}),n.success())},error:function(e){console.log(e)}})})},error:function(e){n.error(e)}})},generateLists:function(){var n="";return mylist.data.lists.forEach((e,t)=>{if(0<e.items.length){n+=`
      <div class="row ${t===mylist.selectedRow?"selected":""}">
        <div class="row-title">${translate.go(e.title)}</div>
        <div class="row-content fixed-error">`,e.items.forEach(e=>{n+=mylist.createItem(e)});for(t=0;t<9;t++)n+=mylist.createEmptyItem();n+="</div></div>"}}),n},createItem:function(e){var t=e.playhead?`<div class="progress" style="width: ${100*e.playhead/e.duration}%" value="${e.duration-e.playhead}m"></div>`:"";return`
    <div class="item">
      <div class="poster">
        <img src="${e.background}"/>
        ${t}
      </div>
    </div>`},createEmptyItem:function(e){return`
    <div class="item">
      <div class="poster">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
      </div>
    </div>`},details:function(){try{var e=mylist.data.lists[mylist.selectedRow].items[$(".row-content")[mylist.selectedRow].slick.currentSlide],t=($(".details .background img").attr("src",e.background),$(".details .information #generic-title")[0]),n=(t.innerText=e.title,t.style.fontSize=t.scrollHeight>t.clientHeight?"2.5vh":"4vh",$(".details .information #generic-description")[0]);n.innerText=e.description,n.style.fontSize=n.scrollHeight>n.clientHeight?"1.5vh":"2vh"}catch(e){console.log(e)}},toggleStatus:function(e,t,n){service[t?"addWatchlist":"removeWatchlist"]({data:{content_id:e},success:n.success,error:n.error})}},window.search={id:"search-screen",previous:NaN,input:NaN,position:-1,last_postion:0,items_per_row:9,scroll_data:{item_padding:30,item_height:390,rows:10},data:{result:[]},init:function(){var e=document.createElement("div");e.id=search.id,e.innerHTML=`
      <div class="content">
        <div class="input focus" id="search-screen_input">
          <input type="text" tabindex="-1" placeholder="${translate.go("search.placeholder")}">
        </div>
        <div class="list-container">
          <div class="list-container-over" style="grid-template-columns: repeat(${search.items_per_row}, 1fr);"></div>
        </div>
        <div class="logo-fixed">
          <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
        </div>
      </div>`,document.body.appendChild(e),search.input=document.getElementById("search-screen_input").firstElementChild},destroy:function(){search.data.result=[],document.body.removeChild(document.getElementById(search.id))},start:function(){loading.start(),service.search({data:{query:search.input.value},success:function(e){loading.end(),search.data.result=mapper.search(e);var n="";search.data.result.forEach((e,t)=>{n+=`
              <div class="item${0===t?" selected":""}">
                <img src="${e.poster}" alt="">
                <div class="title">${e.title}</div>
              </div>`}),$(".list-container-over").html(n),search.last_postion=0,search.scroll_data.item_height=parseFloat(window.getComputedStyle($(".list-container-over .item").get(0)).height.replace("px","")),search.scroll_data.rows=Math.ceil(search.data.result.length/search.items_per_row)},error:function(e){loading.end(),console.log(e)}})},toggleFocus:function(e){e<0?($("#search-screen_input").addClass("focus"),$(".list-container").removeClass("focus"),search.last_postion=0<=search.position?search.position:search.last_postion,e=-1):(-1==search.position&&($("#search-screen_input").removeClass("focus"),$(".list-container").addClass("focus")),e>=search.data.result.length&&(e=search.data.result.length-1),$(".list-container .item").removeClass("selected"),$(".list-container .item").eq(e).addClass("selected")),search.position=e},scroll:function(){var e;0!=search.data.result.length&&((e=Math.floor(search.position/search.items_per_row))<2?$(".list-container-over").get(0).style.marginTop="0px":e+1>=search.scroll_data.rows||(e-=1,$(".list-container-over").get(0).style.marginTop=`-${e*(search.scroll_data.item_height+search.scroll_data.item_padding)}px`))},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):-1===search.position?menu.open():search.toggleFocus(-1);break;case tvKey.KEY_NEXT:break;case tvKey.KEY_UP:search.toggleFocus(search.position-search.items_per_row),search.scroll();break;case tvKey.KEY_DOWN:var t=search.position+search.items_per_row;-1==search.position&&(t=search.last_postion),search.toggleFocus(t),search.scroll();break;case tvKey.KEY_LEFT:search.position%search.items_per_row==0?menu.open():search.toggleFocus(search.position-1);break;case tvKey.KEY_RIGHT:(search.position+1)%search.items_per_row!=0&&search.toggleFocus(search.position+1);break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:-1===this.position?keyboard.init(search.input,search.start):home_details.init(search.data.result[search.position],function(e){var t=document.createElement("div"),e=(t.id=home.id,t.innerHTML=`
            <div class="content">
              <div class="details full">
                <div class="background">
                  <img src="${e.background}">
                </div>
                <div class="info">
                  <div class="title resize">${e.title}</div>
                  <div class="description resize">${e.description}</div>
                  <div class="buttons">
                    <a class="selected">Play</a>
                    <a>More information</a>
                  </div>
                </div>
              </div>
              <div class="logo-fixed">
                <img src="https://jhassan8.github.io/crunchyroll-tizen/assets/imgs/logo-big.png"/>
              </div>
            </div>`,document.getElementById(search.id).style.display="none",document.body.appendChild(t),$(".details .info .title")[0]),t=(e.style.fontSize=e.scrollHeight>e.clientHeight?"3.5vh":"5vh",$(".details .info .description")[0]);t.style.fontSize=t.scrollHeight>t.clientHeight?"2vh":"2.5vh"},function(){document.getElementById(search.id).style.display="block",home.destroy(),search.toggleFocus(search.position)})}}},window.settings={id:"settings-screen",isDetails:!1,options:[{id:"applicationlang",label:"settings.menu.application_lang",type:"list"},{id:"audiolang",label:"settings.menu.audio_lang",type:"list"},{id:"subtitlelang",label:"settings.menu.subtitle_lang",type:"list"},{id:"videoquality",label:"settings.menu.video_quality",type:"list"},{id:"mature",label:"settings.menu.mature",type:"list"},{id:"about",label:"settings.menu.about",type:"html"}],qualities:{auto:"Auto",240:"240p",360:"360p",480:"480p",720:"720p HD",1080:"1080p HD"},bool:{M2:"NO",M3:"YES"},previous:NaN,init:function(){var e=document.createElement("div");e.id=settings.id,e.innerHTML=`
      <div class="content">
        <div class="container-mid">
          <ul class="options" id="settings-menu">${settings.generateMenu()}</ul>
        </div>
        <div class="container" id="settings-details"></div>
      </div>`,document.body.appendChild(e),settings.details.show(settings.options[0])},destroy:function(){settings.isDetails=!1,document.body.removeChild(document.getElementById(settings.id))},keyDown:function(e){switch(e.keyCode){case tvKey.IS_KEY_BACK(e.keyCode):menu.open();break;case tvKey.KEY_UP:settings.isDetails?(n=(t=$(".options li")).index($(".options li.active")),settings.details[settings.options[n].type].move(-1)):(n=(t=$(".options li")).index($(".options li.selected")),t.removeClass("selected"),t.eq(r=0<n?n-1:n).addClass("selected"),settings.details.show(settings.options[r]));break;case tvKey.KEY_DOWN:settings.isDetails?(n=(t=$(".options li")).index($(".options li.active")),settings.details[settings.options[n].type].move(1)):(n=(t=$(".options li")).index($(".options li.selected")),t.removeClass("selected"),r=n<t.length-1?n+1:n,t.eq(r).addClass("selected"),settings.details.show(settings.options[r]));break;case tvKey.KEY_LEFT:settings.isDetails?(n=(t=$(".options li")).index($(".options li.active")),t.removeClass("active"),t.eq(n).addClass("selected"),settings.details[settings.options[n].type].move(!1),settings.isDetails=!1):menu.open();break;case tvKey.KEY_RIGHT:settings.isDetails||(n=(t=$(".options li")).index($(".options li.selected")),t.removeClass("selected"),t.eq(n).addClass("active"),settings.isDetails=!0,settings.details[settings.options[n].type].move(0));break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:var t,n,r;settings.isDetails&&(n=(t=$(".options li")).index($(".options li.active")),r=settings.options[n],settings.details[r.type].action(r.id))}},generateMenu:function(e){var n=void 0===e?"selected":"active",r=void 0===e?0:e;return settings.options.map((e,t)=>`<li class="${t===r?n:""}">${translate.go(e.label)}</li>`).join("")},resetLang:function(){var e=$(".options li").index($(".options li.active"));$("#settings-menu").html(settings.generateMenu(e)),menu.destroy(),menu.init(!0)},details:{show:function(e){$("#settings-details").html(settings.details[e.type].create(e.id))},list:{create:function(e){switch(e){case"audiolang":var t=session.languages.audios,n=session.storage.account.audio;break;case"applicationlang":n=(delete(t=JSON.parse(JSON.stringify(session.languages.subtitles)))[""],session.storage.language);break;case"subtitlelang":t=session.languages.subtitles,n=session.storage.account.language;break;case"videoquality":t=settings.qualities,n=session.storage.quality||"auto";break;case"mature":t=settings.bool,n=session.storage.account.mature}return'<ul class="list-active" id="list-details-offset">'+Object.keys(t).map(e=>`<li class="${e===n?"active":""}">${t[e]}</li>`).join("")+"</ul>"},adjust:function(e,t,n){t=6<t&&5<e?t-2<e?-104*(t-6):-104*(e-5):0;document.getElementById(n).style.marginTop=t+"px"},action:function(e){var t=$("#settings-details li"),n=t.index($("#settings-details li.selected"));switch(console.log(e,n),e){case"audiolang":var r=session.languages.audios,i=function(t){service.setProfile({data:{preferred_content_audio_language:t},success:function(e){session.storage.account.audio=t,session.update()},error:function(e){console.log(e)}})};break;case"applicationlang":i=(delete(r=JSON.parse(JSON.stringify(session.languages.subtitles)))[""],function(e){translate.updateLanguage(e),settings.resetLang()});break;case"subtitlelang":r=session.languages.subtitles,i=function(t){service.setProfile({data:{preferred_content_subtitle_language:t},success:function(e){session.storage.account.language=t,session.update()},error:function(e){console.log(e)}})};break;case"videoquality":r=settings.qualities,i=function(e){session.storage.quality=e,session.update()};break;case"mature":r=settings.bool,i=function(t){service.setProfile({data:{maturity_rating:t},success:function(e){session.storage.account.mature=t,session.update()},error:function(e){console.log(e)}})}}i(Object.keys(r)[n]),t.removeClass("active"),t.eq(n).addClass("active")},move:function(e){var t,n=$("#settings-details li");!1===e?n.removeClass("selected"):(t=0<=(t=n.index($("#settings-details li.selected")))?t:n.index($("#settings-details li.active")),n.removeClass("selected"),e=e<0?0<t?t+e:t:t+e<n.length?t+e:t,n.eq(e).addClass("selected"),settings.details.list.adjust(e,n.length,"list-details-offset"))}},html:{create:function(e){return`
        <div style="color: #fff;font-size: 23px;line-height: 51px;text-align: right;padding: 38px 0;position: absolute;right: 0;bottom: 0;">
          <div>Crunchyroll unofficial app.</div>
          <div>Github: https://github.com/jhassan8/crunchyroll-tizen</div>
          <div>Contact: Github or jhassan8@outlook.com</div>
          <div>Version: ${session.storage.version}</div>
        </div>`},move:function(){}}}},window.video={id:"video-screen",previous:null,episode:null,token:null,speed:{options:[.25,.5,.75,1,1.25,1.5,1.75,2],active:1,state:!1},next:{shown:!1,state:!1,time:60,episode:null},option:!1,options:[{icon:"fa-solid fa-forward-step",action:"nextEpisode",param:!0},{icon:"fa-solid fa-play playback-speed",action:"playbackSpeed",param:!0},{icon:"fa-solid fa-message",action:"openLanguages"},{icon:"toggle-aspect fa-solid fa-expand",action:"toggleAspectRatio"}],aspects:["expand","compress","crop-simple"],aspect:0,subtitles:[],subtitle:null,audios:[],audio:null,intro:null,streams:[],timers:{history:{object:null,duration:3e4},next:null,osd:{object:null,duration:4e3}},settings:{open:!1,selected:!1},toggleAspectRatio:function(){video.aspect=video.aspect<video.aspects.length-1?video.aspect+1:0,document.getElementById("videoplayer").className=video.aspects[video.aspect],$(".toggle-aspect")[0].className=`toggle-aspect fa-solid fa-${video.aspects[video.aspect]} selected`},openLanguages:function(){video.hideOSD(),video.settings.open=!0,player.pause(),$("#osd-icon").hide(),$(".player-settings").hide(),video.setAudios(),video.setSubtitles(),$(".settings-slide").addClass("open")},getSettings:function(){return video.options.map(e=>`<i class="${e.icon}"></i>`).join("")},init:function(e){var t=document.createElement("div");t.id=video.id,video.play(e),t.innerHTML=`
    <div class="content">
      <img id="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
      <video id="videoplayer" style="width:100%; height:100%;"></video>
      <div class="osd" id="osd">
        <div class="player-settings">
          <div id="setting-options">
            ${video.getSettings()}
          </div>
        </div>
        <div class="details">
          <div id="title">${e.serie}</div>
          <div id="subtitle">
            ${e.season_number}x${e.episode_number} - ${e.episode}
          </div>
        </div>
        <div class="progress">
          <div id="time">00:00:00</div>
          <div class="bar">
            <div id="played">
              <div class="preview">
                <img id="preview">
              </div>
            </div>
          </div>
          <div id="total">00:00:00</div>
        </div>
      </div>
      <div id="osd-icon" class="icon-status">
        <div class="icon"></div>
        <div id="osd-icon-data" class="percent"></div>
      </div>
      <div class="next-episode">
        <div class="next-episode-image">
          <img id="next-episode-image">
          <div id="next-episode-count">${video.next.time}</div>
        </div>
      </div>

      <div id="skip-intro">
        <i class="fa-solid fa-forward"></i>
        ${translate.go("video.skip")}
      </div>

      <div class="settings-slide">
        <div id="languages-content">
          <div class="title">${translate.go("video.languages.audios")}</div>
          <ul id="audios"></ul>
          <div class="title">${translate.go("video.languages.subtitles")}</div>
          <ul id="subtitles"></ul>
        </div>
      </div>
    </div>`,document.body.appendChild(t),$("#"+home.id).hide(),video.previous=main.state,main.state=video.id},destroy:function(){video.hideOSD(),player.stop(),clearTimeout(video.timers.osd.object),clearInterval(video.timers.next),clearInterval(video.timers.history.object),main.state=video.previous,document.body.removeChild(document.getElementById(video.id)),$("#"+home.id).show(),video.next.episode=null,video.next.status=!1,video.next.shown=!1,video.episode=null,video.data=null,video.streams=[],video.speed.state=!1,video.speed.active=1},keyDown:function(e){var t,n,r,i,o,a,s,l,u,c=!0;switch(e.keyCode){case tvKey.KEY_STOP:case tvKey.IS_KEY_BACK(e.keyCode):video.settings.open?(c=!1,video.settings.open=!1,$(".settings-slide").removeClass("open"),$("#osd-icon").show(),video.settings.selected=!1,$("#setting-options").removeClass("selected"),$(".player-settings").show(),player.resume()):video.next.status?video.stopNext():video.speed.state?(video.hidePlaySpeed(),video.showOSD()):video.destroy();break;case tvKey.KEY_PLAY:video.settings.open||player.resume();break;case tvKey.KEY_PAUSE:video.settings.open||player.pause();break;case tvKey.KEY_PLAY_PAUSE:video.settings.open||player.playPause();break;case tvKey.KEY_ENTER:case tvKey.KEY_PANEL_ENTER:video.settings.open&&(c=!1,t="audios"===(n=$("#languages-content .option.selected")).parent().attr("id"),n.parent().children(".option.active")[0]!==n[0])&&((r=n.parent().children(".option")).removeClass("active"),n.addClass("active"),t?video.changeAudio(r.index(n[0])):video.changeSubtitle(r.index(n[0]))),video.intro&&video.intro.state?(c=!1,player.forwardTo(video.intro.end)):video.next.status?(clearInterval(video.timers.next),video.playNext()):1==document.getElementById("osd").style.opacity&&(video.option?(n=$("#setting-options i").index($("#setting-options i.selected")),c=!video[video.options[n].action](video.options[n].param)):player.playPause());break;case tvKey.KEY_PREVIOUS:case tvKey.KEY_LEFT:video.option?video.speed.state?(c=!1,video.setSpeed(-1)):(n=(r=$("#setting-options i")).index($("#setting-options i.selected")),r.removeClass("selected"),r.eq(0<n?n-1:n).addClass("selected")):video.settings.open||player.rewind(video.setPlayingTime);break;case tvKey.KEY_RIGHT:case tvKey.KEY_NEXT:video.option?video.speed.state?(c=!1,video.setSpeed(1)):(n=(r=$("#setting-options i")).index($("#setting-options i.selected")),r.removeClass("selected"),r.eq(n<video.options.length-1?n+1:n).addClass("selected")):video.settings.open||player.forward(video.setPlayingTime);break;case tvKey.KEY_UP:video.settings.open?(i=(r=$("#languages-content .option")).index($("#languages-content .option.selected")),r.removeClass("selected"),r.eq(o=0<i?i-1:i).addClass("selected"),s=0,l="audios"===(a=$("#languages-content .option.selected").parent()).attr("id")?4:3,u=a.children().index($("#languages-content .option.selected")),a.children().length>l&&l-1<u&&(s=u>a.children().length-(l-1)?-82*(a.children().length-l):-82*(u-(l-1))),a.children().first()[0].style.marginTop=s+"px"):1!=document.getElementById("osd").style.opacity||video.option||($("#setting-options").children().first().addClass("selected"),video.option=!0);break;case tvKey.KEY_DOWN:video.settings.open?(i=(r=$("#languages-content .option")).index($("#languages-content .option.selected")),r.removeClass("selected"),o=i<r.length-1?i+1:i,r.eq(o).addClass("selected"),s=0,l="audios"===(a=$("#languages-content .option.selected").parent()).attr("id")?4:3,u=a.children().index($("#languages-content .option.selected")),a.children().length>l&&l-1<u&&(s=u>a.children().length-(l-1)?-82*(a.children().length-l):-82*(u-(l-1))),a.children().first()[0].style.marginTop=s+"px"):video.speed.state?(video.hidePlaySpeed(),video.showOSD()):(video.option=!1,$("#setting-options").children().removeClass("selected"))}video.settings.open||video.speed.state||!c||video.showOSD()},end:function(){video.next.status?video.playNext():video.destroy()},play:function(n,r,i){video.episode=n.id,service.video_v2({data:{id:n.id},success:function(t){video.token=t.token,video.stopNext(),video.setSkipIntro(n.id),video.next.shown=!1;try{video.audio=t.audioLocale,video.audios=[{name:video.audio,id:n.id}],t.versions&&(video.audios=t.versions.map(e=>({name:e.audio_locale,id:e.guid}))),i?video.subtitle=i:(video.subtitle=t.hardSubs[session.storage.account.language]?session.storage.account.language:"Disabled",video.subtitle="Disabled"===video.subtitle&&t.hardSubs[session.storage.account.audio]?session.storage.account.audio:video.subtitle),video.subtitles=t.hardSubs?Object.keys(t.hardSubs).map(e=>({name:e,url:t.hardSubs[e].url})):[],video.subtitles.unshift({name:"Disabled",url:t.url});var e=video.subtitles.findIndex(e=>e.name===video.subtitle);player.play({token:t.token,id:n.id},video.subtitles[e].url,n.playhead===n.duration?0:n.playhead,r),video.startHistory(),video.setAudios(),video.setSubtitles()}catch(e){console.log(e)}setTimeout(()=>{player.deleteSession({data:{id:video.episode,token:video.token}})},3e3),video.showOSD()},error:function(e){video.stopNext(),video.next.shown=!1,console.log(e)}})},setSkipIntro:function(e){service.intro({data:{id:e},success:function(e){e.duration&&10<e.duration?video.intro={start:e.startTime+2,end:e.endTime-2,state:!1}:video.intro=null},error:function(e){console.log(e)}})},showSkip:function(e){e>video.intro.end?(video.intro.state=!1,$("#skip-intro").hide()):!video.intro.state&&e>video.intro.start&&e<video.intro.end&&(video.intro.state=!0,$("#skip-intro").show())},setAudios:function(){$("#audios li").remove();var n="";video.audios.forEach((e,t)=>{n+=`<li class="option${e.name===video.audio?" active selected":""}">${session.languages.audios[e.name]}</li>`}),document.getElementById("audios").innerHTML=n},changeAudio:function(e){video.play({id:video.audios[e].id,playhead:player.getPlayed()/60,duration:player.getDuration()},!0),video.setSubtitles()},setSubtitles:function(){$("#subtitles").html("");var t="";video.subtitles.forEach(e=>{t+=`<li class="option${e.name===video.subtitle?" active":""}">${session.languages.subtitles[e.name]}</li>`}),document.getElementById("subtitles").innerHTML=t},changeSubtitle:function(e){video.play({id:video.episode,playhead:player.getPlayed()/60,duration:player.getDuration()},!0,video.subtitles[e].name)},stopNext:function(){clearInterval(video.timers.next),video.next.status=!1,video.next.episode=null,document.getElementById("next-episode-count").innerText=video.next.time,$(".next-episode").hide()},playNext:function(){video.saveHistory(Math.floor(player.getDuration())),video.play(video.next.episode),$(".osd #title").text(video.next.episode.serie),$(".osd #subtitle").text(`${video.next.episode.season_number}x${video.next.episode.episode_number} - `+video.next.episode.episode)},nextEpisode:function(t){video.next.shown=!0;try{service.continue({data:{ids:video.episode},success:function(e){video.next.episode=mapper.continue(e),t?video.playNext():(document.getElementById("next-episode-image").setAttribute("src",video.next.episode.background),$(".next-episode").show(),video.next.status=!0,video.timers.next=setInterval(()=>{var e=document.getElementById("next-episode-count").innerText;1==+e?clearInterval(video.timers.next):document.getElementById("next-episode-count").innerText=e-1},1e3))},error:function(e){console.log(e)}})}catch(e){console.log(e)}},playbackSpeed:function(){var e;return video.speed.state?(video.hidePlaySpeed(),video.showOSD(),!1):(e=`
        <ul id="speed-menu">
          <span></span>
          ${video.speed.options.map(e=>"<li>"+e+"</li>").join("")}
        </ul>
      `,video.speed.state=!0,video.showOSD(!0),$("#setting-options").hide(),$(".player-settings").append(e),video.setSpeed(0),!0)},hidePlaySpeed:function(){$("#speed-menu").remove(),$("#setting-options").show(),video.speed.state=!1},setSpeed:function(e){var t,n,e=video.speed.options.indexOf(video.speed.active)+e;0<=e&&e<video.speed.options.length&&(n=3===e?(t=50,$("#speed-menu").removeClass("to-rigth"),$("#speed-menu").removeClass("to-left"),""):3<e?(t=50+75*(e-3),"to-rigth"):(t=50+75*(3-e),"to-left"),$("#speed-menu").addClass(n),$("#speed-menu span").css("width",t),video.speed.active=video.speed.options[e],player.speed(video.speed.options[e]))},showOSD:function(e){clearTimeout(video.timers.osd.object),document.getElementById("osd").style.opacity=1,e||(video.timers.osd.object=setTimeout(()=>{video.hideOSD()},video.timers.osd.duration))},hideOSD:function(){video.option=!1,$("#setting-options").children().removeClass("selected"),video.timers.osd.object=null,document.getElementById("osd").style.opacity=0},showBTN:function(e,t){var n=document.getElementById("osd-icon");n&&(n.style.opacity=1,n.className="icon-status "+e)},hideBTN:function(){document.getElementById("osd-icon").style.opacity=0},startHistory:function(){clearInterval(video.timers.history.object),video.timers.history.object=setInterval(()=>{video.saveHistory()},video.timers.history.duration)},saveHistory:function(e){service.setHistory({data:{content_id:video.episode,playhead:e||Math.floor(player.getPlayed())},success:function(){},error:function(e){console.log(e)}})},setPlayingTime:function(){var e=(e=player.getPlayed()+player.values.forward_rewind)<0?0:e,t=player.getDuration(),n=100*e/t,r=(video.intro&&video.showSkip(e),!video.next.shown&&player.state===player.states.PLAYING&&e>=t-(video.next.time+2)&&video.nextEpisode(),Math.floor(t%60)),i=Math.floor(t%3600/60),t=(t=Math.floor(t/3600))<10?"0"+t:t,i=i<10?"0"+i:i,r=r<10?"0"+r:r,o=Math.floor(e%60),a=Math.floor(e%3600/60),e=(e=Math.floor(e/3600))<10?"0"+e:e,a=a<10?"0"+a:a,o=o<10?"0"+o:o;document.getElementById("time").innerText=`${e||"00"}:${a||"00"}:`+(o||"00"),document.getElementById("total").innerText=`${t||"00"}:${i||"00"}:`+(r||"00"),document.getElementById("played").style.width=n+"%"}};